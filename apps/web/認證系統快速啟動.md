# èªè­‰ç³»çµ±å¿«é€Ÿå•Ÿå‹•æŒ‡å—

> **å‰µå»ºæ—¥æœŸ**: 2026-01-31  
> **å‰µå»ºè€…**: Claude Sonnet 4.5  
> **æœ€å¾Œä¿®æ”¹**: 2026-01-31  
> **ä¿®æ”¹è€…**: Claude Sonnet 4.5  
> **ç‰ˆæœ¬**: 1.0  
> **æ–‡ä»¶é¡å‹**: é–‹ç™¼æŒ‡å—

---

## âœ… å·²å»ºç«‹çš„æª”æ¡ˆ

ä»¥ä¸‹æª”æ¡ˆå·²å»ºç«‹å®Œæˆï¼Œå¯ç›´æ¥ä½¿ç”¨ï¼š

### æ ¸å¿ƒèªè­‰æª”æ¡ˆ
- âœ… `lib/supabase/client.ts` - Supabase Client é…ç½®
- âœ… `lib/supabase/server.ts` - Server Component Client
- âœ… `lib/supabase/auth.ts` - èªè­‰ API å‡½æ•¸
- âœ… `lib/validators/auth.ts` - Zod è¡¨å–®é©—è­‰ Schema
- âœ… `hooks/useAuth.ts` - èªè­‰ç‹€æ…‹ç®¡ç† Hook
- âœ… `hooks/useRequireAuth.ts` - è·¯ç”±å®ˆè¡› Hook
- âœ… `middleware.ts` - è·¯ç”±ä¿è­·ä¸­ä»‹å±¤
- âœ… `types/database.ts` - TypeScript å‹åˆ¥å®šç¾©
- âœ… `types/auth.ts` - èªè­‰å‹åˆ¥å®šç¾©

## ğŸ“¦ å®‰è£ä¾è³´

```bash
cd apps/web

# å®‰è£ Supabase ç›¸é—œä¾è³´
npm install @supabase/supabase-js @supabase/auth-helpers-nextjs

# å®‰è£è¡¨å–®é©—è­‰å·¥å…·
npm install react-hook-form zod @hookform/resolvers

# å®‰è£ UI å·¥å…· (å¯é¸)
npm install lucide-react sonner
```

## âš™ï¸ ç’°å¢ƒè®Šæ•¸é…ç½®

å‰µå»º `apps/web/.env.local`:

```bash
# Supabase é€£ç·šè³‡è¨Š
NEXT_PUBLIC_SUPABASE_URL=http://localhost:54321
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0

# æœå‹™ç«¯å°ˆç”¨
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImV4cCI6MTk4MzgxMjk5Nn0.EGIM96RAZx35lJzdJsyH-qQwv8Hdp7fsn3W0YpN81IU

# ç¶²ç«™ URL
NEXT_PUBLIC_SITE_URL=http://localhost:3000
```

## ğŸš€ ä¸‹ä¸€æ­¥ï¼šå¯¦ä½œé é¢

### 1. å‰µå»ºèªè­‰é é¢

éœ€è¦å‰µå»ºä»¥ä¸‹é é¢ï¼š

- `app/(auth)/login/page.tsx` - ç™»å…¥é é¢
- `app/(auth)/register/page.tsx` - è¨»å†Šé é¢
- `app/(auth)/layout.tsx` - èªè­‰é é¢å…±ç”¨å¸ƒå±€

### 2. å‰µå»ºå„€è¡¨æ¿è·¯ç”±

```
app/(dashboard)/
â”œâ”€â”€ landlord/
â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â””â”€â”€ layout.tsx
â”œâ”€â”€ super-admin/
â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â””â”€â”€ layout.tsx
â””â”€â”€ layout.tsx
```

### 3. æ¸¬è©¦æµç¨‹

1. å•Ÿå‹• Supabase: `supabase start`
2. å•Ÿå‹• Next.js: `npm run dev`
3. è¨ªå• http://localhost:3000/register é€²è¡Œè¨»å†Š
4. æª¢æŸ¥ Mailpit (http://localhost:54324) æŸ¥çœ‹é©—è­‰éƒµä»¶
5. é»æ“Šé©—è­‰é€£çµ
6. è¨ªå• http://localhost:3000/login é€²è¡Œç™»å…¥

## ğŸ“š åƒè€ƒæ–‡ä»¶

è©³ç´°å¯¦ä½œæŒ‡å¼•è«‹åƒé–±ï¼š
- [èªè­‰ç³»çµ±æ¶æ§‹è¨­è¨ˆ](../../docs/å°ˆæ¡ˆæ¶æ§‹èªªæ˜/èªè­‰ç³»çµ±æ¶æ§‹è¨­è¨ˆ.md)
- [Supabase Auth æ•´åˆæŒ‡å—](../../docs/deployment-guides/Supabase_Auth_æ•´åˆæŒ‡å—.md)

## âš ï¸ æ³¨æ„äº‹é …

1. **RLS ç­–ç•¥**: è«‹ç¢ºä¿ `users_profile` è¡¨å·²å•Ÿç”¨ Row Level Security
2. **OAuth é…ç½®**: å¦‚éœ€ä½¿ç”¨ Google/Facebook ç™»å…¥ï¼Œéœ€å…ˆé…ç½® OAuth æ‡‰ç”¨
3. **ç”Ÿç”¢ç’°å¢ƒ**: è«‹å‹¿ä½¿ç”¨æœ¬åœ°é–‹ç™¼çš„ Supabase é‡‘é‘°æ–¼ç”Ÿç”¢ç’°å¢ƒ

---

**ç‹€æ…‹**: âœ… åŸºç¤æ¶æ§‹å·²å®Œæˆ  
**ä¸‹ä¸€æ­¥**: å¯¦ä½œç™»å…¥/è¨»å†Šé é¢
