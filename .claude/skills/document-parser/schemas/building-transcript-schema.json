{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Taiwan Building Registration Transcript",
  "description": "Schema for Taiwan building registration transcript (建物登記謄本) data extraction",
  "type": "object",
  "properties": {
    "documentMetadata": {
      "type": "object",
      "description": "Document metadata and verification information",
      "properties": {
        "transcriptCheckNumber": {
          "type": "string",
          "description": "謄本檢查號 - Document verification number"
        },
        "transcriptNumber": {
          "type": "string",
          "description": "謄本編號 (e.g., 大安電謄字第022944號)"
        },
        "printDateTime": {
          "type": "string",
          "format": "date-time",
          "description": "列印時間 - Print date and time (e.g., 民國102年07月08日14時21分)"
        },
        "issuingOffice": {
          "type": "string",
          "description": "核發機關 - Issuing land office (e.g., 臺北市大安地政事務所)"
        },
        "managingOffice": {
          "type": "string",
          "description": "資料管轄機關 - Data managing office"
        },
        "pageNumber": {
          "type": "integer",
          "description": "頁次 - Page number"
        },
        "verificationUrl": {
          "type": "string",
          "format": "uri",
          "description": "查驗網址 - Verification URL"
        }
      },
      "required": ["transcriptCheckNumber", "printDateTime", "issuingOffice"]
    },
    "buildingIdentification": {
      "type": "object",
      "description": "建物標示部 - Building identification section",
      "properties": {
        "buildingNumber": {
          "type": "string",
          "description": "建號 - Building registration number (e.g., 01691-000)"
        },
        "district": {
          "type": "string",
          "description": "區域 - District (e.g., 大安區)"
        },
        "section": {
          "type": "string",
          "description": "段小段 - Section (e.g., 復興段二小段)"
        },
        "registrationDate": {
          "type": "string",
          "description": "登記日期 - Registration date (e.g., 民國093年03月22日)"
        },
        "registrationReason": {
          "type": "string",
          "description": "登記原因 - Registration reason (e.g., 門牌整編, 買賣)"
        },
        "address": {
          "type": "string",
          "description": "建物門牌 - Building address"
        },
        "landLotNumber": {
          "type": "string",
          "description": "建物坐落地號 - Land lot number"
        },
        "mainPurpose": {
          "type": "string",
          "description": "主要用途 - Main purpose (e.g., 住家用, 商業用)"
        },
        "mainMaterial": {
          "type": "string",
          "description": "主要建材 - Main construction material (e.g., 鋼筋混凝土造)"
        },
        "totalFloors": {
          "type": "integer",
          "description": "總層數 - Total number of floors"
        },
        "totalArea": {
          "type": "number",
          "description": "總面積 - Total area in square meters"
        },
        "floorDetails": {
          "type": "array",
          "description": "樓層詳情 - Floor details",
          "items": {
            "type": "object",
            "properties": {
              "floorLevel": {
                "type": "string",
                "description": "層次 - Floor level (e.g., 十層, 地下一層)"
              },
              "area": {
                "type": "number",
                "description": "層次面積 - Floor area in square meters"
              }
            }
          }
        },
        "constructionCompletionDate": {
          "type": "string",
          "description": "建築完成日期 - Construction completion date"
        },
        "auxiliaryBuildings": {
          "type": "array",
          "description": "附屬建物 - Auxiliary buildings/structures",
          "items": {
            "type": "object",
            "properties": {
              "purpose": {
                "type": "string",
                "description": "用途 - Purpose (e.g., 陽台, 平台)"
              },
              "area": {
                "type": "number",
                "description": "面積 - Area in square meters"
              }
            }
          }
        },
        "commonAreas": {
          "type": "array",
          "description": "共有部分 - Common/shared areas",
          "items": {
            "type": "object",
            "properties": {
              "buildingNumber": {
                "type": "string",
                "description": "建號 - Building number of common area"
              },
              "area": {
                "type": "number",
                "description": "面積 - Area in square meters"
              },
              "ownershipRatio": {
                "type": "string",
                "description": "權利範圍 - Ownership ratio (e.g., 242404分之3564)"
              }
            }
          }
        },
        "buildingPermitNumber": {
          "type": "string",
          "description": "使用執照字號 - Building permit/occupancy permit number"
        },
        "otherRegistrationNotes": {
          "type": "array",
          "description": "其他登記事項 - Other registration notes",
          "items": {
            "type": "string"
          }
        }
      },
      "required": ["buildingNumber", "address", "mainPurpose", "totalArea"]
    },
    "ownershipSection": {
      "type": "object",
      "description": "建物所有權部 - Building ownership section",
      "properties": {
        "registrationSequence": {
          "type": "string",
          "description": "登記次序 - Registration sequence number"
        },
        "registrationDate": {
          "type": "string",
          "description": "登記日期 - Registration date"
        },
        "registrationReason": {
          "type": "string",
          "description": "登記原因 - Registration reason (e.g., 買賣, 繼承)"
        },
        "reasonOccurrenceDate": {
          "type": "string",
          "description": "原因發生日期 - Date when the reason occurred"
        },
        "owner": {
          "type": "object",
          "description": "所有權人 - Owner information",
          "properties": {
            "name": {
              "type": "string",
              "description": "姓名 - Owner name"
            },
            "idNumber": {
              "type": "string",
              "description": "身分證字號 - ID number (if disclosed)"
            },
            "address": {
              "type": "string",
              "description": "住址 - Owner address"
            }
          },
          "required": ["name"]
        },
        "ownershipRatio": {
          "type": "string",
          "description": "權利範圍 - Ownership ratio (e.g., 全部, 1分之1)"
        },
        "certificateNumber": {
          "type": "string",
          "description": "權狀字號 - Ownership certificate number"
        },
        "relatedEncumbrances": {
          "type": "array",
          "description": "相關他項權利登記次序 - Related encumbrance registration sequences",
          "items": {
            "type": "string"
          }
        },
        "otherOwnershipNotes": {
          "type": "array",
          "description": "其他登記事項 - Other ownership notes",
          "items": {
            "type": "string"
          }
        }
      },
      "required": ["owner", "ownershipRatio"]
    },
    "extractionMetadata": {
      "type": "object",
      "description": "Information about the extraction process",
      "properties": {
        "extractionTimestamp": {
          "type": "string",
          "format": "date-time",
          "description": "When the data was extracted"
        },
        "extractionMethod": {
          "type": "string",
          "enum": ["claude-vision", "ocr-llm", "manual"],
          "description": "Method used for extraction"
        },
        "confidenceScore": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "Overall confidence score of extraction (0-1)"
        },
        "fieldsRequiringReview": {
          "type": "array",
          "description": "Fields that may need manual verification",
          "items": {
            "type": "string"
          }
        },
        "notes": {
          "type": "string",
          "description": "Any additional notes about the extraction"
        }
      }
    }
  },
  "required": ["documentMetadata", "buildingIdentification", "ownershipSection"]
}
