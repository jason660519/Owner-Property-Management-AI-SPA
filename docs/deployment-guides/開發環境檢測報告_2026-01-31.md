# 開發環境服務檢測報告

> **創建日期**: 2026-01-31  
> **創建者**: Project Team  
> **最後修改**: 2026-02-01  
> **修改者**: Project Team  
> **版本**: 1.1  
> **文件類型**: 技術文件

---


**檢測日期**: 2026-02-01  
**檢測時間**: 上午

---

## 📊 服務狀態總覽

| 服務類型     | 服務名稱                | 狀態     | 訪問地址                             | 說明                     |
| ------------ | ----------------------- | -------- | ------------------------------------ | ------------------------ |
| **前端應用** | 公司官網 (Next.js)      | ✅ 運行中 | http://localhost:3000                | 產品介紹與多用戶登入入口 |
| **前端應用** | 房東管理 App (Expo)     | ✅ 運行中 | http://localhost:8081                | 房東專用管理應用         |
| **後端服務** | Supabase API Gateway    | ✅ 運行中 | http://localhost:54321               | REST/GraphQL API 端點    |
| **後端服務** | Supabase REST API       | ✅ 運行中 | http://localhost:54321/rest/v1       | RESTful API              |
| **後端服務** | Supabase GraphQL API    | ✅ 運行中 | http://localhost:54321/graphql/v1    | GraphQL API              |
| **後端服務** | Supabase Edge Functions | ✅ 運行中 | http://localhost:54321/functions/v1  | 邊緣函數                 |
| **後端服務** | Supabase MCP Server     | ✅ 運行中 | http://localhost:54321/mcp           | Model Context Protocol   |
| **資料庫**   | PostgreSQL Database     | ✅ 運行中 | postgresql://127.0.0.1:54322         | 主資料庫                 |
| **開發工具** | Supabase Studio         | ✅ 運行中 | http://localhost:54323               | 資料庫管理後台           |
| **開發工具** | Mailpit (郵件測試)      | ✅ 運行中 | http://localhost:54324               | 本地郵件測試工具         |
| **儲存服務** | Supabase Storage (S3)   | ✅ 運行中 | http://localhost:54321/storage/v1/s3 | 物件儲存服務             |

---

## 🔍 詳細檢測結果

### 1. 前端應用 (全部運行中) ✅

#### 1.1 公司官網 (Next.js 15)
- **狀態**: ✅ 運行中
- **訪問地址**: http://localhost:3000
- **構建工具**: Turbopack
- **功能**: 
  - 產品與服務介紹
  - 多用戶登入入口 (superadmin, landlord, tenants 等)
  - 物件展示與查詢
- **啟動指令**: `npm run dev` 或 `npm run dev --filter=web`

#### 1.2 房東管理 App (Expo 54)
- **狀態**: ✅ 運行中
- **訪問地址**: http://localhost:8081
- **功能**: 
  - 房東物件管理
  - 租客管理
  - OCR 權狀掃描
- **啟動指令**: `npm run dev` 或 `npm run dev --filter=mobile`

---

### 2. Supabase 後端服務 (全部運行中) ✅

#### 2.1 核心 API 服務

**API Gateway**
- 地址: http://localhost:54321
- 狀態: ✅ 運行中
- 說明: 所有 API 請求的統一入口

**REST API**
- 地址: http://localhost:54321/rest/v1
- 狀態: ✅ 運行中
- 說明: RESTful API 端點，用於 CRUD 操作

**GraphQL API**
- 地址: http://localhost:54321/graphql/v1
- 狀態: ✅ 運行中
- 說明: GraphQL 查詢端點

**Edge Functions**
- 地址: http://localhost:54321/functions/v1
- 狀態: ✅ 運行中
- 說明: 伺服器端函數執行環境

**MCP Server**
- 地址: http://localhost:54321/mcp
- 狀態: ✅ 運行中
- 說明: Model Context Protocol 伺服器

#### 2.2 資料庫服務

**PostgreSQL Database**
- 連接字串: `postgresql://postgres:postgres@127.0.0.1:54322/postgres`
- 狀態: ✅ 運行中
- 說明: 主資料庫服務

**現有資料表** (共 107 個表格):
- ✅ `building_title_records` - 建物權狀記錄
- ✅ `property_photos` - 物件照片
- ✅ `viewing_appointments_buyer` - 買方看房預約
- ✅ `viewing_appointments_tenant` - 租客看房預約
- ✅ `users_profile` - 用戶資料
- ✅ `property_sales` - 銷售物件
- ✅ `property_rentals` - 租賃物件
- ✅ `buildings_communities` - 建物社區
- ✅ 其他 99 個業務表格...

> **注意**: 資料庫包含完整的 107 個表格，涵蓋所有業務功能。詳細表格清單可透過 Supabase Studio 查看。

#### 2.3 儲存服務

**Supabase Storage (S3 Compatible)**
- 地址: http://localhost:54321/storage/v1/s3
- 狀態: ✅ 運行中
- Access Key: `625729a08b95bf1b7ff351a663f3a23c`
- Region: `local`
- 說明: 用於存儲物件照片、權狀掃描檔等

---

### 3. 開發工具 (全部運行中) ✅

#### 3.1 Supabase Studio
- 地址: http://localhost:54323
- 狀態: ✅ 運行中
- 功能:
  - 資料庫表格管理
  - SQL 查詢編輯器
  - 即時資料瀏覽
  - 使用者權限管理
  - Storage 檔案管理

#### 3.2 Mailpit (郵件測試工具)
- 地址: http://localhost:54324
- 狀態: ✅ 運行中
- 功能:
  - 攔截本地發送的所有郵件
  - 郵件內容預覽
  - 測試註冊/登入郵件功能

---

## 🔑 認證金鑰

**Supabase Authentication Keys**
- **Publishable Key (匿名金鑰)**: `sb_publishable_ACJWlzQHlZjBrEguHvfOxg_3BJgxAaH`
- **Secret Key (服務端金鑰)**: `sb_secret_N7UND0UgjKTVK-Uodkm0Hg_xSvEMPvz`

⚠️ **注意**: 這些是本地開發環境的金鑰，僅供開發使用，請勿用於生產環境。

---

## 📝 操作建議

### 立即可訪問的服務 (無需額外啟動)

1. **Supabase Studio** - http://localhost:54323
   - 可直接管理資料庫、查看資料表、執行 SQL 查詢
   
2. **Mailpit** - http://localhost:54324
   - 可查看系統發送的測試郵件

3. **Supabase API** - http://localhost:54321
   - 可使用 Postman 或 curl 測試 API 端點

### 需要啟動的前端服務

要啟動前端應用，請執行：

```bash
# 進入專案根目錄
cd "/Volumes/KLEVV-4T-1/Real Estate Management Projects/Owner-Property-Management-AI-SPA"

# 清除快取（若之前啟動失敗）
rm -rf apps/web/.next apps/web/node_modules/.cache

# 啟動所有前端應用 (Web + Mobile)
npm run dev
```

啟動後可訪問：
- 公司官網: http://localhost:3000
- 房東 App Web 版: http://localhost:8081

---

## 🎯 完整服務清單

### 可訪問的 11 個網頁/端點

#### Supabase 後端服務 (9 個)
1. ✅ http://localhost:54321 - API Gateway
2. ✅ http://localhost:54321/rest/v1 - REST API
3. ✅ http://localhost:54321/graphql/v1 - GraphQL API
4. ✅ http://localhost:54321/functions/v1 - Edge Functions
5. ✅ http://localhost:54321/mcp - MCP Server
6. ✅ http://localhost:54321/storage/v1/s3 - Storage Service
7. ✅ http://localhost:54323 - Supabase Studio
8. ✅ http://localhost:54324 - Mailpit
9. ✅ postgresql://127.0.0.1:54322 - PostgreSQL Database

#### 前端應用 (已啟動，2 個)
10. ✅ http://localhost:3000 - 公司官網
11. ✅ http://localhost:8081 - 房東管理 App

---

## ⚙️ 服務健康狀態

- **Supabase 後端**: 🟢 健康 (9/9 服務運行中)
- **前端應用**: 🟢 健康 (2/2 服務運行中)
- **整體狀態**: 🟢 完全運行 (11/11 服務可用，100%)

---

## 📌 檢測結果與修復記錄

### ✅ 已完成的檢測與修復

1. ✅ **Supabase 後端已就緒** - 所有 9 個服務正常運行
2. ✅ **前端應用已啟動** - Web (3000) 和 Mobile (8081) 都在運行
3. ✅ **Next.js 快取問題已修復** - 清除了損壞的 Turbopack 快取
4. ✅ **資料庫結構已驗證** - 確認有 107 個表格正常運作

### ⚠️ 發現的文件不一致問題

**資料表名稱不符**：
- 文件中提到的 `land_title_records`、`property_appointments`、`clients`、`owner` 等表格不存在
- 實際資料庫使用不同的命名：`viewing_appointments_buyer`、`viewing_appointments_tenant`、`users_profile` 等
- 已更新文件以反映實際的資料庫結構

### 💡 建議後續動作

1. 💡 可透過 Supabase Studio (http://localhost:54323) 檢視完整資料庫結構
2. 💡 可使用 Mailpit (http://localhost:54324) 測試郵件發送功能
3. 💡 前端應用已可正常開發和測試
4. 💡 建議定期執行此檢測以確保環境穩定

---

**檢測工具**: Supabase CLI, lsof, ps  
**報告生成**: 自動化腳本  
**下次檢測建議**: 每次重啟開發環境時執行
