"use strict";(globalThis.webpackChunkintercom_js=globalThis.webpackChunkintercom_js||[]).push([[3326,3524],{18603:(e,t,n)=>{n.d(t,{B:()=>r,v:()=>o});var i=n(86923);const r=32,o=(0,i.Ay)("a",{target:"e9lv9ro0"})("display:inline-block;height:",r,"px;width:100%;background:",(0,i.w4)("containerBaseNeutral"),"!important;&:hover{background:",(0,i.w4)("containerNeutral"),"!important;}transition:all 80ms;text-align:center;line-height:",r,"px;text-decoration-line:underline;font-size:13px;font-weight:656;color:",(0,i.w4)("textMuted"),"!important;")},48368:(e,t,n)=>{n.d(t,{A:()=>EmailAttribute});var i=n(96540),r=n(66433),o=n(6314),a=n(36667),s=n(49651),l=n(74848);class EmailAttribute extends i.Component{render(){const{value:e,saveState:t,isReplyType:n,isNotificationChannel:i,isSubmittable:o,placeholder:c,disabled:d,errorMessage:u,hideErrorMessage:p,onSubmit:h,onChange:m}=this.props;return(0,l.jsx)(r.A,{value:e,placeholder:c,saveState:t,disabled:d,isValid:a.B,isReplyType:n,isSubmittable:o,isNotificationChannel:i,onSubmit:h,onChange:m,hideErrorMessage:p,ariaLabel:(0,s.Tl)("enter_your_email"),type:"email",validationErrorMessage:u||(0,s.Tl)("that_email_address_doesnt_look_quite_right")})}}EmailAttribute.defaultProps={placeholder:o.o,isSubmittable:!0,hideErrorMessage:!1}},88843:(e,t,n)=>{n.d(t,{A:()=>f});var i=n(17905),r=n(68239),o=n(39538),a=n(49651),s=n(96540),l=n(74848);const c=["author"];function d(e){let{author:t}=e,n=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,c);return t?(0,l.jsx)(u,Object.assign({},n,{author:t})):null}function u({appName:e,author:t,isReplyStyle:n,lastActiveAt:i,isActive:r,removePrefix:o,forceShowAppName:a}){return n?(0,l.jsx)(p,{authorFirstName:t.firstName,removePrefix:o}):(0,l.jsx)(h,{appName:e,author:t,isActive:r,forceShowAppName:a,lastActiveAt:i})}function p({authorFirstName:e,removePrefix:t}){return(0,l.jsxs)(r.$z,{children:[!t&&(0,l.jsx)(r.Oc,{children:`${(0,a.Tl)("reply_from")} `}),(0,l.jsx)(r.Bi,{className:"test-author-summary-name",children:e})]})}function h({appName:e,author:t,isActive:n,forceShowAppName:i,lastActiveAt:c}){const d=(0,s.useMemo)((()=>"team"!==t.type&&!!i),[t.type,i]),u=null!==n&&"en"===(0,a.JK)(),p=n?"Active":"Away";return(0,l.jsxs)(r.$z,{children:[(0,l.jsxs)(r.Z,{className:"test-author-summary-name-from",children:[(0,l.jsx)(r.Bi,{className:"test-author-summary-name",children:t.firstName}),d&&(0,l.jsx)(r.v6,{className:"test-author-summary-from-clause",children:` ${(0,a.Tl)("from_app",{app_name:e})}`})]}),c&&(0,l.jsx)(r.sJ,{children:u?p:(0,o._J)(c)})]})}var m=n(37341);const g=["children","rightContent"];function x({appName:e,author:t,isReplyStyle:n,lastActiveAt:r,isActive:o,customHeaderText:a,forceShowAppName:s}){return t?(0,l.jsxs)(i.gJ,{children:[(0,l.jsx)(i.Jr,{children:(0,l.jsx)(m.h,{author:t})}),(0,l.jsx)(d,{author:t,appName:e,isReplyStyle:n??!1,lastActiveAt:r,isActive:o,forceShowAppName:s})]}):a?(0,l.jsx)(i.tF,{children:a}):null}function f(e){let{children:t,rightContent:n}=e,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,g);return(0,l.jsxs)(i.jt,{className:"intercom-authored-container",children:[(0,l.jsxs)(i.TJ,{children:[(0,l.jsx)(x,Object.assign({},r)),n]}),t]})}},96875:(e,t,n)=>{n.d(t,{A:()=>g});var i=n(96540),r=n(79986),o=n(52555),a=n(23043),s=n(74848);function l(e){const{replyOption:t,onSelect:n,focused:i,style:r,isTypeaheadSuggestion:o,useNewConversationalUI:l=!1,buttonAlignment:c,isInline:d=!1}=e;return(0,s.jsx)(a.HF,{label:t.text,value:t,onClick:n,focused:i,isTypeaheadSuggestion:o,style:r,useNewConversationalUI:l,buttonAlignment:c,isInline:d})}const c=(0,i.forwardRef)((({maxWidth:e,useNewConversationalUI:t,isInline:n},i)=>(0,s.jsx)(a._r,{children:(0,s.jsx)(a.Or,{ref:i,children:(0,s.jsx)(a.HF,{tabIndex:"-1",style:{display:"none",maxWidth:e},useNewConversationalUI:t,isInline:n,onClick:()=>{}})})})));var d=n(39502),u=n(71982);const p=(e,t,n,i)=>{if(!i)return[0,0];const r=i.querySelector("button");if(!r)return[0,0];r.style.display="",r.textContent=e;const o=[r.offsetWidth+n,r.offsetHeight+t];return r.style.display="none",o},h=(e,t,n,i,r)=>{const o=(e||r)&&"left"===t,s=e||r?n-2*a.O6+"px":n-2*a.Mv+"px",l=r?6:e?a.rZ:a.wT,c=r?6:e?a.Vj:a.wT,d=o?((e,t,n,i)=>{const r=[];let o=0,a=0;return s=>{const[l,c]=p(s,t,n,i);if(a+l>e){const e=r.length>0?r[r.length-1][3]:0;o+=e,a=0}const d=[a,o,l,c];return r.push(d),a+=l,{bounds:d}}})(n,l,c,i.current):((e,t,n,i)=>{const r=[];let o=0;return a=>{const[s,l]=p(a,t,n,i),c=(r.filter((e=>e[1]===o))||[]).map((e=>e[2])).reduce(((e,t)=>e+t),0);if(s+c>e){const e=r.length>0?r[r.length-1][3]:0;o+=e}else r.forEach((e=>{e[1]===o&&(e[0]=e[0]-s)}));const d=[0,o,s,l];return r.push(d),{bounds:d}}})(n,l,c,i.current);return{maxWidth:s,getCurrentSuggestionBounds:d}},m=["bounds"];function g(e){var t;const{suggestions:n,onSelect:p,onHeightChange:g,isInboundBotSuggestions:x,isTypeaheadSuggestions:f,useNewConversationalUI:v=!1,isInline:y=!1,suggestionButtonsAlignment:b="right"}=e,w=(0,i.useRef)(),j=(null==(t=w.current)||null==(t=t.parentElement)?void 0:t.offsetWidth)||0,k=(0,r.GV)(u.l),{maxWidth:A,getCurrentSuggestionBounds:C}=h(v,b,j,w,y),S=(w.current?n:[]).map((e=>Object.assign({},e,C(e.text),{isInboundBotSuggestion:x,isTypeaheadSuggestion:f}))),T=S[S.length-1],_=T?T.bounds[1]+T.bounds[3]:0,E=`width-${j}`,I=(0,o.pn)(S,{from:({bounds:e})=>({bounds:e,opacity:0}),enter:({bounds:e})=>({bounds:e,opacity:1}),update:({bounds:e})=>({bounds:e}),leave:{opacity:.01},expired:{opacity:0},config:{mass:3,tension:1e3,friction:200},trail:25,immediate:!1,keys:e=>`${E}-${e.uuid}`}),z=(0,r.GV)(d.HQ);(0,i.useEffect)((()=>{_&&g&&(g(_),setTimeout((()=>g(_)),a.aV))}),[_,g,z,k]),function(e){const t=(0,i.useRef)(),[n,r]=(0,i.useState)(!1);(0,i.useEffect)((()=>(t.current=setTimeout((()=>r(!0)),e),()=>t.current&&clearTimeout(t.current))),[e])}(0);let N=null;const M=I(((e,t)=>{let{bounds:n}=e,i=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,m);return null===N&&(N=t),(0,s.jsx)(o.CS.div,{style:Object.assign({},i),children:(0,s.jsx)(l,{focused:!1,replyOption:t,onSelect:p,isTypeaheadSuggestion:t.isTypeaheadSuggestion||!1,useNewConversationalUI:v,isInline:y,buttonAlignment:b,style:{transform:n.to(((e,t)=>`translate3d(${e}px,${t}px,0)`)).get(),maxWidth:A}})})})),R=null!==N&&N.isInboundBotSuggestion;return(0,s.jsxs)(a.UC,{height:_,isInboundBot:R||!1,isInline:y,isExpanded:k,useNewConversationalUI:v,children:[(0,s.jsx)(c,{ref:w,maxWidth:A,isInline:y,useNewConversationalUI:v}),M]})}},65772:(e,t,n)=>{n.d(t,{A:()=>f});var i=n(96540),r=n(57064),o=n(60077),a=n(88843),s=n(11432),l=n(63156),c=n(49651),d=n(34913),u=n(69830),p=n(38211),h=n(52271),m=n(79630),g=n(11724),x=n(74848);function f({appName:e,conversationId:t,composerVisible:n,message:f,reactionsReply:v,onClose:y,onComposerClick:b,onReactionSelect:w,frameWindow:j,showReplyToButton:k,isUpfrontEmailComposerShowing:A,returnFocus:C}){const[S,T]=(0,i.useState)(!1),_=(0,i.useCallback)((e=>{T(e.target.scrollTop>0),(0,m.Xr)(e)}),[]),E=(0,i.useCallback)((()=>{(0,u.A5)("clicked","composer","in_app","from_full",{message_type:"post",message_id:f.id,conversation_id:t})}),[f.id,t]),I=(0,i.useCallback)((e=>()=>{E(),b(),e(void 0,{shouldReturnFocus:!1})}),[E,b]),z=(0,i.useCallback)((e=>n?k||A?(0,x.jsx)(d.A,{onClick:I(e)}):(0,x.jsx)(p.pM,{className:"intercom-post-composer",onClick:I(e),"aria-label":(0,c.Tl)("open_conversation_and_reply"),children:(0,x.jsx)(h.cT,{children:(0,c.Tl)("reply_to_conversation")})}):null),[n,k,A,I]),N=(0,i.useCallback)((e=>w?(0,x.jsx)(l.A,Object.assign({},e,{onReactionSelect:w})):null),[w]),{author:M,lastActiveAt:R,body:B}=f,P=(0,i.useMemo)((()=>(null==M?void 0:M.firstName)||(null==M?void 0:M.name)||""),[null==M?void 0:M.firstName,null==M?void 0:M.name]),L=(0,i.useMemo)((()=>P?`Message from ${P}`:"Message"),[P]);return(0,x.jsx)(r.A,{closeCallback:y,showCloseOverlay:!1,frameWindow:j,returnFocus:C,ariaLabel:L,children:({onClose:t})=>(0,x.jsx)(p.pD,{isScrolled:S,children:(0,x.jsx)(p.K8,{className:"intercom-post",children:(0,x.jsxs)(a.A,{appName:e,isReplyStyle:!1,author:M,lastActiveAt:R,forceShowAppName:!0,children:[(0,x.jsx)(p.Xz,{className:"intercom-post-close",onClick:t,"aria-label":(0,c.Tl)("close"),children:(0,x.jsx)(g.In,{type:"CloseIcon",size:18,color:"iconMuted",ariaHidden:!0})}),(0,x.jsx)(o.A,{isInsideModal:!0,onScroll:_,children:(0,x.jsx)(s.A,{blocks:B,frameWindow:j})}),(0,x.jsx)(p.oL,{isCentered:k||A,children:v?N(v):z(t)})]})})})})}},63156:(e,t,n)=>{n.d(t,{A:()=>s});var i=n(96540),r=n(78619),o=n(94325),a=n(74848);function s({reactionSet:e,onReactionSelect:t,reactionIndex:n=null,prompt:s}){const l=(0,i.useRef)(null);return(0,a.jsxs)(o.f,{ref:l,role:"radiogroup","aria-labelledby":s?"reaction-prompt":void 0,hasPrompt:!!s,children:[s?(0,a.jsx)(o.S,{id:"reaction-prompt",children:s}):null,e.map(((e,i)=>(0,a.jsx)(r.A,{onReactionSelect:t,reaction:e,hasSelectedReaction:null!=n,isSelected:n===e.index},i)))]})}},78619:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(17409),r=n(1439),o=n(51480),a=n(74848);const s=32;function l({reaction:e,onReactionSelect:t,hasSelectedReaction:n,isSelected:l}){return(0,a.jsx)(o.H,{onClick:()=>{t(e.index)},role:"radio","aria-checked":l,"aria-label":`${(0,r.x$)(e.emoji)} reaction`,tabIndex:0,hasSelectedReaction:n,isSelected:l,children:(0,a.jsx)(i.A,{"aria-hidden":"true",emojiImageSize:s,text:e.emoji})})}},34913:(e,t,n)=>{n.d(t,{A:()=>d});var i=n(96540),r=n(49651),o=n(86923),a=n(85177);const s=(0,o.Ay)(a.A,{target:"e3s5ecz1"})({name:"14te7qs",styles:"position:relative;top:2px;right:8px"}),l=(0,o.Ay)("button",{target:"e3s5ecz0"})("svg{path{fill:",(0,o.w4)("buttonBackgroundColor"),";}}padding:10px;border:1px solid ",(0,o.w4)("buttonBackgroundColor"),";border-radius:40px;margin:0 20px 20px 20px;width:240px;text-align:center;font-size:14px;font-weight:600;color:",(0,o.w4)("buttonBackgroundColor"),";background-color:",(0,o.w4)("buttonTextColor"),";");var c=n(74848);function d({onClick:e,onShow:t}){const n=(0,i.useRef)(null);return(0,i.useEffect)((()=>{if(!n.current||!t)return;const e=n.current.clientHeight+10;t(e)}),[t]),(0,c.jsxs)(l,{ref:n,onClick:e,children:[(0,c.jsx)(s,{}),(0,r.Tl)("reply_to_conversation").replace("…","")]})}},60077:(e,t,n)=>{n.d(t,{A:()=>u});var i=n(96540),r=n(8375),o=n(84864),a=n(7494),s=n(96808),l=n(46531),c=n(183),d=n(74848);const u=(0,i.forwardRef)((function({onScroll:e,onScrollable:t,isInsideModal:n,dynamicChildrenHeight:u,flex:p,defaultScrollPosition:h,showScrollingBorder:m,isFinMessenger:g=!1,children:x},f){const[v,y]=(0,i.useState)(!1),[b,w]=(0,i.useState)(!1),j=(0,i.useRef)(null),k=(0,i.useRef)(null),A=(0,i.useRef)(),C=(0,i.useRef)(e),S=(0,i.useCallback)((()=>!!k.current&&k.current.scrollHeight>k.current.clientHeight),[]),T=(0,i.useCallback)((()=>{!v&&S()&&(y(!0),k.current&&t&&t(k.current,!0))}),[v,S,t]);A.current=T,C.current=e,(0,i.useImperativeHandle)(f,(()=>({scrollable:k.current})));const _=(0,i.useCallback)((()=>{const e=S();y(e),t&&k.current&&t(k.current,e)}),[S,t]),E=(0,i.useMemo)((()=>(0,o.B)((e=>{const{scrollTop:t}=e.target;w(t>0),A.current&&A.current(),C.current&&C.current(e)}),17)),[]);return(0,i.useEffect)((()=>{T()}),[T]),(0,i.useEffect)((()=>{h&&k.current&&(k.current.scrollTop=h)}),[h]),(0,d.jsxs)(d.Fragment,{children:[m&&(0,d.jsx)(c.B1,{in:b,classNames:"intercom-drop-shadow-fade",timeout:150,unmountOnExit:!0,nodeRef:j,children:(0,d.jsx)(l.p,{ref:j,isFinMessenger:g,"data-testid":"scrolling-gray-border"})}),(0,d.jsx)(a.vW,{className:"intercom-scrollable",isInsideModal:n??!1,flex:p??!1,onScroll:E,onWheel:r.b$,tabIndex:-1,ref:k,children:u?(0,d.jsx)(s.A,{onHeightChange:_,children:(0,d.jsx)(d.Fragment,{children:x})}):x})]})}))},24762:(e,t,n)=>{n.d(t,{A:()=>h});var i=n(49651),r=n(86923);const o=(0,r.Ay)("div",{target:"ehp9kao1"})("height:8px;border-radius:10px;overflow:hidden;background-color:",(0,r.w4)("containerEmphasisNeutral"),";"),a=(0,r.Ay)("div",{target:"ehp9kao0"})("height:8px;background-color:",(0,r.w4)("progressBarFilled"),";",(({percentage:e})=>(0,r.AH)("width:",e,"%;transition-property:width;transition-duration:1s;")),";");var s=n(74848);const l=({percentage:e,prefillEmptyPercentage:t,ariaLabel:n})=>{const i="number"!=typeof e||isNaN(e)?0:e,r=t&&0===i?2:i;return(0,s.jsx)("div",{role:"progressbar","aria-valuenow":Math.round(i),"aria-valuemin":0,"aria-valuemax":100,"aria-label":n,children:(0,s.jsx)(o,{children:(0,s.jsx)(a,{percentage:r})})})},c=(0,r.Ay)("div",{target:"ea6tcy61"})("display:flex;flex-direction:row;justify-content:",(({condensed:e})=>e?"flex-start":"space-between"),";gap:",(({condensed:e})=>e?"4px":""),";margin-bottom:8px;color:",(0,r.w4)("textMuted"),";"),d=(0,r.Ay)("div",{target:"ea6tcy60"})("display:flex;flex-direction:row;p{font-size:14px;color:",(0,r.w4)("textMuted"),";line-height:150%;font-weight:400;}"),u=(e,t)=>{const n=e/60;return t>0?1===n?(0,i.Tl)("checklist_in_progress_time_remaining_singular"):(0,i.Tl)("checklist_in_progress_time_remaining_plural",{minutes:n.toString()}):1===n?(0,i.Tl)("checklist_not_started_time_remaining_singular"):(0,i.Tl)("checklist_not_started_time_remaining_plural",{minutes:n.toString()})},p=(e,t)=>0===e?1===t?(0,i.Tl)("checklist_number_of_steps_singular"):(0,i.Tl)("checklist_number_of_steps_plural",{number_of_steps:t.toString()}):1===t||1===e?(0,i.Tl)("checklist_number_of_steps_progress_singular",{total_steps:t.toString()}):(0,i.Tl)("checklist_number_of_steps_progress_plural",{steps_completed:e.toString(),total_steps:t.toString()}),h=({checklistTasks:e,completedChecklistTasks:t,estimatedTimeRemaining:n,condensed:r,prefillProgressIfEmpty:o})=>{const a=t/e*100,h=(0,i.Tl)("checklist_progress",{completedChecklistTasks:t.toString(),checklistTasks:e.toString()});return(0,s.jsxs)("div",{"data-testid":"checklist-progress-details",children:[(0,s.jsxs)(c,{condensed:r,children:[(0,s.jsx)(d,{"data-testid":"checklist-remaining-tasks",children:(0,s.jsx)("p",{children:p(t,e)})}),r&&(0,s.jsx)(d,{children:(0,s.jsx)("p",{children:"•"})}),(0,s.jsx)(d,{"data-testid":"checklist-remaining-time",children:(0,s.jsx)("p",{children:t<e?u(n,t):(0,i.Tl)("checklist_completed")})})]}),(0,s.jsx)(l,{percentage:a,prefillEmptyPercentage:o,ariaLabel:h})]})}},10678:(e,t,n)=>{n.d(t,{A:()=>x});var i=n(86923);const r={name:"hgpnc9",styles:"top:9px;left:-2px;z-index:1"},o={name:"aotk9s",styles:"top:9px;right:-2px;z-index:2"},a={name:"s5nwgd",styles:"top:-1px;left:6px;z-index:2"},s={name:"1otngav",styles:"top:15px;right:14px;z-index:3"},l={name:"3tz3uv",styles:"top:15px;left:14px;z-index:1"},c={name:"wa7ma9",styles:"width:100%;height:100%;line-height:35px"},d={name:"uedfn8",styles:"width:20px;height:20px;line-height:20px"},u=({theme:e,index:t,numOfAvatars:n,hasProfileImage:u})=>(0,i.AH)("border-radius:50%;position:absolute;border:",1===n?"none":`2px solid ${e.borderNeutral}`,";background-color:",u?"none":e.avatarBackgroundColor,";color:",e.textWhite,";text-align:center;font-size:16px;",1===n?c:d," ",((e,t)=>{switch(t){case 2:switch(e){case 0:return r;case 1:return o;default:return""}case 3:switch(e){case 0:return a;case 1:return s;case 2:return l;default:return""}default:return""}})(t,n),";"),p=(0,i.Ay)("div",{target:"e1dkv15p2"})(u,";"),h=(0,i.Ay)("img",{target:"e1dkv15p1"})(u,";"),m=(0,i.Ay)("div",{target:"e1dkv15p0"})({name:"w7e5i4",styles:"width:35px;height:35px;position:relative;float:left"});var g=n(74848);function x({admins:e=[]}){const t=(e,t,n)=>e.avatar.square128?((e,t,n)=>{const{firstName:i,avatar:{square128:r}}=e,o=`${i||"admin"} avatar`;return(0,g.jsx)(h,{src:r??void 0,alt:o,index:t,numOfAvatars:n,hasProfileImage:!0},t)})(e,n,t):((e,t,n)=>{const{firstName:i}=e,r=i.charAt(0).toUpperCase();return(0,g.jsx)(p,{index:t,numOfAvatars:n,hasProfileImage:!1,children:r},t)})(e,n,t),n=e.filter(Boolean).slice(0,3);return(0,g.jsx)(m,{"data-testid":"team-avatar-container",children:n.map(((e,i)=>t(e,n.length,i)))})}},91889:(e,t,n)=>{n.d(t,{l:()=>s});var i=n(55073),r=n(93573),o=n(5351),a=n(74848);const s=({admin:e,size:t,showStatus:n=!1,solidBackground:s})=>{const l="isActive"in e&&!!e.isActive,c="dark"===(0,o.A)().themeMode;return(0,a.jsx)(i.e,Object.assign({solidBackground:s,showStatus:n&&l,size:t},(0,r.g)(e,c)))}},37341:(e,t,n)=>{n.d(t,{h:()=>c});var i=n(55073),r=n(91889),o=n(10678),a=n(93573),s=n(5351),l=n(74848);const c=({author:e,size:t,solidBackground:n})=>{var c;const d=null==(c=e.type)?void 0:c.toLowerCase(),u="dark"===(0,s.A)().themeMode;switch(d){case"team":return(0,l.jsx)(o.A,{admins:e.admins});case"admin":return(0,l.jsx)(r.l,{admin:e,size:t,solidBackground:n});default:var p;return(0,l.jsx)(i.e,Object.assign({},(0,a.g)(e,u),{showStatus:!1,shape:(null==(p=e.avatar)?void 0:p.shape)||"circle",size:t}))}}},44458:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(86923);var r={name:"gdp82w",styles:"border-radius:16.7%;border:none!important;img{border-radius:16.7%;}"};const o=(0,i.Ay)("div",{target:"e2rn66r0"})("margin:0 auto;border-radius:50%;display:inline-block;vertical-align:middle;cursor:default;position:relative;overflow:visible;img{border-radius:50%;",(({initial:e,solidBackground:t,theme:n,hasProfileImage:r})=>!e&&t&&!r&&(0,i.AH)("background-color:",n.avatarBackgroundColor,";")),";}",(({size:e})=>((e=32)=>(0,i.AH)("width:",e,"px;height:",e,"px;line-height:",e,"px;font-size:",e/2,"px;img{width:",e,"px;height:",e,"px;}"))(e))," ",(({initial:e,theme:t})=>e&&(0,i.AH)("text-transform:uppercase;background-color:",t.avatarBackgroundColor,";color:",t.isPrimaryColorAsTheme?t.textDefault:t.textOnInverse,";text-align:center;display:inline-flex;justify-content:center;align-items:center;"))," ",(({user:e,theme:t})=>e&&(0,i.AH)("background-color:",t.containerNeutral,";color:",t.textDefault,";"))," ",(({shape:e})=>"squircle"===e&&r),";")},55073:(e,t,n)=>{n.d(t,{e:()=>c,m:()=>l});var i=n(96540),r=n(44458),o=n(86923);const a=(0,o.Ay)("div",{target:"e9f496v0"})("width:",(0,o.xk)("size")||8,"px;height:",(0,o.xk)("size")||8,"px;background-color:",(0,o.w4)("onlineFill"),";border:",(0,o.xk)("borderSize")||2,"px solid ",(0,o.w4)("appSecondaryColor"),";margin:0 auto;border-radius:50%;display:inline-block;vertical-align:bottom;right:",(0,o.xk)("right")||3,"px;bottom:",(0,o.xk)("bottom")||3,"px;position:absolute;",(({isActive:e,theme:t})=>!e&&(0,o.AH)("background-color:",t.fillNotice,";")),";");var s=n(74848);const l=(0,i.createContext)(32);l.displayName="AvatarSizeContext";const c=({initials:e,label:t,imageUrl:n,shape:o="circle",showStatus:c=!1,size:d,solidBackground:u,isInactive:p=!1,statusSize:h,statusBottomOffset:m,statusRightOffset:g,statusBorderSize:x})=>{const f=(0,i.useContext)(l),[v,y]=(0,i.useState)(!1),b=!n||v,w=!b,j=b?{initial:b,role:"img","aria-label":t}:{};return(0,s.jsxs)(r.Z,Object.assign({size:d||f,shape:o},j,{solidBackground:u,hasProfileImage:w,children:[b?e:(0,s.jsx)("img",{src:n,alt:t,onError:()=>{y(!0)}}),(c||p)&&(0,s.jsx)(a,{"data-testid":"avatar-status",isActive:!p,right:g??-2,bottom:m??0,borderSize:x??2,size:h??Math.floor((d||32)/5)})]}))}},6314:(e,t,n)=>{n.d(t,{o:()=>i});const i="email@example.com"},51165:(e,t,n)=>{n.d(t,{A:()=>g});var i=n(71468),r=n(96540),o=n(54050),a=n(11432),s=n(69830),l=n(23043),c=n(96875),d=n(18873),u=n(49651),p=n(70745),h=n(5351),m=n(74848);const g=(0,i.Ng)((e=>{const{composer:t}=e;return{composerContent:t.content}}))((function(e){const{conversation:t,composerContent:n,conversationSuggestions:i,onClick:g,onHeightChange:x,onSuggestionsShow:f,setComposerSuggestionsDismissed:v}=e,y=(0,r.useRef)(!1),b=(0,r.useRef)(!0),w=(0,h.A)().textMuted,j=(0,r.useCallback)((()=>{const{uxStyle:e}=i;return"bubble"===(null==e?void 0:e.container)}),[i]),k=(0,r.useCallback)((()=>{const e=i&&i.suggestions.length;var t;e&&!y.current&&((0,s.A5)("received","composer_suggestions","messenger","",Object.assign({},i,{url:null==(t=(0,p.KQ)())?void 0:t.href})),y.current=!0);e&&f&&b.current&&(f(),b.current=!1),e||(b.current=!0)}),[i,y,b,f]);(0,r.useEffect)((()=>{k()}),[k]);const A=()=>{(0,s.A5)("dismissed","composer_suggestions","messenger","",{conversationSuggestions:i,composerContent:n,conversation_id:null==t?void 0:t.id}),v&&v()},C=(0,r.useCallback)((()=>{if(!i)return!1;const{suggestions:e}=i;if(!e.length||"quick_reply"!==e[0].type)return!0;const n=(0,d.iZ)(t);return(0,o.b)(n,e)}),[i,t]),S=(0,r.useMemo)((()=>C()?i.suggestions:[]),[i,C]),[T,_]=(0,r.useState)(S);(0,r.useLayoutEffect)((()=>{_(S)}),[S]);const E=(0,r.useCallback)((async e=>{_([]),await g(e);const r={conversation_id:null==t?void 0:t.id,conversationSuggestions:i,composerContent:n,suggestion:e};(0,s.A5)("clicked",(e=>{switch(e){case"messenger_suggested_content":return"composer_smart_suggestions";case"predictive_answer":return"predictive_answer";default:return"composer_suggestions"}})(e.type),"messenger","",r)}),[n,null==t?void 0:t.id,i,g]);if(!i)return null;const{isInboundBotSuggestions:I,isTypeaheadSuggestions:z,uxStyle:N}=i,M=j(),R=null==N?void 0:N.alignButtons;return(0,m.jsxs)(l.mc,{className:"composer-suggestions-container",isTypeaheadSuggestions:!!z,suggestionsVisible:T.length>0,useGroupedUI:M,children:[(()=>{const{isTypeaheadSuggestions:e,welcomeParts:t,uxStyle:n}=i,r=C()?i.prompt:[],o=C()?i.suggestionParts:null;return j()&&null!=n&&n.welcomePartsWithSuggestions&&null!=t&&t.length?(0,m.jsx)(l._e,{foregroundColor:w,children:t.map((e=>(0,m.jsx)(a.A,{autoPlay:!1,blocks:e.body},e.id)))}):o?null:null!=r&&r.length?(0,m.jsx)(l.hE,{children:(0,m.jsx)(a.A,{autoPlay:!1,blocks:r})}):S.length&&e?(0,m.jsxs)(l.o8,{children:[(0,m.jsx)(l.R4,{onClick:A,children:(0,u.Tl)("dont_show_suggestions")}),(0,m.jsx)(l.$e,{onClick:A})]}):null})(),(0,m.jsx)(l.CJ,{children:(0,m.jsx)(c.A,{isInboundBotSuggestions:I,isTypeaheadSuggestions:z,suggestions:T,onSelect:E,onHeightChange:x,useNewConversationalUI:!0,suggestionButtonsAlignment:R})})]})}))},93573:(e,t,n)=>{n.d(t,{g:()=>r,v:()=>i});const i=(e,t,n=!1)=>{let i=e.slice(0,t);n&&(i=i.reverse());return[...i.filter((e=>e.avatar.square128)),...i.filter((e=>!e.avatar.square128))]},r=(e,t)=>{var n,i,r,o,a,s,l;return{imageUrl:t?(null==(n=e.avatar)?void 0:n.darkSquare128)||(null==(i=e.avatar)?void 0:i.square128):(null==(r=e.avatar)?void 0:r.square128)||(null==(o=e.avatar)?void 0:o.imageUrl),initials:(null==(a=e.avatar)?void 0:a.initials)||e.initial||e.firstName[0],label:(null==(s=e.avatar)?void 0:s.label)||`Profile image for ${e.firstName}`,shape:(null==(l=e.avatar)?void 0:l.shape)||"circle"}}},69771:(e,t,n)=>{n.d(t,{Xh:()=>p,EU:()=>d,HO:()=>u,Nm:()=>c});var i=n(67098),r=n.n(i),o=n(75959),a=n.n(o);const s=e=>{const t=r()(e).replace("&nbsp;","").trim();return a().isSupportedUnicode(t)||a().isSupportedAscii(t)};var l=n(73669);const c=e=>"paragraph"===e.type&&s(e.text)||"html"===e.type&&s(e.content)||"rawContent"===e.type&&s(e.content),d=e=>!!e&&1===e.length&&((0,l.aN)(e[0])||c(e[0])),u=e=>d(e)&&(0,l.N5)(e[0]),p=(e,t)=>{if(!e||1!==e.length)return!1;const n=e[0];if(c(n))return!0;if(!("text"in n)||"string"!=typeof n.text)return!1;return((e,t)=>!(!t||!e)&&t.has(e.trim()))(n.text.trim(),t)}},84864:(e,t,n)=>{n.d(t,{B:()=>o,O:()=>a});var i=n(61151),r=n(22548);const o=(...e)=>{const t=(0,i.n)(...e);return function(e){return e.persist(),t(e)}},a=(...e)=>{const t=(0,r.s)(...e);return function(e){return e.persist(),t(e)}}},43579:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(96540),r=n(22548),o=n(56213);const a=100,s=async()=>(0,o.cT)()?ResizeObserver:await n.e(8096).then(n.t.bind(n,7829,23)).then((e=>e.default));function l(e,t,n=a){const o=(0,i.useRef)(null);(0,i.useEffect)((()=>{(async()=>{const e=await s();o.current=new e((0,r.s)(t,n))})()}),[o,t,n]),(0,i.useEffect)((()=>{var t;if(e)return null==o||null==(t=o.current)||t.observe(e),()=>{var e;return null==o||null==(e=o.current)?void 0:e.disconnect()}}),[o,e])}},54026:(e,t,n)=>{n.r(t),n.d(t,{appNodeId:()=>MM,default:()=>PM,styleNodeId:()=>RM});var i={};n.r(i),n.d(i,{Content:()=>cl,Wrap:()=>sl});var r=n(5338),o=n(71468),a=n(70400),s=n(52555),l=n(10389),c=n(25777),d=n(76662),u=n(8375),p=n(72938),h=n(82884),m=n(79986),g=n(14919),x=n(81323),f=n(37046),v=n(74848);const y=()=>{const e=(0,m.GV)(g.BU),t=(0,m.GV)(x.iO);return(0,f.z)()?null:e&&"/"!==e?(0,v.jsx)(a.Navigate,{to:e,replace:!0}):(0,v.jsx)(a.Navigate,{to:t?"/home":"/messages/conversation/new",replace:!0})};var b=n(96540),w=n(8229);const j=()=>{const e=(0,a.useNavigate)(),t=(0,m.GV)(g.BU),n=(0,m.GV)(g.Ae);return(0,b.useEffect)((()=>{const i=setTimeout((()=>{n||e(t,{replace:!0})}),0);return()=>clearTimeout(i)}),[e,t,n]),(0,v.jsx)("div",{children:(0,v.jsx)(w.A,{})})};var k=n(86923);const A=300,C={type:"fade",direction:"none",time:150},S={type:"none",direction:"none",time:0},T={type:"slide",direction:"forward",time:A},_={type:"slide",direction:"back",time:A};const E=(0,k.Ay)("div",{target:"e11qurlh2"})({name:"1i1zgvg",styles:"display:flex;flex-direction:column;flex-grow:1;overflow:hidden"}),I=(0,k.Ay)("div",{target:"e11qurlh1"})({name:"1k0vitj",styles:"display:flex;flex-direction:column;flex:1;overflow:hidden;position:relative"}),z=(0,k.Ay)("div",{target:"e11qurlh0"})("display:flex;flex-direction:column;flex-grow:1;overflow:hidden;z-index:2;&.fade-enter ",E.className,"{opacity:0;}&.fade-exit ",E.className,"{opacity:1;}&.fade-exit,&.slide-exit,&.sheet-exit.up,&.sheet-enter.down,&.none-exit{position:absolute;display:flex;flex-direction:column;flex-grow:1;top:0;left:0;right:0;bottom:0;overflow:hidden;z-index:1;}&[data-fin-messenger='true']{&.fade-exit,&.slide-exit,&.sheet-exit,&.none-exit{visibility:hidden;}}&.fade-enter-active ",E.className,"{opacity:1;transition:opacity ",150,"ms;}&.fade-exit-active ",E.className,"{opacity:0;transition:opacity ",150,"ms;}&:not([data-fin-messenger='true']){&.slide-enter ",E.className,"{opacity:0;}&.slide-enter-active ",E.className,"{opacity:1;transition:opacity ",150,"ms;transition-delay:",150,"ms;}&.slide-exit ",E.className,"{opacity:1;}&.slide-exit-active ",E.className,"{opacity:0;transition:opacity ",150,"ms;}&.slide-enter.forward ",I.className,"{transform:translateX(20px);}&.slide-enter.back ",I.className,"{transform:translateX(-20px);}&.slide-enter.slide-enter-active ",I.className,"{transform:translateX(0);transition:transform ",150,"ms;transition-delay:",150,"ms;}&.slide-exit ",I.className,"{transform:translateX(0px);}&.slide-exit-active.forward ",I.className,"{transform:translateX(-20px);transition:transform ",150,"ms;}&.slide-exit-active.back ",I.className,"{transform:translateX(20px);transition:transform ",150,"ms;}}&.sheet-enter.up,&.sheet-enter-appear.up{position:relative;transform:translateY(100%);}&.sheet-enter-active.up{transform:translateY(0%);transition:transform ",450,"ms;}&.sheet-exit.down,&.sheet-exit-appear.down{position:relative;transform:translateY(0%);}&.sheet-exit-active.down{transform:translateY(100%);transition:transform ",450,"ms;}"),N=(0,b.createContext)(null);N.displayName="HeaderContext";const M=()=>{const e=(0,b.useContext)(N);if(!e)throw new Error("useHeaderContext must be used within a HeaderContext.Provider");return e},R=({initialWhiteBackground:e,initialHeight:t,defaultWhiteBackground:n})=>{const[i,r]=(0,b.useState)(e),[o,a]=(0,b.useState)(t);return(0,b.useMemo)((()=>({whiteBackground:i,setWhiteBackground:r,defaultWhiteBackground:n,height:o,setHeight:a})),[i,r,n,o,a])};var B=n(183),P=n(32836);const L=(0,b.createContext)(null);L.displayName="PageTransitionContext";const O=()=>(0,b.useContext)(L),D=({transition:e,transitionKey:t,children:n})=>{const i=(0,b.useRef)({});i.current[t]||=(0,b.createRef)();const r=i.current[t],o=(0,m.GV)(x.iO),a=M(),s=(0,b.useMemo)((()=>Object.assign({},a,{setHeight:P.K,setWhiteBackground:P.K})),[a]);return(0,v.jsx)(B.F,{component:null,childFactory:t=>(0,b.cloneElement)(t,{ariaHidden:!0,classNames:`${e.direction} ${e.type}`,timeout:e.time}),children:(0,v.jsx)(B.B1,{timeout:0,unmountOnExit:!0,nodeRef:r,children:t=>(0,v.jsx)(L.Provider,{value:{transition:e,state:t},children:(0,v.jsx)(N.Provider,{value:"exiting"===t||"exited"===t?s:a,children:(0,v.jsx)(z,{ref:r,"data-fin-messenger":o?"true":void 0,children:n})})})},t)})},H=()=>{const[e]=(0,b.useState)((0,a.useOutlet)());return e};function F(){const e=(0,a.useNavigate)(),t=(0,a.useLocation)(),n=(0,g.wR)(t.pathname),i=(0,b.useCallback)(((t,n)=>{e(`/${t}${n?`?${n}`:""}`)}),[e]);return(0,b.useMemo)((()=>({showSpace:i,currentSpace:n})),[i,n])}const V=({getTransition:e})=>{const t=(0,a.useLocation)(),[n,i]=(0,b.useState)(t),[r,o]=(0,b.useState)(t);(0,b.useEffect)((()=>{t.pathname!==n.pathname&&(i(t),o(n))}),[t,n]);const s=e(r,n);return(0,v.jsx)(D,{transition:s,transitionKey:n.pathname,children:(0,v.jsx)(H,{})})},G=({header:e,children:t})=>{const{currentSpace:n}=F(),i=`spaces-${n.id}`,r=`${i}-panel`;return(0,v.jsxs)(E,{children:[null!==e&&e,(0,v.jsx)(I,{id:r,role:"tabpanel","aria-labelledby":`${i}-tab`,children:t})]})};const $=(0,k.Ay)("div",{target:"e1ch7n1d3"})("overflow-y:auto;overflow-x:hidden;min-height:100%;overscroll-behavior:contain;scrollbar-color:",(0,k.w4)("alphaBlack40")," transparent;scrollbar-width:thin;&::-webkit-scrollbar{appearance:none;width:5px;}&::-webkit-scrollbar-thumb{background-color:",(0,k.w4)("alphaBlack40"),";border-radius:5px;}&::-webkit-scrollbar-track{background-color:transparent;}"),q=(0,k.Ay)("div",{target:"e1ch7n1d2"})("display:flex;flex-direction:column;gap:10px;margin-top:",(({homeBackgroundType:e})=>(e=>{switch(e){case"colors":case"solid":return"-125px";case"image":return"-55px";default:return"-34px"}})(e)),";"),U=(0,k.Ay)("div",{target:"e1ch7n1d1"})({name:"jxxlxm",styles:"height:159px"});var W={name:"pbbd9q",styles:"padding-bottom:0px"};const K=(0,k.Ay)("div",{target:"e1ch7n1d0"})("display:flex;flex-direction:column;box-sizing:border-box;padding:",(({theme:e})=>`0px ${e.globalHorizontalPadding}px`),";min-height:100%;",(({isIntercomLinkEnabled:e})=>e&&W),";");var X=n(97132),Y=n(93346),Z=n(90933),J=n(84079);const Q=(0,X.Mz)((e=>e.home),(e=>{var t,n,i,r,o;if(null==e||!e.header)return{greeting:void 0,introduction:void 0,logoUrl:void 0,textColorType:void 0,showAvatars:void 0};const{header:a}=e,s=null==a||null==(t=a.content)?void 0:t.greeting,l=null==a||null==(n=a.content)?void 0:n.showAvatars;return{greeting:s,introduction:null==a||null==(i=a.content)?void 0:i.introduction,logoUrl:null==a||null==(r=a.content)?void 0:r.logoUrl,textColorType:null==a||null==(o=a.content)?void 0:o.textColorType,showAvatars:l}})),ee=e=>{var t;return null==(t=e.home)||null==(t=t.header)?void 0:t.background},te=e=>e.home,ne=e=>e.home.isStale,ie=({home:{cards:e}})=>null==e?void 0:e.find((e=>"recent_conversation"===e.type)),re=(0,X.Mz)(ie,(e=>(null==e?void 0:e.limit)||1)),oe=(0,X.Mz)(Y.Ay,(e=>e.newConversation),((e,t)=>{const n=(0,Z.dT)(e),i=(0,J.h)(n.filter(ce),(e=>e.id));return t&&1===t.parts.length&&"saving"===t.parts[0].saveState&&i.unshift(t),i})),ae=(0,X.Mz)(oe,re,((e,t)=>e.slice(0,t))),se=(0,X.Mz)(ae,Y.Ay,((e,t)=>e.length<t.length)),le=(0,X.Mz)(te,(({cards:e=[]})=>{return t="help_center",e.some((e=>e.type===t));var t}));function ce(e){return e.eligibleForRecentConversations&&!e.excludeFromConversationsList}const de=(0,X.Mz)([le,x.TB,x.Ei],((e,t,n)=>(!e||!t)&&n)),ue=(0,X.Mz)(oe,(e=>e&&e.length>0)),pe=(0,X.Mz)(ie,ue,((e,t)=>(null==e?void 0:e.conversations.length)>0||t)),he=({home:{cards:e}})=>null==e?void 0:e.find((e=>"new_conversation"===e.type)),me=(0,X.Mz)(x.Er,te,de,le,pe,((e,{cards:t=[],isFetched:n,isFailed:i},r,o,a)=>{const s=n&&e;let l=t;return l=l.filter((e=>{switch(e.type){case"recent_conversation":return a;case"new_conversation":return r;case"help_center":return o;default:return!0}})),{slots:l,isFetched:s,isFailed:i}}));var ge=n(32485),xe=n.n(ge),fe=n(5821);class HomeScreenMessengerCard extends b.PureComponent{getClassName(){return xe()({"intercom-home-screen-messenger-card":!0,[`intercom-home-screen-messenger-card-${this.props.index}`]:!0})}render(){const{cardUri:e,isFetched:t,index:n}=this.props;return t&&(0,v.jsx)("div",{className:this.getClassName(),children:(0,v.jsx)(fe.Ay,{cardUri:e,homeScreenIndex:n})})}}var ve=n(62838),ye=n(44458);const be=(0,k.Ay)("div",{target:"e4hvvep3"})({name:"1nsqd2r",styles:"display:flex;flex-direction:column;gap:8px;padding:8px;font-size:14px;line-height:21px"}),we=(0,k.Ay)("button",{target:"e4hvvep2"})("display:flex;justify-content:space-between;align-items:center;width:100%;height:40px;box-sizing:border-box;padding:10px 12px;font-weight:600;background:",(0,k.w4)("containerNeutral"),";border-radius:8px;color:",(0,k.w4)("textDefault"),";transition:background 250ms;&:hover{color:",(({theme:e})=>e.isPrimaryColorAsTheme?e.textDefault:e.primaryColor),";background:",(({theme:e})=>e.isPrimaryColorAsTheme?e.containerEmphasisNeutral:(0,ve.vf)(e.primaryColor,.1)),";}",(({useDarkBackground:e,theme:t})=>!e&&(0,k.AH)("background:",t.containerBaseNeutral,";&:hover{background:none;}")),";"),je=(0,k.Ay)("div",{target:"e4hvvep1"})("line-height:1.5;color:",(0,k.w4)("textMuted"),";"),ke=(0,k.Ay)("div",{target:"e4hvvep0"})("display:flex;align-items:center;justify-content:space-between;margin:0 12px 4px;color:",(0,k.w4)("textMuted"),";padding-top:4px;",ye.Z.className,"{width:28px;height:28px;}",(({showDivider:e,theme:t})=>e&&(0,k.AH)("padding-top:12px;border-top:1px solid ",t.borderEmphasisNeutral,";")),";");var Ae=n(64845),Ce=n(93656),Se=n(38762),Te=n(11724);var _e={name:"2b8jyz",styles:"flex-direction:row-reverse"};const Ee=(0,k.Ay)("div",{target:"e85jzrc1"})("display:flex;flex:0 0 auto;align-items:",(({alignItems:e})=>e),";margin-right:",(({marginRight:e})=>e),";white-space:nowrap;width:fit-content;overflow:hidden;line-height:1;",(({theme:e})=>e.isRtlLocale&&_e),";",(({useCutout:e,useAppColorForAvatarBorder:t,borderWidth:n,borderPrimaryColor:i,avatarSize:r,avatarPixelsToShow:o,cutoutSize:a,theme:s})=>e?(0,k.AH)(ze.className,":not(:first-of-type) ",ye.Z.className,"{mask:",function(e,t,n){const i=e/2+1;return`radial-gradient(circle at ${e/2-t+n}px, transparent ${i}px, white ${i+1}px)`}(r,o,a),";}"):(0,k.AH)(ye.Z.className,"{border:",n,"px solid ",i?s.primaryColor:t?s.appSecondaryColor:s.borderNeutral,";}")),";");var Ie={name:"1dk0v5d",styles:"z-index:2"};const ze=(0,k.Ay)("div",{target:"e85jzrc0"})("display:inline-block;z-index:1;",(({front:e})=>e&&Ie),";&:not(:first-of-type){/* @noflip */margin-left:",(0,k.xk)("marginLeft"),"px;}");var Ne=n(55073);const Me=(0,b.createContext)(null);Me.displayName="AvatarStackContext";const Re=()=>{const e=(0,b.useContext)(Me);if(!e)throw new Error("AvatarStack compound components cannot be rendered outside the AvatarStack component");return e},Be=({front:e=!1,children:t})=>{const{avatarPixelsToShow:n,avatarSize:i}=Re(),r=n-i;return(0,v.jsx)(ze,{front:e,marginLeft:r,"data-testid":"avatar-stack-item",children:t})},Pe=({avatarPixelsToShow:e=44,avatarSize:t=52,useAppColorForAvatarBorder:n=!1,marginRight:i="6px",borderWidth:r=2,borderPrimaryColor:o=!1,useCutout:a=!1,cutoutSize:s=0,alignItems:l="center",children:c})=>{const d=(0,b.useMemo)((()=>({avatarPixelsToShow:e,avatarSize:t})),[e,t]);return(0,v.jsx)(Ee,{marginRight:i,useAppColorForAvatarBorder:n,borderWidth:r,borderPrimaryColor:o,useCutout:a,avatarSize:t,avatarPixelsToShow:e,cutoutSize:s,alignItems:l,"data-testid":"avatar-stack",children:(0,v.jsx)(Me.Provider,{value:d,children:(0,v.jsx)(Ne.m.Provider,{value:t,children:c})})})},Le=Be;var Oe=n(91889),De=n(93573);const He=["admins","maxAdmins","solidBackground"];const Fe=e=>{let{admins:t,maxAdmins:n=6,solidBackground:i}=e,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,He);const o=(0,m.GV)(x.u5),a=t||o;return(0,v.jsx)(Pe,Object.assign({},r,{children:(0,De.v)(a,n,!0).map(((e,t)=>(0,v.jsx)(Le,{children:(0,v.jsx)(Oe.l,{solidBackground:i&&a.length>1,admin:e,size:r.avatarSize})},t)))}))};var Ve=n(69830),Ge=n(84328);const $e={};function qe({object:e="",place:t="",context:n=Ge.oZ,metadata:i=$e,sendMetricCondition:r=!0}){const o=(0,m.jL)();(0,b.useEffect)((()=>{r&&o(((r,o)=>{const{user:a}=o();(0,Ve.Jr)(a,"viewed",e,t,n,i)}))}),[e,t,n,r,o])}var Ue=n(57296),We=n(41817),Ke=n(39502),Xe=n(49651);const Ye=({index:e,suggestions:t,metadata:n={}})=>{const i=(0,m.jL)(),{showSpace:r}=F(),o=(0,m.GV)(x.Jh),a=(0,m.GV)(Ke.wc),s=(0,m.GV)(g.j7),l=(null==t?void 0:t.length)||0,c=null==t?void 0:t.map((({id:e})=>e)),d=!(null==t||!t.length),u=!d&&!o;(0,b.useEffect)((()=>{!s&&a&&i((0,We.I8)())}),[i,a,s]);return qe({object:Ge.zU,place:Ge.mM,context:Ge.Ey,metadata:{home_screen_index:e,article_suggestions:Object.assign({loaded:!!t,articles_count:l,articles_shown:c},n)},sendMetricCondition:!0}),qe({object:Ge.pi,place:Ge.oq,context:Ge.G,metadata:Object.assign({articles_count:l,articles_shown:c},n),sendMetricCondition:l>0}),(0,v.jsx)(Ae.A,{noPadding:!0,isEntireCardClickable:u,className:"intercom-home-screen-search-browse-card",children:(0,v.jsxs)(be,{children:[(0,v.jsxs)(we,{useDarkBackground:!u,onClick:()=>{i((0,We.lm)({object:Ge.ef,place:Ge.mM,context:Ge.Ey})),r(p.ZL.id,"fromHome=true")},children:[(0,v.jsx)("span",{children:(0,Xe.Tl)("search_for_help")}),(0,v.jsx)(Te.Ay,{type:"Search",size:16,color:"linkColor"})]}),d?(0,v.jsx)(Ce.A,{noDivider:!0,children:null==t?void 0:t.map(((e,t)=>(0,v.jsx)(Se.A,{"data-testid":"search-browse-item",size:"tiny",rightIcon:"RightChevronColorable",rightIconColor:"linkColor",hoverBackground:!0,rounded:!0,onClick:()=>{return r=e,o=t,i((0,We.lm)({object:Ge.eu,place:Ge.oq,context:Ge.G,metadata:Object.assign({article_id:r.id,position:o},n)})),void i((0,Ue.n$)(r.id,{},!0));var r,o},children:(0,v.jsx)(je,{children:e.title})},t)))}):null,o&&(0,v.jsxs)(ke,{showDivider:d,children:[(0,v.jsx)("span",{children:(0,Xe.Tl)("the_team_can_help_if_needed")}),(0,v.jsx)(Fe,{avatarSize:24,maxAdmins:3,avatarPixelsToShow:12,useAppColorForAvatarBorder:!1})]})]})})},Ze=(0,k.Ay)("div",{target:"e10s8q3e0"})();var Je=n(31416);const Qe={opacity:0},et={opacity:1};function tt(e){const{children:t,duration:n=200,animationKey:i}=e,r=(0,b.useRef)(null),[o,a]=(0,b.useState)(null);(0,b.useEffect)((()=>{t?(clearTimeout(r.current),a(t)):r.current=setTimeout((()=>a(null)),n||0)}),[t,n]),(0,b.useEffect)((()=>()=>clearTimeout(r.current)),[]);return(0,s.pn)(t,{from:Qe,enter:et,leave:Qe,config:{duration:n},immediate:!1,keys:(0,b.isValidElement)(t)?t.key??i??"static":null})(((e,n)=>n?(0,v.jsx)(s.CS.div,{style:e,children:o||t}):null))}const nt=({visible:e,onRetry:t})=>(0,v.jsx)(Ze,{children:(0,v.jsx)(tt,{duration:200,animationKey:"error-message",children:e?(0,v.jsx)(Je.A,{inline:!0,onRetry:t,children:(0,Xe.Tl)("couldnt_load_apps")}):null})});var it=n(17409);const rt=(0,k.Ay)("div",{target:"e2j9h0w9"})({name:"bjn8wh",styles:"position:relative"}),ot=(0,k.Ay)("div",{target:"e2j9h0w8"})("height:",(({height:e})=>`${e}px`),";width:100%;position:fixed;top:0%;left:0;transform:translateZ(0);z-index:-1;",(({backgroundType:e,gradientColors:t})=>"colors"===e&&Array.isArray(t)&&(0,k.AH)("background-image:",t&&2===(null==t?void 0:t.length)?`linear-gradient(117.67deg, ${t[0]}, ${t[1]})`:"",";background-image:",t&&3===(null==t?void 0:t.length)?`linear-gradient(117.67deg, ${t[0]}, ${t[1]}, ${t[2]})`:"",";")),";",(({backgroundType:e,theme:t})=>"solid"===e&&(0,k.AH)("background-color:",t.homeHeaderBackgroundColor,";")),";",(({imageUrl:e})=>e&&(0,k.AH)("background-image:url(",e,");background-size:",e.endsWith(".gif")?"cover":"100%",";background-position:",e.endsWith(".gif")?"center":"top left",";")),";"),at=(0,k.Ay)("canvas",{target:"e2j9h0w7"})({name:"w1atjl",styles:"width:100%;height:100%"}),st=(0,k.Ay)("div",{target:"e2j9h0w6"})("padding-top:32px;padding-right:20px;padding-left:20px;box-sizing:border-box;background-repeat:no-repeat;position:relative;",(({theme:e,opacity:t})=>(0,k.AH)("color:",e.headerTitleColor,";opacity:",t,";"))," ",(({size:e})=>e&&(0,k.AH)("padding-bottom:",(e=>{switch(e){case"medium":return"80px";case"long":return"150px";default:return"60px"}})(e),";")),";");var lt={name:"aetk3e",styles:"height:80px"};const ct=(0,k.Ay)("div",{target:"e2j9h0w5"})("position:absolute;bottom:0;left:0;height:140px;width:100%;opacity:1;z-index:0;/* @noflip */background:linear-gradient(\n    180deg,\n    ",(0,k.w4)("baseAlpha")," 0%,\n    ",(0,k.w4)("containerBaseNeutral")," 100%\n  );",(({short:e})=>e&&lt),";");var dt={name:"9vhnwp",styles:"img{max-width:100%;object-fit:scale-down;}"},ut={name:"108qp7n",styles:"margin-bottom:-20px"};const pt=(0,k.Ay)("div",{target:"e2j9h0w4"})("font-size:25px;font-weight:bold;margin-top:4px;overflow:hidden;img{max-height:32px;max-width:100%;}",(e=>e.logoOnly&&ut)," ",(({showCloseButton:e})=>e&&dt),";"),ht=(0,k.Ay)(it.A,{target:"e2j9h0w3"})("color:",(0,k.w4)("introductionTextColor"),";opacity:1;",(({useMutedText:e,theme:t})=>e&&(0,k.AH)("color:",t.greetingTextColor,";"))," ",(({backgroundType:e,textColorType:t,useMutedText:n,theme:i})=>(0,k.AH)("color:",t?"dark"===t?i.textBlack:i.textWhite:i.textDefault,";text-shadow:0px 0px 30px ",t?"dark"===t?i.headerTextShadowLight:i.headerTextShadowDark:"dark"===i.themeMode?i.headerTextShadowLight:i.headerTextShadowDark,";opacity:",n?gt(e):1,";")),";"),mt=(0,k.Ay)("div",{target:"e2j9h0w2"})("display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin-bottom:70px;height:40px;",(({reserveSpaceOnRight:e})=>e&&(0,k.AH)(pt.className,"{margin-right:40px;}",ft.className,"{margin-left:0px;}")),";"),gt=e=>{switch(e){case"colors":case"image":return.6;default:return 1}},xt=(0,k.Ay)("div",{target:"e2j9h0w1"})({name:"1w0b59e",styles:"font-size:28px;line-height:34px;*{overflow-wrap:break-word;font-weight:600;}"}),ft=(0,k.Ay)("div",{target:"e2j9h0w0"})((({withSpaceForCloseButton:e,scrollbarVisible:t})=>e&&(0,k.AH)("margin-right:",t?"24px":"42px",";margin-left:10px;")),";"),vt=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,yt=210,bt=130,wt=1e3/60-3,jt=2*Math.PI;class GlowParticle{constructor(e,t,n,i){this.x=void 0,this.y=void 0,this.radius=void 0,this.rgb=void 0,this.vx=void 0,this.vy=void 0,this.firstColor=void 0,this.secondColor=void 0,this.x=e,this.y=t,this.radius=n,this.firstColor=`rgba(${i.r}, ${i.g} ,${i.b}, 1)`,this.secondColor=`rgba(${i.r}, ${i.g} ,${i.b}, 0)`,this.vx=.2*Math.random(),this.vy=.2*Math.random()}update(e,t){this.x+=this.vx,this.y+=this.vy,this.x<=0?(this.vx*=-1,this.x+=1):this.x>=e&&(this.vx*=-1,this.x-=1),this.y<=0?(this.vy*=-1,this.y+=1):this.y>=t&&(this.vy*=-1,this.y-=1)}draw(e){e.beginPath();const t=Math.floor(this.x),n=Math.floor(this.y),i=e.createRadialGradient(t,n,.01*this.radius,t,n,this.radius);i.addColorStop(0,this.firstColor),i.addColorStop(1,this.secondColor),e.fillStyle=i,e.arc(t,n,this.radius,0,jt,!1),e.fill(),e.closePath()}}const kt=({colors:e})=>{const t=(0,b.useRef)(null),[n]=(0,b.useState)((()=>{const t=e.map((e=>{const t=vt.exec(e.trim());return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}));const n=Math.min(yt,bt),i=.8*n,r=.6*n,o=[];let a=0;for(let e=0;e<16;e++){const n=new GlowParticle(Math.random()*yt,Math.random()*bt,Math.random()*(i-r)+r,t[a]||{r:0,g:0,b:0});++a>=t.length&&(a=0),o[e]=n}return o})());return(0,b.useEffect)((()=>{const e=t.current;if(!e)return;const i=e.getContext("2d");if(!i)return;i.globalCompositeOperation="saturation";let r,o=(new Date).getTime()-wt;const a=()=>{const e=(new Date).getTime();e-o>=wt&&((()=>{i.clearRect(0,0,yt,bt);for(const e of n)e.draw(i),e.update(yt,bt)})(),o=e),r=window.parent.requestAnimationFrame(a)};return a(),()=>{cancelAnimationFrame(r)}}),[t,n]),(0,v.jsx)(at,{ref:t,width:yt,height:bt})};var At=n(44674);function Ct({title:e,subtitle:t,logo:n,showAvatars:i=!0,children:r,opacity:o=1,background:a,textColorType:s,closeButtonEnabled:l,scrollbarVisible:c}){const[{height:d},u]=(0,At.A)(),p=(0,m.GV)((e=>e.app.name)),h="colors"===(null==a?void 0:a.type)&&(null==a?void 0:a.animated),g=!("image"!==(null==a?void 0:a.type)||null==a||!a.imageUrl),x=p?`${p} logo`:"Company logo";return(0,v.jsxs)(rt,{children:[(0,v.jsxs)(ot,{height:d,backgroundType:null==a?void 0:a.type,gradientColors:null==a?void 0:a.gradient,fadeToTheme:null==a?void 0:a.fadeToTheme,imageUrl:g?a.imageUrl:void 0,children:[h&&null!=a&&a.gradient?(0,v.jsx)(kt,{colors:a.gradient}):null,(null==a?void 0:a.fadeToTheme)&&(0,v.jsx)(ct,{short:g})]}),(0,v.jsxs)(st,{opacity:o,ref:u,size:null!=a&&a.fadeToTheme?g?"medium":"long":"short",children:[(0,v.jsxs)(mt,{hasLogo:!!n,showCloseButton:l,reserveSpaceOnRight:i||l,children:[n&&(0,v.jsx)(pt,{logoOnly:!(e||t),showCloseButton:l,children:(0,v.jsx)("img",{src:n,alt:x})}),i&&(0,v.jsx)(ft,{withSpaceForCloseButton:l,"data-testid":"home-header-avatars",scrollbarVisible:c,children:(0,v.jsx)(Fe,{solidBackground:!0,avatarSize:40,useCutout:!0,cutoutSize:1,maxAdmins:3,avatarPixelsToShow:38,useAppColorForAvatarBorder:!0})})]}),(0,v.jsxs)(xt,{children:[e&&(0,v.jsx)(ht,{"data-testid":"title",text:e,tagName:"h1",useMutedText:!!t,backgroundType:null==a?void 0:a.type,textColorType:s}),t&&(0,v.jsx)(ht,{"data-testid":"subtitle",text:t,tagName:"h1",useMutedText:!1,backgroundType:null==a?void 0:a.type,textColorType:s})]}),r]})]})}var St=n(96808);const Tt=(0,k.Ay)("div",{target:"e1b44tca0"})({name:"t26g63",styles:"margin:auto;width:fit-content"});var _t=n(17905);const Et=(0,k.Ay)("div",{target:"etajtt47"})({name:"hxbng4",styles:"font-weight:600;font-size:14px;line-height:21px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;white-space:normal;margin-bottom:4px"}),It=(0,k.Ay)("div",{target:"etajtt46"})("display:flex;flex-direction:column;box-sizing:border-box;cursor:pointer;transition:box-shadow 150ms;background-color:",(0,k.w4)("containerBaseNeutral"),";color:",(0,k.w4)("textDefault"),";border-radius:12px;box-shadow:",(0,k.w4)("shadowMedium"),";border:1px solid ",(0,k.w4)("borderNeutral"),";",_t.jt.className,"{background-color:transparent;}",(({theme:e})=>(0,k.AH)("&:hover{",Et.className,"{color:",e.isPrimaryColorAsTheme?e.textDefault:e.primaryColor,";}}"))," ",(({theme:e})=>e.isPrimaryColorAsTheme&&(0,k.AH)("&:hover{box-shadow:",e.shadowMedium,";}")),";"),zt=(0,k.Ay)("div",{target:"etajtt45"})({name:"kimquz",styles:"height:140px;display:flex;flex-direction:column;img{width:100%;height:100%;object-fit:cover;overflow:hidden;border-radius:10px 10px 0px 0px;}"}),Nt=(0,k.Ay)("div",{target:"etajtt44"})({name:"1r1l02z",styles:"flex:1;display:flex;flex-direction:column;padding:16px 20px"}),Mt=(0,k.Ay)("div",{target:"etajtt43"})({name:"pbqhtn",styles:"display:flex;align-items:center;padding-top:12px"}),Rt=(0,k.Ay)("div",{target:"etajtt42"})({name:"1t91kdm",styles:"flex:1;display:flex;flex-direction:column"}),Bt=(0,k.Ay)("div",{target:"etajtt41"})("display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;font-size:14px;line-height:21px;color:",(0,k.w4)("textDefault"),";"),Pt=(0,k.Ay)("div",{target:"etajtt40"})({name:"rh860e",styles:"margin-left:20px;svg{margin-top:20px;min-width:auto;}"});var Lt=n(6377),Ot=n(80607);function Dt(e){return(t,n)=>{const{session:i}=n();return t({type:Ot.GGM}),Lt.Ay.fetchNewsItemDetails(i,e).then((e=>{t(function(e){return{type:Ot.cgs,newsItem:e}}(e))})).catch((()=>{t(function(e){return{type:Ot.D8v,newsItemId:e}}(e))}))}}function Ht(e,t){return async(n,i)=>{const{session:r}=i();return Lt.Ay.recordNewsItemReaction(r,e,t).then((i=>{i&&n(function(e,t){return{type:Ot.cRm,newsItemId:e,reactionIndex:t}}(e,t))}))}}const Ft=(0,k.Ay)("div",{target:"e1w83g171"})({name:"cl7urv",styles:"display:flex;flex-wrap:wrap;gap:8px"}),Vt=(0,k.Ay)("div",{target:"e1w83g170"})("display:flex;flex-direction:row;align-items:center;font-weight:400;font-size:14px;line-height:22px;color:",(0,k.w4)("linkColor"),";padding:0px 6px 0px 6px;background:",(0,k.w4)("labelBackgroundColor"),";border:0px;border-radius:10px;");function Gt({newsItem:e,preview:t}){let n=e.labels||[];if(0===n.length)return null;if(t&&n.length>2){const[e,...t]=n;n=[e],t.length>0&&n.push({id:-1,name:(0,Xe.Tl)("extra_labels_count",{labels_count:String(t.length)})})}return(0,v.jsx)(Ft,{children:n.map((e=>(0,v.jsx)(Vt,{children:e.name},e.id)))})}var $t=n(48365);function qt({newsItem:e,isUnread:t,renderingContext:n}){const i=(0,a.useNavigate)(),r=(0,m.jL)(),o=(0,b.useCallback)((()=>{r(function(e){return{type:Ot.Pd4,newsItem:e}}(e)),i(`/news/details/${e.id}`,{state:{navigatingFrom:n}})}),[i,r,e,n]);return(0,v.jsxs)(It,{isUnread:t,onClick:o,"data-testid":"news-item-card",children:[e.coverImageUrl&&(0,v.jsx)(zt,{children:(0,v.jsx)("img",{src:e.coverImageUrl,alt:""})}),(0,v.jsxs)(Nt,{children:[(0,v.jsx)(Gt,{newsItem:e,preview:!0}),(0,v.jsxs)(Mt,{children:[(0,v.jsxs)(Rt,{children:[(0,v.jsx)(Et,{children:e.title}),(0,v.jsx)(Bt,{children:(0,v.jsx)($t.y,{text:e.description,tagName:"div",className:"intercom-block-paragraph"})})]}),(0,v.jsx)(Pt,{children:(0,v.jsx)(Te.Ay,{size:16,type:"RightChevronColorable",color:"linkColor"})})]})]})]})}var Ut=n(72374);function Wt(e,t){return t&&e.publishedAt&&t.getTime()>=e.publishedAt.getTime()}var Kt=n(28957);function Xt(){const e=(0,m.jL)(),t=(0,m.GV)(Ut.Tm),n=(0,m.GV)(Ut.Xg),i=(0,m.GV)(Ut.RT);return(0,b.useEffect)((()=>{!i&&n&&e((0,Kt.L2)())}),[i,n,e]),{loading:i,newsItems:t}}function Yt(){const{loading:e,newsItems:t}=Xt(),n=(0,m.GV)(Ut.AL),i=(0,m.GV)(Ut.DF)||0,r=void 0!==i&&i>0;if(!(e||t&&0!==t.length))return null;if(e&&(!t||0===t.length))return(0,v.jsx)(Tt,{children:(0,v.jsx)(w.A,{inline:!0})});if(t){const e=t[0],i=r&&!Wt(e,n);return(0,v.jsx)(qt,{newsItem:e,isUnread:i,renderingContext:Ge.vU})}return null}function Zt(){const e=(0,m.GV)(Ut.Tm),t=e&&e.length>0&&e[0];return qe({object:Ge.a6,place:Ge.mM,context:Ge.vU,metadata:{news_item_id:null==t?void 0:t.id},sendMetricCondition:!!t}),(0,v.jsx)(Yt,{})}var Jt=n(94560),Qt=n(26265);const en=({primaryAvatar:e,secondAvatar:t,thirdAvatar:n,facePileStyle:i="default",size:r=64})=>{const o=r,a=.75*o,s=a/12,l=.5*o,c=n||t,d=n?t:null;return"greeting"===i&&!d&&c?(0,v.jsxs)(Pe,{borderWidth:1,marginRight:"0",alignItems:"flex-end",children:[(0,v.jsx)(Le,{children:(0,v.jsx)(Ne.m.Provider,{value:o,children:e})}),(0,v.jsx)(Le,{front:!0,children:(0,v.jsx)(Ne.m.Provider,{value:l,children:c})})]}):(0,v.jsxs)(Pe,{borderWidth:s,marginRight:"0",children:[d?(0,v.jsx)(Le,{children:(0,v.jsx)(Ne.m.Provider,{value:a,children:d})}):null,(0,v.jsx)(Le,{front:!0,children:(0,v.jsx)(Ne.m.Provider,{value:o,children:e})}),c?(0,v.jsx)(Le,{children:(0,v.jsx)(Ne.m.Provider,{value:a,children:c})}):null]})},tn=({size:e="large"})=>{const t=(0,m.GV)(x.Lf),{activeAdmins:n=[]}=(0,m.GV)(x.rp),i=(0,m.GV)(x._D),r=(0,De.v)(n||[],2,!0);return(0,v.jsx)(en,{size:"large"===e?64:32,primaryAvatar:(0,v.jsx)(Oe.l,{admin:t.participant}),secondAvatar:i&&r[0]?(0,v.jsx)(Oe.l,{admin:r[0]}):null,thirdAvatar:i&&r[1]?(0,v.jsx)(Oe.l,{admin:r[1]}):null})};const nn=(0,k.Ay)("div",{target:"e15cg9301"})({name:"1yfrhj8",styles:"display:flex;flex-direction:row;align-items:center;gap:8px;margin:-3px 0"}),rn=(0,k.Ay)("div",{target:"e15cg9300"})("color:",(0,k.w4)("textMuted"),";font-size:14px;line-height:1.5;word-wrap:break-word;overflow-wrap:break-word;"),on=({title:e,subtitle:t,onClick:n,right:i,rightIcon:r})=>(0,v.jsx)(Ae.A,{noPadding:!0,isEntireCardClickable:!0,onClick:n,children:(0,v.jsxs)(Se.A,{right:i,rightIcon:r,rightIconColor:"linkColor",children:[(0,v.jsx)(Ae.A.Title,{children:e}),(0,v.jsx)(rn,{children:t})]})}),an=()=>{const e=(0,m.jL)(),t=(0,m.GV)(he),n=(0,m.GV)(x.Lf),i=()=>{(0,Ve.A5)("clicked","new_conversation","messenger","home"),e((0,Jt.p6)())},r=(0,b.useMemo)((()=>{var e,n;return null!=t&&t.action?{title:t.action.label,subtitle:t.action.subtitle,icon_type:(null==(e=t.action.avatar_details)?void 0:e.type)??t.action.icon??("AskQuestion"===t.action.custom_icon?Qt.Bn.bot:Qt.Bn.teammate),avatars:null==(n=t.action.avatar_details)?void 0:n.avatars,icon:t.action.custom_icon}:{title:(0,Xe.Tl)("send_us_a_message"),subtitle:(0,Xe.Tl)("send_us_a_message_subtitle"),icon_type:Qt.Bn.teammate}}),[t]);if(r.icon_type===Qt.Bn.bot)return(0,v.jsx)(on,{title:r.title||(0,Xe.Tl)("send_us_a_message"),subtitle:r.subtitle,onClick:i,rightIcon:"AskQuestion"});if(r.icon_type===Qt.Bn.fin){const e=(null==n?void 0:n.participant)&&(0,v.jsxs)(nn,{children:[(0,v.jsx)(Oe.l,{size:24,admin:n.participant}),(0,v.jsx)(Te.Ay,{type:"RightChevronColorable",color:"linkColor",size:16})]});return(0,v.jsx)(on,{title:r.title||(0,Xe.Tl)("send_us_a_message"),subtitle:r.subtitle,onClick:i,right:e})}if(r.icon_type===Qt.Bn.facepile&&"RightChevronColorable"===r.icon){const e=(null==n?void 0:n.participant)&&(0,v.jsxs)(nn,{children:[(0,v.jsx)(tn,{size:"small"}),(0,v.jsx)(Te.Ay,{type:"RightChevronColorable",color:"linkColor",size:16})]});return(0,v.jsx)(on,{title:r.title||(0,Xe.Tl)("send_us_a_message"),subtitle:r.subtitle,onClick:i,right:e})}if(r.icon_type===Qt.Bn.facepile&&"RightChevronColorable"!==r.icon){const e=(null==n?void 0:n.participant)&&(0,v.jsx)(tn,{size:"small"});return(0,v.jsx)(on,{title:r.title||(0,Xe.Tl)("send_us_a_message"),subtitle:r.subtitle,onClick:i,right:e})}return(0,v.jsx)(on,{title:r.title||(0,Xe.Tl)("send_us_a_message"),subtitle:r.subtitle,onClick:i,rightIcon:"NewConversation"})};var sn=n(1200),ln=n(95970),cn=n(73669),dn=n(53074);const un=e=>(0,cn.OO)(e.parts.filter((e=>!(0,dn.A)(e.partType)))),pn=e=>!(e.read||"whatsapp"===e.currentChannel);var hn=n(80628);const mn=(0,k.Ay)("div",{target:"e18wzgio11"})("overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:14px;font-weight:",(({unread:e})=>e?600:400),";color:",(0,k.w4)("textDefault"),";"),gn=(0,k.Ay)("div",{target:"e18wzgio10"})({name:"hl0pzu",styles:"display:flex;flex-direction:column;cursor:pointer"}),xn=(0,k.Ay)("div",{target:"e18wzgio9"})("font-weight:400;font-size:14px;color:",(0,k.w4)("textMuted"),";display:flex;white-space:break-spaces;div{white-space:nowrap;}"),fn=(0,k.Ay)("div",{target:"e18wzgio8"})({name:"epecso",styles:"overflow:hidden;text-overflow:ellipsis;margin-right:4px"}),vn=fn,yn=(0,k.Ay)("div",{target:"e18wzgio7"})({name:"1eoy87d",styles:"display:flex;justify-content:space-between"}),bn=(0,k.Ay)("div",{target:"e18wzgio6"})("font-weight:400;font-size:14px;color:",(0,k.w4)("textMuted"),";display:flex;white-space:nowrap;margin-left:",(({aiTitlesEnabled:e})=>e?"8px":"0px"),";div{white-space:nowrap;}"),wn=(0,k.Ay)("div",{target:"e18wzgio5"})({name:"7lgej6",styles:"align-self:center;margin-left:auto"}),jn=(0,k.Ay)("div",{target:"e18wzgio4"})("display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:50%;background-color:",hn.m.containerNeutral,";color:",hn.m.iconDefault,";");var kn={name:"1tk44vi",styles:"padding:16px 20px 16px 20px"},An={name:"lel7ab",styles:"padding-top:8px;padding-bottom:8px;margin-top:0px"};const Cn=(0,k.Ay)(Se.A,{target:"e18wzgio3"})("position:relative;padding-right:23px;padding-left:23px;svg{min-height:15px;}",(({displayAsConversational:e})=>e&&An)," ",(({inHomeScreenCard:e})=>e&&kn)," &:hover ",gn.className,"{",(({unread:e,theme:t,displayAsConversational:n})=>(0,k.AH)({color:n?`${t.textDefault}`:e?`${t.linkColor}`:`${t.textDefault}`},"")),";}",ye.Z.className,",",ye.Z.className," img{cursor:pointer;width:40px;height:40px;}"),Sn=(0,k.Ay)("span",{target:"e18wzgio2"})("overflow:hidden;text-overflow:ellipsis;margin-right:3px;white-space:nowrap;font-weight:",(({unread:e})=>e?600:400),";margin-left:4px;"),Tn=(0,k.Ay)("span",{target:"e18wzgio1"})("display:flex;max-width:calc(100% - 20px);align-items:center;color:",(0,k.w4)("textMuted"),";"),_n=(0,k.Ay)("div",{target:"e18wzgio0"})("overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:14px;font-weight:",(({unread:e})=>e?600:400),";");var En=n(39538),In=n(10678);const zn=e=>{const{name:t,activeAdmins:n=[]}=(0,m.GV)(x.rp),i=(0,m.GV)(x.ed);if(!e||"unassigned"===e.uxStyle)return{assigneeName:t,assignedAdmins:n};const{lastParticipatingAdmin:r}=e;if(r){if((e.uxStyle?"bot"===e.uxStyle:i)||!r.isBot)return{assigneeName:r.firstName,assignedAdmins:[r]}}const o=e.parts[0];if(!o)return{assigneeName:t,assignedAdmins:n};const a=o.teamAuthor;return a?{assigneeName:a.name,assignedAdmins:a.admins}:{assigneeName:t,assignedAdmins:n}};function Nn(){const e=(0,b.useRef)(null);function t(){e.current&&clearTimeout(e.current)}return(0,b.useEffect)((()=>t),[]),[function(n,i){t(),e.current=setTimeout(n,i)},t]}const Mn="advance",Rn="reset",Bn=(e,t)=>({typedText:t?e:"",currentIndex:0,reverse:t}),Pn=(e,t,n)=>n?0===e?t:-e:e,Ln=(e,{speed:t=25,reverse:n=!1,byWord:i=!1,onComplete:r}={})=>{const o=(0,b.useRef)(r);o.current=r;const[{typedText:a,currentIndex:s},l]=(0,b.useReducer)(((t,r)=>{switch(r.type){case Mn:{const r=t.currentIndex+1,o=i?((e,t,n)=>{const i=n.split(" "),r=Pn(e,i.length,t);return i.slice(0,r).join(" ")})(r,n,e):((e,t,n)=>n.slice(0,Pn(e,n.length,t)))(r,n,e);return Object.assign({},t,{typedText:o,currentIndex:r})}case Rn:return Bn(e,n)}}),Bn(e,n)),c=n?0===a.length:a.length===e.length;(0,b.useEffect)((()=>{l({type:Rn})}),[e,n,l]),(0,b.useEffect)((()=>{c&&o.current&&o.current()}),[c]);const[d]=Nn();return(0,b.useEffect)((()=>{c||d((()=>{l({type:Mn})}),t)}),[e,n,s,c,t,d]),a},On=({conversationId:e,title:t="",speed:n=25})=>{const i=(0,m.GV)((t=>{var n;return e?null==(n=t.conversations.titleUpdates)?void 0:n[e]:void 0})),[r,o]=(0,b.useState)(!1),a=(0,b.useRef)(t),s=(0,b.useRef)(i);(0,b.useEffect)((()=>{const e=a.current!==t,n=s.current!==i,r=window.matchMedia("(prefers-reduced-motion: reduce)").matches;i&&e&&n&&!r?o(!0):i&&!r||o(!1),a.current=t,s.current=i}),[t,i]);const l=Ln(t,{speed:n,onComplete:()=>{o(!1)}});return r?l:t};var Dn=n(47335);const Hn=({unread:e=!1,ticket:t,lastMessage:n,lastMessageAuthor:i,title:r,lastPartCreatedAt:o,assigneeName:a,assignedAdmins:s,onClick:l,displayAsConversational:c,hoverBackground:d=!0,showUnreadBadge:u=!0,showDivider:p=!1,inHomeScreenCard:h=!1,tabIndex:m,conversationId:g})=>{const x=(0,Xe.Tl)("chat_with",{assignee_name:a??""}),f=On({conversationId:g,title:r??"",speed:25}),y=(0,Dn.A)("aiTitles"),b=!y&&(e&&u?"UnreadIndicator":"RightChevronColorable"),w=!y&&(e&&u?void 0:"linkColor"),j=(0,v.jsx)(wn,{children:(0,v.jsx)(Te.Ay,{type:"UnreadIndicator",size:16,ariaHidden:!0})}),k=null!=i&&i.isSelf?(0,Xe.Tl)("you"):null==i?void 0:i.firstName,A=t?(0,v.jsxs)(xn,{children:[(0,v.jsx)(fn,{children:(0,v.jsx)(it.A,{text:`#${t.publicTicketId||t.id} • ${t.statusLabel}`})}),e&&j]}):n&&(0,v.jsxs)(xn,{children:[(0,v.jsx)(fn,{children:(0,v.jsx)(it.A,{text:`${k}: ${n}`})}),e&&j]}),C=y&&t?(0,v.jsx)(jn,{children:(0,v.jsx)(Te.Ay,{type:"TicketDefault"})}):s&&s[0]&&((null==s?void 0:s.length)>1?(0,v.jsx)(In.A,{admins:s}):(0,v.jsx)(Oe.l,{admin:s[0],size:36,solidBackground:"squircle"!==s[0].avatar.shape})),S=y?(0,v.jsxs)(gn,{children:[(0,v.jsxs)(yn,{children:[(0,v.jsx)(mn,{unread:e,children:(0,v.jsx)(it.A,{text:t?t.name:f||x})}),o&&(0,v.jsx)(bn,{aiTitlesEnabled:!0,children:(0,En.iw)(o)})]}),A]}):(0,v.jsxs)(gn,{children:[t&&(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(Tn,{children:[(0,v.jsx)(Te.Ay,{type:"TicketSmall",color:"iconMuted"}),(0,v.jsx)(Sn,{unread:e,children:t.name})]})}),n&&(0,v.jsx)(_n,{unread:e,children:(0,v.jsx)(it.A,{text:n})}),a&&(0,v.jsxs)(bn,{children:[(0,v.jsx)(vn,{children:a}),o&&(0,v.jsxs)("div",{children:["• ",`${(0,En.iw)(o)}`]})]})]});return(0,v.jsx)(Cn,{"data-testid":"conversation-list-item",unread:e,displayAsConversational:c,size:"default",align:"start",left:C,rightIcon:b||void 0,rightIconColor:w||void 0,divider:p,inHomeScreenCard:h,hoverBackground:d,useGlobalHorizontalPadding:!0,onClick:l,tabIndex:m,children:S})},Fn=({conversation:e,onClick:t,displayAsConversational:n,hoverBackground:i,showUnreadBadge:r,showDivider:o=!0,inHomeScreenCard:a=!1,tabIndex:s})=>{const{assigneeName:l,assignedAdmins:c}=zn(e),d="lastPartCreatedAt"in e?e.lastPartCreatedAt:void 0,u=un(e);return(0,v.jsx)(Hn,{ticket:e.ticket,title:e.title,assigneeName:l,assignedAdmins:c,lastMessage:null==u?void 0:u.summaryText,lastMessageAuthor:null==u?void 0:u.author,lastPartCreatedAt:d,unread:pn(e),showUnreadBadge:r,onClick:t,displayAsConversational:n,hoverBackground:i,showDivider:o,inHomeScreenCard:a,tabIndex:s,conversationId:e.id})};var Vn=n(39586);var Gn={name:"13a3csp",styles:"&&{padding-bottom:4px;}"};const $n=(0,k.Ay)(Ae.A.Title,{target:"eksjkn93"})((({smallBottomPadding:e})=>e&&Gn),";"),qn=(0,k.Ay)(Ae.A,{target:"eksjkn92"})((({theme:e,fullCardClickable:t,unread:n,pointer:i,displayAsConversational:r})=>(0,k.AH)(t?`\n      &:hover ${$n.className} {\n        color: ${n?e.textDefault:`${e.linkColor}`};\n        ${i&&"cursor: pointer;"}\n      }`:""," ",r&&"\n      && {\n        padding-top: 12px;\n        padding-bottom: 12px;\n      }\n    ",";")),";");var Un={name:"1yjqrpx",styles:"padding-bottom:12px"};const Wn=(0,k.Ay)(Ce.A,{target:"eksjkn91"})((({displayAsConversational:e})=>e?Un:(0,k.AH)("&& ",Vn.ck.className,":first-of-type{margin-top:-8px;}")),";");var Kn={name:"1yjqrpx",styles:"padding-bottom:12px"};const Xn=(0,k.Ay)("div",{target:"eksjkn90"})((({displayAsConversational:e})=>e?Kn:(0,k.AH)("&& ",Vn.ck.className,":first-of-type{margin-top:-8px;}")),";"),Yn=({conversations:e,onClick:t,unread:n,showUnreadBadge:i,conversationsToShow:r=1,title:o=(0,Xe.Tl)("your_recent_message"),displayAsConversational:a=!1,noPadding:s=!0})=>{const l=1===r,c=e.slice(0,r),d=()=>c.map((e=>(0,v.jsx)(Fn,{conversation:e,onClick:()=>t(e.id,e.ticket),displayAsConversational:a,hoverBackground:a,showUnreadBadge:i,showDivider:!1,inHomeScreenCard:!a,tabIndex:-1},e.id)));return(0,v.jsxs)(qn,{unread:n,pointer:!0,onClick:l?()=>{const n=e[0];t(null==n?void 0:n.id,n.ticket)}:void 0,displayAsConversational:a,isEntireCardClickable:!0,"data-testid":"recent-conversations",fullCardClickable:l,noPadding:s,children:[(0,v.jsx)($n,{noPadding:s,smallBottomPadding:!!a,children:o}),l?(0,v.jsx)(Xn,{displayAsConversational:a,children:d()}):(0,v.jsx)(Wn,{displayAsConversational:a,children:d()})]})},Zn=()=>{const e=(0,m.jL)(),t=(0,m.GV)(ae),n=(0,m.GV)(se),i=t.map((e=>e.id)),r=(0,m.GV)(g.UT);qe({object:Ge.HZ,place:Ge.mM,context:Ge.Ey,metadata:{conversation_ids:i},sendMetricCondition:(null==t?void 0:t.length)>0});return 0===(null==t?void 0:t.length)?null:(0,v.jsx)(Yn,{conversations:t,hasMoreConversations:n,onClick:(t,n)=>{((e,t)=>{(0,Ve.A5)("clicked","conversation","messenger","home",{status:null==t?void 0:t.status,ticket_type_id:null==t?void 0:t.ticketTypeId,conversation_id:e})})(t,n),e((0,sn.QL)(Lt.Ay,t,{requestOrigin:"Home - Recent Conversations Click"})),e((0,ln.p)(t))},unread:pn(t&&t[0]),showUnreadBadge:!r})};const Jn=(0,k.Ay)("div",{target:"e8gr99g2"})("padding:",(({padding:e})=>e),"px;");var Qn={name:"16ceglb",styles:"font-weight:600"};const ei=(0,k.Ay)("div",{target:"e8gr99g1"})((({bold:e})=>e&&Qn),";"),ti=(0,k.Ay)("a",{target:"e8gr99g0"})("cursor:pointer;*{cursor:pointer!important;}&,&:visited{color:",(0,k.w4)("textDefault"),";}&:hover ",ei.className,"{color:",(0,k.w4)("linkColor"),";}"),ni=({boldLabel:e=!1,links:t,linkSize:n="tiny",listPadding:i=8})=>{const r=t.length>0,o=t.length>1,a=()=>t.map(((t,i)=>(0,v.jsx)(ti,{href:t.href,target:"_blank","aria-label":`${t.label} ${(0,Xe.Tl)("opens_in_new_tab")}`,children:(0,v.jsxs)(Se.A,{size:n,rounded:!0,hoverBackground:r,rightIcon:"ExternalLink",rightIconColor:"linkColor",children:[(0,v.jsx)(ei,{bold:e,"data-testid":"link-label",children:t.label}),t.subLabel&&(0,v.jsx)(ei,{"data-testid":"link-sublabel",children:t.subLabel})]})},i)));return(0,v.jsx)(Ae.A,{noPadding:!0,isEntireCardClickable:!r,children:o?(0,v.jsx)(Ce.A,{padding:i,children:a()}):(0,v.jsx)(Jn,{padding:i,children:a()})})};var ii=n(72977);var ri={name:"zjik7",styles:"display:flex"};const oi=(0,k.Ay)("div",{target:"e1d02mrs0"})("display:none;z-index:",(0,ii.fE)(3),";padding:10px;border-radius:10px;align-items:center;justify-content:center;cursor:pointer;transition:background-color 150ms;",(({theme:e})=>(0,k.AH)("&:hover{background-color:",e.alphaBlack10,";}"))," i{display:inline;}",(({enabled:e})=>e&&ri)," ",(({isOnHomeHeader:e,theme:t})=>e&&(0,k.AH)("position:fixed;top:32px;right:20px;&:hover{background-color:",t.alphaBlack20,";}"))," ",(({rightMargin:e,isOnHomeHeader:t})=>e&&t&&(0,k.AH)("right:",e,"px;")),";");var ai=n(70745);const si=/^https?:\/\/via.intercom.(com|io|test)\/msgr\//;var li=n(71179);function ci(){const e=!(null==(t=(0,ai.KQ)())||!t.href.toLowerCase().match(si));var t;const n=(0,f.z)(),{hideCloseButton:i}=(0,m.GV)(li.A)||{};return!n&&(!e&&!i)}var di=n(5351);const ui=({onHomeHeader:e,enabled:t,parallaxOpacity:n=1,rightMargin:i})=>{const r=(0,m.jL)(),o=ci()||!!t,a=(0,m.GV)(g.qB),s=(0,Dn.A)("mercuryUiChanges"),l=(0,di.A)(),c=(0,m.GV)(ee),{textColorType:d="dark"}=(0,m.GV)(Q)??{},u="solid"===(null==c?void 0:c.type),p=e||!1;return(0,v.jsx)(oi,{onClick:()=>{(0,Ve.A5)("clicked","close_button","messenger","",{space_opened:null==a?void 0:a.id,source:"close_button"}),r((0,Jt.Mu)(!0))},tabIndex:o?0:-1,"aria-hidden":!o,"aria-label":(0,Xe.Tl)("close"),enabled:o,isOnHomeHeader:p,background:(()=>{if(!e)return"";return`rgba(0, 0, 0, ${Math.abs(.2*(n-1))})`})(),rightMargin:i,"data-testid":"close-button",children:(0,v.jsx)(Te.Ay,{type:s?"MercuryChevronDown":"CloseIcon",size:16,color:(()=>{if(!e)return"headerButtonColor";const t=u?l.homeHeaderBackgroundColorIsLight:"dark"===d,i=1-n>.5;return t?i?"iconDefault":"iconBlack":"light"===l.themeMode&&i?"iconBlack":"iconWhite"})(),ariaHidden:!0})})};var pi=n(11432);const hi=(0,k.Ay)("div",{target:"e1kboq666"})("padding:16px 20px;border-radius:10px;cursor:pointer;&:hover h2{color:",(0,k.w4)("linkColor"),";}"),mi=(0,k.Ay)("div",{target:"e1kboq665"})({name:"1066lcq",styles:"display:flex;justify-content:space-between;align-items:center"}),gi=(0,k.Ay)("h2",{target:"e1kboq664"})("font-size:14px;font-weight:600;line-height:21px;color:",(0,k.w4)("textDefault"),";"),xi=(0,k.Ay)("div",{target:"e1kboq663"})({name:"cn3xcj",styles:"margin-bottom:12px"}),fi=(0,k.Ay)("div",{target:"e1kboq662"})("font-size:14px;font-weight:400;line-height:20px;color:",(0,k.w4)("textDefault"),";"),vi=(0,k.Ay)("span",{target:"e1kboq661"})({name:"16ceglb",styles:"font-weight:600"}),yi=(0,k.Ay)("div",{target:"e1kboq660"})({name:"1r5gb7q",styles:"display:inline-block"});var bi=n(24762),wi=n(79145),ji=n(9814),ki=n(2292),Ai=n(95752);const Ci=({title:e,checklistTasks:t,completedTasks:n,estimatedTimeRemaining:i,onClick:r,nextStepTitle:o,checklistStatus:a})=>{const s=n>0?(0,Xe.Tl)("checklist_card_next_step"):(0,Xe.Tl)("checklist_card_first_step"),l=a===ki.vb.New;return(0,v.jsxs)(Ae.A,{as:hi,onClick:r,children:[(0,v.jsxs)(mi,{children:[(0,v.jsx)(gi,{children:(0,v.jsx)(pi.A,{blocks:e})}),(0,v.jsx)(Te.Ay,{type:l?"UnreadIndicator":"RightChevronColorable",color:l?void 0:"linkColor"})]}),(0,v.jsx)(xi,{children:(0,v.jsx)(bi.A,{checklistTasks:t,completedChecklistTasks:n,estimatedTimeRemaining:i,condensed:!0,prefillProgressIfEmpty:!0})}),(0,v.jsxs)(fi,{children:[(0,v.jsxs)(vi,{children:[s,": "]}),(0,v.jsx)(yi,{children:(0,v.jsx)(pi.A,{blocks:o})})]})]})},Si=()=>{const e=(0,m.jL)(),t=(0,m.GV)(wi.V9),n=(0,Ai.Sg)(t),i=(0,Ai.zE)(n),r=(0,Ai.fp)(n),o=(0,Ai.M2)(r),a=r.reduce(((e,t)=>e+t.estimatedTime),0);return t&&o?(0,v.jsx)(Ci,{checklistTasks:n.length,completedTasks:i.length,estimatedTimeRemaining:a,nextStepTitle:o.titleBlocks,title:t.titleBlocks,onClick:()=>{t&&e((0,ji.tB)(t.checklistProgressId))},checklistStatus:t.status}):null};var Ti=n(43579);var _i=n(49017);const Ei=(0,k.Ay)("div",{target:"ed7ym44"})({name:"1fttcpj",styles:"display:flex;flex-direction:column"}),Ii=(0,k.Ay)("div",{target:"ed7ym43"})("max-width:250px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:",(e=>e.unread?600:400),";"),zi=(0,k.Ay)("div",{target:"ed7ym42"})("color:",(0,k.w4)("textMuted"),";max-width:250px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"),Ni=(0,k.Ay)("div",{target:"ed7ym41"})("margin:0 auto;border-radius:50%;display:inline-flex;vertical-align:middle;position:relative;width:40px;height:40px;text-align:center;justify-content:center;align-items:center;",(({theme:e,color:t})=>t&&(0,k.AH)("background-color:",(0,ve.vf)(String(e[t]),.13),";")),";");var Mi={name:"5byad5",styles:"padding-top:8px;padding-left:20px;padding-right:20px;padding-bottom:8px"};const Ri=(0,k.Ay)(Se.A,{target:"ed7ym40"})("&:hover ",Ei.className,"{color:",(0,k.w4)("textDefault"),";}padding-left:23px;padding-right:23px;",(({homeScreen:e})=>e&&Mi),";");var Bi=n(88204);const Pi=["unread","title","publicTicketId","typeName","status","statusLabel","onClick","homeScreen","useGlobalHorizontalPadding"];const Li=e=>{let{unread:t=!1,title:n,publicTicketId:i,typeName:r,status:o,statusLabel:a,onClick:s,homeScreen:l=!1,useGlobalHorizontalPadding:c=!1}=e,d=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,Pi);const u=t?"UnreadIndicator":"RightChevronColorable",p=t?void 0:"linkColor",h=n||r,m=a||(0,Bi.JN)(o),g=i?`#${i} • ${m}`:m,x=(0,Bi.qY)(o);return(0,v.jsx)(Ri,Object.assign({"data-testid":"ticket-list-item",left:(0,v.jsx)(Ni,{color:x,children:(0,v.jsx)(Te.Ay,{type:(0,Bi.cR)(o),color:x})}),rightIcon:u,rightIconColor:p,onClick:s,hoverBackground:!0,homeScreen:l,useGlobalHorizontalPadding:c},d,{children:(0,v.jsxs)(Ei,{children:[(0,v.jsx)(Ii,{unread:t,children:h}),(0,v.jsx)(zi,{children:g})]})}))};const Oi=(0,k.Ay)(Ae.A.Title,{target:"e1rs3ksu1"})({name:"1f7m605",styles:"padding-bottom:4px"}),Di=(0,k.Ay)(Ae.A,{target:"e1rs3ksu0"})("padding-bottom:26px;",(({displayAsConversational:e})=>e&&"\n    padding-top: 12px;\n    padding-bottom: 28px;\n  "),";");var Hi=n(21342);const Fi=({unresolvedTickets:e,handleTicketClick:t,shouldShowHomescreenCard:n,displayAsConversational:i=!1})=>{const r=e.length>1?(0,Xe.Tl)("recent_tickets"):(0,Xe.Tl)("recent_ticket");return(0,v.jsx)(v.Fragment,{children:n?(0,v.jsxs)(Di,{"data-testid":"recent-tickets",displayAsConversational:i,children:[(0,v.jsx)(Oi,{children:r}),(0,v.jsx)(Ce.A,{noDivider:!0,children:e.map((e=>(0,v.jsx)(Li,{title:e.name,publicTicketId:e.publicTicketId,typeName:e.ticketTypeName,status:e.status,statusLabel:e.statusLabel,unread:!1===e.read,onClick:()=>t(e.id),homeScreen:!0},e.id)))})]}):null})},Vi=({displayAsConversational:e})=>{const t=(0,a.useNavigate)(),n=(0,m.GV)(Hi.ir)||[],i=(0,m.GV)(g.UT)&&n&&n.length>0;return(0,v.jsx)(Fi,{unresolvedTickets:n,handleTicketClick:e=>{t(`/tickets/details/${e}`,{state:{navigatingFrom:Ge.vU}})},shouldShowHomescreenCard:i,displayAsConversational:e})};var Gi=n(79183);var $i={name:"1kmu98f",styles:"margin-left:-20px;margin-right:-20px;&:first-child{margin-top:-16px;}&:last-child{margin-bottom:-16px;}"};const qi=(0,k.Ay)("div",{target:"ekiurfh4"})("padding:",(0,k.xk)("padding"),"px;",(({fullBleed:e})=>e&&$i),";");var Ui={name:"l8l8b8",styles:"white-space:nowrap;overflow:hidden;text-overflow:ellipsis"};const Wi=(0,k.Ay)("div",{target:"ekiurfh3"})("margin-right:auto;flex:1;font-size:14px;line-height:21px;min-width:0;",(({truncate:e})=>e&&Ui),";"),Ki=(0,k.Ay)("div",{target:"ekiurfh2"})("display:flex;justify-content:space-between;box-sizing:border-box;color:",(0,k.w4)("textDefault"),";padding:8px 12px;align-items:center;cursor:",(({onClick:e})=>e?"pointer":"default"),";&:hover ",Wi.className,"{color:",(({theme:e,onClick:t})=>t?e.linkColor:e.textDefault),";}"),Xi=(0,k.Ay)("div",{target:"ekiurfh1"})(ii.TD,";"),Yi=(0,k.Ay)("div",{target:"ekiurfh0"})({name:"n5pqx9",styles:"margin-left:8px;align-self:center"}),Zi={app:"App",activity:"Activity",bounced:"Bounced","button-pill":"ButtonPill","click-element":"ClickElement",company:"Company","contact-book":"ContactBook",coupon:"Coupon",creditcard:"CreditCard","email-filled":"EmailFilled",event:"Event","large-right-arrow":"LargeRightArrow",insights:"Insights",locked:"Locked",phone:"Phone",person:"PersonType",wrench:"Wrench","slipping-away":"SlippingAway",stars:"Stars"},Ji=({ticketLinks:e,cardTitle:t})=>{const{showCreateTicket:n}=(0,Gi.A)(),i=1===e.length,r=()=>e.map((e=>{const t=((e,t="linkColor")=>(0,v.jsx)(Xi,{children:(0,v.jsx)(Te.Ay,{type:e,size:16,color:t,ariaHidden:!0})}))(Zi[e.icon],"linkColor");return(0,v.jsxs)(Ki,{onClick:()=>{return t=e.ticket_type_id,(0,Ve.A5)("clicked","ticket_link","messenger","home",{ticket_type_id:t}),void n(t,"conversation");var t},children:[(0,v.jsx)(Wi,{truncate:!0,children:e.ticket_type_name}),(0,v.jsx)(Yi,{children:t})]},e.ticket_type_id)}));return(0,v.jsx)(Ae.A,{title:t,children:i?(0,v.jsx)(qi,{padding:8,fullBleed:!0,children:(0,v.jsx)(Ce.E.Provider,{value:{insideList:!1,noDivider:!0},children:r()})}):(0,v.jsx)(Ce.A,{noDivider:!0,padding:8,children:r()})})};var Qi=n(26865);const er=()=>(0,v.jsx)(U,{children:(0,v.jsx)(w.A,{})}),tr=({logoUrl:e,showAvatars:t,slots:n,isFetched:i,isFailed:r,onRetry:o,onScroll:a,onHeaderHeightChange:s,headerOpacity:l,closeButtonOpacity:c,background:d,textColorType:u,showCloseButton:p,title:h,subtitle:m})=>{const{scrollbarVisible:g,ref:x,handleResize:f}=function(){const e=(0,b.useRef)(null),[t,n]=(0,b.useState)(!1),i=(0,b.useCallback)((()=>{const t=e.current;if(t){const e=t.scrollHeight>t.clientHeight;n(e)}}),[e]);return(0,Ti.A)(e.current,i),{scrollbarVisible:t,ref:e,handleResize:i}}();(0,b.useEffect)((()=>{f()}),[f,n]);const{globalHorizontalPadding:y}=(0,di.A)();return i||r?(0,v.jsx)($,{ref:x,className:"intercom-home-screen",onScroll:e=>{let t=0;e.currentTarget&&(t=e.currentTarget.scrollTop),a(Math.max(0,t))},children:(0,v.jsxs)(K,{isIntercomLinkEnabled:!0,children:[(0,v.jsx)(ui,{parallaxOpacity:c,rightMargin:y,onHomeHeader:!0}),(0,v.jsx)(St.A,{onHeightChange:s,children:(0,v.jsx)(Ct,{title:h,subtitle:m,logo:e,showAvatars:t,opacity:l,background:d,textColorType:u,closeButtonEnabled:p,scrollbarVisible:g})}),(0,v.jsxs)(q,{homeBackgroundType:null!=d&&d.fadeToTheme?null==d?void 0:d.type:null,children:[n.map(((e,t)=>{switch(e.type){case"recent_conversation":return(0,v.jsx)(Zn,{},"recent-conversation-card");case"recent_tickets":return(0,v.jsx)(Vi,{},"recent-tickets");case"ticket_links":return(0,v.jsx)(Ji,{ticketLinks:e.links,cardTitle:e.card_title},"ticket-links");case"new_conversation":return(0,v.jsx)(an,{},"conversation-card");case"help_center":return(0,v.jsx)(Ye,{index:t,suggestions:e.suggested_articles,metadata:e.suggested_articles_metadata},"help-card");case"news_items":return(0,v.jsx)(Zt,{},"news-items");case"checklists":return(0,v.jsx)(Si,{},"checklists");case"messenger_app":return(0,v.jsx)(HomeScreenMessengerCard,{cardUri:e.uri,index:t,isFetched:!0},"messenger-app-"+t);case"external_links":return(0,v.jsx)(ni,{links:e.links},`external-links-${t}`);default:return null}})),(0,v.jsx)(nt,{visible:r,onRetry:o})]})]})}):(0,v.jsx)(er,{})},nr=()=>{const[e,t]=(0,b.useState)(1),{setHeight:n,height:i}=M(),r=(0,m.GV)(ee),{fetchHomeContent:o,slots:a,isFetched:s,isFailed:l}=function(){const e=(0,m.jL)(),t=(0,b.useCallback)((()=>e((0,_i.yM)())),[e]),n=(0,m.GV)(x.Er),{slots:i,isFetched:r,isFailed:o}=(0,m.GV)(me);return{fetchHomeContent:t,slots:i,isFetched:r&&n,isFailed:o}}(),c=ci(),d=(0,m.GV)(ne),u=(0,m.GV)(Qi.A);(0,b.useEffect)((()=>{d&&u&&o()}),[o,d,u]);const{logoUrl:p,showAvatars:h,greeting:g,introduction:f,textColorType:y}=(0,m.GV)(Q),w=(0,m.GV)(x._D),j=((e,t)=>1-Math.min(Math.abs(e/(t-100)),1))(e,i);return(0,v.jsx)(tr,{slots:a,title:null==g?void 0:g.content,subtitle:null==f?void 0:f.content,logoUrl:p,showAvatars:h,accessToTeammateEnabled:w,isFetched:s,isFailed:l,onRetry:o,onScroll:e=>{t(e)},onHeaderHeightChange:e=>{n(e)},headerOpacity:j,closeButtonOpacity:j,background:r,textColorType:y,showCloseButton:c})},ir=()=>(0,v.jsx)(G,{header:null,children:(0,v.jsx)(nr,{})});var rr=n(14644),or=n(94870);const ar=(0,k.Ay)("div",{target:"e17mqux90"})("z-index:",(0,k.w4)("messengerSheetZIndex"),";position:fixed;bottom:0;left:0;right:0;top:0;display:flex;flex-direction:column;background:none;");const sr={name:"1fgiiou",styles:"position:absolute;clip:rect(1px, 1px, 1px, 1px)"},lr=(0,k.Ay)("button",{target:"ejitj6g1"})(sr,";"),cr=(0,k.Ay)("div",{target:"ejitj6g0"})(sr,";");const dr=(0,k.Ay)(St.A,{target:"e1q8fpwq5"})({name:"vysbge",styles:"width:100%;overflow:visible"}),ur=(0,k.Ay)("nav",{target:"e1q8fpwq4"})("z-index:1;display:flex;flex-direction:column;padding:8px 13px;color:",(0,k.w4)("textMuted"),";overflow:visible;button{min-width:38px;min-height:38px;}",(({showBorder:e,theme:t})=>e&&(0,k.AH)("border-bottom:1px solid ",t.borderNeutral,";")),";"),pr=(0,k.Ay)("div",{target:"e1q8fpwq3"})("svg path{fill:",(0,k.w4)("textMuted"),"!important;}"),hr=(0,k.Ay)("div",{target:"e1q8fpwq2"})("display:flex;flex-grow:1;flex-direction:row;align-items:center;justify-content:space-between;gap:2px;font-size:18px;color:",(0,k.w4)("headerTitleColor"),";",(({whiteBackground:e,theme:t})=>e&&(0,k.AH)("color:","dark"===t.themeMode?t.textOnInverse:t.textDefault,";")),";");var mr={name:"11g4mt0",styles:"font-size:16px"};const gr=(0,k.Ay)("h1",{target:"e1q8fpwq1"})("padding:8px 4px;font-weight:600;text-align:center;font-size:18px;overflow:hidden;text-overflow:ellipsis;display:flex;gap:8px;align-items:center;",(({smallText:e})=>e&&mr),";");var xr={name:"1yvcaec",styles:"padding-right:4px"};const fr=(0,k.Ay)("div",{target:"e1q8fpwq0"})("display:flex;flex:1;justify-content:",(({align:e})=>"right"===e?"flex-end":"flex-start"),";",(({align:e})=>"right"!==e&&xr),"&:first-child:empty{min-width:8px;}");var vr=n(83140),yr=n(1601),br=n(12129),wr=n(71982);function jr(e){const t=(0,m.jL)(),n=(0,m.GV)(wr.l);return(0,yr.IS)()?null:(0,v.jsx)(Er.Button,{iconType:n?"CollapseIcon":"ExpandIcon","data-testid":"toggle-expansion",iconSize:16,onClick:()=>t((0,br.D)(!n,e.object,e.place)),"aria-label":n?(0,Xe.Tl)("expanded_mode_disable"):(0,Xe.Tl)("expanded_mode_enable")})}var kr=n(40085);const Ar=()=>(0,m.GV)(x.iO),Cr=Ar,Sr=(0,b.forwardRef)(((e,t)=>{const{round:n=!1}=e,i=n?"100%":10;return(0,v.jsx)(vr.A,Object.assign({ref:t,variant:"header",iconSize:16,padding:8,borderRadius:i},e))})),Tr=({onBack:e,chevronDirection:t="left",round:n=!1,ariaLabel:i})=>{const r=i?(0,Xe.Tl)("go_back_to",{destination:i}):(0,Xe.Tl)("go_back");return(0,v.jsx)(Sr,{onClick:e,"aria-label":r,"data-testid":"go-back",round:n,children:(0,v.jsx)(Te.In,{type:"left"===t?"ThinLeftArrowIcon":"ThinDownArrowIcon",size:16,flipInRtl:!0,ariaHidden:!0})})},_r=gr,Er={Content:({children:e,whiteBackground:t=!1,showBorder:n=!1})=>{const i=(0,di.A)(),{whiteBackground:r,setWhiteBackground:o,setHeight:a}=M(),s=(0,b.useRef)(r);if(s.current=r,(0,b.useEffect)((()=>{(null==s?void 0:s.current)!==t&&o(t)}),[t,s,o]),Cr())return null;const l=t?Object.assign({},i,{appSecondaryColor:i.containerBaseNeutral,headerTitleColor:i.textDefault,headerButtonColor:i.linkColor}):i;return(0,v.jsx)(kr.T.Provider,{value:l,children:(0,v.jsx)(dr,{onHeightChange:e=>a(e),children:(0,v.jsx)(ur,{showBorder:n,children:e})})})},ButtonSpacer:fr,Button:Sr,Title:_r,BackButton:Tr,TitleArea:({onBack:e,title:t,children:n,showExpandButton:i,showCloseButton:r,smallText:o,leftButtonArea:a,rightButtonArea:s,backDirection:l="left",backAriaLabel:c})=>{const d=(0,yr.IS)(),u=ci(),{whiteBackground:p}=M(),h=u||r;return(0,v.jsxs)(hr,{whiteBackground:p,children:[(0,v.jsxs)(fr,{"data-testid":"header-left-area",children:[e&&(0,v.jsx)(Tr,{onBack:e,chevronDirection:l,ariaLabel:c}),a]}),n||null,!n&&(0,v.jsx)(_r,{smallText:!!o,children:t}),(0,v.jsxs)(fr,{align:"right","data-testid":"header-right-area",children:[s,i&&!d&&(0,v.jsx)(jr,{}),h&&(0,v.jsx)(pr,{children:(0,v.jsx)(ui,{enabled:h})})]})]})}},Ir=({title:e,onBack:t,showExpandButton:n,isSubView:i,backDirection:r="left",backAriaLabel:o})=>(0,v.jsx)(Er.Content,{whiteBackground:!1,showBorder:!0,children:(0,v.jsx)(Er.TitleArea,{onBack:t,showExpandButton:n,title:e,smallText:i,backDirection:r,backAriaLabel:o})});var zr=n(63994);const Nr=(0,k.Ay)("div",{target:"e1n2vqdo0"})((({headerHeight:e,heightChangeDuration:t,whiteBackground:n,theme:i})=>(0,k.AH)("transition:min-height ",t,"ms ease-out,max-height ",t,"ms ease-out,background-color ",t,"ms ease-in-out;min-height:",e,"px;max-height:",e,"px;background-color:",n?"transparent":i.secondaryColor,";position:absolute;top:0;right:0;left:0;")),";");function Mr(){const{whiteBackground:e,height:t}=M();return Cr()?null:(0,v.jsx)(Nr,{headerHeight:Math.max(t,64),heightChangeDuration:zr.qZ,whiteBackground:e||!1})}function Rr(e){return(0,v.jsx)(Ir,{onBack:e.onBackClick,title:e.sheetTitle||""})}const Br=(0,k.Ay)("div",{target:"etflgg20"})("z-index:",(0,k.w4)("messengerSheetLoaderZIndex"),";position:absolute;top:0;left:0;right:0;height:2px;background:",(0,k.w4)("appColor"),";",(({transform:e})=>(0,k.AH)("transform:",e,";"))," ",(({transition:e})=>(0,k.AH)("transition:",e,";"))," ",(({opacity:e})=>(0,k.AH)("opacity:",e,";")),";");function Pr(e,t){var n,i,r;return"number"!=typeof t&&(t=e>=0&&e<.2?.1:e>=.2&&e<.5?.04:e>=.5&&e<.8?.02:e>=.8&&e<.99?.005:0),n=e+t,i=0,r=.994,e=Math.min(r,Math.max(n,i))}function Lr({isLoading:e,trickleSpeed:t=200,speed:n=200,easing:i="linear"}){const[r,o]=(0,b.useState)(0),[a,s]=(0,b.useState)(1),[l,c]=(0,b.useState)(!1),d=(0,b.useRef)(null),u=(0,b.useRef)(null),p=(0,b.useRef)(e),h=(0,b.useRef)(!0),m=(0,b.useCallback)((()=>{d.current&&(clearInterval(d.current),d.current=null)}),[]),g=(0,b.useCallback)((()=>{u.current&&(clearTimeout(u.current),u.current=null)}),[]),x=(0,b.useCallback)((()=>{m(),g(),d.current=setInterval((()=>{h.current?o((e=>{const t=Pr(e);return c(!0),t})):m()}),t)}),[t,m,g]),f=(0,b.useCallback)((()=>{o(1),c(!0),g(),u.current=setTimeout((()=>{h.current&&s(0)}),n)}),[n,g]),y=(0,b.useCallback)((()=>{g(),o(0),s(1),c(!1)}),[g]);(0,b.useEffect)((()=>{e&&!p.current?(y(),x()):!e&&p.current?f():e&&!d.current&&x(),p.current=e}),[e,y,x,f]),(0,b.useEffect)((()=>()=>{h.current=!1,m(),g()}),[m,g]);const w=(0,b.useMemo)((()=>{return`translate3d(${e=r,(100*(-1+e)).toFixed(2)}%,0,0)`;var e}),[r]),j=(0,b.useMemo)((()=>l?`all ${n}ms ${i}`:"none"),[l,n,i]);return(0,v.jsx)(Br,{transform:w,transition:j,opacity:a})}var Or={name:"1im0r96",styles:"overflow-y:scroll"};const Dr=(0,k.Ay)("div",{target:"eihbrxe1"})("position:relative;flex:1;outline-offset:-5px;",(({theme:e})=>e.isMobileSize&&Or),";"),Hr=(0,k.Ay)("iframe",{target:"eihbrxe0"})({name:"ytsxkx",styles:"position:absolute;width:100%;height:100%;outline-offset:-5px"}),Fr=n(76141),Vr=(e={})=>{const t=window.crossOriginIsolated||!1,n=new URLSearchParams(Object.assign({},e,{cross_origin_isolated:t.toString()})).toString();return`${Fr.sheets_proxy_path}?${n}`};class MessengerSheetProxy extends b.Component{constructor(...e){super(...e),this.frameNode=void 0,this.sheetProxyNode=void 0,this.timeout=void 0,this.state={loadFrame:!1}}componentDidMount(){this.timeout=setTimeout((()=>{this.setState({loadFrame:!0},(()=>{this.setupSheetFrame()})),this.sheetProxyNode&&this.sheetProxyNode.focus()}),this.props.transitionTimeout)}setupSheetFrame(){var e;if(!this.state.loadFrame)return;const{startNavigation:t,receiveSheetMessage:n}=this.props;t(),this.frameNode&&(null==(e=this.frameNode.ownerDocument.defaultView)||e.addEventListener("message",n,!1))}componentWillUnmount(){var e;this.timeout&&clearTimeout(this.timeout);const{setProxyLoadedStatus:t}=this.props;t(!1),this.frameNode&&(null==(e=this.frameNode.ownerDocument.defaultView)||e.removeEventListener("message",this.props.receiveSheetMessage))}render(){const{onFrameLoad:e,isNavigating:t}=this.props;return(0,v.jsxs)(Dr,{tabIndex:0,ref:e=>this.sheetProxyNode=e,children:[(0,v.jsx)(Lr,{isLoading:t}),this.state.loadFrame?(0,v.jsx)(Hr,{ref:e=>this.frameNode=e,name:"intercom-messenger-sheet-proxy",sandbox:"allow-scripts allow-forms allow-same-origin allow-popups allow-popups-to-escape-sandbox allow-downloads",src:Vr(),onLoad:e,allowFullScreen:!0,allow:"microphone *; camera *; autoplay *; display-capture *",title:"Messenger app"}):null]})}}var Gr=n(719),$r=n(31837),qr=n(51543),Ur=n(13194);class MessengerSheetBody extends b.PureComponent{constructor(...e){super(...e),this.node=void 0,this.form=void 0,this.focusTrap=null,this.loadTimeout=null,this.state={isSubmitted:!1},this.handleEscape=e=>{(0,u.nx)(e)&&this.handleCloseSheet()},this.handleCloseSheet=()=>{this.props.closeSheet();const e=(0,qr.fx)();e&&(e(),(0,qr.x6)(null))},this.setFormRef=e=>{this.form=e},this.submitForm=()=>{if(!this.form)return null;this.form.submit(),this.setState({isSubmitted:!0})},this.handleIframeLoad=()=>{this.props.setProxyLoadedStatus(!0),this.loadTimeout&&clearTimeout(this.loadTimeout),this.loadTimeout=setTimeout((()=>{const{isSheetsDataLoaded:e,isProxyLoaded:t,url:n}=this.props;!n||e&&t||(0,Ur.l2)("Sheet failed to load after 30 seconds."),this.loadTimeout=null}),3e4)}}componentDidMount(){if(this.props.frameWindow&&(0,u.q2)(this.props.frameWindow,"keydown",this.handleEscape),this.node){const e=()=>(0,$r.tW)();this.focusTrap=new Gr.A({document:this.node,firstElement:e,lastElement:e})}}componentDidUpdate(){this.shouldSubmitForm()&&this.submitForm()}componentWillUnmount(){this.loadTimeout&&(clearTimeout(this.loadTimeout),this.loadTimeout=null),this.props.frameWindow&&(0,u.f)(this.props.frameWindow,"keydown",this.handleEscape),this.focusTrap&&this.focusTrap.restore()}shouldSubmitForm(){const{isSheetsDataLoaded:e,isProxyLoaded:t}=this.props;return!this.state.isSubmitted&&e&&t}renderSheetForm(){const{url:e,sheetsData:t}=this.props;return t?(0,v.jsx)("form",{ref:this.setFormRef,action:e,method:"post",style:{margin:"0"},target:"intercom-messenger-sheet",children:(0,v.jsx)("input",{type:"hidden",name:"intercom_data",value:t,readOnly:!0})}):null}render(){const{sheetTitle:e}=this.props;return(0,v.jsxs)(ar,{ref:e=>this.node=e,children:[(0,v.jsx)(Rr,{onBackClick:this.handleCloseSheet,sheetTitle:e}),(0,v.jsx)(MessengerSheetProxy,{isNavigating:this.props.isNavigating,onFrameLoad:this.handleIframeLoad,startNavigation:this.props.startNavigation,receiveSheetMessage:this.props.receiveSheetMessage,setProxyLoadedStatus:this.props.setProxyLoadedStatus,transitionTimeout:this.props.transitionTimeout}),this.renderSheetForm(),(0,v.jsx)(lr,{"aria-label":(0,Xe.Tl)("close"),onClick:this.handleCloseSheet})]})}}var Wr=n(42706);class MessengerSheet extends b.PureComponent{constructor(...e){super(...e),this.context=void 0}render(){const{isSheetsDataLoaded:e,isProxyLoaded:t,isOpen:n,isNavigating:i,url:r,closeSheet:o,sheetsData:a,startNavigation:s,setProxyLoadedStatus:l,sheetTitle:c,receiveSheetMessage:d}=this.props,u={isSheetsDataLoaded:e,isProxyLoaded:t,isNavigating:i,url:r,sheetsData:a,closeSheet:o,setProxyLoadedStatus:l,sheetTitle:c,startNavigation:s,receiveSheetMessage:d,transitionTimeout:300,frameWindow:this.context};return n?(0,v.jsx)(MessengerSheetBody,Object.assign({},u),"sheet"):null}}MessengerSheet.contextType=Wr.t;var Kr=n(51537);const Xr=(0,X.j8)({isSheetsDataLoaded:Kr.d,isProxyLoaded:Kr.Lm,isOpen:Kr.IP,url:Kr.Uh,sheetsData:Kr.b0,sourceCard:Kr.XS,isNavigating:Kr.aW,sheetTitle:Kr.$I});const Yr=(0,o.Ng)(Xr,(function(e){const t=or.wv.bind(null,Lt.Ay),n=or.SQ.bind(null,Lt.Ay);return(0,rr.zH)({startNavigation:or.J,finishNavigation:or.gl,closeSheet:or.QK,submitSheet:n,setProxyLoadedStatus:or.Gn,setSheetTitle:or.iu,receiveSheetMessage:t},e)}))(MessengerSheet),Zr=()=>(0,v.jsx)(G,{header:null,children:(0,v.jsx)(Yr,{transitionTimeout:300})});const Jr=(0,k.Ay)("div",{target:"e1m6yto50"})({name:"xhp8uo",styles:"display:flex;position:relative;flex:1 1 auto;min-width:100%;overflow:hidden"});var Qr=n(81170),eo=n(65772),to=n(88843),no=n(13336),io=n(70397);var ro=n(52762);const oo=(0,o.Ng)((e=>{const t=!!e.message.conversationId&&!!e.message.partId,{upfrontEmailCollectorShowing:n}=e.app.upfrontEmailCollection;return{isOpen:t,isUpfrontEmailComposerShowing:n}}),(e=>({onOpen:(t,n)=>{e((0,ro.G4)(t,n))},onClose:()=>{e((0,ro.Y6)())}})),((e,t,n)=>Object.assign({},e,t,n,{onOpen:(e,n)=>{t.onOpen(e,n)},onClose:()=>{t.onClose()}})))((function({appName:e,conversationId:t,part:n,reactionsReply:i,onReactionSelect:r,frameWindow:o,isOpen:a,isUpfrontEmailComposerShowing:s,onOpen:l,onClose:c,noShadow:d}){var u;const p=(0,b.useRef)(null),h=(0,b.useCallback)((()=>{(0,Ve.A5)("viewed","post","messenger","from_card",{conversation_id:t}),l(t,n.id)}),[t,l,n.id]),m=(0,b.useCallback)((()=>{c()}),[c]),g=`Post from ${(null==(u=n.author)?void 0:u.firstName)||e}`;return(0,v.jsx)(Ae.A,{noPadding:!0,noShadow:d,className:"intercom-post-card",onClick:a?void 0:h,ref:p,tabIndex:a?void 0:0,isEntireCardClickable:!0,displayHoverBorder:!0,"data-testid":"post-card",role:"article","aria-label":g,children:(0,v.jsxs)(no.sE,{children:[(()=>{const{author:t,body:l}=n;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(to.A,{appName:e,author:t,forceShowAppName:!0,children:(0,v.jsx)(no.CN,{children:(0,v.jsx)(pi.A,{blocks:l,frameWindow:o})})}),a?(0,v.jsx)(eo.A,{message:n,appName:e,reactionsReply:i,onReactionSelect:r,onComposerClick:m,onClose:c,frameWindow:o,isUpfrontEmailComposerShowing:s,returnFocus:()=>{var e;return null==(e=p.current)?void 0:e.focus()}}):null]})})(),!a&&(0,v.jsx)(no.L3,{onClick:e=>{e.stopPropagation(),h()},"aria-label":"Expand",title:"Expand","data-testid":"post-expand-button",type:"button",children:(0,v.jsx)(io.A,{})})]})})}));var ao=n(26690);const so=({appName:e,part:t,frameWindow:n})=>{const{author:i,body:r}=t;return(0,v.jsx)(to.A,{appName:e,isReplyStyle:!1,author:i,children:(0,v.jsx)(ao.g,{children:(0,v.jsx)(pi.A,{blocks:r,zoomable:!0,frameWindow:n})})})},lo=e=>(0,v.jsx)(Ae.A,{as:ao.P,className:"intercom-note-card",noPadding:!0,isEntireCardClickable:!0,children:(0,v.jsx)(so,Object.assign({},e))});var co=n(37341),uo=n(90188),po=n(82272),ho=n(61376),mo=n(99336);var go={name:"1jcxgks",styles:"padding-left:45px;position:relative"};const xo=(0,k.Ay)("div",{target:"ezy7gx811"})((({isInline:e})=>!e&&go)," ",(({isInline:e,theme:t})=>e&&(0,k.AH)(po.o," ",ho.C.className," &,",mo.sC.className," &,.intercom-comment &{box-shadow:",t.shadowXSmall,";margin-bottom:10px;}"))," ",(({isMessage:e})=>e&&(0,k.AH)("width:100%;padding-left:0;",To.className,"{padding:21px 30px;}",vo.className,"{margin-bottom:8px;font-size:20px;}",Co.className,"{font-size:14px;line-height:20px;}",bo.className,"{height:26px;font-size:13px;}",jo.className,"{margin-right:8px;}",Ao.className,"{width:calc(100% - 32px);padding-top:3px;}"))," ",(({theme:e})=>(0,k.AH)(fo.className,"{display:block;position:relative;overflow:hidden;background-color:",e.containerBaseNeutral,";transition:all 0.12s ease-out;text-decoration:none!important;&:first-of-type{",(0,ii.HF)({theme:e})," border-radius:3px 3px 0 0;}&:last-child{border-radius:3px;}}",To.className,"{padding:20px;}",vo.className,"{font-size:14px;line-height:1.2;overflow:wrap;display:flex;align-items:center;justify-content:center;gap:4px;font-weight:600;&,&:visited{color:",e.textDefault,";}&[type='educate.help_center']{text-align:center;}}",Co.className,"{color:",e.textDefault,";font-size:13px;line-height:1.38;",ii.IY,";}",bo.className,"{margin-top:11px;}",jo.className,"{display:inline-block;margin-right:8px;}",Ao.className,"{width:calc(100% - 32px);display:inline-block;vertical-align:middle;color:",e.textMuted,";line-height:16px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;span{white-space:nowrap;}}")),";"),fo=(0,k.Ay)("a",{target:"ezy7gx810"})((({theme:e,isGrouped:t})=>t&&(0,k.AH)("border-bottom:1px solid ",e.borderEmphasisNeutral,";&:last-child{border-bottom:none;}&:hover{background-color:",e.containerEmphasisNeutral,";transform:none;}",bo.className,"{margin-top:5px;}",To.className,"{padding:15px 20px;}")),";"),vo=(0,k.Ay)("div",{target:"ezy7gx89"})(),yo=(0,k.Ay)("span",{target:"ezy7gx88"})({name:"6jwybp",styles:"height:16px"}),bo=(0,k.Ay)("div",{target:"ezy7gx87"})(),wo=(0,k.Ay)("span",{target:"ezy7gx86"})(),jo=(0,k.Ay)("div",{target:"ezy7gx85"})(),ko=(0,k.Ay)("div",{target:"ezy7gx84"})({name:"ac0snl",styles:"position:absolute;left:0;bottom:10px"}),Ao=(0,k.Ay)("div",{target:"ezy7gx83"})({name:"vh5nmu",styles:"font-size:13px"}),Co=(0,k.Ay)("div",{target:"ezy7gx82"})(),So=(0,k.Ay)("div",{target:"ezy7gx81"})("text-align:center;color:",(0,k.w4)("textMuted"),";font-size:13px;clear:both;padding-top:0;padding-bottom:12px;"),To=(0,k.Ay)("div",{target:"ezy7gx80"})("@media (-ms-high-contrast: active){border:1px solid ",(0,k.w4)("borderNeutral"),";}");var _o=n(3356);class ArticleCard extends b.Component{constructor(...e){super(...e),this.linkRef=null,this.createHandleClick=e=>t=>{const n=t.ctrlKey||t.shiftKey||t.metaKey;if(!(!e.articleId||e.url&&n)){t.preventDefault();try{this.props.onArticleCardClick(e.articleId)}catch(t){(0,_o.bB)(e.url)}}},this.renderLinkCardFooter=e=>(0,v.jsxs)("div",{children:[e.description&&(0,v.jsx)(Co,{children:e.description}),e.author&&e.author.name&&this.renderAuthor(this.buildAuthor(e.author))]}),this.renderLink=(e,t)=>{const n=this.isSingleLink();return"educate.help_center"===e.linkType?(0,v.jsx)("a",{href:e.url,rel:"nofollow noreferrer noopener",target:"_blank",children:(0,v.jsx)(Se.A,{note:n?e.description:void 0,hoverBackground:!n,children:this.renderLinkCardTitle(e)},t)}):(0,v.jsx)(Se.A,{fullBleedCard:!0,note:n?e.description:void 0,rightIcon:n?void 0:"RightChevronColorable",rightIconColor:"linkColor",hoverBackground:!n,onClick:this.createHandleClick(e),children:(0,v.jsx)("strong",{children:e.title})},t)}}isSingleLink(){var e;return 1===(null==(e=this.props.part)?void 0:e.body.length)}buildAuthor(e){return{avatar:{square128:e.avatar},name:e.name,firstName:e.firstName||e.name}}renderAuthor(e){return(0,v.jsxs)(bo,{children:[(0,v.jsx)(jo,{children:(0,v.jsx)(co.h,{author:e,size:this.props.part.isMessage?24:16})}),(0,v.jsxs)(Ao,{children:[`${(0,Xe.Tl)("written_by")} `,(0,v.jsx)(wo,{children:e.name})]})]})}renderLinkCardTitle(e){return(0,v.jsx)(vo,{type:e.linkType,children:"educate.help_center"===e.linkType?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(yo,{children:(0,v.jsx)(Te.Ay,{size:16,type:"ExternalLink"})}),(0,v.jsx)("span",{children:e.title})]}):e.title})}renderLinkCards(){const{part:{body:e}}=this.props;if(this.isSingleLink()){const t=e[0];return this.renderLink(t)}return(0,v.jsx)(Ce.A,{children:e.map(((e,t)=>this.renderLink(e,t)))})}render(){const{hasAvatar:e,isInline:t,part:{isMessage:n,author:i}}=this.props;return(0,v.jsxs)(xo,{isInline:t,isMessage:n,children:[!n&&e&&(0,v.jsx)(ko,{children:(0,v.jsx)(co.h,{author:i})}),n&&(0,v.jsx)(So,{children:(0,Xe.Tl)("asked_about")}),(0,v.jsx)(Ae.A,{noPadding:!0,isEntireCardClickable:this.isSingleLink(),children:this.renderLinkCards()})]})}}ArticleCard.contextType=uo.D,ArticleCard.defaultProps={isInline:!1,hasAvatar:!0};const Eo=(0,o.Ng)(void 0,(e=>({onArticleCardClick(t){e((0,Ue.n$)(t,{}))}})))(ArticleCard),Io=e=>"visitor"===e||"lead"===e,zo=e=>void 0===e||""===e,No=(e,t)=>Io(e)&&!zo(t),Mo=(e,t)=>Io(e)&&!zo(t),Ro=e=>e?"email":"email_collector",Bo=()=>{const e=(0,b.useRef)(null);return(0,b.useEffect)((()=>{if(e.current)try{e.current.focus()}catch(e){}}),[]),e};var Po=n(61353),Lo=n(56213);const Oo=n.p+"images/next-icon.bec7df861347b47b620e.png",Do=n.p+"images/next-icon@2x.9dc9df3260a7f819d99a.png",Ho=n.p+"images/check-icon.900d4161ec398d5a11b6.png",Fo=n.p+"images/check-icon@2x.d53d4d5ad95d9ae26fc1.png";var Vo=n(34293);const Go=(0,k.Ay)("div",{target:"e584tag25"})("margin:30px 0 30px 0;padding:16px 20px 20px;color:",(0,k.w4)("textDefault"),";position:relative;border-radius:5px;text-align:left;background-color:",(0,k.w4)("containerBaseNeutral"),";",(({isSuccessful:e})=>e&&(0,k.AH)(oa.className,"{position:absolute;top:0;opacity:0;visibility:hidden;max-height:24px;}",sa.className,"{position:static;opacity:1;visibility:visible;max-height:48px;}")),";"),$o=(0,k.Ay)("span",{target:"e584tag24"})("font-size:13px;line-height:20px;color:",(0,k.w4)("textMuted"),";margin-right:39px;&:last-child{margin-right:0;}&:hover{color:",(0,k.w4)("textOnInverse"),";border-bottom:1px solid;}",(({theme:e,isSelected:t})=>t&&(0,k.AH)("color:",e.textDefault,";border-bottom:1px solid;")),";"),qo=(0,k.Ay)("div",{target:"e584tag23"})({name:"1jtfsfi",styles:"position:relative;margin-bottom:5px"}),Uo=(0,k.Ay)("div",{target:"e584tag22"})("width:100%;position:relative;float:left;",Go.className,"{margin-top:6px;margin-bottom:0;margin-left:45px;padding-left:0;}",$o.className,"{margin-right:19px;}"),Wo=(0,k.Ay)("div",{target:"e584tag21"})({name:"6qbw48",styles:"margin-top:8px;margin-bottom:8px;width:100%;position:relative;float:left"}),Ko=(0,k.Ay)("div",{target:"e584tag20"})("padding:26px 24px 24px;margin-left:0px;border-radius:",(0,k.w4)("finNotificationBorderRadiusPx"),"px;font-size:14px;line-height:1.4;color:",(0,k.w4)("textDefault"),";overflow:hidden;",ii.Hs,";"),Xo=(0,k.Ay)("div",{target:"e584tag19"})({name:"ac0snl",styles:"position:absolute;left:0;bottom:10px"}),Yo=(0,k.Ay)("div",{target:"e584tag18"})({name:"cy0b9q",styles:"position:relative;display:table;width:100%;div{display:table-cell;vertical-align:top;}"});var Zo={name:"abmacl",styles:"width:1px;transition:width 300ms 1000ms"};const Jo=(0,k.Ay)("div",{target:"e584tag17"})("width:40px;",(({hasChannel:e})=>e&&Zo),";"),Qo=(0,k.Ay)(Vo.l,{target:"e584tag16"})({name:"1bpw14p",styles:"position:absolute;top:12px;left:12px;z-index:1;transition:transform 300ms"});var ea={name:"1tepm2d",styles:"input{padding-left:33px;}"};const ta=(0,k.Ay)("div",{target:"e584tag15"})("position:relative;input{position:absolute;box-sizing:border-box;height:40px;width:100%;padding:0 12px;font-size:14px;font-family:",(0,k.w4)("fontSansSerif"),";color:",(0,k.w4)("textDefault"),";border-radius:4px 0 0 4px;border:1px solid ",(0,k.w4)("borderEmphasisNeutral"),";border-right:0;appearance:none;transition:border 300ms,color 400ms 600ms,padding 300ms 600ms,height 400ms 1000ms;&:disabled{opacity:0.7;}}",(({isPhone:e})=>e&&ea)," ",(({hasError:e,theme:t})=>e&&(0,k.AH)("input{border:1px solid ",t.borderError,";background-color:",t.containerError,";}"))," ",(({theme:e,isSuccessful:t})=>t&&(0,k.AH)("input{border:1px solid ",e.borderNeutral,";border-right:0;padding:0;height:20px;font-weight:400;color:",e.textDefault,";text-fill-color:",e.textDefault,";overflow:hidden;text-overflow:ellipsis;&:autofill{box-shadow:0 0 0px 1000px ",e.containerBaseNeutral," inset;text-fill-color:",e.textDefault,"!important;}}",Qo.className,"{transform:scale(0);}")),";");var na={name:"14j33fn",styles:"padding-left:33px"};const ia=(0,k.Ay)("span",{target:"e584tag14"})("position:absolute;box-sizing:border-box;height:40px;width:100%;padding:4px 12px 0;font-size:14px;font-weight:400;font-family:",(0,k.w4)("fontSansSerif"),";line-height:32px;color:",(0,k.w4)("textMuted"),";cursor:text;overflow:hidden;text-overflow:ellipsis;z-index:1;",(({isPhone:e})=>e&&na),";");var ra={name:"3ix1vd",styles:"opacity:1"};const oa=(0,k.Ay)("div",{target:"e584tag13"})("font-size:14px;line-height:24px;color:",(0,k.w4)("textDefault"),";transition:opacity 300ms 1000ms,max-height 400ms 1000ms;position:static;max-height:48px;",(({isSuccessful:e})=>e&&ra),";"),aa=(0,k.Ay)("div",{target:"e584tag12"})("font-size:14px;line-height:19px;color:",(0,k.w4)("textMuted"),";text-overflow:ellipsis;overflow:hidden;"),sa=(0,k.Ay)("div",{target:"e584tag11"})("font-size:14px;line-height:24px;color:",(0,k.w4)("textDefault"),";transition:opacity 300ms 1000ms,max-height 400ms 1000ms;position:absolute;top:0;opacity:0;visibility:hidden;max-height:24px;");var la={name:"10i7m94",styles:"opacity:0.7"};const ca=(0,k.Ay)("div",{target:"e584tag10"})("width:35px;height:40px;border-radius:0 4px 4px 0;background-color:",(0,k.w4)("appColor"),";box-shadow:0 1px 2px 0 ",(0,k.w4)("elevation2"),";transition:border-radius 300ms,opacity 300ms 600ms,height 400ms 1000ms;&:hover{opacity:0.7;}",(({isDisabled:e})=>e&&la)," ",(({hasChannel:e,theme:t})=>e&&(0,k.AH)("background-color:",t.fillSuccess,";opacity:0;border-radius:4px;height:20px;&:hover{opacity:0;}",va.className,"{opacity:0;transform:rotate(270deg) translate(-4px, -3px);}",ya.className,"{opacity:1;transform:rotate(0deg) scale(1);}")),";");var da={name:"xfpdpv",styles:".intercom-notification-channel-collector-card-controls-prompt{position:absolute;top:0;opacity:0;visibility:hidden;max-height:24px;}.intercom-notification-channel-collector-card-controls-message{position:static;opacity:1;visibility:visible;max-height:48px;}.intercom-notification-channel-collector-card-controls-channels{height:0;opacity:0;}"};const ua=(0,k.Ay)("div",{target:"e584tag9"})((({isSaved:e})=>e&&da),";"),pa=(0,k.Ay)("div",{target:"e584tag8"})("font-size:13px;line-height:20px;height:30px;color:",(0,k.w4)("textMuted"),";transition:opacity 300ms 300ms,height 400ms 1000ms;"),ha=(0,k.Ay)("span",{target:"e584tag7"})("margin-right:20px;color:",(0,k.w4)("textMuted"),";&:hover{color:",(0,k.w4)("textDefault"),";border-bottom:1px solid;}",(({theme:e,isSelected:t})=>t&&(0,k.AH)("color:",e.textDefault,";border-bottom:1px solid;")),";"),ma=({theme:e})=>(0,k.AH)("margin-bottom:6px;font-size:14px;line-height:24px;max-height:48px;color:",e.textDefault,";transition:opacity 300ms 1000ms,max-height 400ms 1000ms;"),ga=(0,k.Ay)("div",{target:"e584tag6"})(ma,";"),xa=(0,k.Ay)("div",{target:"e584tag5"})(ma," position:absolute;top:0;opacity:0;visibility:hidden;max-height:24px;"),fa={name:"zcwqmz",styles:"position:absolute;top:0;bottom:0;width:35px;height:40px;transition:transform 300ms linear,opacity 150ms linear;background-position:center;background-repeat:no-repeat"},va=(0,k.Ay)("div",{target:"e584tag4"})(fa," ",(0,ii.op)(Oo,Do,"8px","13px")," opacity:1;"),ya=(0,k.Ay)("div",{target:"e584tag3"})(fa," ",(0,ii.op)(Ho,Fo,"18px","14px")," opacity:0;transform:rotate(-90deg) scale(0.5);");var ba={name:"46s2pb",styles:"height:0;opacity:0"};const wa=(0,k.Ay)("div",{target:"e584tag2"})("height:30px;opacity:1;transition:opacity 300ms 300ms,height 400ms 1000ms;",(({isSuccessful:e})=>e&&ba),";"),ja=(0,k.Ay)("div",{target:"e584tag1"})({name:"ac0snl",styles:"position:absolute;left:0;bottom:10px"}),ka=(0,k.Ay)("div",{target:"e584tag0"})("color:",(0,k.w4)("textDisabled"),";font-size:14px;text-align:center;border-top:1px solid ",(0,k.w4)("borderEmphasisNeutral"),";padding-top:16px;");var Aa=n(91832);const Ca=({name:e,initialValue:t="",placeholder:n,showErrorMessage:i,errorMessage:r,ariaLabel:o,initialCountryCode:a="us",isSaving:s=!1,channelProvided:l,isValid:c,onSubmit:d,onInputChange:p,hasExistingChannel:h})=>{const[m,g]=(0,b.useState)(t),[x,f]=(0,b.useState)(!1),[y,w]=(0,b.useState)(!1),[j,k]=(0,b.useState)(e),A=(0,b.useRef)(null),C=Bo(),S=(0,b.useRef)(null);(0,b.useEffect)((()=>{e!==j?(g(t),k(e)):s||h||(g(t),f(!1),w(!1))}),[e,j,t,s,h]),(0,b.useEffect)((()=>()=>{S.current&&clearTimeout(S.current)}),[]);const T=()=>s||l,_=()=>{c(m)?(d(m),C.current&&C.current.blur(),w(!1)):w(!0)},E=e=>{T()||(e.preventDefault(),_())},I=()=>m!==t,z=()=>{C.current&&C.current.focus()},N=()=>""===m,M=()=>"phone"===e,R=()=>y||i;return(0,v.jsxs)("div",{onClick:z,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),z())},role:"button",tabIndex:0,children:[(0,v.jsxs)(Yo,{children:[(0,v.jsxs)(ta,{isPhone:M(),hasError:R(),isSuccessful:!!l,children:[M()?(()=>{const e=(0,Po.J3)(m),t=e?e.code:a;return(0,v.jsx)(Qo,{countryCode:t,"data-testid":`notification-channel-flag-${t}`})})():null,(x?N():N()||!I())?(()=>{const e=N()?{}:{visibility:"hidden"};return(0,v.jsxs)(ia,{isPhone:M(),children:[(0,v.jsx)("span",{style:e,children:t}),n]})})():null,(0,v.jsx)("input",{ref:C,type:(()=>{switch(e){case"phone":default:return"text";case"email":return"email"}})(),name:"intercom-channel-collector",disabled:T(),value:m,autoComplete:"off",onFocus:e=>{if((0,Lo.rr)())S.current=setTimeout((()=>{if(!A.current)return;const e=A.current.closest(".intercom-conversation-body-parts");(0,u.o2)(A.current,e)}),1e3);else{const t=e.target.value;e.target.value="",e.target.value=t}},onKeyDown:e=>{(e=>"Enter"===e.key&&!(e.altKey||e.shiftKey))(e)&&(_(),e.preventDefault())},onKeyUp:()=>{p()},onChange:e=>{const t=e.target.value;g(t),w(!1),x||f(I())},onBlur:yr.BW,"aria-label":o})]}),(0,v.jsx)(Jo,{hasChannel:!!l,children:(0,v.jsxs)(ca,{onTouchEnd:E,onClick:E,isDisabled:T(),hasChannel:!!l,"aria-label":"Submit",children:[(0,v.jsx)(va,{}),(0,v.jsx)(ya,{})]})})]}),R()&&(0,v.jsx)(Aa.A,{errorMessage:(()=>{switch(e){case"phone":{const e=(0,Po.E2)(m);return e?(0,Xe.Tl)(e):r||""}case"email":return(0,Xe.Tl)("that_email_address_doesnt_look_quite_right");default:return"That value doesn't look quite right"}})()})]})};var Sa=n(6314),Ta=n(36667);const _a=(e,t,n)=>(0,v.jsx)($o,{isSelected:t,onClick:n,children:(0,Xe.Tl)(e)}),Ea=({userCountryCode:e,isSaving:t,showErrorMessage:n,errorMessage:i,channelProvided:r,smsEnabled:o,showEmailCollector:a,showPhoneNumberCollector:s,hasExistingChannelValue:l,existingChannelText:c,existingChannelValue:d,title:u,nextPart:p,onEmailClick:h,onSmsClick:m,onEmailCollectorSubmit:g,onPhoneNumberCollectorSubmit:x,onInputChange:f})=>{const y=!!p,b=y&&(null==p?void 0:p.author.isAdmin),w=(0,v.jsx)(Ca,{name:"phone",initialValue:(0,Po.xI)(e),placeholder:" 123 456 7890",initialCountryCode:e,isSaving:t,showErrorMessage:n,errorMessage:i,channelProvided:r,isValid:Po.fn,onSubmit:x,onInputChange:f}),j=(0,v.jsx)(Ca,{name:"email",ariaLabel:"Enter your email",placeholder:Sa.o,isSaving:t,showErrorMessage:n,errorMessage:i,channelProvided:r,isValid:Ta.B,onSubmit:g,onInputChange:f}),k=a?j:s?w:void 0,A=_a("email",a,h),C=_a("sms",s,m),S=(0,v.jsxs)(wa,{children:[A,o?C:null]}),T=(0,v.jsxs)("div",{children:[(0,v.jsxs)(qo,{children:[(0,v.jsx)(oa,{isSuccessful:!1,children:u}),(0,v.jsx)(sa,{children:c})]}),o?S:null,k]}),_=(0,v.jsx)(aa,{children:d}),E=(0,v.jsxs)("div",{children:[(0,v.jsx)(oa,{isSuccessful:!0,children:c}),_]});return(0,v.jsx)(Go,{nextPartByAdmin:!!b,lastPart:!y,isSuccessful:l&&r,children:l&&r?E:T})},Ia=["conversationId","userRole","userSuppliedEmail","phoneNumber","smsEnabled","onEmailCollectorSubmit","onPhoneNumberCollectorSubmit","onInputChange"];const za=e=>{let{conversationId:t,userRole:n,userSuppliedEmail:i,phoneNumber:r,smsEnabled:o,onEmailCollectorSubmit:a,onPhoneNumberCollectorSubmit:s,onInputChange:l}=e,c=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,Ia);const[d,u]=(0,b.useState)(!0),[p,h]=(0,b.useState)(!1),[m,g]=(0,b.useState)(!1),{addNotificationChannelShownMetric:x,addNotificationChannelMetricByAction:f,recordChannelMetrics:y}=(e=>{const t=(0,b.useCallback)(((t,n)=>{(0,Ve.A5)(t,`notification_channel_${n}`,"messenger","in_conversation",{conversation_id:e})}),[e]),n=(0,b.useCallback)((e=>{t("received",e)}),[t]),i=(0,b.useCallback)(((e,n)=>{t(e,n)}),[t]),r=(0,b.useCallback)((e=>{n("options"),n("email"),e&&n("sms")}),[n]);return{addNotificationChannelShownMetric:n,addNotificationChannelMetricByAction:i,recordChannelMetrics:r}})(t),w=(0,b.useMemo)((()=>((e,t,n)=>{const i=No(e,t),r=Mo(e,n);return i||r})(n||"visitor",i,r)),[n,i,r]),j=(0,b.useCallback)((()=>{if(o&&!w)y(o);else if(!o&&!w){const e=Ro(o);x(e)}}),[o,w,y,x]);(0,b.useEffect)((()=>{j()}),[j]),(0,b.useEffect)((()=>{w&&!m&&g(!0)}),[w,m]);const k=(0,b.useCallback)((()=>{f("started","email"),u(!0),h(!1),l()}),[f,l]),A=(0,b.useCallback)((()=>{f("started","sms"),u(!1),h(!0),l()}),[f,l]),C=(0,b.useCallback)((e=>{const t=Ro(o);f("completed",t),a(e)}),[f,o,a]),S=(0,b.useCallback)((e=>{f("completed","sms"),s(e)}),[f,s]),T=(0,b.useMemo)((()=>((e,t,n)=>{const i=Mo(e,n);return No(e,t)?"youll_be_notified_here_and_by_email":i?"youll_be_notified_here_and_by_sms":void 0})(n||"visitor",i,r)),[n,i,r]),_=(0,b.useMemo)((()=>((e,t,n)=>{const i=Mo(e,n);return No(e,t)?t:i?n:void 0})(n||"visitor",i,r)),[n,i,r]),E=(0,b.useMemo)((()=>(e=>e?"get_notified":"get_notified_by_email")(o)),[o]),I=T?(0,Xe.Tl)(T):void 0,z=(0,Xe.Tl)(E);return(0,v.jsx)(Ea,Object.assign({},c,{conversationId:t,smsEnabled:o,showEmailCollector:d,showPhoneNumberCollector:p,channelProvided:m,hasExistingChannelValue:w,existingChannelText:I,existingChannelValue:_,title:z,onEmailClick:k,onSmsClick:A,onEmailCollectorSubmit:C,onPhoneNumberCollectorSubmit:S,onInputChange:l}))};var Na=n(12135),Ma=n(97899);const Ra=(0,o.Ng)((e=>{const{smsEnabled:t}=e.app,n=(0,Ma.Vy)(e),{id:i,role:r,userSuppliedEmail:o,name:a,phoneNumber:s,countryCode:l}=e.user,{isSaving:c,showErrorMessage:d,errorMessage:u}=e.notificationChannels;return{conversationId:n,userId:i,userRole:r,userCountryCode:l,userSuppliedEmail:o,userName:a,phoneNumber:s,smsEnabled:t,isSaving:c,showErrorMessage:d,errorMessage:u}}),(e=>({onEmailCollectorSubmit:t=>{e((0,Na.$8)(Lt.Ay,t))},onPhoneNumberCollectorSubmit:t=>{e((0,Na.NA)(Lt.Ay,t))},onInputChange:()=>{e((0,Na.mK)())}})),((e,t,n)=>{const i={onInputChange:()=>t.onInputChange()};return Object.assign({},n,e,t,i)}))(za);function Ba({part:e,nextPart:t,hasAvatar:n=!0}){return(0,v.jsxs)(Uo,{children:[n&&e.author&&(0,v.jsx)(ja,{children:(0,v.jsx)(co.h,{author:e.author,size:28})}),(0,v.jsx)(Ra,{nextPart:t})]})}var Pa=n(23753);const La=n.p+"images/send-button.b96f781af8294c6c5416.png",Oa=n.p+"images/send-button@2x.f77810ee02e28e5843df.png";const Da=(0,k.Ay)("div",{target:"e1lpdmtp5"})("padding:5px 15px;border-top:1px solid ",(0,k.w4)("containerEmphasisNeutral"),";"),Ha=(0,k.Ay)("div",{target:"e1lpdmtp4"})(),Fa=(0,k.Ay)("div",{target:"e1lpdmtp3"})("position:relative;display:table;width:100%;div{display:table-cell;vertical-align:top;}",Ha.className,"{width:40px;}"),Va=(0,k.Ay)("div",{target:"e1lpdmtp2"})("position:relative;max-width:180px;textarea,pre{box-sizing:border-box;height:100%;width:100%;padding:12px;font-size:14px;font-family:",(0,k.w4)("fontSansSerif"),";border:none;line-height:19px;white-space:pre-wrap;word-wrap:break-word;}textarea{position:absolute;top:0;left:0;color:",(0,k.w4)("textDefault"),";resize:none;overflow-y:hidden;&::placeholder{color:",(0,k.w4)("textMuted"),";font-style:",(0,k.w4)("fontSansSerif"),";font-size:14px;font-weight:400;line-height:19px;opacity:0.7;}}pre{visibility:hidden;max-height:140px;}"),Ga=(0,k.Ay)("div",{target:"e1lpdmtp1"})("position:absolute;top:2px;bottom:0;width:40px;height:40px;cursor:pointer;transition:transform 300ms linear,opacity 150ms ease;background-position:center;background-repeat:no-repeat;opacity:0.8;",(0,ii.op)(La,Oa,"20px","20px")," &:hover{opacity:1;}"),$a=(0,k.Ay)("div",{target:"e1lpdmtp0"})({name:"1yx6u7l",styles:"width:40px;height:40px;border:none;transition:border-radius 300ms,opacity 300ms 600ms,height 400ms 1000ms"}),qa=(0,b.createContext)(null);qa.displayName="ComposerShouldFocusContext";const Ua={composerShouldFocus:!0,setComposerShouldFocus:()=>{}};function Wa({initialValue:e="",placeholder:t,onSubmit:n,onChange:i}){const[r,o]=(0,b.useState)(e),a=(0,b.useContext)(qa),s=(0,b.useRef)(null),l=Bo(),c=(0,b.useRef)(null);(0,b.useEffect)((()=>()=>{a&&a.setComposerShouldFocus(!0),c.current&&clearTimeout(c.current)}),[a]);const d=e=>{e.preventDefault(),p()},p=()=>{var e;n(r),null==(e=l.current)||e.blur()};return(0,v.jsx)(Da,{ref:s,children:(0,v.jsxs)(Fa,{children:[(0,v.jsxs)(Va,{children:[(0,v.jsxs)("pre",{children:[r,(0,v.jsx)("br",{})]}),(0,v.jsx)("textarea",{ref:l,name:"intercom-conversation-rating-remark",value:r,placeholder:t,onFocus:e=>{if(a&&a.setComposerShouldFocus(!1),(0,Lo.rr)())c.current=setTimeout((()=>{if(!s.current)return;const e=s.current.closest(".intercom-conversation-body-parts");e&&(0,u.o2)(s.current,e)}),1e3);else{const t=e.target.value;e.target.value="",e.target.value=t}},onKeyDown:e=>{(e=>"Enter"===e.key&&!(e.altKey||e.shiftKey))(e)&&(p(),e.preventDefault())},onChange:e=>{const{value:t}=e.target;o(t),i()},onBlur:()=>{a&&a.setComposerShouldFocus(!0),(0,yr.BW)()},"aria-label":t})]}),(0,v.jsx)(Ha,{children:(0,v.jsx)($a,{onTouchEnd:d,onClick:d,"aria-label":(0,Xe.Tl)("submit"),children:(0,v.jsx)(Ga,{})})})]})})}const Ka=(0,k.Ay)("span",{target:"e1aseij90"})("&,&:hover{width:18px;height:18px;display:inline-block;background-size:contain;vertical-align:sub;}",(({images:e})=>(0,ii.op)(e.file,e.file2x,"28px","28px")),";");const Xa=(0,k.Ay)("span",{target:"e1ri5tng4"})("display:inline-block;width:28px;height:28px;",(({images:e})=>e&&(0,ii.op)(e.file,e.file2x,"28px","28px"))," ",(({emoji:e})=>e&&(e=>(0,k.AH)("&::before{content:'",e,"';width:28px;height:28px;display:flex;justify-content:center;align-items:center;scale:1.7;}"))(e)),";"),Ya=(0,k.Ay)("div",{target:"e1ri5tng3"})("margin-top:5px;cursor:pointer;font-size:13px;color:",(0,k.w4)("textMuted"),";text-align:center;opacity:0;transition:opacity 0.3s;"),Za=(0,k.Ay)("div",{target:"e1ri5tng2"})({name:"1r5gb7q",styles:"display:inline-block"}),Ja=(0,k.Ay)("div",{target:"e1ri5tng1"})("width:30px;margin:6px 0;display:flex;flex-direction:column;align-items:center;justify-content:space-between;&:hover{",Ya.className,"{opacity:1;}",Xa.className,"{transform:scale(1.28);filter:none;}}",(({chosen:e})=>e&&(0,k.AH)(Xa.className,"{transform:scale(1.28);}"))," ",(({otherChosen:e})=>e&&(0,k.AH)(Xa.className,"{filter:grayscale(1) opacity(0.3);}")),";"),Qa=(0,k.Ay)("div",{target:"e1ri5tng0"})("width:30px;margin:6px 0;padding-bottom:20px;display:flex;flex-direction:column;align-items:center;justify-content:space-between;",Xa.className,"{filter:grayscale(1) opacity(0.3);}"),es={1:{emoji:"😠",unicode:"1f620",tooltipKey:"terrible",images:{file:n.p+"images/rating-1.bf490749b4a7ca9d8653.png",file2x:n.p+"images/rating-1@2x.6a3aa6ac8c6ab90bb33a.png"}},2:{emoji:"🙁",unicode:"1f615",tooltipKey:"bad",images:{file:n.p+"images/rating-2.d98d6f92d27685e2091a.png",file2x:n.p+"images/rating-2@2x.9a8da88f1780cda9e023.png"}},3:{emoji:"😐",unicode:"1f610",tooltipKey:"ok_description",images:{file:n.p+"images/rating-3.04724c144bb3a33420bb.png",file2x:n.p+"images/rating-3@2x.02f225bc5a7d0a79bdec.png"}},4:{emoji:"😃",unicode:"1f603",tooltipKey:"great",images:{file:n.p+"images/rating-4.d5ff256456a9520d27f7.png",file2x:n.p+"images/rating-4@2x.74192105846bf66e46b9.png"}},5:{emoji:"🤩",unicode:"1f929",tooltipKey:"amazing",images:{file:n.p+"images/rating-5.c91dae975f496659f0dc.png",file2x:n.p+"images/rating-5@2x.6136d13b7da0c9abf5c4.png"}}};function ts({ratingIndex:e,chosen:t,otherChosen:n,onRatingChosen:i,isDisabled:r}){const[o,a]=(0,b.useState)(!1);(0,b.useEffect)((()=>{(()=>{const t=es[e].images;try{Object.keys(t).forEach((n=>{const i=t[n],r=new Image;r.src=i,r.onerror=()=>{a(!0),(0,Ve.uo)(`Error loading image: ${i} for rating ${e}`)}}))}catch(e){return}})()}),[e]);const s=()=>(0,Xe.Tl)(es[e].tooltipKey),l=(0,b.useCallback)((t=>{t.preventDefault(),i(e)}),[i,e]),c=()=>{const t=es[e];return(0,v.jsx)(Xa,{className:"intercom-anchor",onClick:l,"aria-label":s(),role:"button",emoji:o?t.emoji:void 0,images:o?void 0:t.images})},d=()=>{const t=es[e];return(0,v.jsx)(Xa,{className:"intercom-anchor","aria-label":s(),"aria-disabled":"true",role:"button",emoji:o?t.emoji:void 0,images:o?void 0:t.images})},u=s();return(0,v.jsx)(Za,{children:r?(0,v.jsx)(Qa,{children:d()}):(e=>(0,v.jsxs)(Ja,{chosen:t,otherChosen:n,children:[c(),(0,v.jsx)(Ya,{children:e})]}))(u)})}function ns({ratingIndex:e}){return(e=>!!e&&e in es)(e)?(0,v.jsx)(Ka,{role:"img",images:es[e].images,"aria-label":es[e].tooltipKey}):null}var is=n(65318);const rs=(0,k.Ay)("div",{target:"e73xzvp8"})("margin:30px 0 30px 0;position:relative;text-align:left;background-color:",(0,k.w4)("containerBaseNeutral"),";border-radius:5px;color:",(0,k.w4)("textDefault"),";transition:height 200ms ease-in-out;height:",(0,k.xk)("height"),"px;",ii.HF," ",(({useNewConversationStyle:e,groupingPosition:t,theme:n})=>e&&(0,k.AH)("margin-bottom:4px;box-shadow:none;border-radius:",(0,is.EF)(t),";border:1px solid ",n.borderEmphasisNeutral,";background:",n.alphaWhite90,";")),";"),os=(0,k.Ay)("div",{target:"e73xzvp7"})({name:"vxuddk",styles:"padding:24px"}),as=(0,k.Ay)("div",{target:"e73xzvp6"})("font-size:14px;color:",(0,k.w4)("textDefault"),";line-height:22px;text-align:center;margin-bottom:3px;"),ss=(0,k.Ay)("div",{target:"e73xzvp5"})("font-size:13px;line-height:19px;color:",(0,k.w4)("textMuted"),";text-align:center;"),ls=(0,k.Ay)("div",{target:"e73xzvp4"})("border-top:1px solid ",(0,k.w4)("borderEmphasisNeutral"),";color:",(0,k.w4)("textMuted"),";font-size:14px;line-height:19px;max-height:140px;overflow-y:auto;padding:16px 24px;"),cs=(0,k.Ay)("div",{target:"e73xzvp3"})({name:"1jba3gn",styles:"padding:20px 20px 0"}),ds=(0,k.Ay)("div",{target:"e73xzvp2"})({name:"1jtfsfi",styles:"position:relative;margin-bottom:5px"}),us=(0,k.Ay)("div",{target:"e73xzvp1"})("font-size:14px;line-height:24px;color:",(0,k.w4)("textDefault"),";transition:opacity 300ms 1000ms,max-height 400ms 1000ms;position:static;max-height:48px;text-align:center;"),ps=(0,k.Ay)("div",{target:"e73xzvp0"})({name:"nore23",styles:"margin:8px 10px 6px;display:flex;justify-content:space-between"});function hs(e,t,n,i){return(r,o)=>{r(function(e,t,n){return{type:Ot.aQ5,conversationId:e,ratingIndex:n,ratingUuid:t}}(t,n,i));const{session:a}=o();return e.changeConversationRatingIndex(a,t,n,i)}}function ms(e,t,n,i){return(r,o)=>{if(r(function(e,t,n){return{type:Ot.ze_,conversationId:e,remark:n,ratingUuid:t}}(t,n,i)),void 0===i||""===i)return Promise.resolve();const{session:a}=o();return e.addConversationRatingRemark(a,t,n,i)}}const gs=(0,o.Ng)((e=>({conversationId:(0,Ma.Vy)(e)})),(e=>({onRemarkSubmit:(t,n,i)=>{e(ms(Lt.Ay,t,n,i))},onRatingChosen:(t,n,i)=>{e(hs(Lt.Ay,t,n,i))}})),((e,t,n)=>{const{conversationId:i}=e,{chosenRating:r,remark:o,submitted:a,uuid:s,blockRating:l}=n.part.conversationRating,c={onRemarkSubmit:e=>t.onRemarkSubmit(i,s,e),onRatingChosen:e=>t.onRatingChosen(i,s,e),chosenRating:r,remark:o,submitted:a,blockRating:l};return Object.assign({},n,e,t,c)}))((function({chosenRating:e,remark:t,submitted:n,nextPart:i,onRemarkSubmit:r,onRatingChosen:o,blockRating:a,useNewConversationStyle:s,groupingPosition:l}){const c=(0,b.useRef)(null),d=(0,b.useCallback)((t=>void 0===t&&void 0!==e),[e]),p=(0,b.useCallback)((()=>{if(void 0!==i||!c.current)return;const e=c.current.closest(".intercom-conversation-body-parts");e&&(0,u.cs)(e)}),[i]),h=(0,b.useRef)();(0,b.useEffect)((()=>{d(h.current)&&p(),h.current=e}),[e,d,p]);const m=()=>{p()},g=()=>!!e&&e>0,x=t=>e===t,f=()=>(0,v.jsx)(ls,{children:t}),y=()=>{const e=[];for(let n=1;n<=5;n++)e.push((0,v.jsx)(ts,{ratingIndex:n,chosen:x(n),otherChosen:(t=n,g()&&!x(t)),onRatingChosen:o,isDisabled:!g()&&a},n));var t;return(0,v.jsxs)(cs,{children:[(0,v.jsx)(ds,{children:(0,v.jsx)(us,{children:(0,Xe.Tl)("rate_your_conversation")})}),(0,v.jsx)(ps,{children:e})]})},w=()=>(0,v.jsx)(Wa,{placeholder:(0,Xe.Tl)("tell_us_more"),onChange:m,onSubmit:r},"remark-input");return(0,v.jsx)(rs,{ref:e=>c.current=e,useNewConversationStyle:s,groupingPosition:l||Qt.L3.standalone,children:(0,v.jsx)(St.A,{children:(0,v.jsx)("div",{children:(0,v.jsx)(Pa.A,{appearDelay:300,children:n||void 0!==e&&void 0!==t?(0,v.jsxs)("div",{children:[(0,v.jsxs)(os,{children:[(0,v.jsxs)(as,{children:[(0,Xe.Tl)("you_rated_the_conversation")," ",(0,v.jsx)(ns,{ratingIndex:e})]}),(0,v.jsx)(ss,{children:(0,Xe.Tl)("thanks_for_letting_us_know")})]}),void 0!==t&&""!==t.trim()?f():null]},"conversation-rating-thanks"):(0,v.jsxs)("div",{children:[y(),(0,v.jsx)(tt,{duration:500,animationKey:"conversation-rating",children:g()?w():null})]},"form")})})})})}));const xs=(0,k.Ay)("div",{target:"edo8wak1"})("max-width:280px;position:relative;",rs.className,"{margin-top:8px;margin-bottom:8px;margin-left:45px;}",(({useNewConversationStyle:e})=>e&&(0,k.AH)("margin-bottom:0;",rs.className,"{margin-left:0;margin-top:0;margin-bottom:0;}")),";"),fs=(0,k.Ay)("div",{target:"edo8wak0"})({name:"ac0snl",styles:"position:absolute;left:0;bottom:10px"}),vs=({part:e,nextPart:t,hasAvatar:n=!1,useNewConversationStyle:i=!1,groupingPosition:r=Qt.L3.standalone})=>(0,v.jsxs)(xs,{useNewConversationStyle:i,children:[n&&(0,v.jsx)(fs,{children:(0,v.jsx)(co.h,{author:e.author})}),(0,v.jsx)(gs,{nextPart:t,part:e,useNewConversationStyle:i,groupingPosition:r})]});var ys=n(51457),bs=n(32490);function ws({part:e,appName:t,frameWindow:n}){const{author:i,body:r}=e;return(0,v.jsx)(bs.d,{className:"intercom-pointer",isInbox:!0,children:(0,v.jsx)(to.A,{appName:t,isReplyStyle:!1,author:i,children:(0,v.jsxs)(bs.Pj,{className:"intercom-pointer-body",children:[(0,v.jsx)(pi.A,{blocks:r,frameWindow:n}),(0,v.jsx)(ys.kG,{isInsideInbox:!0})]})})})}const js=(0,k.Ay)("div",{target:"e1eq5ax27"})("background:",(0,k.w4)("containerBaseNeutral"),";margin:0 -20px;width:calc(100% + 40px);max-width:none;"),ks=(0,k.Ay)("div",{target:"e1eq5ax26"})({name:"1671ndx",styles:"display:flex;gap:12px;overflow-x:auto;overflow-y:hidden;padding:4px 20px"}),As=(0,k.Ay)("div",{target:"e1eq5ax25"})("display:flex;flex-direction:column;flex-shrink:0;width:200px;min-height:260px;border-radius:20px;background:",(0,k.w4)("containerBaseNeutral"),";cursor:pointer;transition:all 0.2s ease;overflow:hidden;"),Cs=(0,k.Ay)("div",{target:"e1eq5ax24"})("padding:15px;display:flex;flex-direction:column;gap:4px;flex:0 0 auto;border:1px solid ",(0,k.w4)("borderNeutral"),";border-top:none;border-radius:0 0 20px 20px;"),Ss=(0,k.Ay)("div",{target:"e1eq5ax23"})("width:100%;height:auto;overflow:hidden;background:",(0,k.w4)("containerBaseNeutral"),";display:flex;align-items:center;justify-content:center;flex-shrink:0;border-radius:20px 20px 0 0;img{width:100%;object-fit:cover;}"),Ts=(0,k.Ay)("h4",{target:"e1eq5ax22"})("font-size:14px;font-weight:600;margin:0;color:",(0,k.w4)("textDefault"),";line-height:1.3;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"),_s=(0,k.Ay)("p",{target:"e1eq5ax21"})("font-size:14px;font-weight:400;margin:0;color:",(0,k.w4)("textMuted"),";overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"),Es=(0,k.Ay)("p",{target:"e1eq5ax20"})("font-size:12px;font-weight:400;color:",(0,k.w4)("textMuted"),";margin:4px 0 0 0;line-height:1.4;overflow:hidden;display:-webkit-box;-webkit-line-clamp:4;-webkit-box-orient:vertical;"),Is=({part:e,conversationId:t})=>{const n=n=>{(0,Ve.A5)("clicked","carousel_card","messenger","in_conversation",{conversation_id:t,part_id:e.id,carousel_item_id:n.id,carousel_item_title:n.title,carousel_item_url:n.url,has_image:!!n.image}),n.url&&(0,_o.re)(n.url)};return e.carousel&&0!==e.carousel.length?(0,v.jsx)(js,{children:(0,v.jsx)(ks,{children:e.carousel.map((e=>(0,v.jsxs)(As,{onClick:()=>n(e),role:"button",tabIndex:0,onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),n(e))},children:[e.image&&(0,v.jsx)(Ss,{children:(0,v.jsx)("img",{src:e.image,alt:e.title})}),(0,v.jsxs)(Cs,{children:[(0,v.jsx)(Ts,{children:e.title}),e.subtitle&&(0,v.jsx)(_s,{children:e.subtitle}),e.description&&(0,v.jsx)(Es,{children:e.description})]})]},e.id)))})}):null};var zs=n(67098),Ns=n.n(zs),Ms=n(1439),Rs=n(68239);const Bs=72,Ps=38,Ls=45;var Os={name:"o8oj3q",styles:"margin:0 auto;width:100%"};const Ds=(0,k.Ay)("div",{target:"ee6m5h03"})("max-height:",(0,k.w4)("notificationHeightPx"),"px;width:",340,"px;&,*{cursor:pointer;}",_t.jt.className,"{border-radius:",(0,k.w4)("notificationBorderRadiusPx"),"px;padding:18px 20px;box-shadow:",(0,k.w4)("shadowSmall"),";}",_t.TJ.className,"{padding:0;}",(({theme:e})=>e.isMobileSize&&Os),";");var Hs={name:"1d3w5wq",styles:"width:100%"};const Fs=(0,k.Ay)("div",{target:"ee6m5h02"})("height:100%;width:",340,"px;position:relative;*{cursor:pointer;}",Rs.$z.className,"{width:100%;}",(({theme:e})=>e.isMobileSize&&Hs),";"),Vs=(0,k.Ay)("div",{target:"ee6m5h01"})("font-size:",Bs,"px;line-height:",Bs,"px;",Ds.className,"{font-size:",Ps,"px;line-height:",Ps,"px;margin-top:",4.75,"px;margin-bottom:",4.75,"px;}",Fs.className,"{font-size:",Ls,"px;line-height:",Ls,"px;margin-top:",5.625,"px;margin-bottom:",5.625,"px;}"),Gs=(0,k.Ay)("img",{target:"ee6m5h00"})("width:",Bs,"px;height:",Bs,"px;min-width:",Bs,"px;min-height:",Bs,"px;",Ds.className,"{width:",Ps,"px;height:",Ps,"px;min-width:",Ps,"px;min-height:",Ps,"px;}",Fs.className,"{width:",Ls,"px;height:",Ls,"px;min-width:",Ls,"px;min-height:",Ls,"px;}");var $s=n(75959),qs=n.n($s);function Us({text:e,emoji:t="auto"}){const n=(0,Ms.Zv)(Ns()(e).replace("&nbsp;","").trim());return(e=>"native"===e||"image"!==e&&"auto"===e&&(0,Ms.P9)())(t)?(t=>(0,v.jsx)(Vs,{role:"img","aria-label":(0,Ms.x$)(e)||t,children:t}))(n):(t=>{const n=qs().twemojiSVGUri(t);return(0,v.jsx)(Gs,{src:n,alt:t,"aria-label":(0,Ms.x$)(e)})})(n)}var Ws=n(65252),Ks=n(22973);function Xs(e,t){const n=(0,b.useRef)(null);function i(){n.current&&clearInterval(n.current)}(0,b.useEffect)((()=>(i(),n.current=setInterval(e,t),i)),[e,t])}const Ys=(e,t=Ks.pS)=>{const{saveState:n,seenState:i,createdAt:r,showCreatedAt:o,author:a,saveFailureReason:s}=e,l=o?(0,En.iw)(r):null,c=(e=>"not-seen-yet"===e?(0,Xe.Tl)("message_unseen"):"seen"===e?(0,Xe.Tl)("message_seen"):"")(i);return null!=a&&a.isSelf||!o?"failed"===n?"file_size"===s?(0,Xe.Tl)("file_too_big",{limit:`${t}`}):(0,Z.mn)(s)?(0,Xe.Tl)("file_type_not_allowed"):(0,Xe.Tl)("failed_to_send"):"saved"===n&&null!=a&&a.isSelf&&l?`${l}. ${c}`:null:(0,is.vz)(e)?`${l}.`:`${(e=>e.isBot?`${(0,Xe.Tl)("bot")} · `:"")(a)}${l}.`},Zs=(0,b.forwardRef)((({part:e,inlineMetadata:t=!1},n)=>{const i=(0,m.GV)(x.rp),r=(0,Ks.v0)(i),[o,a]=(0,b.useState)((()=>Ys(e,r)));return Xs((0,b.useCallback)((()=>{const t=Ys(e,r);a(t)}),[e,r]),6e4),o?(0,v.jsx)(Ws.j,{ref:n,className:"intercom-conversation-part-metadata",inlineMetadata:t,isNonSelfAuthor:(s=e.author,(null==s?void 0:s.isAdmin)||(null==s?void 0:s.isBot)||!(null!=s&&s.isSelf)),children:(0,v.jsx)(Ws.J,{className:"intercom-conversation-part-metadata-save-state",children:o})}):null;var s}));var Js=n(80389);const Qs=e=>"messengerCard"===e.type||"createTicketCard"===e.type,el=e=>!Qs(e),tl=e=>"paragraph"===e.type&&!e.text,nl=({blockGroup:e,index:t,part:n,isLastGroup:i,hasAvatar:r,showInlineMetadata:o,zoomable:a,maxImageWidth:s,onImageClick:l,isLastPart:c,frameWindow:d})=>{const{author:u}=n,p=o&&i&&e.every(el),h=e.every(tl),m=e.every(el),g=e.every(Qs);return h?null:(0,v.jsxs)(Js.B,{isText:m,hasAvatar:r,isMessengerCard:g,isAdmin:null==u?void 0:u.isAdmin,isUser:null==u?void 0:u.isSelf,children:[(0,v.jsx)(pi.A,{blocks:e,author:n.author,zoomable:a,maxImageWidth:s,onImageClick:l,isLastPart:c,frameWindow:d,skipStyleValidation:n.skipUxStyleValidation}),p?(0,v.jsx)(Zs,{part:n}):null]},t)};class BlockGroup{constructor(){this.blocks=[]}addBlock(e){this.blocks.push(e)}}class BlockGroups{constructor(){this.groups=[]}addBlock(e){let t=this.groups[this.groups.length-1];t&&t.blocks.every(el)&&el(e)||(t=new BlockGroup,this.groups.push(t)),t.addBlock(e)}}const il=({isLastPart:e,part:t,hasAvatar:n,showInlineMetadata:i,zoomable:r,maxImageWidth:o,onImageClick:a,frameWindow:s})=>{const l=(0,b.useMemo)((()=>{const e=new BlockGroups;return t.body.forEach((t=>e.addBlock(t))),e}),[t.body]);return(0,v.jsx)(Js.J,{children:l.groups.map(((c,d)=>(0,v.jsx)(nl,{blockGroup:c.blocks,index:d,isLastGroup:d===l.groups.length-1,part:t,hasAvatar:n,showInlineMetadata:i,zoomable:r,maxImageWidth:o,onImageClick:a,isLastPart:e,frameWindow:s},d)))})};var rl=n(69771);var ol={name:"1qlw8vx",styles:"transform:translate(0, 100%);bottom:-2px;right:0"},al={name:"ue1v0s",styles:"transform:translate(-50%, 100%);bottom:-2px;left:50%"};const sl=(0,k.Ay)("div",{target:"e8w1ysz1"})("z-index:",(0,ii.fE)(1),";box-sizing:border-box;position:absolute;width:auto;pointer-events:",(0,k.xk)("pointerEvents"),";",(({position:e})=>"bottom"===e&&al)," ",(({position:e})=>"bottomRight"===e&&ol)," ",(({position:e,top:t,bottom:n,left:i})=>"auto"===e&&(0,k.AH)("transform:translate(-50%, 0);",null!=t&&(0,k.AH)("top:",t,"px;")," ",null!=n&&(0,k.AH)("bottom:",n,"px;")," left:",i,"px;")),";");var ll={name:"1bmnxg7",styles:"white-space:nowrap"};const cl=(0,k.Ay)("div",{target:"e8w1ysz0"})("background:",(0,k.w4)("containerEmphasisNeutral"),";opacity:0.95;color:",(0,k.w4)("textDefault"),";border-radius:3px;font-size:12px;line-height:1.4;text-align:center;padding:2px 4px 0;",(({wrapText:e})=>!e&&ll)," ",(({type:e,theme:t})=>"dark"===e&&(0,k.AH)("background:",t.alphaBlack60,";")),";");function dl({children:e,content:t,position:n="auto",enabled:i=!0,type:r="default",wrapText:o=!1,hideOnMouseMove:a=!0,enablePointerEvents:l=!1,enterDelay:c=500,exitDelay:d=0,forceShow:u=!1}){const[p,h]=(0,b.useState)({top:0,bottom:null,left:0}),[m,g]=(0,b.useState)(!1),x=(0,b.useRef)(null),f=(0,b.useRef)(null),y=(0,b.useRef)(null),w=(0,b.useRef)(Date.now()),j=()=>{clearTimeout(y.current),clearInterval(f.current)};(0,b.useEffect)((()=>j),[]);const k=u||m&&i&&t,A=(0,v.jsx)(tt,{animationKey:Boolean(k).toString(),duration:200,children:k?(0,v.jsx)(sl,{as:s.CS.div,position:n,left:p.left,top:p.top,bottom:p.bottom,pointerEvents:l?"auto":"none",children:"string"!=typeof t?t:(0,v.jsx)(cl,{type:r,wrapText:o,children:t})}):null}),C={onMouseEnter:()=>{j(),f.current=setInterval((()=>{const e=Date.now()-w.current>c;g(e),e&&clearInterval(f.current)}),100)},onMouseLeave:()=>{j(),y.current=setTimeout((()=>{g(!1)}),d)},onMouseMove:e=>{if(!x.current)return;const t=x.current.getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top,r=t.bottom-e.clientY;let o,s;i>t.height/2?o=Math.round(r+15):s=Math.round(i+20),w.current=Date.now(),a&&g(!1),h({top:s,bottom:o,left:Math.round(n+5)})},ref:x};return(0,v.jsx)(v.Fragment,{children:e(A,C)})}var ul=n(82825);function pl({explanation:e,learnMoreURL:t}){return(0,v.jsxs)(hl,{children:[e,t&&(0,v.jsxs)("a",{href:t,target:"_blank",rel:"noreferrer",children:[(0,Xe.Tl)("learn_more")," ",(0,v.jsx)(ul.A,{})]})]})}const hl=(0,k.Ay)("div",{target:"e13saqdc0"})("border-radius:16px;border:none;background:",(0,k.w4)("containerBaseNeutral"),";padding:16px;box-shadow:",(0,k.w4)("shadowSmall"),";max-width:320px;color:",(0,k.w4)("textDefault"),";line-height:150%;font-size:14px;font-weight:400;a{display:flex;align-items:center;color:",(0,k.w4)("textMuted"),";font-weight:600;text-decoration:none;&:hover,&:active{color:",(0,k.w4)("textMuted"),";}svg{height:13px;path{stroke:",(0,k.w4)("iconMuted"),";}}}"),ml=i;var gl=n(45134),xl=n(15927),fl=n(40961);const vl=(0,k.Ay)("div",{target:"e5gnry51"})("display:inline-flex;flex-direction:row;justify-content:center;align-items:center;padding:4px;gap:2px;line-height:1;font-size:14px;font-weight:normal;border-radius:20px;",(({color:e="textDefault",backgroundColor:t="containerEmphasisNeutral",theme:n})=>(0,k.AH)("color:",n[e],";background:",n[t],";transition:background 0.2s ease-in-out,color 0.2s ease-in-out;")),";"),yl=(0,k.Ay)("span",{target:"e5gnry50"})({name:"1buzkqa",styles:"padding:0 2px"}),bl=({children:e,icon:t,color:n="textDefault",backgroundColor:i})=>(0,v.jsxs)(vl,{color:n,backgroundColor:i,children:[e&&(0,v.jsx)(yl,{children:e}),t&&(0,v.jsx)(Te.Ay,{type:t,color:n})]});function wl({label:e="",color:t,backgroundColor:n}){return(0,v.jsx)(bl,{icon:"Info",color:t,backgroundColor:n,children:e})}var jl=n(20888);const kl=(0,b.createContext)(void 0);kl.displayName="TooltipPlaceContext";const Al=()=>{const e=(0,b.useContext)(kl);if(!e)throw new Error("Component needs to be wrapped in a TooltipPlaceContext");return e},Cl=({children:e})=>{const t=(0,b.useRef)(null),[n,i]=(0,b.useState)(null);return(0,b.useEffect)((()=>{i(t.current)}),[]),(0,v.jsxs)(kl.Provider,{value:{element:n},children:[(0,v.jsx)("div",{ref:t}),e]})},Sl=({triggerClassName:e})=>{const t=(0,m.GV)((e=>e.app.name||"")),n=(0,Xe.Tl)("answer_is_generated_with_ai_sources",{company_name:t}),{element:i}=Al();return(0,v.jsxs)(jl.bL,{children:[(0,v.jsx)(jl.l9,{"aria-label":"Tooltip opener",className:e,children:(0,v.jsx)(wl,{color:"iconMuted",backgroundColor:"none"})}),i&&(0,fl.createPortal)((0,v.jsx)(jl.UC,{children:(0,v.jsx)(pl,{explanation:n})}),i)]})},Tl=(0,k.Ay)("div",{target:"e1nxf91u2"})("font-size:14px;font-weight:600;line-height:20px;display:flex;align-items:center;justify-content:space-between;margin:12px -19px -2px;padding:14px 18px 0px;color:",(0,k.w4)("iconMuted"),";border-top:1px solid ",(0,k.w4)("lightBorder"),";",ml.Wrap.className,"{left:-115px;}"),_l=(0,k.Ay)("div",{target:"e1nxf91u1"})("display:flex;align-items:center;gap:6px;svg{path{fill:",(({theme:e})=>e.iconOnInverse),";}}"),El=(0,k.Ay)("span",{target:"e1nxf91u0"})("position:relative;color:",(0,k.w4)("textDefault"),";font-weight:400;font-size:13px;"),Il=()=>(0,v.jsxs)(Tl,{children:[(0,v.jsxs)(_l,{children:[(0,v.jsx)(xl.A,{})," ",(0,v.jsx)(El,{children:(0,Xe.Tl)("answer")})]}),(0,v.jsx)(Sl,{})]}),zl=(e,t,n,i,r)=>{const o=(0,m.GV)((e=>e.user));(e=>{const t=(0,b.useRef)(!1);t.current||(e(),t.current=!0)})((()=>{Ve.Ay.buildAndAddMetric(o,e,t,n,i,r)}))};var Nl=n(98099);const Ml=()=>{var e;const t=(0,a.useMatch)(`/${p.Ij.id}/conversation/:conversationId`),n=null==t||null==(e=t.params)?void 0:e.conversationId;return(0,m.GV)((e=>(0,Nl.VN)(e,n)))},Rl=Ml;var Bl=n(51509);const Pl=()=>(0,m.GV)(Bl.c);const Ll=({source:e})=>{var t;const{type:n,title:i,url:r,id:o}=e,a=(0,m.jL)(),s=(0,m.GV)((e=>e.user)),l=(null==(t=Rl())?void 0:t.id)??"unknown",{context:c,meta:d}=Pl(),u=(0,b.useCallback)((e=>{switch(e.preventDefault(),Ve.Ay.buildAndAddMetric(s,"clicked","ai_answer_sources","conversation:"+l,c,Object.assign({},d,{sourceId:o,sourceType:n,sourceUrl:r})),n){case"external":(0,_o.bB)(r);break;case"article":a((0,Ue.n$)(o,{},!1,!0))}}),[s,l,c,d,n,r,a,o]),p="external"===n;return(0,v.jsxs)(Hl,{onClick:u,children:[(0,v.jsx)("span",{children:i}),(0,v.jsx)(Te.Ay,{type:p?"ExternalLink":"RightChevronSmall",color:"linkColor",flipInRtl:!0})]})},Ol=({sources:e})=>{var t;const n=(null==(t=Rl())?void 0:t.id)??"unknown",{context:i,meta:r}=Pl();return zl("displayed","ai_answer_sources","conversation:"+n,i,r),(0,v.jsxs)(Fl,{children:[(0,v.jsx)(Dl,{children:(0,Xe.Tl)(e.length>1?"sources":"source")}),e.map((e=>(0,v.jsx)(Ll,{source:e},function({title:e,url:t}){return e+t}(e))))]})},Dl=(0,k.Ay)("h3",{target:"e1pj2gdv2"})("color:",(0,k.w4)("textDefault"),";font-weight:600;"),Hl=(0,k.Ay)("div",{target:"e1pj2gdv1"})("display:flex;flex-direction:row;align-items:center;justify-content:space-between;transition:all 0.2s ease-in-out;color:",(0,k.w4)("textDefault"),";cursor:pointer;&:hover{color:",(0,k.w4)("linkColor"),";text-decoration:underline;}"),Fl=(0,k.Ay)("div",{target:"e1pj2gdv0"})("position:relative;display:flex;flex-direction:column;gap:4px;margin-left:-16px;margin-right:-16px;padding:12px 16px;font-size:14px;line-height:1.5;margin-bottom:-12px;color:",(0,k.w4)("iconMuted"),";h3{font-weight:600;}&::before{content:'';position:absolute;left:0;right:0;top:0;pointer-events:none;padding-bottom:12px;}"),Vl=.05,Gl=Vl,$l=(0,k.AH)("@keyframes fadeIn{to{opacity:1;}}&:last-child{",(()=>{let e="";for(let t=0;t<17.999999999999996;t++){const n=t+1;e+=`\n    .streaming-piece:nth-last-of-type(${n}),\n    a:nth-last-of-type(${n}) {\n      opacity: ${(Gl+t*Vl).toFixed(2)};\n      animation: fadeIn 1.0s linear forwards;\n    }`}return e})(),";}"),ql=(0,k.Ay)("div",{target:"ewbcn770"})((({streamingAnimation:e,theme:t})=>"scroll:smooth:fade"===e||"scroll:smooth"===e?(0,k.AH)($l,";"):(0,k.AH)($t.y.className,":last-of-type::after{content:'';display:inline-block;width:3px;height:16px;margin-left:2px;border-radius:6px;vertical-align:bottom;background:",t.iconDefault,";}")),";");var Ul=n(86777),Wl=n(83505),Kl=n(34743);const Xl=(0,b.createContext)(null);Xl.displayName="ConversationPartSourcesContext";const Yl={sources:void 0},Zl=({children:e,sources:t})=>(0,v.jsx)(Xl.Provider,{value:{sources:t},children:e});const Jl=(0,k.Ay)("div",{target:"e1rjfakr7"})({name:"9s2w0h",styles:"padding-left:10px;padding-right:10px;z-index:1000"}),Ql=(0,k.Ay)("div",{target:"e1rjfakr6"})("background:",(0,k.w4)("containerBaseNeutral"),";border:none;padding:12px;border-radius:16px;font-size:13px;box-shadow:",(0,k.w4)("shadowSmall"),";z-index:1000;position:relative;"),ec=(0,k.Ay)("div",{target:"e1rjfakr5"})("color:",(0,k.w4)("textDefault"),";font-weight:600;font-size:13px;margin-top:5px;cursor:pointer;&:hover{color:",(({theme:e})=>e.isPrimaryColorAsTheme?e.textDefault:e.appColor),";text-decoration:underline;}"),tc=(0,k.Ay)("div",{target:"e1rjfakr4"})("color:",(0,k.w4)("textMuted"),";font-size:12px;font-weight:400;display:flex;align-items:center;gap:4px;"),nc=(0,k.Ay)("div",{target:"e1rjfakr3"})("border-radius:16px;width:16px;height:16px;background:",(({backgroundColor:e})=>e),";"),ic=(0,k.Ay)("img",{target:"e1rjfakr2"})({name:"1y0ittq",styles:"position:relative;width:8px;height:8px;left:4px;top:4px"}),rc=(0,k.Ay)("div",{target:"e1rjfakr1"})(".inline-citation{width:16px;height:12px;padding-top:2px;padding-bottom:2px;margin-top:-2px;margin-bottom:-2px;background:",(0,k.w4)("containerEmphasisNeutral"),";border-radius:51px;display:inline-block;margin-left:4px;text-decoration:none;position:relative;line-height:inherit;&::after{content:'';position:absolute;top:-8px;left:-8px;right:-8px;bottom:-8px;border-radius:51px;}&:hover{background:",(0,k.w4)("appColor"),";&::before{",(({theme:e})=>(0,k.AH)("color:",e.isPrimaryColorAsTheme?e.textDefault:e.textOnInverse,";")),";}}&::before{padding:0px;line-height:12px;content:attr(data-source-index);color:",(0,k.w4)("textDefault"),";text-decoration:none;font-family:monospace;text-align:center;font-size:10px;display:inline-block;width:100%;}}.inline-source-link{color:",(0,k.w4)("textDefault"),";text-decoration:underline;text-decoration-style:dotted;text-decoration-color:",(0,k.w4)("textMuted"),";text-underline-offset:2px;text-decoration-thickness:1px;cursor:pointer;position:relative;transition:color 150ms ease,text-decoration-color 150ms ease,text-decoration-style 150ms ease;&:hover{color:",(({theme:e})=>e.isPrimaryColorAsTheme?e.textDefault:e.appColor),";text-decoration-style:solid;text-decoration-color:",(({theme:e})=>e.isPrimaryColorAsTheme?e.textDefault:e.appColor),";text-decoration-thickness:1px;}}position:relative;"),oc=(0,k.Ay)("div",{target:"e1rjfakr0"})("svg{rect{fill:",(0,k.w4)("containerNeutral"),";}}svg{path{fill:",(0,k.w4)("iconDefault"),";}}");var ac=n(27124),sc=n(5994);const lc=(0,b.forwardRef)((({source:e,lang:t,linkText:n,citationType:i,style:r,onMouseEnter:o,onMouseLeave:a,animationStyle:l},c)=>{var d;const u=e.url?(0,sc.vx)(e.url).hostname:"",p="article"===e.type,h=(0,m.jL)(),g=(0,m.GV)((e=>e.user)),x=(0,m.GV)(ac.R0),f=Rl(),y=Cr(),w=(null==f?void 0:f.id)??"unknown",{context:j,meta:k}=Pl(),{homeHeaderBackgroundColor:A}=(0,di.A)(),C=(0,m.GV)(ee),S=(0,b.useCallback)((n=>{switch(n.preventDefault(),n.stopPropagation(),Ve.Ay.buildAndAddMetric(g,"clicked","ai_answer_inline_sources","conversation:"+w,j,Object.assign({},k,{sourceId:e.id,sourceType:e.type,sourceUrl:e.url,citationType:i,clickTarget:"tooltip"})),e.type){case"external":(0,_o.bB)(e.url);break;case"article":if(y&&e.url){(0,_o.bB)(e.url);break}h((0,Ue.n$)(e.id,{},!1,!0,"",null,!1,t,e.url))}}),[g,w,j,k,e,h,t,y,i]);return(0,v.jsx)(Jl,{ref:c,style:r,onMouseEnter:o,onMouseLeave:a,children:(0,v.jsx)(s.CS.div,{style:l,children:(0,v.jsxs)(Ql,{children:[(0,v.jsxs)(tc,{children:[p&&x?(0,v.jsx)(nc,{backgroundColor:("colors"===(null==C?void 0:C.type)?null==(d=C.gradient)?void 0:d[0]:null==C?void 0:C.color)??A,children:(0,v.jsx)(ic,{src:x,alt:"App Logo",width:"16",height:"16",style:{objectFit:"contain"}})}):(0,v.jsx)(oc,{children:(0,v.jsx)(Te.Ay,{type:p?"InlineSourceArticlePreview":"ExternalSourceArticlePreview",size:16})}),p?(0,Xe.Tl)("help_center_article"):u]}),(0,v.jsx)(ec,{onClick:S,children:p&&t&&n?n:e.title})]})})})}));lc.displayName="SourceTooltip";const cc=({sources:e,entityType:t,articleId:n,href:i})=>{if(!e)return null;const r=i?decodeURIComponent(i):null;let o=null;return n?("article_content"!==t&&"1"!==t&&"article"!==t||(o=e.find((e=>{if(!e.id)return!1;const t=e.id.toString()===n,i="number"==typeof e.id&&e.id===parseInt(n,10);return"article"===e.type&&(t||i)}))||null),!o&&r&&(o=e.find((e=>e.url&&e.url===r))||null)):r&&(o=e.find((e=>e.url&&e.url===r))||null),o},dc=({children:e,setTotalCount:t,sources:n})=>{const i=(0,b.useRef)(null),r=(0,b.useRef)(),o=(0,b.useRef)(),a=(0,m.GV)((e=>e.user)),l=Rl(),c=(null==l?void 0:l.id)??"unknown",{context:d,meta:u}=Pl(),p=(0,b.useCallback)((e=>{const{link:t,entityType:i,articleId:r}=e,o=t.href,s=cc({sources:n,entityType:i,articleId:r,href:o});Ve.Ay.buildAndAddMetric(a,"clicked","ai_answer_inline_sources","conversation:"+c,d,Object.assign({},u,{sourceId:null==s?void 0:s.id,sourceType:null==s?void 0:s.type,sourceUrl:(null==s?void 0:s.url)||o,citationType:"inline-source-link",clickTarget:"link"}))}),[a,c,d,u,n]);(e=>{(0,b.useEffect)((()=>{const t=e.current;t&&t.querySelectorAll("a.inline-citation, a.inline-source-link").forEach((e=>{const t=e.getAttribute("data-entity-id"),n=e.textContent||"",i=t?`Source reference ${t}: ${n}`:`Source reference: ${n}`;e.setAttribute("aria-label",i),e.getAttribute("role")||e.setAttribute("role","link")}))}),[e])})(i);const{link:h,index:g,lang:x,entityType:f,linkText:y,articleId:w}=((e,t,n)=>{const[i,r]=(0,b.useState)({link:null,index:-1,lang:null,entityId:null,entityType:null,linkText:null,articleId:null});return(0,b.useLayoutEffect)((()=>{var i;const o=null==(i=e.current)?void 0:i.querySelectorAll("a.inline-citation, a.inline-source-link");if(!o||0===o.length)return;t&&t(o.length);const a=e=>{var t;const n=e.currentTarget,i=Array.from(o).indexOf(n),a=n.getAttribute("lang")||n.getAttribute("data-lang"),s=n.getAttribute("data-entity-id"),l=n.getAttribute("data-entity-type"),c=n.getAttribute("data-article-id"),d=n.getAttribute("data-title")||(null==(t=n.textContent)?void 0:t.trim())||null;r({link:n,index:i,lang:a,entityId:s,entityType:l,linkText:d,articleId:c})},s=e=>{const t=e.currentTarget;if(t.classList.contains("inline-source-link")){if(n){var i;const e=Array.from(o).indexOf(t),r=t.getAttribute("lang")||t.getAttribute("data-lang"),a=t.getAttribute("data-entity-id"),s=t.getAttribute("data-entity-type"),l=t.getAttribute("data-article-id"),c=t.getAttribute("data-title")||(null==(i=t.textContent)?void 0:i.trim())||null;n({link:t,index:e,lang:r,entityId:a,entityType:s,linkText:c,articleId:l})}}else e.preventDefault(),e.stopPropagation()},l=()=>{r({link:null,index:-1,lang:null,entityId:null,entityType:null,linkText:null,articleId:null})};return o.forEach((e=>{e.addEventListener("click",s),e.addEventListener("mouseenter",a),e.addEventListener("mouseleave",l)})),()=>{o.forEach((e=>{e.removeEventListener("click",s),e.removeEventListener("mouseenter",a),e.removeEventListener("mouseleave",l)}))}}),[e,t,n]),i})(i,t,p),[j,k]=(0,b.useState)(null),[A,C]=(0,b.useState)(!1),[S,T]=(0,b.useState)(!1),[_,E]=(0,b.useState)("inline-citation"),[I,z]=(0,b.useState)({entityType:null,lang:null,linkText:null,articleId:null}),{refs:N,floatingStyles:M}=(0,Wl.we)({placement:"top",middleware:[(0,Kl.cY)(8),(0,Kl.UU)(),(0,Kl.BN)()],elements:{reference:h}});(0,b.useEffect)((()=>{w&&f&&z({entityType:f,lang:x,linkText:y,articleId:w})}),[f,x,y,w]),(0,b.useEffect)((()=>{h||A||z({entityType:null,lang:null,linkText:null,articleId:null})}),[h,A]);const R=(0,b.useMemo)((()=>{const e=f||(A?I.entityType:null),t=w||I.articleId||null;return cc({sources:n,entityType:e,articleId:t,href:j})}),[f,j,n,A,I,w]),B=(0,s.zh)({zIndex:1e3,opacity:S?1:0,transform:S?"translateY(0px)":"translateY(10px)",scale:S?1:.95,config:{duration:S?150:100,easing:s.le.easeOutQuad},onRest:()=>{!S&&j&&k(null)}});return(0,b.useEffect)((()=>{if(h){const e=h.classList.contains("inline-source-link")?"inline-source-link":"inline-citation";E(e)}}),[h]),(0,b.useEffect)((()=>{if(h||A){const e=null==h?void 0:h.href;if(e&&k(e),r.current&&clearTimeout(r.current),o.current&&clearTimeout(o.current),h){h.classList.contains("inline-source-link")?o.current=setTimeout((()=>{T(!0)}),250):T(!0)}}else o.current&&clearTimeout(o.current),r.current=setTimeout((()=>{T(!1)}),300);return()=>{r.current&&clearTimeout(r.current),o.current&&clearTimeout(o.current)}}),[h,A,g]),(0,v.jsxs)(rc,{ref:i,children:[e,R&&S&&(0,v.jsx)(lc,{animationStyle:B,source:R,lang:x||(A?I.lang:null),linkText:y||(A?I.linkText:null),citationType:_,ref:N.setFloating,style:M,onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1)})]})},uc=({children:e,setTotalCount:t})=>{const n=(()=>{const e=(0,b.useContext)(Xl);return e?e.sources:Yl.sources})();return n?(0,v.jsx)(dc,{sources:n,setTotalCount:t,children:e}):e};var pc=n(20413);const hc=({part:e})=>{const t=(0,b.useCallback)((()=>{(0,Ve.oS)("conversation_part_streaming_timeout"),(0,Ve.sq)("conversationPartStreamingTimeout",{client_assigned_id:e.clientId,token_sequence_index:e.tokenSequenceIndex})}),[e.tokenSequenceIndex,e.clientId]);(0,Ul.A)(t,1e4);const{streamingAnimation:n}=Rl()??{streamingAnimation:null};return(0,v.jsx)(ql,{streamingAnimation:n,children:(0,v.jsx)(pc.Q,{streamed:!0,children:(0,v.jsx)(uc,{children:(0,v.jsx)(pi.A,{blocks:e.body,author:e.author})})})})};var mc=n(83034),gc=n(52904),xc=n(47684);const fc=(0,k.Ay)("button",{target:"e1sl60fz0"})("float:right;position:relative;z-index:1;display:inline-flex;align-items:center;justify-content:center;flex-shrink:0;background:none;border:none;padding:2px;margin-left:8px;margin-bottom:4px;cursor:",(e=>e.$isLoading?"wait":"pointer"),";opacity:",(e=>e.$isPlaying||e.$isLoading?1:.6),";transition:opacity 0.2s ease;&:hover{opacity:1;}&:focus:not(:focus-visible){outline:none;}&:focus-visible{outline:2px solid currentColor;outline-offset:2px;border-radius:4px;}&:disabled{cursor:not-allowed;opacity:0.4;}"),vc=({conversationPartId:e,color:t="textDefault"})=>{const[n,i]=(0,b.useState)(!1),[r,o]=(0,b.useState)(!1),[a,s]=(0,b.useState)(null),l=(0,b.useRef)(null),c=(0,b.useRef)(null),d=(0,b.useRef)(!0),u=(0,m.GV)((e=>e.session)),p=(0,b.useCallback)((()=>{l.current&&(l.current.pause(),URL.revokeObjectURL(l.current.src),l.current=null),c.current&&(c.current.abort(),c.current=null)}),[]);(0,b.useEffect)((()=>()=>{d.current=!1,p()}),[p]);const h=r?"Stop reading":"Read message aloud";return(0,v.jsx)(fc,{type:"button",onClick:async t=>{if(t.stopPropagation(),s(null),r)return p(),void o(!1);i(!0);try{c.current=new AbortController;const t=await(0,Lt.oO)(u,e,c.current.signal),n=URL.createObjectURL(t),i=new Audio(n);l.current=i,i.onended=()=>{d.current&&o(!1),p()},i.onerror=()=>{d.current&&(s("Failed to play audio"),o(!1)),p()},await i.play(),d.current&&o(!0)}catch(t){t instanceof Error&&"AbortError"!==t.name&&d.current&&(s(t.message),(0,Ur.l2)(t,{conversationPartId:e}))}finally{d.current&&i(!1)}},$isPlaying:r,$isLoading:n,disabled:n,"aria-label":h,title:a||h,"data-testid":"speaker-button",children:n?(0,v.jsx)(xc.A,{size:"small",color:"greyColor",inline:!0}):(0,v.jsx)(gc.A,{color:t,isPlaying:r})})},yc=({part:e,isMobile:t=!1,hasAvatar:n=!1,showInlineMetadata:i=!1,isLastPart:r=!1,onImageClick:o})=>{const a=(0,Wr.x)(),s=(0,Dn.A)("messengerTts"),{author:l,body:c,createdAt:d,messageType:u,showCreatedAt:p,sources:h,tokenSequenceIndex:m}=e,g=(0,b.useRef)(null),x=null==c?void 0:c.some((e=>"messengerCard"===e.type)),f=null==c?void 0:c.some((e=>"createTicketCard"===e.type)),y=x||f,w=i&&!y,j=void 0!==m,k=()=>{if(!p)return null;const e=(0,rl.EU)(c),t=y;return(0,v.jsx)(gl.D,{isSingleBlock:e,hasBody:t,children:(0,En.Bv)(d)})},A=()=>{if(c)return 1===c.length&&(0,rl.Nm)(c[0])?(0,v.jsx)(Us,{text:(0,cn.hs)(c[0])}):j?(0,v.jsx)(hc,{part:e},e.clientId):y?(0,v.jsx)(il,{part:e,isLastPart:r,zoomable:!t,hasAvatar:n,showInlineMetadata:i,maxImageWidth:232,onImageClick:o,frameWindow:a}):(0,v.jsx)(pi.A,{autoPlay:!1,blocks:c,author:l,zoomable:!t,maxImageWidth:232,onImageClick:o,frameWindow:a,skipStyleValidation:e.skipUxStyleValidation},e.clientId)},C=(0,rl.EU)(c),S=-1!==["inlineAnswer","relevantArticles","finAnswer"].indexOf(u),T=t||!p||S||x,_=s&&!j&&"bot_intro"!==e.partType&&((null==l?void 0:l.isBot)||(null==l?void 0:l.isAdmin))&&(0,cn.eD)(c).length>=cn.vi;return(0,v.jsx)(dl,{content:d&&(0,En.Bv)(d),enabled:!T,children:(t,i)=>(0,v.jsxs)(gl.F,Object.assign({},i,{isAIAnswer:S,className:C?"intercom-comment-single":"intercom-comment",isSingleBlock:C,hasBody:y,isAdmin:null==l?void 0:l.isAdmin,isUser:null==l?void 0:l.isSelf,isFailed:"failed"===e.saveState,hasAvatar:n,ref:(0,mc.A)(g,i.ref),children:[_&&(0,v.jsx)(vc,{conversationPartId:String(e.id),color:"textDefault"}),A(),h&&!j&&(0,v.jsx)(Ol,{sources:h}),k(),w?(0,v.jsx)(Zs,{part:e,inlineMetadata:!0}):null,t,S&&!j&&(0,v.jsx)(Il,{})]}))})};var bc=n(58468),wc=n(26639),jc=n(55239);const kc=(0,k.Ay)("div",{target:"e1a7e1h30"})("position:relative;text-align:left;",(({isUser:e})=>e&&(0,k.AH)("/* @noflip */float:right;padding-left:48px;width:calc(100% - 48px);",wc.W.className,"{/* @noflip */float:right;}"))," ",(({isUser:e,isSingleBlock:t})=>e&&t&&(0,k.AH)(gl.F.className,"{/* @noflip */float:right;}",jc.n.className,"{/* @noflip */float:right;}"))," ",(({isAdmin:e})=>e&&(0,k.AH)("/* @noflip */float:left;padding-left:45px;width:calc(100% - 45px);",jc.n.className,"{/* @noflip */float:left;}"))," ",(({isUser:e,isAdmin:t})=>!e&&!t&&(0,k.AH)("/* @noflip */float:left;padding-left:48px;",wc.W.className,"{/* @noflip */float:left;}"))," ",(({theme:e})=>e.tabNavigation&&(0,k.AH)("padding-bottom:20px;",bc.C.className,"{bottom:30px;}")),";");var Ac=n(47707);const Cc=({attribution:e,textColor:t})=>{const n=(0,di.A)().textMuted;return(0,v.jsx)(jc.n,{textColor:t||n,children:(0,Xe.Tl)("gif_attribution",{providername:e})})};var Sc=n(96875),Tc=n(96742),_c=n(48179);const Ec=e=>(new Date).getTime()-e.getTime(),Ic=18e4,zc=["january","february","march","april","may","june","july","august","september","october","november","december"],Nc=e=>(0,Xe.Tl)(`${zc[e.getMonth()]}_date`,{date:e.getDate().toString()}),Mc=(e,t)=>{const n=((e,t)=>{let n=e.lastActiveAt;return n&&void 0!==n.getTime&&(n=new Date(n.getTime()),n.setMilliseconds(0)),t.find((t=>{var i,r;return(null==(i=t.author)?void 0:i.isAdmin)&&(null==(r=t.author)?void 0:r.id)===e.id&&n&&t.createdAt>=n}))})(e,t),i=e.isBot?6e4:1e4;return!n&&!!e.lastActiveAt&&Ec(e.lastActiveAt)<i},Rc=e=>{if("messenger"!==(null==e?void 0:e.currentChannel))return!1;const{parts:t=[],lastTypingAdmin:n}=e;if(n&&n.isBot){var i;if(null!=e&&e.footerNotice)return!1;const o=t[t.length-1];if(!n.hasAI){var r;if(!1===(null==e||null==(r=e.composerState)?void 0:r.workflowActive))return!1;return o&&o.author&&!o.author.isAdmin&&!o.author.isBot&&"failed"!==o.saveState&&Mc(n,t)}const a=o&&Ec(o.createdAt)>=800;if(o&&null!=(i=o.author)&&i.isBot&&!a)return!1;return t.some((e=>e.author&&!e.author.isBot&&!e.author.isAdmin))&&Mc(n,t)}return!!n&&Mc(n,t)},Bc=(e,t,n=18e4)=>t.getTime()-e.getTime()<=n,Pc=(e,t)=>(null==e?void 0:e.id)===(null==t?void 0:t.id)&&(null==e?void 0:e.isAdmin)===(null==t?void 0:t.isAdmin)||!0===(null==e?void 0:e.isSelf)&&!0===(null==t?void 0:t.isSelf)||!0===(null==e?void 0:e.isBot)&&!0===(null==t?void 0:t.isBot),Lc=(e,t)=>!(0,dn.A)(e)&&!(0,dn.A)(t),Oc=(e,t)=>{var n;const i=!!t&&Lc(e.partType,t.partType)&&(r=e.partType,o=t.partType,"ticket_status_update"!==r&&"ticket_status_update"!==o)&&(0,En.ny)(e.createdAt,t.createdAt)&&Pc(e.author,t.author)&&((e,t)=>(null==e?void 0:e.container)===(null==t?void 0:t.container))(e.uxStyle,t.uxStyle);var r,o;return null!=(n=e.author)&&n.isAdmin?i:i&&Bc(e.createdAt,t.createdAt,36e5)},Dc=(e,t,n)=>{const i=!!n&&Oc(e,n),r=!!t&&Oc(t,e);return i||r},Hc=(e,t)=>!(e=>{var t;return null==(t=e.author)?void 0:t.isSelf})(e)&&"video"!==e.messageType&&!((e,t)=>!!t&&Lc(e.partType,t.partType)&&(0,En.ny)(e.createdAt,t.createdAt)&&Pc(e.author,t.author)&&Bc(e.createdAt,t.createdAt,Ic))(e,t),Fc=(e,t,n,i,r=!1)=>{var o,a,s,l;const c=t.length>0&&(0,_c.A)(t).id===e.id,d="comment"===e.partType||"message"===e.partType||"attribute_collector"===e.partType||"bot_intro"===e.partType,u="failed"===e.saveState,p="saving"===e.saveState;if(u)return!0;return!!(((null==n||null==(o=n.uiFlags)?void 0:o.showLastPartMeta)??!0)||null!=(a=e.author)&&a.isBot)&&(!!p||!!c&&((null==(s=e.author)||!s.isAdmin||!i)&&(!((null==(l=e.author)||!l.isAdmin)&&r&&d)&&d)))},Vc=e=>e.clientId||e.id,Gc=e=>"quick_reply"===e.partType&&(!e.body||0===e.body.length),$c=e=>!(e&&e.body&&e.body[0])||"paragraph"===e.body[0].type&&e.body[0].text&&""===e.body[0].text.trim();var qc=n(71015);const Uc=e=>!(!e||"image"!==e.type||!("attribution"in e&&void 0!==e.attribution||"url"in e&&"string"==typeof e.url&&-1!==e.url.toLowerCase().indexOf(".gif")||"mimeType"in e&&"image/gif"===e.mimeType)),Wc=(e,t=null,n=!1)=>{const i=(0,qc.r)(),r=(0,Dn.A)("finImagesGrid");return(0,b.useMemo)((()=>{const o=(e=>!(!e||!e.some(Uc)))(e||[]),a={imageBlocks:[],attachmentBlocks:[],contentBlocks:e||[],hasImages:!1,hasAttachments:!1,shouldSeparate:!1,shouldRenderAsGrid:!1,imagePosition:"above"};if(!t||o||!e||0===e.length)return a;const s=t.isSelf,l=(e=>!!(e&&e.isAdmin&&e.isBot))(t)&&n;if(!(s||l))return a;if(s&&i||l&&r){const t=e.filter((e=>"image"===e.type)),n=e.filter((e=>"attachmentList"===e.type)),i=e.filter((e=>"image"!==e.type&&"attachmentList"!==e.type)),r=t.length>0,o=n.length>0;if(r||o){return{imageBlocks:t,attachmentBlocks:n,contentBlocks:i,hasImages:r,hasAttachments:o,shouldSeparate:!0,shouldRenderAsGrid:t.length>1,imagePosition:s?"above":"below"}}}return a}),[e,t,n,i,r])};var Kc=n(97243),Xc=n(80953);function Yc(e,t,n=!1,i=!1,r=!1){const o=[];if(n)return i&&(t.isTopLeftCorner&&o.push("increased-radius-top-left"),t.isTopRightCorner&&o.push("increased-radius-top-right")),r&&(t.isBottomLeftCorner&&o.push("increased-radius-bottom-left"),t.isBottomRightCorner&&o.push("increased-radius-bottom-right")),o;const a=e===Qt.L3.standalone||e===Qt.L3.top,s=e===Qt.L3.standalone||e===Qt.L3.bottom;return a&&(t.isTopLeftCorner&&o.push("increased-radius-top-left"),t.isTopRightCorner&&o.push("increased-radius-top-right")),s&&(t.isBottomLeftCorner&&o.push("increased-radius-bottom-left"),t.isBottomRightCorner&&o.push("increased-radius-bottom-right")),o}var Zc=n(10124);const Jc=(0,k.Ay)("div",{target:"ep177jj3"})({name:"7skq5k",styles:"position:absolute;inset:0;display:flex;align-items:center;justify-content:center;outline:none;pointer-events:none"}),Qc=(0,k.Ay)("div",{target:"ep177jj2"})("position:relative;display:flex;align-items:center;justify-content:center;max-width:calc(100vw - 208px);max-height:calc(100vh - 144px);@media (max-width: ",Zc.I,"px){max-width:calc(100vw - 112px);}"),ed=(0,k.Ay)("img",{target:"ep177jj1"})("cursor:default;max-width:calc(100vw - 208px);max-height:calc(100vh - 144px);@media (max-width: ",Zc.I,"px){max-width:calc(100vw - 112px);}background:",(0,k.w4)("containerNeutral"),";pointer-events:auto;transition:max-width ease 200ms,max-height ease 200ms;opacity:0;.intercom-modal-enter-active &,.intercom-modal-enter-done &{opacity:1;transition:opacity 200ms;}.intercom-modal-exit &{opacity:1;}.intercom-modal-exit.intercom-modal-exit-active &{opacity:0;transition:opacity 200ms;}"),td=(0,k.Ay)("button",{target:"ep177jj0"})("position:fixed;top:50%;transform:translateY(-50%);",(({position:e})=>"left"===e?"left: 32px;":"right: 32px;")," width:40px;height:40px;box-sizing:border-box;border-radius:50%;border:1px solid ",(0,k.w4)("overlayButtonBorder"),";background:",(0,k.w4)("overlayButtonBg"),";backdrop-filter:blur(50px);color:",(0,k.w4)("iconWhite"),";cursor:pointer;display:flex;align-items:center;justify-content:center;",(({position:e})=>"left"===e?"padding: 8px 9px 8px 7px;":"padding: 8px 7px 8px 9px;")," pointer-events:auto;transition:background-color 150ms ease,border-color 150ms ease,opacity 150ms ease;opacity:0;z-index:1;.intercom-modal-enter-active &,.intercom-modal-enter-done &{opacity:1;}@media (max-width: ",Zc.I,"px){",(({position:e})=>"left"===e?"left: 12px;":"right: 12px;")," width:32px;height:32px;",(({position:e})=>"left"===e?"padding: 4px 5px 4px 3px;":"padding: 4px 3px 4px 5px;"),";}&:hover{background:",(0,k.w4)("overlayButtonBgHover"),";border-color:",(0,k.w4)("overlayButtonBorderHover"),";}&:focus{outline:none;}");var nd=n(57064);const id=({size:e=24})=>(0,v.jsx)("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"presentation",children:(0,v.jsx)("path",{d:"M15 6L9 12L15 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),rd=({size:e=24})=>(0,v.jsx)("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"presentation",children:(0,v.jsx)("path",{d:"M9 6L15 12L9 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),od=(0,b.memo)((({images:e,currentIndex:t,onClose:n,onNavigate:i,frameWindow:r,returnFocus:o})=>{const a=(0,b.useRef)(null),s=e[t],l=e.length>1,c=t>0,d=t<e.length-1,u=(0,b.useCallback)((e=>{a.current=e,e&&setTimeout((()=>{e.focus()}),50)}),[]),p=(0,b.useCallback)((()=>{setTimeout((()=>{var e;null==(e=a.current)||e.focus()}),0)}),[]);(0,b.useEffect)((()=>{const e=r||window,t=e.document,n=()=>{setTimeout((()=>{var e;null==(e=a.current)||e.focus()}),0)},i=()=>{"visible"===t.visibilityState&&setTimeout((()=>{var e;null==(e=a.current)||e.focus()}),0)};return e.addEventListener("focus",n),t.addEventListener("visibilitychange",i),()=>{e.removeEventListener("focus",n),t.removeEventListener("visibilitychange",i)}}),[r]);const h=(0,b.useCallback)((e=>{e.stopPropagation(),c&&(i(t-1),p())}),[t,c,i,p]),m=(0,b.useCallback)((e=>{e.stopPropagation(),d&&(i(t+1),p())}),[t,d,i,p]),g=(0,b.useCallback)((e=>{"ArrowLeft"===e.key?(e.preventDefault(),e.stopPropagation(),c&&i(t-1)):"ArrowRight"===e.key&&(e.preventDefault(),e.stopPropagation(),d&&i(t+1))}),[t,d,c,i]);if(!s)return null;const x=s.title||null;return(0,v.jsx)(nd.A,{frameWindow:r,returnFocus:o,closeCallback:n,ariaLabel:x||"Image gallery",variant:"imageViewer",children:({onClose:e})=>(0,v.jsxs)(Jc,{ref:u,tabIndex:-1,onKeyDown:g,children:[l&&c&&(0,v.jsx)(td,{type:"button",position:"left",onClick:h,"aria-label":(0,Xe.Tl)("gallery_previous_image")||"Previous image",children:(0,v.jsx)(id,{})}),(0,v.jsx)(Qc,{children:(0,v.jsx)(ed,{src:s.url,alt:x||"",onClick:e})}),l&&d&&(0,v.jsx)(td,{type:"button",position:"right",onClick:m,"aria-label":(0,Xe.Tl)("gallery_next_image")||"Next image",children:(0,v.jsx)(rd,{})})]})})})),ad=({imageCount:e})=>{const[t,n]=(0,b.useState)(!1),[i,r]=(0,b.useState)(0),o=(0,b.useRef)(null),a=(0,b.useCallback)(((e,t)=>{r(e),n(!0),o.current=t}),[]),s=(0,b.useCallback)((()=>{n(!1)}),[]),l=(0,b.useCallback)((e=>{r(e)}),[]),c=(0,b.useCallback)((()=>{var e;null==(e=o.current)||e.focus()}),[]);return(0,b.useEffect)((()=>{t&&(0===e?s():i>=e&&l(e-1))}),[e,i,t,s,l]),{viewerOpen:t,currentImageIndex:i,triggerElementRef:o,openViewer:a,closeViewer:s,navigateToImage:l,returnFocus:c}},sd=({blocks:e,zoomable:t,groupingPosition:n,isSelf:i=!1,frameWindow:r,onImageClick:o,maxImageWidth:a,alignment:s="right",useAspectRatioStyles:l=!1,disableContainerMargin:c=!1,useUniformBorderRadius:d=!1})=>{const{viewerOpen:u,currentImageIndex:p,openViewer:h,closeViewer:m,navigateToImage:g,returnFocus:x}=ad({imageCount:e.length}),f=(0,b.useCallback)(((e,t)=>{let n=!1,r=!1,o=!1,a=!1,s=!1,l=!1;switch(t){case 1:i?(r=!0,a=!0):(n=!0,o=!0);break;case 2:i?(1===e&&(r=!0,a=!0),0===e&&(s=!0,l=!0)):(0===e&&(n=!0,o=!0),1===e&&(s=!0,l=!0));break;case 3:i?(2===e&&(r=!0,a=!0),0===e&&(s=!0,l=!0)):(0===e&&(n=!0,o=!0),2===e&&(s=!0,l=!0));break;case 4:i?(1===e&&(r=!0),3===e&&(a=!0),0===e&&(s=!0),2===e&&(l=!0)):(0===e&&(n=!0),2===e&&(o=!0),1===e&&(s=!0),3===e&&(l=!0));break;default:{const c=t%3,d=t-(0===c?3:c);if(i?(2===e&&(r=!0),0===e&&(s=!0)):(0===e&&(n=!0),2===e&&(s=!0)),e>=d)switch(c){case 0:case 2:i?(e===t-1&&(a=!0),e===d&&(l=!0)):(e===d&&(o=!0),e===t-1&&(l=!0));break;case 1:i?(a=!0,l=!0):(o=!0,l=!0)}break}}return{isTopLeftCorner:n,isTopRightCorner:r,isBottomLeftCorner:o,isBottomRightCorner:a,isOppositeSideTopCorner:s,isOppositeSideBottomCorner:l}}),[i]),y=(0,b.useCallback)(((e,t)=>{const r=f(e,t);let o=[];const a={isTopLeftCorner:r.isTopLeftCorner,isTopRightCorner:r.isTopRightCorner,isBottomLeftCorner:r.isBottomLeftCorner,isBottomRightCorner:r.isBottomRightCorner},s=Yc(n,a);if(o=o.concat(s),r.isOppositeSideTopCorner||r.isOppositeSideBottomCorner){const e={isTopLeftCorner:!!i&&r.isOppositeSideTopCorner,isTopRightCorner:!i&&r.isOppositeSideTopCorner,isBottomLeftCorner:!!i&&r.isOppositeSideBottomCorner,isBottomRightCorner:!i&&r.isOppositeSideBottomCorner},t=Yc(n,e,!0,r.isOppositeSideTopCorner,r.isOppositeSideBottomCorner);o=o.concat(t)}return o.join(" ").trim()}),[f,n,i]),w=(0,b.useCallback)((e=>{let t="intercom-multiple-images-container";if(e>=5){t+=" images-5-plus";const n=e%3;n&&(t+=` last-row-${n}`),t+=` align-${s}`}else e>1&&(t+=` images-${e}`);return t}),[s]),j=w(e.length);return(0,v.jsxs)(Kc.e,{children:[(0,v.jsx)("div",Object.assign({className:j,"data-grouping-position":n},c&&{"data-no-margin":"true"},d&&{"data-uniform-radius":"true"},{children:e.map(((n,i)=>{const s=y(i,e.length),c=n.url?`${n.url}-${n.width}-${n.height}`:`image-${i}`;return(0,v.jsx)("div",{className:s,"data-testid":`image-item-${i}`,children:(0,v.jsx)(Xc.A,{block:n,zoomable:t,maxWidth:a||0,onImageClick:o||(()=>{}),frameWindow:r,useAspectRatioStyles:l,onZoom:e=>h(i,e),isInGrid:!0})},c)}))})),u&&(0,v.jsx)(od,{images:e,currentIndex:p,onClose:m,onNavigate:g,frameWindow:r,returnFocus:x})]})},ld=b.memo(sd,((e,t)=>{if(e.blocks.length!==t.blocks.length)return!1;return e.blocks.every(((e,n)=>e.url===t.blocks[n].url&&e.width===t.blocks[n].width&&e.height===t.blocks[n].height))&&e.groupingPosition===t.groupingPosition&&e.isSelf===t.isSelf&&e.disableContainerMargin===t.disableContainerMargin&&e.useUniformBorderRadius===t.useUniformBorderRadius})),cd=({block:e,zoomable:t,groupingPosition:n,isSelf:i=!1,frameWindow:r,onImageClick:o,maxImageWidth:a,useAspectRatioStyles:s=!1})=>{const{viewerOpen:l,currentImageIndex:c,openViewer:d,closeViewer:u,navigateToImage:p,returnFocus:h}=ad({imageCount:1}),m=i?"right":"left",g=[...Yc(n,{isTopLeftCorner:"left"===m,isTopRightCorner:"right"===m,isBottomLeftCorner:"left"===m,isBottomRightCorner:"right"===m}),...Yc(n,{isTopLeftCorner:"right"===m,isTopRightCorner:"left"===m,isBottomLeftCorner:"right"===m,isBottomRightCorner:"left"===m},!0,!0,!0)].join(" ").trim();return(0,v.jsxs)(Kc.e,{children:[(0,v.jsx)("div",{className:g,"data-grouping-position":n,"data-testid":"image-single",children:(0,v.jsx)(Xc.A,{block:e,zoomable:t,maxWidth:a||0,onImageClick:o||(()=>{}),frameWindow:r,useAspectRatioStyles:s,isInGrid:!0,onZoom:e=>d(0,e)})}),l&&(0,v.jsx)(od,{images:[e],currentIndex:c,onClose:u,onNavigate:p,frameWindow:r,returnFocus:h})]})};var dd=n(65907);const ud=({part:e,isSelf:t,attribution:n,isMobile:i=!1,showInlineFooter:r=!1,groupingPosition:o=Qt.L3.standalone,borderColors:a,lastAdminOrBotPart:s})=>{var l,c,d,u,p;const{id:h,author:g,body:x,createdAt:f,uxStyle:y,messageType:w,tokenSequenceIndex:j,sources:k,answerFooter:A}=e,C=(0,di.A)(),S=(0,m.GV)(wr.l),T=(0,Dn.A)("userImagesAspectRatio"),_=(0,qc.r)(),E=(0,Dn.A)("messengerTts"),I=-1!==["inlineAnswer","relevantArticles","finAnswer"].indexOf(w),{container:z}=y??{},N=(0,b.useRef)(null),[M,R]=(0,b.useState)(0),B=Wc(x,g,I),{imageBlocks:P,attachmentBlocks:L,contentBlocks:O,hasImages:D,hasAttachments:H,shouldSeparate:F,shouldRenderAsGrid:V,imagePosition:G}=B,$=O&&O.length>0,q=t&&_&&!V&&!T,U=(0,is.T_)(o,(D||H)&&"above"===G,(D||H)&&"below"===G),W=((e,t)=>{const n=null==e?void 0:e.some((e=>"messengerCard"===e.type)),i=null==e?void 0:e.some((e=>"createTicketCard"===e.type));return t&&!(n||i)})(O,r),K=null==(l=Rl())?void 0:l.streamingAnimation,X=void 0!==j,[Y,Z]=(0,b.useState)(!1),J="scroll:smooth:fade"===K&&X,Q=(null==(c=e.metadata)?void 0:c.title)||(null==g?void 0:g.firstName),ee=!(!(Q&&(null!=g&&g.isAdmin||null!=g&&g.isBot)&&(s&&Vc(e)===Vc(s)||Y))||X),te=!(!(Q&&(null!=g&&g.isAdmin||null!=g&&g.isBot)&&s&&Vc(e)===Vc(s))||X),ne="bot_intro"===e.partType?(0,Xe.Tl)("time_just_now"):(0,En.iw)(f),ie=e=>{if(!D)return null;const n=$||H?(0,is.kp)(o,"above"===e):o,r=T&&P.some((e=>(0,dd.Z)(null==e?void 0:e.width,null==e?void 0:e.height))),a="below"===e&&($&&!H),s="above"===e&&($||H);return(0,v.jsx)(Ac.D6,{"data-testid":"conversation-part-image-content",className:`intercom-image-content-${e}`,groupingPosition:U,isSelf:t,uxStyleContainer:z,isExpanded:S,addOffsetAbove:a,addOffsetBelow:s,isAIAnswer:I,useAspectRatioStyles:T,hasFullWidthImage:r,shouldUse312x312:q,children:V&&g?(0,v.jsx)(ld,{blocks:P,zoomable:!i,groupingPosition:n,isSelf:t,frameWindow:void 0,onImageClick:void 0,maxImageWidth:void 0,alignment:t?"right":"left",useAspectRatioStyles:T,disableContainerMargin:!0,useUniformBorderRadius:_}):g?(0,v.jsx)(cd,{block:P[0],author:g,zoomable:!i,groupingPosition:n,isSelf:t,frameWindow:void 0,onImageClick:void 0,maxImageWidth:void 0,useAspectRatioStyles:T}):null})},re=e=>{if(!H)return null;const n="above"===G?D:he,i="above"===G?he:D,r=(0,is.T_)(o,n,i),a="below"===e&&he;return(0,v.jsx)(Ac.nN,{"data-testid":"conversation-part-attachment-content",className:`intercom-attachment-content-${e}`,isSelf:t,addOffsetAbove:a,addOffsetBelow:i,children:(0,v.jsx)(pi.A,{blocks:L,author:g,zoomable:!1,frameWindow:void 0,groupingPosition:r,isSelf:t})})},oe=(0,m.jL)(),ae=Rl(),se=(null==ae||null==(d=ae.parts[(null==ae?void 0:ae.parts.length)-1])?void 0:d.id)===h,le=async t=>{var n;if(!ae)return;const i=null==(n=e.answerFooter)?void 0:n.replyOptions.find((e=>e.uuid===t.uuid));oe((0,Tc.R)(Lt.Ay,ae,Object.assign({},i||t,{type:"quick_reply"}),!1,e))},ce=(0,m.GV)((e=>e.app.customEmojiMap)),de=(0,rl.EU)(x),ue=(0,rl.Xh)(x,ce),pe=E&&!X&&"bot_intro"!==e.partType&&((null==g?void 0:g.isBot)||(null==g?void 0:g.isAdmin))&&(0,cn.eD)(O).length>=cn.vi,he=!!(O.length>0||k||A||W||n||ee),me=xe()({"intercom-comment-single":de,"intercom-comment":!de});return(0,v.jsxs)(v.Fragment,{children:["above"===G&&ie("above"),"above"===G&&re("above"),he&&(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(Ac.mc,Object.assign({isStreaming:J,isSelf:t,isAIAnswer:I,uxStyleContainer:z,isSingleBlock:de,groupingPosition:U,borderColors:a,isExpanded:S,showMetaDataUnderMessage:ee,IsSingleCharacterOrEmojiBlock:ue,onClick:()=>Z((e=>!e))},!te&&{role:"none"},{children:[(0,v.jsxs)(Ac.FW,{isSelf:t,isSingleBlock:de,isFailed:"failed"===e.saveState,uxStyleContainer:z,className:me,ref:N,children:[pe&&(0,v.jsx)(vc,{conversationPartId:String(h),color:"textDefault"}),(()=>{if(O&&(!F||0!==O.length))return 1===O.length&&(0,rl.Nm)(O[0])?(0,v.jsx)(Us,{text:(0,cn.hs)(O[0])}):X?(0,v.jsx)(hc,{part:e},e.clientId):(0,v.jsx)(uc,{setTotalCount:R,children:(0,v.jsx)(pi.A,{autoPlay:!1,blocks:O,author:g,zoomable:!i,skipStyleValidation:e.skipUxStyleValidation,isSelf:t},e.clientId)})})(),k&&0===M&&!X?(0,v.jsxs)(v.Fragment,{children:[!A&&(0,v.jsx)(Ac.L$,{}),(0,v.jsx)(Ol,{sources:k})]}):null,A?(0,v.jsxs)(v.Fragment,{children:[(A.text||A.replyOptions)&&(0,v.jsx)(Ac.L$,{}),A.text&&(0,v.jsx)("div",{style:{fontSize:"14px",marginTop:"12px"},children:A.text}),A.replyOptions&&se&&(0,v.jsx)(Sc.A,{suggestions:A.replyOptions,onSelect:le,onHeightChange:()=>{},suggestionButtonsAlignment:A.replyOptions.length>1?"left":"right",isInline:!0})]}):null,W?(0,v.jsx)(Zs,{part:e}):null]}),n?(0,v.jsx)(Cc,{attribution:n,textColor:t&&C.isPrimaryColorReadable?C.textOnInverse:C.textDefault}):null,(0,v.jsxs)(Ac.Zf,{show:ee,children:[Q," ",null!=(u=e.metadata)&&u.suffix?`• ${null==(p=e.metadata)?void 0:p.suffix}`:""," •"," ",ne]})]}))}),"below"===G&&re("below"),"below"===G&&ie("below")]})},pd=e=>(0,v.jsx)(bc.C,{children:(0,v.jsx)(co.h,{author:e.author})}),hd=e=>{const t=(0,b.useRef)(null),{showAvatar:n=!0,hasAvatar:i=!1,part:{author:r,body:o},isLastPart:a,isMobile:s,groupingPosition:l,showInlineMetadata:c,onImageClick:d,lastAdminOrBotPart:u}=e,p=(0,rl.EU)(o),h=(0,is.I3)(e.part);var m;return(0,is.MU)(e.part)?(0,v.jsx)(ud,{part:e.part,isMobile:s,isSelf:null==r?void 0:r.isSelf,groupingPosition:l,showInlineFooter:c,attribution:h,borderColors:null==(m=e.part.uxStyle)?void 0:m.borderColors,lastAdminOrBotPart:u}):(0,v.jsxs)(kc,{hasAvatar:i,isSingleBlock:p,isAdmin:null==r?void 0:r.isAdmin,isUser:null==r?void 0:r.isSelf,ref:t,children:[i&&n?(0,v.jsx)(pd,{author:e.part.author}):null,(0,v.jsx)(yc,{isLastPart:a,part:e.part,isMobile:s,hasAvatar:i,showInlineMetadata:c,onImageClick:d}),h?(0,v.jsx)(Cc,{attribution:h}):null]})};var md=n(66433);function gd(e){return e.length>0}class StringAttribute extends b.Component{render(){const{value:e,errorMessage:t,onSubmit:n,onChange:i,placeholder:r,id:o,label:a,saveState:s,multiline:l,disabled:c,isReplyType:d,isSubmittable:u,hideErrorMessage:p,ariaLabel:h}=this.props;return(0,v.jsx)(md.A,{value:e,placeholder:r,id:o,label:a,saveState:s,multiline:l,disabled:c,isValid:gd,isReplyType:d,isNotificationChannel:!1,isSubmittable:u,onSubmit:n,onChange:i,hideErrorMessage:p,validationErrorMessage:t||(0,Xe.Tl)("string_is_incorrect"),ariaLabel:h||r})}}StringAttribute.defaultProps={isSubmittable:!0,hideErrorMessage:!1};var xd=n(48368);function fd(e){return!!e.match(/^-?\d+$/)}function vd({value:e,errorMessage:t,onSubmit:n,saveState:i,disabled:r,isReplyType:o,ariaLabel:a}){return(0,v.jsx)(md.A,{value:e,placeholder:(0,Xe.Tl)("type_a_number"),saveState:i,disabled:r,isValid:fd,isReplyType:o,isNotificationChannel:!1,onSubmit:n,validationErrorMessage:t||(0,Xe.Tl)("number_is_incorrect"),ariaLabel:a||(0,Xe.Tl)("type_a_number")})}function yd(e){return!!e.match(/^-?\d+\.\d+$/)}function bd(e){return function(e){return!!e.match(/^-?\d+$/)}(e)?`${e}.0`:e}class FloatAttribute extends b.Component{render(){const{value:e,errorMessage:t,onSubmit:n,saveState:i,disabled:r,isReplyType:o,ariaLabel:a}=this.props;return(0,v.jsx)(md.A,{value:e,placeholder:(0,Xe.Tl)("type_a_number"),saveState:i,disabled:r,isValid:yd,formatter:bd,isReplyType:o,isNotificationChannel:!1,onSubmit:n,validationErrorMessage:t||(0,Xe.Tl)("number_is_incorrect"),ariaLabel:a||(0,Xe.Tl)("type_a_number")})}}const wd=(0,k.Ay)("div",{target:"ehiy7yk2"})({name:"pw7jst",styles:"position:relative;width:100%"}),jd=(0,k.Ay)("span",{target:"ehiy7yk1"})("font-weight:bold;color:",(({color:e,theme:t})=>e||t.textDefault),";");var kd={name:"rxcvnq",styles:"border-left-width:0;border-top-left-radius:0;border-bottom-left-radius:0"},Ad={name:"wbysdl",styles:"border-right-width:0"},Cd={name:"10if9qx",styles:"border-top-right-radius:0;border-bottom-right-radius:0"},Sd={name:"f0uxs0",styles:"&:hover,&:focus{border-left-width:1px;margin-left:-1px;width:50%;}"};const Td=(0,k.Ay)("button",{target:"ehiy7yk0"})("box-sizing:border-box;border:1px solid ",(0,k.w4)("attributeButtonColor"),";color:",(0,k.w4)("attributeButtonColor"),";border-radius:4px;display:inline-block;font-size:14px;padding:12px;text-align:center;width:calc(50% - 1px);&,*{cursor:pointer;}&[disabled]{cursor:not-allowed;}",(({saveState:e,theme:t})=>("saving"===e||"saved"===e)&&(0,k.AH)("border:1px solid ",t.attributeButtonColor,";&,*{cursor:default;}"))," ",(({booleanValue:e,theme:t})=>void 0===e&&(0,k.AH)("color:",t.attributeButtonColor,";cursor:pointer;&:hover,&:focus{background-color:",t.attributeButtonHoverColor,";}&:active{background-color:",t.attributeButtonActiveColor,";}"))," ",(({booleanValue:e,selected:t})=>void 0===e&&!1===t&&Sd)," ",(({selected:e})=>!0===e&&Cd)," ",(({selected:e,booleanValue:t})=>!0===e&&void 0!==t&&t!==e&&Ad)," ",(({selected:e})=>!1===e&&kd)," ",(({selected:e,booleanValue:t,theme:n})=>e===t&&(0,k.AH)("border-left-width:1px;background-color:",n.attributeButtonColor,";",jd.className,"{color:",n.textOnInverse,";}"))," ",(({selected:e,booleanValue:t,theme:n})=>void 0!==t&&t!==e&&(0,k.AH)(jd.className,"{color:",n.textMuted,";}")),";");function _d({value:e,saveState:t,disabled:n,onSubmit:i}){const r=(0,b.useMemo)((()=>"saved"===t||"saving"===t),[t]),o=(0,b.useCallback)((()=>{r||i(!0)}),[r,i]),a=(0,b.useCallback)((()=>{r||i(!1)}),[r,i]);return(0,v.jsxs)("div",{children:[(0,v.jsxs)(wd,{children:[(0,v.jsx)(Td,{saveState:t,selected:!0,booleanValue:e,disabled:n,onClick:o,children:(0,v.jsx)(jd,{color:"currentColor",children:(0,Xe.Tl)("attribute_collector_positive")})}),(0,v.jsx)(Td,{saveState:t,selected:!1,booleanValue:e,disabled:n,onClick:a,children:(0,v.jsx)(jd,{color:"currentColor",children:(0,Xe.Tl)("attribute_collector_negative")})})]}),"failed"===t&&(0,v.jsx)(Aa.A,{errorMessage:(0,Xe.Tl)("something_is_wrong")})]})}var Ed=n(12927),Id=n(86848),zd=n(8198),Nd=n(96786);const Md=({value:e,saveState:t,placeholder:n,defaultCountryCode:i,isInvalid:r,disabled:o,onChange:a,onSubmit:s})=>{const l=Bo(),c=e=>{a(e.target.value.trim())},d=e=>{13===e.keyCode&&(e.preventDefault(),s())},u=e=>{const{value:t}=e.target;e.target.value="",e.target.value=t},p=()=>o||"saving"===t||"saved"===t,h="saving"===t,m=h||p(),g=Object.assign({"aria-label":h?(0,Xe.Tl)("loading"):(0,Xe.Tl)("submit")},h?{role:"progressbar"}:{});return(0,v.jsxs)(Nd.VY,{saveState:t,isInvalid:r,children:[(()=>{const t=(0,Po.J3)(e),n=t?t.code:i;return(0,v.jsx)(Nd.qw,{countryCode:n})})(),(()=>{const i=p();return(0,v.jsx)(Nd.vO,{disabled:i,saveState:t,children:0===n.indexOf(e)&&(0,v.jsxs)("span",{children:[(0,v.jsx)(Nd.Dg,{children:e}),(0,v.jsx)("span",{children:n.replace(e,"")})]})})})(),(()=>{const t=p();return(0,v.jsx)("input",{ref:l,name:"phone",type:"text",disabled:t,defaultValue:e,onFocus:u,onKeyDown:d,onChange:c,onBlur:yr.BW,"aria-label":(0,Xe.Tl)("phone_number")})})(),(0,v.jsx)(Nd._A,{}),(0,v.jsx)(Nd.Eu,Object.assign({disabled:m,onClick:s,saveState:t},g,{children:(0,v.jsx)(zd.A,{disabled:m,loading:h})}))]})},Rd=(0,b.memo)(Md);class PhoneNumberAttribute extends b.Component{constructor(...e){super(...e),this.state={value:this.props.value||`${(0,Po.xI)(this.props.defaultCountryCode)} `,isValid:!0},this.handleChange=e=>{this.setState({value:e,isValid:!0})},this.handleSubmit=()=>{const{value:e}=this.state;(0,Po.fn)(e)?this.props.onSubmit(e):this.setState({isValid:!1})}}getPlaceholder(){return`${(0,Po.xI)(this.props.defaultCountryCode)} 123 456 7890`}getErrorMessage(){if(this.state.isValid)return"failed"===this.props.saveState&&"parameter_invalid"===this.props.errorCode?(0,Xe.Tl)("that_number_doesnt_look_quite_right"):(0,Xe.Tl)("something_is_wrong");{const e=(0,Po.E2)(this.state.value);return e?(0,Xe.Tl)(e):(0,Xe.Tl)("that_number_doesnt_look_quite_right")}}isInvalid(){return"failed"===this.props.saveState||!this.state.isValid}render(){const{saveState:e,defaultCountryCode:t,isReplyType:n,isNotificationChannel:i,disabled:r}=this.props,o=this.getPlaceholder(),a=this.isInvalid();return(0,v.jsxs)("div",{children:[(0,v.jsx)(Rd,{value:this.state.value,saveState:e,placeholder:o,defaultCountryCode:t,isInvalid:a,isReplyType:n,disabled:r,isNotificationChannel:i,onChange:this.handleChange,onSubmit:this.handleSubmit}),a&&(0,v.jsx)(Aa.A,{errorMessage:this.getErrorMessage()})]})}}var Bd=n(88781),Pd=n(24887);const Ld=(0,k.Ay)("div",{target:"enj4v442"})("position:relative;background:",(0,k.w4)("input"),";&,input{width:100%;height:40px;font-size:14px;line-height:40px;box-sizing:border-box;}input{position:absolute;padding:11px;padding-right:51px;box-sizing:border-box;border:1px solid ",(0,k.w4)("borderEmphasisNeutral"),";border-radius:4px;&[disabled]{cursor:not-allowed;}&::placeholder{color:",(0,k.w4)("textMuted"),";}}",(({saveState:e,theme:t})=>("saved"===e||"saving"===e)&&(0,k.AH)("input{border:1px solid ",t.borderEmphasisNeutral,";}"))," ",(({isInvalid:e,theme:t})=>e&&(0,k.AH)("background-color:",t.containerError,";color:",t.textError,";border-color:",t.borderError,";")),";"),Od={name:"1ksbapn",styles:"position:absolute;top:0;right:0;bottom:0;width:40px;border-top-right-radius:3px;border-bottom-right-radius:3px;background-position:center"};var Dd={name:"6dhm9o",styles:"visibility:hidden"};const Hd=(0,k.Ay)("button",{target:"enj4v441"})("cursor:pointer;&[disabled]{cursor:not-allowed;}background-color:",(0,k.w4)("appColor"),";box-shadow:0 1px 2px 0 ",(0,k.w4)("elevation2"),";",Od,"@media (-ms-high-contrast: active){border:1px solid ",(0,k.w4)("borderNeutral"),";}",(({saveState:e})=>("saved"===e||"saving"===e)&&Dd),";"),Fd=(0,k.Ay)("span",{target:"enj4v440"})(Od," ",(0,ii.op)(Bd,Pd,"14px","12px"),";"),Vd=({value:e,saveState:t,isInvalid:n,disabled:i,onChange:r,onSubmit:o})=>{const a=Bo(),s=()=>i||"saving"===t||"saved"===t,l=()=>"saving"===t;return(0,v.jsxs)(Ld,{saveState:t,isInvalid:n,children:[(0,v.jsx)("input",{ref:a,name:"datetime",type:"datetime-local",disabled:s(),defaultValue:(e=>{const t=new Date(e);return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}T${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`})(e),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),o())},onChange:e=>{r(e.target.value.trim())},onBlur:yr.BW,"aria-label":"date time","data-testid":"datetime-input"}),(0,v.jsx)(Fd,{}),(0,v.jsx)(Hd,Object.assign({disabled:s(),onClick:o,saveState:t,"aria-label":l()?(0,Xe.Tl)("loading"):(0,Xe.Tl)("submit")},l()?{role:"progressbar"}:{},{children:(0,v.jsx)(zd.A,{disabled:s(),loading:l()})}))]})},Gd=({value:e,saveState:t,errorMessage:n,disabled:i,onSubmit:r})=>{const[o,a]=(0,b.useState)({value:e||"",isValid:!0}),s=e=>{if(!e)return!1;const t=new Date(e);return!isNaN(t.getTime())},l=()=>"failed"===t||!o.isValid;return(0,v.jsxs)("div",{children:[(0,v.jsx)(Vd,{value:o.value,saveState:t,isInvalid:l(),disabled:i,onChange:e=>{a({value:e,isValid:!0})},onSubmit:()=>{const{value:e}=o;if(s(e)){const t=new Date(e);r(t.toISOString())}else a({value:e,isValid:!1})}}),l()&&!!n&&(0,v.jsx)(Aa.A,{errorMessage:n})]})};var $d=n(83641);const qd=(0,k.Ay)("div",{target:"e11w63we1"})({name:"1gzi742",styles:"margin:0 0 16px;&:last-child{margin:0;}"}),Ud=(0,k.Ay)("div",{target:"e11w63we0"})({name:"90ttzg",styles:"margin-bottom:5px;font-size:14px;line-height:20px"});var Wd=n(30998);const Kd=(0,k.Ay)("div",{target:"ed4y61j5"})("position:relative;background:",(0,k.w4)("input"),";cursor:pointer;&,label{width:100%;height:40px;font-size:14px;line-height:40px;box-sizing:border-box;}label{position:absolute;padding:11px 5px;box-sizing:border-box;border:1px solid ",(0,k.w4)("borderEmphasisNeutral"),";border-radius:4px;&[disabled]{cursor:not-allowed;}}",(({saveState:e,theme:t})=>("saved"===e||"saving"===e)&&(0,k.AH)("input,label{border:1px solid ",t.borderEmphasisNeutral,";}"))," ",(({isInvalid:e,theme:t})=>e&&(0,k.AH)("input,label{background-color:",t.containerError,";color:",t.textError,";border-color:",t.borderError,";}")),";"),Xd={name:"1ksbapn",styles:"position:absolute;top:0;right:0;bottom:0;width:40px;border-top-right-radius:3px;border-bottom-right-radius:3px;background-position:center"};var Yd={name:"6dhm9o",styles:"visibility:hidden"};const Zd=(0,k.Ay)("button",{target:"ed4y61j4"})("cursor:pointer;&[disabled]{cursor:not-allowed;}background-color:",(0,k.w4)("appColor"),";box-shadow:0 1px 2px 0 ",(0,k.w4)("elevation2"),";",Xd,"@media (-ms-high-contrast: active){border:1px solid ",(0,k.w4)("borderNeutral"),";}",(({saveState:e})=>"saved"===e&&Yd),";");var Jd={name:"6dhm9o",styles:"visibility:hidden"};const Qd=(0,k.Ay)("div",{target:"ed4y61j3"})("width:100%;height:40px;font-size:14px;line-height:40px;box-sizing:border-box;position:absolute;padding:0 35px;color:",(0,k.w4)("textMuted"),";top:0;cursor:pointer;",(({hidden:e})=>e&&Jd),";"),eu=(0,k.Ay)("span",{target:"ed4y61j2"})(Xd," ",(0,ii.op)(Bd,Pd,"14px","12px"),";"),tu=(0,k.Ay)("div",{target:"ed4y61j1"})("cursor:pointer;position:absolute;left:13px;",Wd.I.className,"{svg{path{fill:",(({theme:e})=>e.iconDefault),";}circle{stroke:",(({theme:e})=>e.iconDefault),";}}}"),nu=(0,k.Ay)("div",{target:"ed4y61j0"})("margin-left:6px;font-size:14px;line-height:20px;padding:0 30px;font-weight:400;font-family:",(0,k.w4)("fontSansSerif"),";white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"),iu="idle",ru="uploading",ou="failed",au=(e,t)=>{switch(t.type){case"UPLOAD_START":return Object.assign({},e,{status:ru,errorMessage:null,upload:{name:t.payload.name,id:void 0}});case"UPLOAD_SUCCESS":return Object.assign({},e,{status:"uploaded",upload:Object.assign({},e.upload,{id:t.payload.id})});case"UPLOAD_FAILURE":return Object.assign({},e,{status:ou,errorMessage:t.payload.errorMessage});case"RESET_UPLOAD":return{status:iu,errorMessage:null,upload:null};default:return e}},su=({onSubmit:e,ariaLabel:t,value:n,saveState:i,placeholder:r,disabled:o,identifier:a})=>{var s,l,c,d;const u=(0,m.GV)((e=>e.session)),p=(0,di.A)(),[h,g]=(0,b.useReducer)(au,{status:iu,errorMessage:null,upload:{name:null==n||null==(s=n[0])?void 0:s.name,id:null==n||null==(l=n[0])?void 0:l.id}}),x=(0,b.useMemo)((()=>"saving"===i||h.status===ru),[i,h.status]),f=(0,b.useMemo)((()=>o||"saved"===i||"saving"===i||h.status===ru),[i,o,h.status]),y=(0,b.useMemo)((()=>"failed"===i||h.status===ou),[i,h.status]),j=Object.assign({"aria-label":x?(0,Xe.Tl)("loading"):(0,Xe.Tl)("submit")},x?{role:"progressbar"}:{});return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(Kd,{isInvalid:y,saveState:i,children:(0,v.jsxs)("label",{htmlFor:a,children:[(0,v.jsx)("input",{type:"file",id:a,onChange:e=>{const t=e.target,n=t.files;null!=n&&n.length>0&&(g({type:"UPLOAD_START",payload:{name:n[0].name}}),(0,sn.oT)(Lt.Ay,u,n[0]).then((e=>{void 0!==(null==e?void 0:e.id)&&(g({type:"UPLOAD_SUCCESS",payload:{id:e.id}}),t.value="")})).catch((async e=>{var t;const n=JSON.parse(e),i=(null==n||null==(t=n.errors)||null==(t=t[0])?void 0:t.message)||(0,Xe.Tl)("something_is_wrong");g({type:"UPLOAD_FAILURE",payload:{errorMessage:i}})})))},"aria-label":t,disabled:f,multiple:!1,required:!0,"data-testid":"file-upload-input",style:{display:"none"}}),(0,v.jsxs)("div",{children:[(0,v.jsx)(tu,{children:(0,v.jsx)(Te.Ay,{type:"Attachment",size:16})}),(0,v.jsx)(Qd,{hidden:!(null==(c=h.upload)||!c.name),children:(0,v.jsx)("span",{children:r})}),(null==(d=h.upload)?void 0:d.name)&&(0,v.jsx)(nu,{children:h.upload.name}),(0,v.jsx)(eu,{"data-testid":"success-icon"}),(0,v.jsxs)(Zd,Object.assign({disabled:f,onClick:()=>{var t,n;void 0!==(null==(t=h.upload)?void 0:t.id)&&e([null==(n=h.upload)?void 0:n.id])},saveState:i},j,{children:[(0,v.jsx)(zd.A,{disabled:f,loading:x}),x?(()=>{const{isPrimaryColorAsTheme:e}=p||{},t=e?"defaultColor":"inverseColor";return(0,v.jsx)(w.A,{color:t,size:"small"})})():null]}))]})]})}),y&&(0,v.jsx)(Aa.A,{errorMessage:h.errorMessage?h.errorMessage:(0,Xe.Tl)("something_is_wrong")})]})},lu=b.memo(su);function cu({name:e,type:t,identifier:n,value:i,multiline:r,options:o,number:a,saveState:s,errorCode:l,defaultCountryCode:c,isReplyType:d,disabled:u,onSubmit:p}){const h=(0,b.useCallback)((e=>{p(n,e)}),[n,p]),m=(0,b.useCallback)((e=>{h(e.text)}),[h]),g=(0,b.useMemo)((()=>i?String(i):void 0),[i]),x=Bo(),f=(0,b.useCallback)(((e,t)=>{const n=t?{id:t,text:t}:null,i=e.map((e=>({id:e,text:e})));return function(e){const t=e.length,n=Math.floor(18/t);return t<=4&&e.every((e=>e.length<=n))}(e)?(0,v.jsx)(Id.A,{disabled:u,value:n,options:i,saveState:s,onChange:m},(0,$d.A)(JSON.stringify(n))):(0,v.jsx)(Ed.A,{disabled:u,value:n,options:i,saveState:s,listRef:x,onChange:m})}),[u,s,m,x]),y=(0,b.useCallback)((()=>"email"===n?(0,v.jsx)(xd.A,{disabled:u,value:g,saveState:s,isReplyType:d,isNotificationChannel:!1,onSubmit:h}):"phone"===n?(0,v.jsx)(PhoneNumberAttribute,{disabled:u,value:g,saveState:s,errorCode:l,defaultCountryCode:c,isReplyType:d,isNotificationChannel:!1,onSubmit:h},g):"string"===t&&Array.isArray(o)?f(o,g):"string"===t?(0,v.jsx)(StringAttribute,{disabled:u,value:g,multiline:r,saveState:s,isReplyType:d,onSubmit:h,ariaLabel:e}):"integer"===t?(0,v.jsx)(vd,{disabled:u,value:g,saveState:s,isReplyType:d,onSubmit:h,ariaLabel:e}):"float"===t?(0,v.jsx)(FloatAttribute,{disabled:u,value:g,saveState:s,isReplyType:d,onSubmit:h,ariaLabel:e}):"datetime"===t?(0,v.jsx)(Gd,{disabled:u,value:g,saveState:s,onSubmit:h}):"boolean"!==t||"boolean"!=typeof i&&void 0!==i?"files"===t?(0,v.jsx)(lu,{placeholder:"Add file",saveState:s,onSubmit:h,ariaLabel:e,identifier:n,value:i},t):null:(0,v.jsx)(_d,{disabled:u,value:i,saveState:s,isReplyType:d,onSubmit:h},JSON.stringify(i))),[n,u,g,s,d,t,o,l,c,r,e,i,h,f]);return(0,v.jsxs)(qd,{children:[(0,v.jsx)(Ud,{children:void 0!==a?`${a}. ${e}`:e}),y()]})}const du=(0,k.Ay)("div",{target:"e71tctg8"})({name:"9wh3ns",styles:"position:absolute;/* @noflip */left:0;bottom:10px"}),uu=(0,k.Ay)("div",{target:"e71tctg7"})("position:absolute;right:0;top:0;color:",(0,k.w4)("textMuted"),";font-size:14px;line-height:20px;"),pu=(0,k.Ay)("div",{target:"e71tctg6"})("position:relative;padding:26px 24px 24px;/* @noflip */margin-left:45px;text-align:left;background-color:",(0,k.w4)("containerBaseNeutral"),";border-radius:5px;color:",(0,k.w4)("textDefault"),";",ii.HF," ",(({useNewConversationStyle:e,theme:t})=>e&&(0,k.AH)("margin-left:0;margin-bottom:4px;box-shadow:none;border-radius:20px;border:1px solid ",t.borderEmphasisNeutral,";background:",t.alphaWhite90,";")),";"),hu=(0,k.Ay)("div",{target:"e71tctg5"})({name:"1azpx8r",styles:"margin-bottom:20px"}),mu=(0,k.Ay)("div",{target:"e71tctg4"})({name:"bjn8wh",styles:"position:relative"}),gu=(0,k.Ay)("div",{target:"e71tctg3"})("color:",(0,k.w4)("textDisabled"),";font-size:14px;text-align:center;border-top:1px solid ",(0,k.w4)("borderEmphasisNeutral"),";padding-top:16px;"),xu=(0,k.Ay)("h2",{target:"e71tctg2"})("color:",(0,k.w4)("textDefault"),";font-weight:600;font-size:16px;"),fu=(0,k.Ay)("h3",{target:"e71tctg1"})("color:",(0,k.w4)("textMuted"),";font-size:14px;margin-top:8px;");var vu={name:"6sug3x",styles:"margin-top:3px"};const yu=(0,k.Ay)("div",{target:"e71tctg0"})("margin-top:8px;margin-bottom:8px;width:100%;max-width:520px;position:relative;/* @noflip */float:left;",(({isReplyType:e})=>e&&vu)," ",(({theme:e,isReplyType:t})=>e.isMobileBrowser&&t&&(0,k.AH)(pu.className,"{/* @noflip */margin-left:0;}")),";");var bu={name:"hkh81z",styles:"margin-top:8px"};const wu=(0,k.Ay)("div",{target:"e1jqii293"})("display:flex;flex-direction:row;align-items:center;margin-bottom:8px;",(({hasAvatar:e})=>!e&&bu)," .ai-tooltip{margin-left:auto;}"),ju=(0,k.Ay)("span",{target:"e1jqii292"})("color:",(0,k.w4)("textDefault"),";font-size:13px;font-style:normal;font-weight:600;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;",(({systemPart:e,theme:t})=>e&&(0,k.AH)("color:",t.textMuted,";")),";"),ku=(0,k.Ay)("span",{target:"e1jqii291"})("color:",(0,k.w4)("textDefault"),";font-size:13px;font-style:normal;font-weight:600;flex-shrink:0;white-space:pre;",(({systemPart:e,theme:t})=>e&&(0,k.AH)("color:",t.textMuted,";")),";"),Au=(0,k.Ay)("div",{target:"e1jqii290"})({name:"1oaeivz",styles:"margin-right:8px"});const Cu={name:"1dk0v5d",styles:"z-index:2"},Su={name:"1v771ry",styles:"z-index:3"},Tu=(e,t,n)=>{switch(t){case 2:switch(e){case 0:return Cu;case 1:return(({theme:e})=>(0,k.AH)("margin-left:-2px;mask:radial-gradient(\n    circle 10px at -7px 50%,\n    transparent 99%,\n    ",e.containerBaseNeutral," 100%\n  );z-index:1;"))({theme:n});default:return""}case 3:switch(e){case 0:return Su;case 1:return(({theme:e})=>(0,k.AH)("margin-left:-2px;mask:radial-gradient(\n    circle 10px at -7px 50%,\n    transparent 99%,\n    ",e.containerBaseNeutral," 100%\n  );z-index:2;"))({theme:n});case 2:return(({theme:e})=>(0,k.AH)("margin-left:-2px;mask:radial-gradient(\n    circle 10px at -7px 50%,\n    transparent 99%,\n    ",e.containerBaseNeutral," 100%\n  );z-index:1;"))({theme:n});default:return""}default:return""}},_u=({index:e,numOfAvatars:t,theme:n})=>(0,k.AH)(Tu(e,t,n),";"),Eu=(0,k.Ay)("div",{target:"e1nvaxcc1"})(_u,";"),Iu=(0,k.Ay)("div",{target:"e1nvaxcc0"})({name:"646eli",styles:"display:inline-flex;border-radius:4px"}),zu=({avatar:e})=>{const t=(null==e?void 0:e.shape)||"circle",n="circle"===t?24:20,i={imageUrl:"dark"===(0,di.A)().themeMode?(null==e?void 0:e.darkSquare128)||(null==e?void 0:e.square128):(null==e?void 0:e.square128)||(null==e?void 0:e.imageUrl),initials:null==e?void 0:e.initials,label:null==e?void 0:e.label,shape:t,size:n};return(0,v.jsx)(Ne.e,Object.assign({},i))},Nu=({avatar:e,index:t,numOfAdmins:n})=>{const i={imageUrl:"dark"===(0,di.A)().themeMode?(null==e?void 0:e.darkSquare128)||(null==e?void 0:e.square128):(null==e?void 0:e.square128)||(null==e?void 0:e.imageUrl),initials:null==e?void 0:e.initials,label:null==e?void 0:e.label,shape:(null==e?void 0:e.shape)||"circle",size:20};return(0,v.jsx)(Eu,{index:t,numOfAvatars:n,children:(0,v.jsx)(Ne.e,Object.assign({},i))})},Mu=({avatars:e})=>1===e.length?(0,v.jsx)(zu,{avatar:e[0]}):e.length>1?(0,v.jsx)(Iu,{children:e.map(((t,n)=>(0,v.jsx)(Nu,{avatar:t,index:n,numOfAdmins:e.length},t.imageUrl||t.label)))}):null;var Ru=n(75285);const Bu=({part:e,isAIAnswer:t=!1})=>{var n;const{metadata:i}=e,r=(0,is.vz)(e),o=(null==i?void 0:i.title)||"",a=`${null!=i&&i.suffix?` • ${i.suffix}`:""}${null!=i&&i.timestamp?` • ${(0,En.iw)((0,Ru.kU)(i.timestamp))}`:""}`;return null!=i&&i.title?(0,v.jsxs)(wu,{hasAvatar:!(null==i||null==(n=i.avatars)||!n.length),children:[i.avatars?(0,v.jsx)(Au,{children:(0,v.jsx)(Mu,{avatars:i.avatars})}):null,(0,v.jsx)(ju,{systemPart:r,children:o}),(0,v.jsx)(ku,{systemPart:r,children:a}),t&&(0,v.jsx)(Sl,{triggerClassName:"ai-tooltip"})]}):null};function Pu(e){const{form:t}=e;return t?t.attributes.reduce(((e,{identifier:t,saveState:n})=>Object.assign({},e,{[t]:n})),{}):{}}function Lu(e){return Object.keys(e).length}function Ou(e){return Object.keys(e).filter((t=>"saved"===e[t]||"failed"===e[t])).length}var Du=n(79751);const Hu=(0,o.Ng)(((e,t)=>{const{part:n}=t,i=(0,Ma.Vy)(e)||e.message.conversationId,{id:r}=n;return{conversationId:i,partId:r,defaultCountryCode:e.user.countryCode||"us"}}),(e=>({onAttributeSubmit(t,n,i,r,o,a){e((0,sn.DX)(Lt.Ay,t,n,i,r,o,a,(0,Z.S9)({identifier:i})))},onEmailAttributeMount(t){e((0,Du.Mv)(t))}})),((e,t,n)=>Object.assign({},e,t,n,{onAttributeSubmit(i,r){t.onAttributeSubmit(e.conversationId,e.partId,i,r,(0,Z.MF)(n.part.form,i),n.part.form.type)}})))((function(e){const{part:t,conversationId:n,onEmailAttributeMount:i}=e,r=(0,b.useRef)(null),o=(0,b.useRef)(null);(0,b.useEffect)((()=>{const{form:e}=t;if(!e)return;e.attributes.some((({identifier:e})=>"email"===e))&&o.current!==n&&(i(n),o.current=n)}),[t,n,i]);const a=(0,b.useRef)({});(0,b.useEffect)((()=>{const e=Pu(t);Ou(a.current)!==Ou(e)&&r.current&&function(e){if(!e)return;const t=e.closest(".intercom-conversation-body-parts");t&&(0,u.cs)(t)}(r.current),a.current=e}),[t]);const s=(n,i)=>{const{isReplyType:r,defaultCountryCode:o,onAttributeSubmit:a,disabled:s,hideNumbering:l}=e,c=Pu(t);if(i>Ou(c))return null;const{type:d,name:u,identifier:p,options:h,value:m,saveState:g,errorCode:x,multiline:f}=n;let y;return Lu(c)>1&&!l&&(y=`${i+1}`),(0,v.jsx)(cu,{type:d,name:u,identifier:p,value:m,multiline:f,number:y,options:h,disabled:s,saveState:g,errorCode:x,defaultCountryCode:o,isReplyType:r,onSubmit:a},p)},{isReplyType:l,useNewConversationStyle:c,hasAvatar:d}=e;return(0,v.jsxs)(yu,{isReplyType:l,ref:r,children:[d?(0,v.jsx)(du,{children:(0,v.jsx)(co.h,{author:t.author})}):null,(()=>{const{part:t}=e;return t.metadata?(0,v.jsx)(Bu,{part:t}):null})(),(0,v.jsxs)(pu,{useNewConversationStyle:c,children:[(()=>{const{form:e}=t;if(!e)return null;const n=e.title&&e.title.length>0,i=e.subtitle&&e.subtitle.length>0;return n?(0,v.jsxs)(hu,{children:[n?(0,v.jsx)(xu,{children:e.title}):null,i?(0,v.jsx)(fu,{children:e.subtitle}):null]}):null})(),(0,v.jsxs)(mu,{children:[(()=>{const e=Pu(t),n=Lu(e);if(1===n)return null;const i=Math.min(n,Ou(e)+1);return(0,v.jsxs)(uu,{children:["(",i,"/",n,")"]})})(),(()=>{const{form:e}=t;return e?e.attributes.map(s):null})(),(()=>{const{disabled:t,disabledMessage:n}=e;return t&&n?(0,v.jsx)(gu,{children:n}):null})()]})]})]})}));var Fu=n(54050);function Vu({channel:e,isEmailSaved:t,isPhoneNumberSaved:n,isPhoneNumberEnabled:i,onChannelChange:r}){const o=(0,b.useMemo)((()=>t||n),[t,n]),a=(0,b.useCallback)((t=>t===e),[e]),s=(0,b.useMemo)((()=>xe()({"intercom-notification-channel-collector-card-controls":!0,"intercom-notification-channel-collector-card-controls-saved":o})),[o]),l=(0,b.useCallback)((e=>xe()({"intercom-anchor":!0,"intercom-notification-channel-collector-card-controls-channel":!0,"intercom-notification-channel-collector-card-controls-channel-selected":a(e)})),[a]),c=(0,b.useCallback)((e=>{e.preventDefault(),r("email")}),[r]),d=(0,b.useCallback)((e=>{e.preventDefault(),r("phone")}),[r]),u=(0,b.useMemo)((()=>a("email")),[a]),p=(0,b.useMemo)((()=>a("phone")),[a]),h=(0,b.useMemo)((()=>l("email")),[l]),m=(0,b.useMemo)((()=>l("phone")),[l]),g=(0,b.useMemo)((()=>i?(0,Xe.Tl)("get_notified"):(0,Xe.Tl)("get_notified_by_email")),[i]),x=(0,b.useMemo)((()=>t?(0,Xe.Tl)("youll_be_notified_here_and_by_email"):(0,Xe.Tl)("youll_be_notified_here_and_by_sms")),[t]);return(0,v.jsxs)(ua,{isSaved:o,className:s,children:[(0,v.jsx)(xa,{className:"intercom-notification-channel-collector-card-controls-message",children:x}),(0,v.jsx)(ga,{className:"intercom-notification-channel-collector-card-controls-prompt",children:g}),i&&(0,v.jsxs)(pa,{className:"intercom-notification-channel-collector-card-controls-channels",children:[(0,v.jsx)(ha,{isSelected:u,className:h,onClick:c,children:(0,Xe.Tl)("email")}),(0,v.jsx)(ha,{isSelected:p,className:m,onClick:d,children:(0,Xe.Tl)("sms")})]})]})}class NotificationChannelCollectorCard extends b.PureComponent{constructor(...e){super(...e),this.state={channel:"saved"===this.props.phoneNumberSaveState?"phone":"email",prevProps:this.props},this.handleChannelChange=e=>{this.setState({channel:e})}}componentDidMount(){const{part:e,conversationId:t}=this.props,{form:n}=e;n&&n.attributes.forEach((({identifier:i})=>{(0,Ve.A5)("received","operator_reply","messenger","in_conversation",{type:"automated_lead_qualification",conversation_id:t,part_id:e.id,attribute_identifier:i,attribute_type:i,form_type:n.type,attribute_is_custom_data:!1})}))}static getDerivedStateFromProps(e,t){if(!t||(0,Fu.b)(e,t.prevProps))return null;let n;return"saved"===e.emailSaveState?n="email":"saved"===e.phoneNumberSaveState&&(n="phone"),n?{channel:n,prevProps:e}:{prevProps:e}}renderAvatar(){return(0,v.jsx)(Xo,{children:(0,v.jsx)(co.h,{author:this.props.part.author})})}renderControls(){const{emailSaveState:e,phoneNumberSaveState:t,isPhoneNumberEnabled:n}=this.props,i="saved"===e,r="saved"===t;return(0,v.jsx)(Vu,{channel:this.state.channel,isEmailSaved:i,isPhoneNumberSaved:r,isPhoneNumberEnabled:n,onChannelChange:this.handleChannelChange})}renderAttribute(){var e;const{part:t,disabled:n,email:i,phoneNumber:r,emailSaveState:o,phoneNumberSaveState:a,defaultCountryCode:s,onEmailSubmit:l,onPhoneNumberSubmit:c}=this.props,d=null==(e=t.form)?void 0:e.attributes.find((({identifier:e})=>e===this.state.channel));return"email"===this.state.channel?(0,v.jsx)(xd.A,{disabled:n,value:i,saveState:o,isReplyType:!1,isNotificationChannel:!0,onSubmit:l}):(0,v.jsx)(PhoneNumberAttribute,{disabled:n,value:r,saveState:a,errorCode:null==d?void 0:d.errorCode,defaultCountryCode:s,isReplyType:!1,isNotificationChannel:!0,onSubmit:c},r)}renderDisabledMessage(){const{disabled:e,disabledMessage:t}=this.props;return e&&t?(0,v.jsx)(ka,{children:t}):null}isSaved(){const{emailSaveState:e,phoneNumberSaveState:t}=this.props;return"saved"===e||"saved"===t}render(){return(0,v.jsxs)(Wo,{children:[this.props.hasAvatar?this.renderAvatar():null,(0,v.jsxs)(Ko,{children:[this.renderControls(),this.renderAttribute(),this.renderDisabledMessage()]})]})}}const Gu=(e,t)=>e.attributes.find((e=>e.identifier===t)),$u=(0,o.Ng)(((e,t)=>{const{part:n}=t,{id:i,form:r}=n,o=e.user.countryCode||"us",a=(0,Ma.Vy)(e),s=Gu(r,"email"),l=Gu(r,"phone"),c=void 0!==l,{value:d,saveState:u}=s;let p,h;return c&&(p=l.value,h=l.saveState),{conversationId:a,partId:i,email:d,phoneNumber:p,emailSaveState:u,phoneNumberSaveState:h,isPhoneNumberEnabled:c,defaultCountryCode:o}}),(e=>({onAttributeSubmit(t,n,i,r,o){const a=i;e((0,sn.DX)(Lt.Ay,t,n,i,r,a,o,!1))}})),((e,t,n)=>Object.assign({},e,t,n,{onEmailSubmit(i){t.onAttributeSubmit(e.conversationId,e.partId,"email",i,n.part.form.type)},onPhoneNumberSubmit(i){t.onAttributeSubmit(e.conversationId,e.partId,"phone",i,n.part.form.type)}})))(NotificationChannelCollectorCard);const qu=(0,o.Ng)((e=>({conversation:(0,Nl.Gm)(e)||(0,Nl.BJ)(e),userId:e.user.id})))((function(e){return(0,v.jsx)("div",{className:"intercom-attribute-collector",children:(()=>{const{conversation:t,part:n,hasAvatar:i,useNewConversationStyle:r}=e,{form:o}=n,a=t.preventEndUserReplies||(null==o?void 0:o.disabled),s=(null==o?void 0:o.disabledMessage)||null;return o&&"notification_channel"===o.type?(0,v.jsx)($u,{disabled:a,disabledMessage:s,part:n,hasAvatar:i}):o&&"upfront_collection"===o.type?(0,v.jsx)(Hu,{disabled:a,disabledMessage:s,part:n,hasAvatar:i,hideNumbering:!0,useNewConversationStyle:r},JSON.stringify(n)):(0,v.jsx)(Hu,{disabled:a,disabledMessage:s,part:n,hasAvatar:i,useNewConversationStyle:r},n.id)})()})})),Uu=(0,k.w4)("textDefault"),Wu="\n  display: flex;\n  justify-content: center;\n",Ku=(0,k.Ay)("div",{target:"e11tr6da3"})("max-width:100%;padding:0 12px;font-size:12px;line-height:18px;position:relative;",Wu," ",gl.D.className,"{bottom:-17px;left:45px;}.intercom-block-paragraph{overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;white-space:normal;text-align:center;max-width:100%;margin-bottom:4px;}"),Xu=(0,k.Ay)("div",{target:"e11tr6da2"})("flex-shrink:0;",Wu," margin-right:6px;margin-bottom:4px;"),Yu=(0,k.Ay)("div",{target:"e11tr6da1"})("color:",Uu,";text-align:center;overflow-wrap:break-word;word-break:break-word;letter-spacing:0.048px;min-width:0;",Wu," margin-bottom:4px;white-space:pre;"),Zu=(0,k.Ay)("div",{target:"e11tr6da0"})(Wu," align-items:center;text-align:center;flex-wrap:wrap;padding:3px 0;max-width:100%;color:",Uu,";line-height:18px;position:relative;"),Ju=(0,b.memo)((({part:e})=>{const{createdAt:t}=e;if("object"!=typeof(n=e.eventData)||null===n||!("participant"in n)||!("eventAsPlainText"in n)||"string"!=typeof n.eventAsPlainText)return null;var n;const i=e.eventData,r=t?(0,En.Bv)(t):"";return(0,v.jsxs)(Ku,{children:[(0,v.jsxs)(Zu,{children:[(0,v.jsx)(Xu,{children:(0,v.jsx)(co.h,{author:i.participant,size:20})}),i.eventContent&&i.eventContent.length>0?(0,v.jsx)(Yu,{children:i.eventContent.map(((e,t)=>"paragraph"===e.type?(0,v.jsx)(pi.A,{blocks:[e],autoPlay:!1},`${e.text}-${t}`):(0,v.jsx)(Yu,{children:e.text},`${e.text}-${t}`)))}):(0,v.jsx)(Yu,{children:i.eventAsPlainText})]}),(0,v.jsx)(gl.D,{hasBody:!1,isSingleBlock:!1,children:r})]})}));Ju.displayName="ParticipantEvent";const Qu=Ju,ep=n.p+"images/warning-icon.4632b21e71c4fa1a8bdf.png",tp=n.p+"images/warning-icon@2x.cb91f379407978c5b0a6.png";const np="200ms";var ip={name:"12d7z7x",styles:"*{cursor:pointer;}"},rp={name:"1dabe76",styles:"padding-bottom:24px"},op={name:"1u53ekv",styles:"padding-bottom:16px"},ap={name:"1ml9tbj",styles:"padding-bottom:2px"},sp={name:"mpkj0c",styles:"padding-bottom:8px"},lp={name:"lb05wl",styles:"&.intercom-conversation-part-enter{transform:translateY(0);}"};const cp=(0,k.Ay)("div",{target:"eqhze2h0"})(ii.t6," padding-bottom:16px;.intercom-separated-content{display:flex;flex-direction:column;gap:8px;align-items:flex-start;>*{align-self:flex-start;width:auto;max-width:none;}}",(({isAdmin:e,flatConversationStyle:t})=>e&&!t&&(0,k.AH)("&.intercom-conversation-part-enter{opacity:0;}&.intercom-conversation-part-enter.intercom-conversation-part-enter-active{opacity:1;transition:opacity ",np,";}",Ws.j.className,"{/* @noflip */padding-left:45px;}"))," ",(({isSelf:e,conversationHasScrolled:t})=>e&&(0,k.AH)("&.intercom-conversation-part-enter{opacity:0;transform:translateY(40px);}&.intercom-conversation-part-enter.intercom-conversation-part-enter-active{opacity:1;transform:translateY(0);transition:opacity ",np,",transform ",np,";}",t&&lp," ",Ws.j.className,"{/* @noflip */float:right;}",Ws.J.className,"{/* @noflip */float:right;}"))," ",(({isAdmin:e,isSelf:t})=>!e&&!t&&(0,k.AH)(Ws.j.className,"{/* @noflip */padding-left:45px;}"))," ",(({grouped:e})=>e&&sp)," ",(({groupingPosition:e,flatConversationStyle:t})=>!t&&("middle"===e||"top"===e)&&ap)," ",(({groupingPosition:e})=>("bottom"===e||"standalone"===e)&&op)," ",(({isLastPart:e})=>e&&rp)," ",(({theme:e,isFailedPart:t,isRetryable:n})=>t&&(0,k.AH)(Ws.j.className,"{",(0,ii.op)(ep,tp,"11px","11px")," padding-left:15px;background-position:left 7px;background-repeat:no-repeat;color:",e.textError,";width:auto;}",n&&ip,";"))," ",mo.sC.className,"+",kc.className,"{",wc.W.className,"{padding-bottom:8px;}}");var dp=n(79597);const up=(0,k.Ay)("div",{target:"e1bs48ky5"})("text-align:center;font-weight:bold;",(({theme:e})=>`border-bottom: 1px solid ${e.appColorSemiTransparent30}`),";"),pp=(0,k.Ay)("div",{target:"e1bs48ky4"})({name:"cso1wt",styles:"padding:16px 24px 16px 24px"}),hp=(0,k.Ay)("div",{target:"e1bs48ky3"})({name:"16yasoo",styles:"text-align:center;text-decoration:underline;cursor:pointer;margin-top:-16px"}),mp=(0,k.Ay)("div",{target:"e1bs48ky2"})({name:"12hzqv8",styles:"font-weight:bold;margin-bottom:6px"}),gp=(0,k.Ay)("div",{target:"e1bs48ky1"})("p{margin-top:4px;line-height:10px;}span{",(({theme:e})=>`color: ${e.textMuted};\n\t\tfont-size: 12px;\n\t\tdisplay: block`),";}"),xp=(0,k.Ay)("div",{target:"e1bs48ky0"})({name:"125lw3i",styles:"font-size:13px;font-weight:bold"});var fp=n(57492);const vp=({ticket:e,part:t})=>{var n,i;return(0,v.jsxs)(dp.l,{children:[(0,v.jsx)(up,{children:(0,v.jsx)(pp,{children:e.name})}),(0,v.jsxs)(pp,{children:[e.attributes.title&&(0,v.jsx)(mp,{children:null==(n=e.attributes.title.value)?void 0:n.toString()}),e.attributes.status&&(0,v.jsxs)(gp,{children:[(0,v.jsxs)(xp,{children:[(0,Xe.Tl)("status"),":"]}),(0,v.jsx)("p",{children:null==(i=e.attributes.status.value)?void 0:i.toString()}),(0,v.jsx)("span",{children:(0,En.iw)(t.createdAt)})]})]}),(0,v.jsx)(pp,{children:(0,v.jsx)(a.Link,{to:(0,fp.sq)(e.id),children:(0,v.jsx)(hp,{children:(0,Xe.Tl)("view_more_details")})})})]})},yp=({part:e,conversationId:t})=>{const n=(0,m.GV)((e=>(0,Nl.VN)(e,t)));if(!n)return null;const{ticket:i}=n;return i?(0,v.jsx)(vp,{part:e,ticket:i}):null};var bp=n(83285);const wp=(0,k.Ay)("p",{target:"e1mwygkl2"})("font-size:13px;color:",(({theme:e})=>e.textMuted),";display:flex;align-items:center;justify-content:center;width:100%;padding:8px 0;box-sizing:border-box;line-height:16px;text-align:center;svg{min-width:16px;margin-right:8px;}"),jp=(0,k.Ay)("span",{target:"e1mwygkl1"})({name:"1wnowod",styles:"display:flex;align-items:center;justify-content:center"}),kp=(0,k.Ay)("span",{target:"e1mwygkl0"})({name:"1m5hyg0",styles:"word-break:break-all"});function Ap({status:e,timestamp:t,teammate:n,customStatePrefix:i,customStateLabel:r}){const o=e===Qt.S5.submitted?"tickets_status_event_submitted":"tickets_status_change_event",a=(0,Bi.JN)(e),s=(0,Xe.Tl)(o,{teammate:n,submitted_status:a,status:a,timestamp:(0,En.iw)(t)||""});return(0,v.jsx)(wp,{"data-testid":"inline-status",children:(0,v.jsx)("span",{children:(0,v.jsx)("span",{children:r?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(jp,{children:[(0,v.jsx)(bp.A,{}),(0,v.jsxs)("span",{children:[i," • ",(0,En.iw)(t)]})]}),(0,v.jsxs)("span",{style:{display:"block",marginTop:"4px"},children:[" ",(0,v.jsx)(jp,{children:(0,v.jsx)(kp,{children:(0,v.jsx)("strong",{children:r})})})]})]}):(0,v.jsxs)(jp,{children:[(0,v.jsx)(bp.A,{}),(0,v.jsx)("span",{children:s})]})})})})}const Cp=(0,k.Ay)("div",{target:"e1lvkyc82"})({name:"5283xc",styles:"text-align:center;font-size:0.9rem;padding:1rem 0 0.7rem"}),Sp=(0,k.Ay)("div",{target:"e1lvkyc81"})("color:",(0,k.w4)("textDefault"),";display:block;"),Tp=(0,k.Ay)("a",{target:"e1lvkyc80"})("display:inline-block;padding-top:0.3rem;font-weight:600;color:",(0,k.w4)("textDefault"),";"),_p=({mergedConversationId:e,description:t})=>{const n=(0,m.jL)();return(0,v.jsxs)(Cp,{children:[(0,v.jsx)(Sp,{children:t}),(0,v.jsx)(Tp,{onClick:()=>{n((0,sn.QL)(Lt.Ay,e,{requestOrigin:"Link to merged conversation"})),n((0,ln.p)(e))},children:(0,Xe.Tl)("view_conversation")})]})};var Ep=n(23218);const Ip=(0,X.Mz)((e=>{var t;return null==(t=e.app)||null==(t=t.openConfig)?void 0:t.unifiedStyling}),(e=>e));function zp(){return(0,m.GV)(Ip)}const Np=k.i7`
  0% {
    background-position: -200px 0;
  }
  100% {
    background-position: 200px 0;
  }
`,Mp=(0,k.Ay)("div",{target:"e1sik60r1"})("font-size:14px;display:flex;flex-direction:row;align-items:center;justify-content:flex-start;gap:4px;padding:8px 0;background:linear-gradient(90deg, black 0%, gray 25%, lightgray 45%, gray 65%, black 100%);background-size:200px 100%;background-clip:text;color:transparent;animation:",Np," 3s infinite linear;"),Rp=k.i7`
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.2);
  }
`,Bp=(0,k.Ay)("div",{target:"e1sik60r0"})("width:12px;height:12px;background-color:",(0,k.w4)("iconDefault"),";border-radius:50%;animation:",Rp," 1.5s infinite ease-in-out;margin:0 4px;"),Pp=({part:e})=>{const{body:t}=e;return(0,v.jsxs)(Mp,{children:[(0,v.jsx)(Bp,{"data-testid":"pulsing-circle"}),(0,v.jsx)(pi.A,{blocks:t})]})},Lp=({part:e})=>e.partType&&-1!==["participant_added","participant_removed","temporary_expectations","teammate_joined"].indexOf(e.partType)?(0,v.jsx)(Qu,{part:e}):null,Op=({part:e,isLastPart:t,hasAvatar:n,isMobile:i,groupingPosition:r,onImageClick:o,appName:a,lastAdminOrBotPart:s})=>(0,dn.A)(e.partType)?(0,v.jsx)(Lp,{part:e}):(0,v.jsx)(hd,{isLastPart:t,part:e,hasAvatar:n,isMobile:i,groupingPosition:r,onImageClick:o,appName:a,lastAdminOrBotPart:s});const Dp=(0,Ep.d)((function({isLastPart:e,part:t,nextPart:n,reactionsReply:i,appName:r,conversationId:o="",hasAvatar:a,grouped:s,groupingPosition:l,partHasMetadata:c,isMobile:d=!1,conversationHasScrolled:u,setPartRef:p,onArticleCardClick:h,onImageClick:m,onRetry:g,onReactionSelect:x,frameWindow:f,forwardedRef:y,lastAdminOrBotPart:w}){var j,k,A;const C=(0,b.useRef)(null),S=e=>{const n=e.target;if("a"!==n.tagName.toLowerCase())return;const i=n.getAttribute("href");i&&((e,t,n)=>{(0,Ve.A5)("clicked","link","messenger","in_conversation",{conversation_id:e,[t.isMessage?"message_id":"comment_id"]:t.id,url:n,partType:t.messageType})})(o,t,i)},T="failed"===t.saveState,_=T&&!(0,Z.Xc)(t.saveFailureReason)&&!(0,Z.mn)(t.saveFailureReason),E=null==(j=t.author)?void 0:j.isSelf,I=c&&(!(0,is.MU)(t)||T&&E),z=zp(),N=zp(),M=z&&(0,is.vz)(t),R=z&&(0,is.MU)(t),P=(()=>{var e;let n=null==(e=t.author)?void 0:e.firstName;return""!==n&&null!=n||(n="user"),T?(0,Xe.Tl)("failed_message"):(0,Xe.Tl)("user_says",{firstName:n})})();return(0,v.jsx)(Zl,{sources:t.sources,children:(0,v.jsxs)(cp,{onClick:e=>{S(e),_&&g(t)},tabIndex:_?0:-1,role:"article","aria-roledescription":(0,Xe.Tl)("message"),"aria-label":P,ref:(0,mc.A)(y,(e=>p&&p(e,t))),isAdmin:null==(k=t.author)?void 0:k.isAdmin,isSelf:null==(A=t.author)?void 0:A.isSelf,grouped:s,groupingPosition:l,isLastPart:!n,isFailedPart:T,isRetryable:_,conversationHasScrolled:u,isTicketStatusUpdate:"ticketStatusUpdate"===t.messageType,flatConversationStyle:M,"data-testid":"conversation-part",children:[(()=>{var s;switch(t.messageType){case"post":return(0,v.jsx)(oo,{appName:r,conversationId:o,part:t,reactionsReply:i,onReactionSelect:x,frameWindow:f,noShadow:N});case"note":return(0,v.jsx)(lo,{appName:r,part:t,frameWindow:f});case"link":return(0,v.jsx)(Eo,{appName:r,part:t,hasAvatar:a,onArticleCardClick:h});case"finThought":return(0,v.jsx)(Pp,{part:t});case"carousel":return(0,v.jsx)(Is,{part:t,conversationId:o});case"notificationChannels":return(0,v.jsx)(Ba,{part:t,nextPart:null!=n&&n.author?{author:n.author}:null,hasAvatar:a});case"conversationRating":return d?(0,v.jsx)(Op,{part:t,isLastPart:e,hasAvatar:a,isMobile:d,groupingPosition:l,partHasMetadata:c,onImageClick:m,appName:r,lastAdminOrBotPart:w}):(0,v.jsx)(vs,{part:t,nextPart:n,hasAvatar:a&&!R,useNewConversationStyle:R,groupingPosition:l});case"attributeCollector":return(0,v.jsx)(qu,{part:t,hasAvatar:a&&!R,useNewConversationStyle:R});case"video":case"chat":case"adminReply":case"inlineAnswer":case"relevantArticles":case"finAnswer":return(0,v.jsx)(Op,{appName:r,part:t,isLastPart:e,hasAvatar:a,isMobile:d,groupingPosition:l,partHasMetadata:c,onImageClick:m,lastAdminOrBotPart:w});case"pointer":return(0,v.jsx)(ws,{appName:r,part:t,frameWindow:f});case"ticketCard":return(0,v.jsx)(yp,{part:t,conversationId:o});case"ticketStatusUpdate":return(0,v.jsx)(Ap,{status:t.eventData.status,customStatePrefix:t.eventData.customStatePrefix,customStateLabel:t.eventData.customStateLabel,teammate:null==(s=t.author)?void 0:s.firstName,timestamp:t.createdAt,isBot:t.author.isBot},`${t.eventData.status}-${t.createdAt}`);case"mergedPrimaryConversation":return(0,v.jsx)(_p,{mergedConversationId:t.eventData.mergedConversationId,description:t.eventData.description});default:return(0,v.jsx)(Op,{part:t,isLastPart:e,hasAvatar:a,isMobile:d,groupingPosition:l,partHasMetadata:c,onImageClick:m,appName:r,lastAdminOrBotPart:w})}})(),"attribute_collector"===t.replyType?(0,v.jsx)(Hu,{part:t,hasAvatar:!1,isReplyType:!0},(0,$d.A)(JSON.stringify(t))):null,(0,v.jsx)(B.F,{children:I?(0,v.jsx)(B.B1,{classNames:"intercom-conversation-part-metadata",timeout:300,nodeRef:C,children:(0,v.jsx)(Zs,{ref:C,part:t})}):null})]})})}));const Hp=(0,k.Ay)("div",{target:"e1lfi5hh3"})({name:"1es4p3n",styles:"display:flex;flex-direction:column;flex-grow:1;flex-shrink:0;justify-content:space-between;overflow-anchor:none;height:auto;position:relative;z-index:2"});var Fp={name:"1wx2bp",styles:"transition:none"};const Vp=(0,k.Ay)("div",{target:"e1lfi5hh2"})("padding:24px ",(({theme:e,useUpdatedConversationPadding:t})=>t?e.conversationHorizontalPadding:e.globalHorizontalPadding),"px 0;display:flex;flex-flow:row wrap;transition:transform ",np,";overflow-anchor:none;>*{flex:1 100%;max-width:100%;}",(({shouldDisableScrollingAnimation:e})=>e&&Fp),";"),Gp=(0,k.Ay)("div",{target:"e1lfi5hh1"})("text-align:center;color:",(0,k.w4)("textMuted"),";font-size:13px;clear:both;padding-top:14px;padding-bottom:14px;&:first-of-type{padding-top:0px;}"),$p=k.i7`  
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  
  to {
    opacity: 1;
    transform: translateY(0);
  }
  `,qp=(0,k.Ay)("div",{target:"e1lfi5hh0"})((({shouldAnimate:e})=>e&&(0,k.AH)("animation:",$p," 400ms ease-out;")),";"),Up=(0,k.Ay)("div",{target:"e16gamoo0"})("font-size:13px;color:",(0,k.w4)("textMuted"),";padding:0 20px;text-align:",(0,k.xk)("align"),";");class ErrorBoundary extends b.Component{constructor(...e){super(...e),this.state={hasError:!1}}componentDidCatch(e){this.setState({hasError:!0}),(0,Ur.l2)(e)}render(){const{errorText:e,align:t,children:n,style:i}=this.props,{hasError:r}=this.state;return r?(0,v.jsx)(Up,{align:t,style:i||{},children:e}):n}}const Wp=(0,k.Ay)("div",{target:"e1hi37s22"})({name:"2izk9q",styles:"scroll-margin-top:10px;width:0px;height:0px"}),Kp=(0,k.Ay)("div",{target:"e1hi37s21"})("display:flex;flex-direction:column;flex:1;overflow-y:auto;-webkit-overflow-scrolling:touch;outline-offset:-5px;overscroll-behavior:contain;scrollbar-color:",(0,k.w4)("alphaBlack20")," transparent;scrollbar-width:thin;",(({isFinMessenger:e})=>e&&"margin-bottom: 37px;")," &::-webkit-scrollbar{appearance:none;width:5px;}&::-webkit-scrollbar-thumb{background-color:",(0,k.w4)("alphaBlack20"),";border-radius:5px;}&::-webkit-scrollbar-track{background-color:transparent;}"),Xp=(0,k.Ay)("div",{target:"e1hi37s20"})({name:"z5atxi",styles:"display:flex;flex-direction:column;flex-grow:1"}),Yp=(e,t)=>{const[n,i]=(0,b.useState)(0),r=(0,b.useRef)(n);return r.current=n,(0,b.useEffect)((()=>{const n=e.current;if(!n)return;const o=new ResizeObserver((e=>{for(const o of e){var n;const e=null==(n=o.contentBoxSize)||null==(n=n[0])?void 0:n.blockSize;r.current!==e&&void 0!==e&&(i(e),r.current=e,t(e))}}));return o.observe(n),()=>{o.disconnect()}}),[e,t]),n};var Zp=n(22548),Jp=n(61151);const Qp=["children","onWheel","isFinMessenger"];const eh=(e,t,n)=>{if(!e.scrollTo)return;const i=e.getBoundingClientRect(),r=t.getBoundingClientRect().top-i.top+e.scrollTop;e.scrollTo({top:r,behavior:n})},th=(0,b.createContext)({anchorRef:(0,b.createRef)(),scrollViewRef:(0,b.createRef)(),anchor:null,setAnchor:()=>{},canScroll:!1,setCanScroll:()=>{}}),nh=()=>(0,b.useContext)(th),ih=e=>null===e?"unknown":"bottom"===e.type?"bottom":`item-${e.id}`,rh=()=>{const{anchor:e,anchorRef:t,scrollViewRef:n}=nh();return(0,b.useEffect)((()=>{const i=t.current,r=n.current;if(e&&i&&r){const{type:t,scrollImmediately:n=!0,initialBehavior:o="smooth"}=e;n&&r.scrollTo&&("bottom"===t?r.scrollTo({top:r.scrollHeight,behavior:o}):eh(r,i,o))}}),[e,t,n]),null===e?null:(0,v.jsx)(Wp,{ref:t,id:"anchor","data-testid":`anchor-${ih(e)}`})},oh=(0,b.forwardRef)(((e,t)=>{let{children:n,onWheel:i,isFinMessenger:r}=e,o=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,Qp);const{anchor:a,setAnchor:s,anchorRef:l,scrollViewRef:c,setCanScroll:d}=nh(),u=(0,b.useRef)(null),p=(0,b.useMemo)((()=>(0,Jp.n)((()=>{const e=c.current;e&&((e,t=40)=>e.scrollHeight-e.scrollTop-e.clientHeight<=t)(e)?s({type:"bottom",scrollImmediately:!1}):s(null)}),300,{leading:!0,trailing:!0})),[s,c]),h=(0,b.useMemo)((()=>(0,Zp.s)((()=>{const e=l.current,t=c.current;a&&e&&t&&("bottom"===a.type?null==t.scrollTo||t.scrollTo({top:t.scrollHeight,behavior:"smooth"}):eh(t,e,"smooth"));const n=c.current&&c.current.clientHeight<c.current.scrollHeight;d(!!n)}),100)),[a,l,c,d]);return Yp(u,h),Yp(c,h),(0,v.jsx)(Kp,Object.assign({},o,{onWheel:e=>{p(),i&&i(e)},onTouchMove:p,ref:(0,mc.A)(t,c),isFinMessenger:r,children:(0,v.jsxs)(Xp,{ref:u,children:[n,a&&"bottom"===a.type&&(0,v.jsx)(rh,{})]})}))})),ah={Root:({children:e})=>{const[t,n]=(0,b.useState)(null),[i,r]=(0,b.useState)(!1),o=(0,b.useRef)(null),a=(0,b.useRef)(null);return(0,v.jsx)(th.Provider,{value:{anchorRef:o,scrollViewRef:a,anchor:t,setAnchor:n,canScroll:i,setCanScroll:r},children:e})},Content:oh,Item:({id:e,children:t})=>{const{anchor:n}=nh();return(0,v.jsxs)(v.Fragment,{children:[n&&"item"===n.type&&n.id===e&&(0,v.jsx)(rh,{}),t]})}};const sh="53px",lh=k.i7`
  from {
    opacity: 0;
    height: ${sh};
  } to {
    opacity: 0;
    height: 0;
  }
`,ch=k.i7`
  0% {
    opacity: 0;
    transform: scale(0.6);
  }
  50% {
    opacity: 0;
    transform: scale(0.6);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
`,dh=(0,k.Ay)("div",{target:"e1fbt4ds5"})("position:relative;padding-left:0px;padding-bottom:24px;min-height:",sh,";&.intercom-conversation-part-enter-active{transition:transform 100ms;}&.intercom-conversation-part-exit-active{animation:",lh," 300ms 300ms ease-in;}"),uh=(0,k.Ay)("div",{target:"e1fbt4ds4"})("padding:0;background:",(0,k.w4)("containerNeutral"),";position:relative;transform-origin:bottom left;",dh.className,".intercom-conversation-part-enter &{animation:",ch," 300ms ease-in;}",dh.className,".intercom-conversation-part-exit-active &{animation:",ch," 300ms ease-in reverse;}top:10px;width:56px;height:32px;border-radius:16px;display:inline-flex;justify-content:center;align-items:center;gap:4px;"),ph=(0,k.Ay)("div",{target:"e1fbt4ds3"})({name:"1nzgo6k",styles:"width:56px;height:35px;display:flex;align-items:center;justify-content:center"}),hh=(0,k.Ay)("img",{target:"e1fbt4ds2"})({name:"19mhhmu",styles:"width:100%;height:35px;object-fit:contain;@media (prefers-reduced-motion: reduce){display:none;}"}),mh=(0,k.Ay)("div",{target:"e1fbt4ds1"})({name:"3t8lgr",styles:"display:none;align-items:center;justify-content:center;gap:4px;@media (prefers-reduced-motion: reduce){display:flex;}"}),gh=(0,k.Ay)("div",{target:"e1fbt4ds0"})("width:6px;height:6px;border-radius:3px;background-color:",(0,k.w4)("textMuted"),";opacity:0.7;"),xh=n.p+"images/typing-indicator-dots-light.5721bd84269f3292a306.webp",fh=n.p+"images/typing-indicator-dots-dark.b4911cf33eaefdefd295.webp",vh=({className:e})=>{const t=(0,di.A)(),n="dark"===t.themeMode?fh:xh;return(0,v.jsxs)(ph,{className:e,children:[(0,v.jsx)(hh,{src:n,draggable:!1,"aria-label":(0,Xe.Tl)("typing"),"data-theme":t.themeMode,"data-testid":"typing-indicator-animation"}),(0,v.jsxs)(mh,{"aria-label":(0,Xe.Tl)("typing"),"data-testid":"typing-indicator-static",children:[(0,v.jsx)(gh,{}),(0,v.jsx)(gh,{}),(0,v.jsx)(gh,{})]})]})},yh=(0,b.forwardRef)((function({admin:e},t){return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(dh,{"data-testid":"typing-admin",ref:t,style:{marginTop:e.isBot?"-12px":"0px"},children:(0,v.jsxs)(uh,{children:[(0,v.jsx)(vh,{}),(0,v.jsx)(cr,{children:(0,Xe.Tl)("typing")})]})})})}));var bh=n(49756);const wh=e=>(0,m.GV)((t=>(0,bh.A)(t,e)));var jh=n(14783);const kh=({conversation:e})=>{var t,n;const i=(0,b.useRef)(null);let r=wh(e.id||"LATEST");const o=e.parts.length?e.parts[e.parts.length-1]:null;!e.id&&null!=o&&o.clientId&&r&&(null==(t=r)?void 0:t.clientId)!==o.clientId&&(r=void 0);const a=Rc(Object.assign({},e,{lastTypingAdmin:r}));((e,t)=>{const[,n]=(0,b.useState)(0);(0,b.useEffect)((()=>{if(!e)return;const i=setInterval((()=>{n((e=>e+1))}),t);return()=>clearInterval(i)}),[e,t])})(!!r,null!=(n=r)&&n.isBot?800:1e3),(0,b.useEffect)((()=>{a&&r&&jh.f.onAdminTyping(e.id)}),[a,r,e.id]);const{state:s}=O()||{};return"exiting"===s?null:(0,v.jsx)(B.B1,{classNames:"intercom-conversation-part",timeout:3200,exit:!1,nodeRef:i,in:a,children:a&&r?(0,v.jsx)(yh,{ref:i,admin:r}):(0,v.jsx)(v.Fragment,{})})},Ah=(0,k.Ay)("div",{target:"e1pb27ix0"})("width:100%;height:1px;background-color:",(0,k.w4)("textError"),";margin:16px 0px;position:relative;text-align:center;&::before{content:'",(0,Xe.Tl)("new"),"';position:absolute;top:-5px;left:20%;transform:translateX(-50%);background:",(0,k.w4)("containerBaseNeutral"),";padding:0 8px;color:",(0,k.w4)("textError"),";font-size:12px;}"),Ch=()=>(0,v.jsx)(Ah,{"aria-label":"New messages divider"}),Sh=({part:e,parts:t,newMessagesLastReadAt:n,children:i})=>{const r=(0,b.useMemo)((()=>((e,t)=>{const n=(e=>e.findLastIndex((e=>{var t;return"user"===(null==(t=e.author)?void 0:t.type)})))(e);if(-1===n)return 0;const i=e.findIndex((e=>e.id===t.id));return i>n?i-n:0})(t,e)),[t,e]),o=!!(r>0&&n&&e.createdAt&&n<e.createdAt),[a]=(0,s.zh)((()=>({from:{opacity:0,transform:"translateY(20px)",height:0},to:{opacity:1,transform:"translateY(0)",height:"auto"},config:{duration:350,easing:s.le.easeOutCirc},immediate:!o})));return(0,v.jsx)(s.CS.div,{style:a,children:i})},Th=({part:e,transitionRef:t,children:n})=>{const i=(0,Lo.nr)()&&"attribute_collector"===e.partType,r=i?"dummy":"intercom-conversation-part",o=i?{enter:0,exit:0}:{enter:3e4,exit:600};return(0,v.jsx)(B.B1,{classNames:r,timeout:o,nodeRef:t,children:n})},_h=({part:e,parts:t,transitionRef:n,newMessagesLastReadAt:i,children:r})=>(0,is.MU)(e)?(0,v.jsx)(Sh,{part:e,parts:t,newMessagesLastReadAt:i,children:r}):(0,v.jsx)(Th,{part:e,transitionRef:n,children:r});var Eh;function Ih(){return Ih=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ih.apply(null,arguments)}const zh=e=>b.createElement("svg",Ih({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true"},e),Eh||(Eh=b.createElement("path",{fill:"#1A1A1A",d:"M3.472 8.3q.209-.06.418 0l1.614.43c.856.23 1.525.9 1.754 1.76l.428 1.61q.06.21 0 .42l-.597 2.25c-.03.13-.15.22-.29.22H5.605c-.2 0-.339-.19-.29-.38l.788-2.93c.05-.19-.19-.34-.339-.19l-3.407 3.42c-.05.06-.13.09-.21.09l-.03-.02c-.618 0-1.116-.5-1.116-1.12q0-.12.09-.21l3.407-3.42a.2.2 0 0 0-.188-.34c-.738.2-1.904.51-2.93.79a.3.3 0 0 1-.38-.29v-1.2c0-.14.1-.26.23-.29zm8.648 0q.21-.06.419 0l2.242.6c.13.04.219.16.219.29v1.2a.3.3 0 0 1-.379.29c-1.026-.28-2.191-.59-2.929-.79a.201.201 0 0 0-.19.34l3.409 3.42q.09.09.089.21c0 .62-.498 1.12-1.116 1.12l-.02.02a.27.27 0 0 1-.209-.09l-3.408-3.42c-.149-.15-.388 0-.338.19l.787 2.93c.05.19-.09.38-.289.38H9.211a.29.29 0 0 1-.289-.22l-.598-2.25a.76.76 0 0 1 0-.42l.429-1.61a2.48 2.48 0 0 1 1.753-1.76zM2.146 1.02c.08 0 .16.03.21.09l3.407 3.42c.15.15.389 0 .339-.19l-.787-2.93c-.05-.19.09-.38.289-.38H6.8c.14 0 .259.09.289.22l.597 2.25q.06.21 0 .42l-.428 1.61c-.23.86-.898 1.53-1.754 1.76l-1.614.43a.75.75 0 0 1-.418 0l-2.242-.6A.3.3 0 0 1 1 6.83v-1.2c0-.2.19-.34.379-.29 1.026.28 2.192.59 2.93.79a.2.2 0 0 0 .188-.34L1.12 2.36a.3.3 0 0 1-.09-.21c0-.62.499-1.12 1.116-1.12zm11.738 0c.617 0 1.116.5 1.116 1.12q0 .12-.09.21l-3.407 3.42c-.15.15-.01.39.19.34.737-.2 1.902-.51 2.928-.79a.3.3 0 0 1 .379.29v1.2c0 .13-.09.25-.219.29l-2.242.6a.75.75 0 0 1-.418 0l-1.615-.43a2.48 2.48 0 0 1-1.753-1.76l-.43-1.61a.75.75 0 0 1 0-.42l.599-2.25c.03-.13.15-.22.289-.22h1.196c.199 0 .338.19.289.38l-.787 2.93c-.05.19.189.34.338.19l3.408-3.42c.05-.06.13-.09.21-.09z"})));const Nh=(0,k.Ay)("div",{target:"e1soik1t3"})({name:"46whl4",styles:"display:flex;flex-direction:column;justify-content:center;align-items:center;max-width:330px;height:100%;margin:0 auto"}),Mh=(0,k.Ay)(zh,{target:"e1soik1t2"})("width:21px;height:21px;color:",(0,k.w4)("iconDefault"),";path{fill:",(0,k.w4)("iconDefault"),";}"),Rh=(0,k.Ay)("h2",{target:"e1soik1t1"})("margin-top:8px;font-size:14px;line-height:1.33;font-weight:400;text-align:center;color:",(0,k.w4)("textDefault"),";"),Bh=(0,k.Ay)("h3",{target:"e1soik1t0"})("margin-top:16px;font-size:12px;line-height:1.43;font-weight:400;text-align:center;color:",(0,k.w4)("textMuted"),";"),Ph=()=>(0,v.jsxs)(Nh,{"data-testid":"conversation-empty-state-for-preview-mode",children:[(0,v.jsx)(Mh,{}),(0,v.jsx)(Rh,{children:(0,Xe.Tl)("ask_fin_something_to_start")}),(0,v.jsx)(Bh,{children:(0,v.jsx)("p",{children:(0,Xe.Tl)("preview_customer_view_empty_state_subtext")})})]});var Lh=n(20169);const Oh=e=>`part-${Vc(e)}`,Dh=(e,t)=>{const{ticket:n}=t;return n&&"message"===e.partType&&$c(e)},Hh=(0,b.forwardRef)((({appName:e,conversation:t,isMobile:n,onReactionSelect:i,onRetry:r,onArticleCardClick:o,onImageClick:a,frameWindow:s,setPartRef:l,canBeScrolled:c,scrolledToBottom:d,part:u,nextPart:p,prevPart:h,index:m,parts:g,lastAdminOrBotPart:x},f)=>{if(Dh(u,t)&&m<2)return null;const y=Dc(u,h,p),b=((e,t,n)=>{if(!Dc(e,t,n))return Qt.L3.standalone;const i=!!t&&Dc(e,t,void 0),r=!!n&&Dc(e,void 0,n);return!i&&r?Qt.L3.top:i&&!r?Qt.L3.bottom:i&&r?Qt.L3.middle:Qt.L3.standalone})(u,h,p),w=Rc(t),j=Hc(u,p),{reactionsReply:k}=(0,_c.A)(g),A=void 0===p;return(0,v.jsx)(ErrorBoundary,{errorText:"Something went wrong loading this message",align:"center",style:{margin:"10px 0 20px"},children:(0,v.jsx)(ah.Item,{id:Vc(u),children:(0,v.jsx)(Dp,{ref:f,part:u,setPartRef:l,nextPart:p,appName:e,conversationId:t.id,reactionsReply:k,onReactionSelect:i,onRetry:r,hasAvatar:j,grouped:y,groupingPosition:b,isLastPart:A,partHasMetadata:Fc(u,g,t,w),isMobile:!!n,frameWindow:s,onArticleCardClick:o,onImageClick:a,conversationHasScrolled:c&&!d,"data-testid":"conversation",lastAdminOrBotPart:x})})})})),Fh=({part:e})=>(0,v.jsx)(Gp,{"data-testid":"conversation-part-date-divider",role:"status",tabIndex:-1,children:Nc(e.sentAt||e.createdAt)}),Vh=(0,o.Ng)(((e,t)=>{const n=(0,x.ed)(e),i=(0,Z.JA)(n,null==t?void 0:t.conversation),r=(0,Y.L9)(e,t.conversation.id);return{activeBot:i?(0,x.Lf)(e):null,animatingConversationPartId:r}}))((e=>{var t;const{conversation:n,activeBot:i,animatingConversationPartId:r,isFaded:o=!1,canBeScrolled:a,newMessagesLastReadAt:s,ensureIsScrollableToTopPart:l,clientAreaHeight:c}=e,{parts:d}=n,u=(0,m.GV)(x.iO),{showTypingIndicator:p,enabled:h}=(({conversation:e,delay:t=1500,disabled:n=!1})=>{const i=!n&&!e.id&&e.parts.length>0,[r,o]=(0,b.useState)(i),[a,s]=(0,b.useState)(e.parts.length);return(0,b.useEffect)((()=>{if(r){const e=setTimeout((()=>{o(!1)}),t);return()=>{clearTimeout(e)}}}),[r,t,i]),(0,b.useEffect)((()=>{e.parts.length>a&&(o(!1),s(e.parts.length))}),[e.parts.length,a]),{showTypingIndicator:r,enabled:i}})({conversation:n,disabled:u}),g=d.length>0&&(e=>"link"===e[0].messageType?!e.slice(1).every((t=>e[0].sentAt&&(0,En.ny)(t.createdAt,e[0].sentAt))):!1!==e[0].showCreatedAt&&!e.every((t=>(0,En.ny)(t.createdAt,e[0].createdAt))))(d)&&!Dh(d[0],n),f=(0,b.useRef)({}),y=(0,b.useMemo)((()=>((e,t)=>{let n=e.filter((e=>void 0!==e&&!Gc(e)));const i=n.findIndex((e=>void 0!==t&&Vc(e)===t));return-1!==i&&(n=n.filter(((e,t)=>{var n;return!(null!=(n=e.author)&&n.isAdmin&&t>i)}))),n})(d,r)),[d,r]),w=(0,b.useRef)(null),[j,k]=(0,b.useState)(0),A=null==(t=Ml())?void 0:t.streamingAnimation;(0,b.useEffect)((()=>{if(l&&("scroll:smooth:fade"===A||"scroll:smooth"===A||"scroll"===A)){const e=w.current,t=f.current[Oh(l)].current;if(e&&t){const n=e.getBoundingClientRect().bottom-t.getBoundingClientRect().bottom+t.getBoundingClientRect().height;k(c-n-20-12+e.getBoundingClientRect().height)}}}),[l,c,A]);const{keyboardNavigationProps:C,NavigableItem:S}=(()=>{const e=(0,b.useRef)({}),[t,n]=(0,b.useState)(null),i=(0,b.useCallback)((i=>{if(-1===["ArrowUp","ArrowDown","Home","End"].indexOf(i.key))return;const r=e.current,o=Object.keys(r);if(!o.length)return;let a=t?o.indexOf(t):-1;i.preventDefault(),-1===a&&("ArrowDown"===i.key||"Home"===i.key?a=0:"ArrowUp"!==i.key&&"End"!==i.key||(a=o.length-1));let s=a;switch(i.key){case"ArrowUp":s=Math.max(0,a-1);break;case"ArrowDown":s=Math.min(o.length-1,a+1);break;case"Home":s=0;break;case"End":s=o.length-1}if(s>=0&&s<o.length){const e=o[s],t=r[e];t&&(t.focus(),n(e))}}),[t]),r=(0,b.useCallback)((t=>n=>{if(n)e.current[t]=n;else{const n={};Object.keys(e.current).forEach((i=>{i!==t&&(n[i]=e.current[i])})),e.current=n}}),[]),o=(0,b.useCallback)((e=>({ref:r(e),onFocus:()=>n(e),tabIndex:-1})),[r]);return{keyboardNavigationProps:{onKeyDown:i},NavigableItem:(0,b.useCallback)((e=>{const{elementId:t,children:n,role:i,ariaRoledescription:r}=e,a=o(t);return(0,b.createElement)("div",Object.assign({},a,{role:i||void 0,"aria-roledescription":r||void 0}),n)}),[o])}})(),T=(0,_c.A)(d.filter((e=>{var t,n;return(null==(t=e.author)?void 0:t.isAdmin)||(null==(n=e.author)?void 0:n.isBot)})));return(0,v.jsxs)(Hp,Object.assign({style:{minHeight:j}},C,{"data-testid":"conversation-parts-wrapper",children:[(0,Lh.Z)().conversationEmptyStateEnabled&&!d.length&&(0,v.jsx)(Ph,{}),(0,v.jsxs)(Vp,{ref:w,shouldDisableScrollingAnimation:!a,isFaded:o,useUpdatedConversationPadding:!0,children:[g&&(0,v.jsx)(Fh,{part:d[0]}),p?(0,v.jsx)(yh,{admin:{isActive:!0,isBot:!0}}):(0,v.jsx)(qp,{shouldAnimate:h,children:y.map(((t,n)=>{const i=y[n-1],r=y[n+1],o=Oh(t),a=((e,t)=>e&&!(0,En.ny)(t.createdAt,e.sentAt||e.createdAt))(i,t),l=e.firstUnreadPartId&&Vc(t)===e.firstUnreadPartId;f.current[o]||=(0,b.createRef)();const c=f.current[o];return(0,v.jsx)(_h,{part:t,parts:y,newMessagesLastReadAt:s,transitionRef:c,children:(0,v.jsxs)(v.Fragment,{children:[!!l&&(0,v.jsx)(ah.Item,{id:"divider",children:(0,v.jsx)(Ch,{})}),a&&(0,v.jsx)(Fh,{part:t}),(0,v.jsx)(S,{elementId:o,role:"none",children:(0,v.jsx)(Hh,Object.assign({},e,{ref:c,part:t,nextPart:r,prevPart:i,index:n,parts:y,lastAdminOrBotPart:T}))})]})},o)}))}),(0,v.jsx)(kh,{conversation:n,activeBot:i})]})]}))}));var Gh=n(51165);const $h=(0,k.Ay)("div",{target:"e17wp0pa1"})("display:grid;color:",(0,k.w4)("textMuted"),";padding:20px;gap:4px;font-size:13px;line-height:15px;text-align:center;"),qh=(0,k.Ay)("div",{target:"e17wp0pa0"})({name:"1u4pyxi",styles:"text-align:center;display:flex;align-items:center;justify-content:center;gap:6px"}),Uh=(e,t,n)=>{if(n)return e.darkSquare128||e.square128;return(null==t?void 0:t.type)===Qt.Bn.logo?e.imageUrl:e.square128},Wh=(e,t,n,i,r)=>({initials:t.initials,label:t.label,shape:t.shape,imageUrl:Uh(t,n,i),showStatus:e,isInactive:r}),Kh=({avatarSize:e,avatarGroup:t,cutoutSize:n=0,displayActiveIndicator:i=!1,facePileStyle:r="default",isInactive:o=!1})=>{const a="dark"===(0,di.A)().themeMode;if(null==t||!t.avatars)return null;if(t.type===Qt.Bn.facepile&&t.avatars.length>0){const[n,o,s]=t.avatars;return(0,v.jsx)(en,{size:e,facePileStyle:r,primaryAvatar:(0,v.jsx)(Ne.e,Object.assign({},Wh(i,n,t,a))),secondAvatar:o&&(0,v.jsx)(Ne.e,Object.assign({},Wh(i,o,t,a))),thirdAvatar:s&&(0,v.jsx)(Ne.e,Object.assign({},Wh(i,s,t,a)))})}return(0,v.jsx)(Pe,{useCutout:!0,cutoutSize:n,avatarPixelsToShow:e-4,avatarSize:e,marginRight:"0",children:t.avatars.map(((n,r)=>(0,v.jsx)(Le,{children:(0,v.jsx)(Ne.e,Object.assign({solidBackground:t.avatars.length>1},Wh(i,n,t,a,o),{size:e}))},r)))})},Xh=({footerNotice:e,setFooterNoticeHeight:t=()=>{}})=>{const n=(0,b.useRef)(null),i=(0,b.useCallback)((()=>{n.current&&t(n.current.offsetHeight)}),[n,t]);return(0,Ti.A)(n.current,i,0),(0,b.useEffect)((()=>{i()}),[i]),(0,v.jsxs)($h,{ref:n,children:[(0,v.jsxs)(qh,{children:[(0,v.jsx)(Kh,{avatarSize:16,cutoutSize:1,avatarGroup:e.avatarGroup,displayActiveIndicator:!1,facePileStyle:"default"}),e.title]}),e.subtitle&&(0,v.jsx)("p",{children:e.subtitle})]})},Yh=(0,k.Ay)("div",{target:"eidngzh0"})("z-index:3;display:flex;justify-content:center;pointer-events:none;",(({bottomSpace:e})=>e&&(0,k.AH)("position:absolute;left:0;right:0;bottom:",e,"px;")),"&>*{pointer-events:auto;}&.enter{transform:translateY(55px) scale(0.8);}&.enter-active{transform:translateY(0) scale(1);transition:transform 150ms ease-in-out;}&.exit{transform:translateY(0) scale(1);}&.exit-active{transform:translateY(55px) scale(0.8);transition:transform 150ms ease-in-out;}"),Zh=(0,b.createContext)({newFooterHeight:0,setNewFooterHeight:()=>{},footerRef:{current:null}});function Jh({children:e}){const[t,n]=(0,b.useState)(0),i=(0,b.useRef)(null),r=(0,b.useMemo)((()=>({newFooterHeight:t,setNewFooterHeight:n,footerRef:i})),[t]);return(0,v.jsx)(Zh.Provider,{value:r,children:e})}const Qh=({isComposerEnabled:e,isConversationEnded:t,show:n=!0,children:i,conversationButtonShowing:r})=>{const o=(0,b.useRef)(null),{newFooterHeight:a}=(0,b.useContext)(Zh);let s;if(t){s=(r?106:40)+30}else s=e?a+12:30;return(0,v.jsx)(B.B1,{in:n,classNames:"",nodeRef:o,timeout:150,unmountOnExit:!0,children:(0,v.jsx)(Yh,{ref:o,bottomSpace:s,children:i})})};const em=(0,k.Ay)("span",{target:"eu4j8zh3"})(),tm=(0,k.Ay)("div",{target:"eu4j8zh2"})("align-items:flex-end;display:block;flex-shrink:0;z-index:1;",(({isFadingOut:e})=>e&&(0,k.AH)("@keyframes non-linear-fade-out{0%{opacity:1;}50%{opacity:1;}100%{opacity:0;}}&.exit{opacity:1;}&.exit-active{animation:non-linear-fade-out ",2*C.time,"ms;opacity:0;}&.exit-done{opacity:0;}"))," .powered-by-enter{opacity:0;}.powered-by-enter-active{opacity:1;transition:opacity ",C.time,"ms ease-out;}.powered-by-exit{opacity:1;}",(({showOnSpaces:e,removeVerticalMargin:t})=>(0,k.AH)("margin:",e||t?"0":"11","px auto;"))," ",(({showOnSpaces:e,isFadingOut:t,theme:n})=>e&&!t&&(0,k.AH)("height:",32,";background:",n.containerBaseNeutral,";&:hover{background:",n.containerNeutral,";}"))," ",(({underConstruction:e})=>e&&(0,k.AH)("background-image:url(","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAGCAIAAAAOtlpdAAAANElEQVQoz2P4etGEEnRxi0lHFdXQ8slQYxkGoZsochbt3ES+s2jqJjKdRWs3keMsOrgJiAB4ItlirqqJGgAAAABJRU5ErkJggg==",");background-repeat:repeat-x;background-size:25px 3px;margin-left:-16px;margin-right:-16px;")),";");var nm={name:"wz1gv9",styles:"text-align:center;width:100%"};const im=(0,k.Ay)("a",{target:"eu4j8zh1"})("display:inline-block;",(({showOnSpaces:e})=>(0,k.AH)("font-size:12px;border-radius:16px;padding:",e?"8":"2","px ",e?"0":"16","px;"))," transition:all 80ms;",(({foregroundColor:e})=>(0,k.AH)("color:",e,"!important;")),";",(({showOnSpaces:e,theme:t})=>!e&&(0,k.AH)("&:hover{color:",t.textDefault,"!important;}"))," ",(({showOnSpaces:e})=>e&&nm),";"),rm=(0,k.Ay)("div",{target:"eu4j8zh0"})();var om={name:"1rd2qyq",styles:"padding-bottom:8px;transition:translate 300ms,padding-bottom 0.3s ease-out"},am={name:"pbbd9q",styles:"padding-bottom:0px"};const sm=(0,k.Ay)("div",{target:"eml9w7g0"})("border-radius:0 0 6px 6px;display:flex;flex-direction:column;gap:",(({theme:e})=>e.userIsFinMessenger?"0px":"8px"),";align-items:center;padding-bottom:8px;margin-top:-",20,"px;z-index:3;transition:translate 300ms;",(({isNewPrivacyPolicyLayoutVisible:e})=>e&&am),(({theme:e})=>e.userIsFinMessenger&&om)," ",(({theme:e,isIntercomLinkEnabled:t})=>e.isMobileBrowser&&t&&(0,k.AH)("&:focus-within:not(:has(button:focus-within)){translate:0 ",26,"px;}")),";");var lm={name:"w3b8au",styles:"margin-left:16px;margin-right:16px;padding-top:12px;padding-bottom:12px"},cm={name:"6dhm9o",styles:"visibility:hidden"};const dm=(0,k.Ay)("div",{target:"eqx2a4a2"})("display:flex;flex-direction:column;flex:1;overflow:hidden;-webkit-overflow-scrolling:touch;",(({shouldHideConversation:e})=>e&&cm)," .intercom-conversation-body-header{position:relative;display:flex;flex-direction:column;flex-grow:0;overflow:hidden;}.intercom-conversation-body-main-group{position:relative;display:flex;flex-direction:column;flex-grow:1;overflow:hidden;padding-bottom:",20,"px;",(({isFinMessenger:e})=>e&&lm),";}"),um=(0,k.Ay)("div",{target:"eqx2a4a1"})({name:"9mli0n",styles:"position:sticky;z-index:3;top:0;padding:14px;padding-bottom:0;text-align:center"}),pm=(0,k.Ay)("div",{target:"eqx2a4a0"})({name:"1yjx7km",styles:"padding:20px"});const hm=(0,k.Ay)("div",{target:"e1nw6qnr1"})({name:"zigog8",styles:"display:flex;flex-direction:column;align-items:center"}),mm=(0,k.Ay)(vr.A,{target:"e1nw6qnr0"})("transition:transform 150ms;&:hover{transform:scale(1.1);background:",(0,k.w4)("containerBaseNeutral"),";}"),gm=(0,k.Ay)("span",{target:"eobnxxl2"})("background:",(0,k.w4)("notificationFill"),";display:flex;justify-content:center;font-size:11px;color:",(0,k.w4)("textOnInverse"),";font-weight:700;border-radius:9px;width:fit-content;min-width:16px;height:16px;box-sizing:border-box;line-height:16px;padding:0 4px;"),xm=(0,k.Ay)("span",{target:"eobnxxl1"})("background:",(0,k.w4)("notificationFill"),";display:block;width:8px;height:8px;border-radius:50%;"),fm=(0,k.Ay)("span",{target:"eobnxxl0"})("background:",(0,k.w4)("notificationFill"),";display:flex;justify-content:center;font-size:11px;color:",(0,k.w4)("textOnInverse"),";font-weight:700;border-radius:9px;width:fit-content;min-width:16px;height:16px;box-sizing:border-box;line-height:16px;padding:0 4px;position:absolute;top:-4px;right:-4px;"),vm=({onClick:e,notificationCount:t})=>(0,v.jsx)(hm,{children:(0,v.jsx)(mm,{variant:"primary_light",iconType:"ChevronDown",borderRadius:24,padding:"8px",onClick:e,className:"intercom-conversation-body-bottom-button","aria-label":"Scroll to bottom",children:t>0&&(0,v.jsx)(fm,{"aria-label":"Scroll badge",children:t>99?"99+":t})})}),ym=["name"];function bm(e){let{name:t}=e,n=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,ym);return(0,v.jsx)(wm,{children:(0,v.jsx)(jm,Object.assign({},n,{children:(0,v.jsxs)(km,{children:[(0,v.jsx)(Am,{children:(0,v.jsx)(bp.A,{})}),(0,v.jsx)(Cm,{children:t})]})}))})}const wm=(0,k.Ay)("div",{target:"efz1axl4"})({name:"zl1inp",styles:"display:flex;justify-content:center"}),jm=(0,k.Ay)(a.Link,{target:"efz1axl3"})("display:flex;align-items:center;padding:0 16px;height:40px;width:fit-content;box-shadow:",(0,k.w4)("shadowXSmall"),";min-width:86px;max-width:326px;justify-content:center;line-height:16px;font-size:13px;font-family:",(0,k.w4)("fontSansSerif"),";font-weight:600;border-radius:20px;background-color:",(0,k.w4)("containerBaseNeutral"),";transition:all 120ms;cursor:pointer;border:1px solid ",(0,k.w4)("lightBorder"),";&:link{background-color:",(0,k.w4)("containerBaseNeutral"),";}&:hover{box-shadow:",(0,k.w4)("shadowSmall"),";color:inherit;}&:active{border-color:",(0,k.w4)("buttonBackgroundColorActive"),";box-shadow:",(0,k.w4)("shadowSmall"),";transform:translateY(2px);}"),km=(0,k.Ay)("div",{target:"efz1axl2"})("display:flex;align-items:center;color:",(0,k.w4)("linkColor"),";"),Am=(0,k.Ay)("span",{target:"efz1axl1"})({name:"nkt64x",styles:"margin-right:10px"}),Cm=(0,k.Ay)("span",{target:"efz1axl0"})({name:"1g7g7c1",styles:"max-width:300px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis"});var Sm=n(79630),Tm=n(56341);var _m={name:"1azpx8r",styles:"margin-bottom:20px"};const Em=(0,k.Ay)("ul",{target:"e1753f488"})("list-style-type:none;display:flex;gap:3px;margin-top:'20px';",(({inline:e})=>!e&&_m),";"),Im=(0,k.Ay)("div",{target:"e1753f487"})({name:"1d3w5wq",styles:"width:100%"});var zm={name:"ihsmyf",styles:"border-top-right-radius:50px;border-bottom-right-radius:50px"},Nm={name:"1ewu4nf",styles:"border-top-left-radius:50px;border-bottom-left-radius:50px"};const Mm=(0,k.Ay)("div",{target:"e1753f486"})("height:4px;width:100%;background-color:",(({theme:e})=>e.containerEmphasisNeutral),";margin-bottom:8px;",(({colored:e,color:t,theme:n})=>e&&(0,k.AH)("background-color:",n[t],";"))," ",(({roundedSide:e})=>"left"===e?Nm:"right"===e?zm:null),";"),Rm=(0,k.Ay)("li",{target:"e1753f485"})("width:auto;flex-basis:0;flex-grow:1;",(({isCurrent:e})=>e&&(0,k.AH)("font-weight:",e?"600":"400",";"))," font-size:14px;line-height:21px;text-align:center;",(({diminished:e,theme:t})=>e&&(0,k.AH)("color:",t.iconMuted,";")),";");var Bm={name:"pp0jbi",styles:"font-size:16px;line-height:24px;font-weight:600"};const Pm=(0,k.Ay)(Tm._,{target:"e1753f484"})("text-align:center;margin-bottom:15px;font-weight:400;color:",(0,k.w4)("textDefault"),";",(({big:e})=>e&&Bm),";"),Lm=(0,k.Ay)("div",{target:"e1753f483"})({name:"10q28bl",styles:"width:auto;margin-bottom:10px"}),Om=(0,k.Ay)("div",{target:"e1753f482"})({name:"oxkz62",styles:"display:flex;justify-content:center;padding:0"}),Dm=(0,k.Ay)("div",{target:"e1753f481"})("text-align:center;font-size:14px;line-height:21px;font-weight:600;margin-bottom:4px;color:",(({color:e})=>(0,k.w4)(e)),";"),Hm=(0,k.Ay)("div",{target:"e1753f480"})("font-size:14px;margin-bottom:18px;display:flex;justify-content:center;color:",(0,k.w4)("textDefault"),";svg{margin-right:8px;}");var Fm,Vm,Gm,$m;function qm(){return qm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},qm.apply(null,arguments)}const Um=e=>b.createElement("svg",qm({xmlns:"http://www.w3.org/2000/svg",width:12,height:13,fill:"none",viewBox:"0 0 12 13","aria-hidden":"true"},e),Fm||(Fm=b.createElement("path",{fill:"currentColor",d:"M6 4.333c.553 0 1.096.155 1.568.447.471.293.854.711 1.105 1.21a3.06 3.06 0 0 1-.246 3.16L6 7.367zm5.186-1.575.401.508c.097.072.069.23-.055.318l-1.529 1.122c-.07.097-.23.068-.316-.056l-.401-.508c-.097-.072-.069-.23.055-.318l1.581-1.113c.062-.044.22-.015.264.047"})),Vm||(Vm=b.createElement("rect",{width:4.286,height:1.3,x:3.857,fill:"currentColor",rx:.5})),Gm||(Gm=b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M6 11.7c2.367 0 4.286-1.94 4.286-4.333S8.366 3.033 6 3.033c-2.367 0-4.286 1.94-4.286 4.334S3.633 11.7 6 11.7M6 13c3.077 0 5.571-2.522 5.571-5.633S9.077 1.733 6 1.733.428 4.255.428 7.367C.428 10.477 2.923 13 6 13",clipRule:"evenodd"})),$m||($m=b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M6.429.867V2.6h-.857V.867z",clipRule:"evenodd"}))),Wm={[Qt.S5.submitted]:"inProgressFill",[Qt.S5.inProgress]:"inProgressFill",[Qt.S5.waiting]:"waitingOnYouFill",[Qt.S5.resolved]:"onlineFill"};function Km({history:e,assignee:t,estimatedResolution:n,inline:i=!1}){const r=t=>0===t?"left":t===e.length-1?"right":null,o=e.find((e=>e.isCurrent)),a=o?e.indexOf(o):0;return(0,v.jsxs)(Im,{children:[i?null:(0,v.jsx)(Om,{children:(0,v.jsx)(Lm,{children:t?(0,v.jsx)(Oe.l,{size:64,admin:t}):(0,v.jsx)(Fe,{solidBackground:!0,avatarSize:50,maxAdmins:3,avatarPixelsToShow:20})})}),(0,v.jsx)(Dm,{color:Wm[null==o?void 0:o.type],"data-testid":"status-info",children:`${null==o?void 0:o.title} ${(null==o?void 0:o.relativeTime)&&"• "+(null==o?void 0:o.relativeTime)}`}),i&&n?null:(0,v.jsx)(Pm,{"data-testid":"ticket-detail",children:null==o?void 0:o.detail}),n?(0,v.jsxs)(Hm,{children:[(0,v.jsx)(Um,{})," ",n]}):null,(0,v.jsx)(Em,{inline:i,children:e.map(((e,t)=>{const n=t<=a;return(0,v.jsx)(Rm,{"data-testid":e.isCurrent?"current-status":`${e.type}-status`,diminished:a!==t,isCurrent:!!e.isCurrent,children:(0,v.jsx)(Mm,{colored:n,color:Wm[null==o?void 0:o.type],roundedSide:r(t)})},e.type)}))})]})}const Xm=(0,k.Ay)(Tm._,{target:"e1yk4gt43"})("text-align:center;color:",(0,k.w4)("textMuted"),";margin-bottom:'12px';"),Ym=(0,k.Ay)("div",{target:"e1yk4gt42"})("border:1px solid ",(0,k.w4)("borderEmphasisNeutral"),";border-radius:10px;padding:16px 13px 0px;box-shadow:",(0,k.w4)("shadowMedium"),";border-color:",(0,k.w4)("borderEmphasisNeutral"),";"),Zm=(0,k.Ay)("div",{target:"e1yk4gt41"})("font-size:16px;display:flex;justify-content:center;align-items:center;margin-bottom:4px;line-height:24px;font-weight:600;color:",(0,k.w4)("textDefault"),";svg{margin-right:8px;}"),Jm=(0,k.Ay)(a.Link,{target:"e1yk4gt40"})("margin-top:16px;display:flex;padding:16px 0;border-top:1px solid ",(0,k.w4)("borderEmphasisNeutral"),";width:100%;text-align:center;font-size:14px;font-weight:400;align-items:center;justify-content:center;color:",(0,k.w4)("linkColor"),"!important;svg{margin-right:9px;}");function Qm({ticket:e}){return(0,v.jsxs)("div",{children:[(0,v.jsx)(Xm,{children:e.inlineStatusHeaderText||(0,Xe.Tl)("your_ticket")}),(0,v.jsxs)(Ym,{children:[(0,v.jsx)(Zm,{children:e.name}),(0,v.jsx)(Km,{history:e.history,currentStatus:e.status,estimatedResolution:e.sla,inline:!0}),(0,v.jsxs)(Jm,{to:(0,fp.sq)(e.id),children:[(0,v.jsx)(bp.A,{}),(0,Xe.Tl)("tickets_view_ticket")]})]})]})}const eg=(0,k.Ay)("div",{target:"e13fyoou2"})("margin:",(({theme:e})=>e.conversationHorizontalPadding),"px ",(({theme:e})=>e.globalHorizontalPadding),"px 0px;display:flex;flex-flow:row nowrap;justify-content:flex-start;align-items:flex-start;max-width:100%;position:relative;border-radius:20px;border:1px solid ",(0,k.w4)("alphaBlack10"),";color:",(0,k.w4)("textDefault"),";background-color:",(0,k.w4)("containerBaseNeutral"),";padding:12px 16px;"),tg=(0,k.Ay)("span",{target:"e13fyoou1"})("font-size:13px;line-height:19px;font-weight:400;white-space:pre-wrap;color:",(0,k.w4)("textMuted"),";word-wrap:break-word;a,a:visited,a:hover,a:active{color:inherit;text-decoration:underline;}"),ng=(0,k.Ay)("div",{target:"e13fyoou0"})({name:"3motwv",styles:"margin-right:8px;margin-top:2px"}),ig=({textContent:e})=>(0,v.jsxs)(eg,{role:"status","aria-live":"polite","aria-label":"Special Notice",children:[(0,v.jsx)(ng,{"aria-hidden":"true",children:(0,v.jsx)(Te.Ay,{type:"Info",color:"linkColor"})}),(0,v.jsx)(tg,{"data-testid":"special-notice-text",children:(0,v.jsx)($t.y,{text:e,tagName:"div",className:"intercom-block-paragraph",align:"left",noMargin:!0})})]}),rg=(e,{threshold:t=50,debounceTime:n=500})=>{const[i,r]=(0,b.useState)(!0);return(0,b.useEffect)((()=>{const i=e.current,o=()=>{if(!i)return;const{scrollTop:e,scrollHeight:n,clientHeight:o}=i;r(e+o>=n-t)},a=(0,Zp.s)(o,n),s=(0,Jp.n)(o,100,{leading:!0,trailing:!0});return i&&(i.addEventListener("scroll",a),i.addEventListener("wheel",s),a()),()=>{i&&(i.removeEventListener("scroll",a),i.removeEventListener("wheel",s))}}),[e,t,n]),i};var og=n(46531);const ag=(0,k.Ay)("div",{target:"e7p3sj51"})({name:"1jocp2f",styles:"display:flex;flex-direction:column;align-items:center;padding:0px 20px"}),sg=(0,k.Ay)("div",{target:"e7p3sj50"})("cursor:pointer;color:",(0,k.w4)("textMuted"),";background-color:",(0,k.w4)("containerBaseNeutral"),";border-radius:50vh;box-shadow:",(0,k.w4)("shadowSmall"),";border:1px solid ",(0,k.w4)("borderNeutral"),";padding:10px;gap:6px;font-size:13px;line-height:19.5px;text-align:center;display:flex;align-items:center;justify-content:center;transition:transform ",150,"ms;&:hover{transform:scale(1.02);}"),lg=({onClick:e,avatarGroup:t,title:n})=>(0,v.jsx)(ag,{"data-testid":"FloatingNotice",children:(0,v.jsxs)(sg,{onClick:e,children:[(0,v.jsx)(Kh,{avatarSize:16,cutoutSize:1,avatarGroup:t,displayActiveIndicator:!1,facePileStyle:"default"}),n]})}),cg=(0,k.Ay)("p",{target:"ejd6b4u0"})("display:flex;flex-direction:column;align-items:center;gap:6px;font-size:13px;text-wrap:balance;color:",(0,k.w4)("textMuted"),";padding:16px 20px 0px;text-align:center;line-height:21px;"),dg=({text:e})=>(0,v.jsx)(cg,{children:e}),ug=()=>{const e=(0,a.useLocation)(),t=new URLSearchParams(e.search).get("visibility");return t===Qt.cy.collapsed?Qt.cy.collapsed:t===Qt.cy.shrinked?Qt.cy.shrinked:Qt.cy.visible},pg=()=>{const e=ug();return e===Qt.cy.collapsed||e===Qt.cy.shrinked},hg=({conversation:e,conversationSuggestions:t,onSuggestionClicked:n,setComposerSuggestionsDismissed:i,onRetry:r,onReactionSelect:o,onArticleCardClick:a,conversationButtonShowing:s})=>{var l,c;const d=(0,Wr.x)(),{isFetching:u,isUpdating:p,parts:h,ticket:g,ticketId:f,readAt:y}=e,{name:j,isIntercomLinkEnabled:k}=(0,m.GV)(x.rp),A=(0,m.GV)(x.O9),C=u&&!p||A,S=!!(0,m.GV)((t=>(0,Y.L9)(t,null==e?void 0:e.id))),T=e.teamIntro,_=e.specialNotice,E=(0,b.useMemo)((()=>(e=>e.filter((e=>void 0!==e&&!Gc(e)&&!$c(e))))(h).length),[h]),I=0===E,z={conversation:e,setComposerSuggestionsDismissed:i,onClick:n,onHeightChange:()=>{}},N=e.footerNotice,M=(k||t||N)&&!S,R=!e.id,B=(0,b.useMemo)((()=>I&&e.ticket?Object.assign({},e,{parts:e.parts.filter((e=>"ticket_status_update"!==e.partType))}):e),[e,I]),{anchor:P,setAnchor:L,canScroll:O}=nh(),[D,H]=(0,b.useState)(y||void 0),F=(0,b.useMemo)((()=>h.filter((t=>{if("ticket_status_update"===t.partType){var n;const i=(0,Ru.kU)(null==(n=e.ticket)?void 0:n.readAt);return D&&t.createdAt>D&&(!i||t.createdAt>i)}var i,r;return D&&D<t.createdAt&&(null==(i=t.author)?void 0:i.type)&&"user"!==(null==(r=t.author)?void 0:r.type)&&"quick_reply"!==t.partType&&"merged_primary_conversation"!==t.partType}))),[h,null==(l=e.ticket)?void 0:l.readAt,D]),V=()=>{L(F[0]?{type:"item",id:"divider"}:{type:"bottom"}),H(new Date)},G=h.findLast((e=>void 0!==e.tokenSequenceIndex)),[$,q]=(0,b.useState)(!1);(0,b.useLayoutEffect)((()=>{C||P||$||(R||(F[0]?L({type:"item",id:"divider",initialBehavior:"instant"}):L({type:"bottom",initialBehavior:"instant"})),$||q(!0))}),[C,$,q,F,P,L,R]);const U=(0,Z.zN)(e)&&!t.composerDisabled,W=(0,b.useRef)(null),K=rg(W,{debounceTime:200}),X=!K&&"bottom"!==(null==P?void 0:P.type),[J,Q]=(0,b.useState)(0),ee=(({scrollViewRef:e,isComposerEnabled:t,footerNoticeHeight:n,didInitialScroll:i,anchor:r})=>{let o=n;t&&(o-=20);const a=rg(e,{threshold:o,debounceTime:50});return i&&!a&&"bottom"!==(null==r?void 0:r.type)})({scrollViewRef:W,isComposerEnabled:U,footerNoticeHeight:J,didInitialScroll:$,anchor:P}),[te,ne]=(0,b.useState)(null);(0,b.useEffect)((()=>{if(G&&0===G.tokenSequenceIndex){if(K&&("item"!==(null==P?void 0:P.type)||"item"===(null==P?void 0:P.type)&&(null==P?void 0:P.id)!==G.id&&(null==P?void 0:P.id)!==G.clientId)){const e=h.findLast((e=>{var t;return"user"===(null==(t=e.author)?void 0:t.type)}));ne(e||G),L({type:"item",id:Vc(G)})}}}),[G,P,L,K,h]),(e=>{const t=(0,m.jL)(),n=(0,b.useCallback)((e=>{t((0,sn.QL)(Lt.Ay,e,{requestOrigin:"Conversation Body Fetch for Prevent Replies"}))}),[t]),{preventEndUserReplies:i,preventEndUserRepliesTimestamp:r,id:o}=e;(0,b.useEffect)((()=>{let e=null;if(i){let t=-1;r&&!isNaN(r)&&(t=Math.min(1e3*r+500-Date.now(),2147483647)),t>0&&(e=setTimeout((()=>{n(o)}),t))}return()=>{e&&clearTimeout(e)}}),[o,i,r,n])})(e);(0,b.useEffect)((()=>(X&&H(new Date),()=>{})),[X]),(0,b.useEffect)((()=>{var e;const t=h[h.length-1];t&&(null==(e=t.author)?void 0:e.isSelf)&&!!D&&t.createdAt>D&&!(0,Lo.rr)()&&L({type:"bottom"})}),[h,L,D]);const[ie,re]=(0,b.useState)(h.length),[oe,ae]=(0,b.useState)(F[0]?Vc(F[0]):null);(0,b.useEffect)((()=>{const e=F[0]?Vc(F[0]):null;h.length>ie&&(ae(K?null:e),re(h.length))}),[K,ie,h.length,F]);const{isMobileLandscape:se}=(()=>{const[e,t]=(0,b.useState)({isMobileSize:(0,yr.IS)(),isMobileLandscape:(0,yr.rx)()}),n=(0,b.useCallback)((()=>{t({isMobileSize:(0,yr.IS)(),isMobileLandscape:(0,yr.rx)()})}),[t]);return(0,b.useLayoutEffect)((()=>(window.parent.addEventListener("resize",n),()=>{window.parent.removeEventListener("resize",n)})),[n]),e})(),le=N&&!se,ce=Cr(),de=pg(),ue=ug();return(0,b.useEffect)((()=>{ce&&ue===Qt.cy.visible&&R&&(H(new Date),L({type:"bottom"}))}),[ue,ce,R,L]),(0,v.jsxs)(dm,{isFinMessenger:ce,shouldHideConversation:de,className:"intercom-conversation-body",children:[!(ce&&0===E)&&(0,v.jsx)(og.p,{isFinMessenger:ce,"data-testid":"scrolling-gray-border"}),(0,v.jsxs)(ah.Content,{ref:W,onWheel:e=>{(0,Sm.Xr)(e)},role:"log",isFinMessenger:ce,children:[!C&&!I&&g&&f&&(0,v.jsx)(um,{children:(0,v.jsx)(bm,{to:(0,fp.sq)(f),name:g.name})}),(0,v.jsx)("div",{className:"intercom-conversation-body-header",children:!C&&!(0,Lh.Z)().headerDisabled&&(0,v.jsxs)(v.Fragment,{children:[T&&!de&&(0,v.jsx)(dg,{text:T}),!ce&&_&&(0,v.jsx)(ig,{textContent:_}),I&&g&&(0,v.jsx)(pm,{children:(0,v.jsx)(Qm,{ticket:g})})]})}),(0,v.jsx)("div",{className:"intercom-conversation-body-main-group",role:"status",children:C?(0,v.jsx)(w.A,{}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(ErrorBoundary,{errorText:"Something went wrong loading the conversation",align:"center",style:{marginTop:"20px",flex:1},children:(0,v.jsx)(Vh,{appName:j,conversation:B,scrolledToBottom:K,canBeScrolled:O,frameWindow:d,onRetry:r,onReactionSelect:o,onArticleCardClick:a,firstUnreadPartId:oe,newMessagesLastReadAt:D,ensureIsScrollableToTopPart:te,clientAreaHeight:(null==(c=W.current)?void 0:c.clientHeight)??596})}),M&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(ErrorBoundary,{errorText:"Something went wrong loading the suggestions",align:"center",style:{marginBottom:"10px"},children:t&&(0,v.jsx)(Gh.A,Object.assign({},z,{conversationSuggestions:t}))}),N&&(0,v.jsx)(Xh,{footerNotice:N,setFooterNoticeHeight:Q})]})]})})]}),(0,v.jsx)(Qh,{show:!de&&(le?ee:X),isComposerEnabled:U,isConversationEnded:e.preventEndUserReplies,conversationButtonShowing:s,children:le?(0,v.jsx)(lg,{onClick:()=>V(),avatarGroup:N.avatarGroup,title:N.title}):(0,v.jsx)(vm,{onClick:()=>V(),notificationCount:F.length})})]})};var mg=n(36215),gg=n(28381),xg=n(18873),fg=n(63156),vg=n(86655),yg=n(5209);const bg=({color:e})=>{const t=(0,di.A)(),n=e||t.alphaBlack100;return(0,v.jsxs)(yg.C,{focusable:"false","aria-hidden":"true",viewBox:"0 0 585 585",children:[(0,v.jsx)("mask",{id:"mask0_3355_332",maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"585",height:"585",children:(0,v.jsx)("path",{d:"M585 0H0V585H585V0Z",fill:t.textWhite})}),(0,v.jsxs)("g",{mask:"url(#mask0_3355_332)",children:[(0,v.jsx)("path",{d:"M538.092 0.0234302C534.741 0.0234302 531.507 1.35899 529.143 3.72552L386.165 146.701C380.074 152.793 369.813 146.889 372.06 138.547L404.911 15.933C407.066 7.89622 400.999 0 392.681 0H342.422C336.704 0 331.689 3.84268 330.188 9.37236L304.977 103.424C303.456 109.141 303.456 115.163 304.977 120.88L323.066 188.385C332.696 224.281 360.72 252.328 396.617 261.934L464.122 280.023C469.84 281.546 475.859 281.546 481.577 280.023L575.629 254.811C581.159 253.335 585.003 248.321 585.003 242.58V192.298C585.003 184.003 577.151 177.958 569.138 180.114C526.049 191.665 477.127 204.763 446.43 212.987C438.112 215.213 432.209 204.974 438.301 198.882L581.299 55.8828C583.667 53.5162 585.003 50.2828 585.003 46.9322C585.048 21.0644 564.029 0.0234302 538.092 0.0234302Z",fill:n}),(0,v.jsx)("path",{d:"M538.092 584.748C534.741 584.748 531.507 583.412 529.143 581.045L386.165 438.07C380.074 431.979 369.813 437.882 372.06 446.224L404.911 568.838C407.066 576.876 400.999 584.769 392.681 584.769H342.422C336.704 584.769 331.689 580.928 330.188 575.399L304.977 481.347C303.456 475.629 303.456 469.606 304.977 463.891L323.066 396.387C332.696 360.49 360.72 332.442 396.617 322.835L464.122 304.746C469.84 303.225 475.859 303.225 481.577 304.746L575.629 329.958C581.159 331.435 585.003 336.45 585.003 342.192V392.474C585.003 400.768 577.151 406.812 569.138 404.657C526.049 393.105 477.127 380.007 446.43 371.785C438.112 369.558 432.209 379.798 438.301 385.89L581.299 528.888C583.667 531.256 585.003 534.487 585.003 537.837C585.003 563.775 563.961 584.817 538.023 584.817L538.092 584.748Z",fill:n}),(0,v.jsx)("path",{d:"M46.9791 0C50.3296 0 53.563 1.33556 55.9297 3.70209L198.905 146.678C204.997 152.77 215.26 146.865 213.01 138.524L180.16 15.9096C178.005 7.89623 184.073 0 192.391 0H242.651C248.368 0 253.382 3.84266 254.882 9.37237L280.093 103.424C281.616 109.141 281.616 115.163 280.093 120.88L262.004 188.385C252.374 224.281 224.351 252.327 188.455 261.934L120.95 280.023C115.233 281.546 109.212 281.546 103.494 280.023L9.44267 254.811C3.84266 253.382 0 248.368 0 242.627L0 192.344C0 184.05 7.8728 177.981 15.8862 180.137C58.9521 191.688 107.853 204.786 138.547 213.011C146.888 215.236 152.793 204.997 146.678 198.905L3.70209 55.9296C1.33556 53.5396 0 50.3295 0 46.979C0 21.041 21.041 0 46.9791 0Z",fill:n}),(0,v.jsx)("path",{d:"M46.9789 584.745C50.3295 584.745 53.5632 583.412 55.9295 581.045L198.905 438.07C204.997 431.976 215.26 437.882 213.011 446.224L180.16 568.838C178.005 576.876 184.073 584.769 192.391 584.769H242.651C248.368 584.769 253.382 580.928 254.881 575.399L280.093 481.347C281.616 475.629 281.616 469.606 280.093 463.891L262.005 396.387C252.374 360.49 224.351 332.442 188.455 322.835L120.95 304.746C115.233 303.225 109.211 303.225 103.494 304.746L9.44267 329.958C3.84266 331.39 0 336.402 0 342.12L0 392.402C0 400.697 7.8728 406.764 15.8862 404.609C58.9522 393.057 107.852 379.96 138.547 371.737C146.889 369.51 152.793 379.75 146.678 385.842L3.70209 528.841C1.33556 531.208 0 534.418 0 537.792C0 563.73 21.041 584.769 46.9789 584.769V584.745Z",fill:n})]})]})};function wg({icon:e}){const t=(0,di.A)();return"fin"===e?(0,v.jsx)(bg,{color:t.textMuted}):(0,v.jsx)(vg.A,{})}const jg=(e,t)=>{const n=new URL(e),i=new URLSearchParams(n.search);return((e,t)=>{if(e.has("user_id")||e.set("user_id",t.userId||""),e.has("powered_by_app_id")||e.set("powered_by_app_id",t.appId||""),e.has("company")||e.set("company",t.appName),e.has("solution")||e.set("solution",t.intercomLinkSolution||""),e.has("utm_medium")||e.set("utm_medium","messenger"),e.has("utm_campaign")||e.set("utm_campaign","intercom-link"),!e.has("utm_content")){let n="4+";(t.location||t.currentView)&&(n+=`${t.location||t.currentView}+`),n+=t.isDeveloperWorkspace?"developer-workspace":"we-run-on-intercom",e.set("utm_content",n)}var n,i;e.has("utm_source")||e.set("utm_source",(0,Lo.rr)()?"mobile-web":"desktop-web"),e.has("utm_referrer")||e.set("utm_referrer",encodeURI((null==(n=window)||null==(n=n.parent)||null==(n=n.location)?void 0:n.origin)+(null==(i=window)||null==(i=i.parent)||null==(i=i.location)?void 0:i.pathname)))})(i,t),n.search=i.toString(),n.toString()},kg=(0,b.forwardRef)((function(e,t){const n=e.poweredBy,{userId:i,appName:r,intercomLinkSolution:o,appId:a,currentView:s="conversation",isDeveloperWorkspace:l,showOnSpaces:c,className:d,removeVerticalMargin:u=!1,isFadingOut:p}=e,h=()=>{const e=l?"developer_workspace":"we_run_on_intercom";(0,Ve.A5)("clicked",e,"messenger",s,{})},m=(0,b.useCallback)((()=>null!=n&&n.linkUrl?jg(n.linkUrl,{userId:i,appId:a,appName:r,intercomLinkSolution:o,currentView:s,isDeveloperWorkspace:l}):null),[n,i,a,r,o,s,l]),g=(0,di.A)(),x=g.textMuted,f=g.elevation1;return(0,v.jsx)(tm,{underConstruction:l,showOnSpaces:c,"data-testid":"intercom-link",ref:t,className:d,removeVerticalMargin:u,isFadingOut:p,children:(0,v.jsx)(rm,{children:n&&(()=>{const e=m();return(0,v.jsx)(B.B1,{in:!!n,timeout:150,classNames:"powered-by",children:(0,v.jsxs)(im,{as:e?"a":"div",foregroundColor:x,hoverColor:e?f:x,href:e||void 0,onClick:e?h:void 0,target:e?"_blank":void 0,showOnSpaces:c,style:{cursor:e?"pointer":"default",pointerEvents:e?"auto":"none"},children:[(0,v.jsx)(wg,{icon:n.icon}),(0,v.jsx)(em,{id:"intercom-link-text","data-testid":"intercom-link-text",children:l?"Development Workspace":(null==n?void 0:n.text)||""})]})})})()})})}));(0,Xe.Tl)("powered_by_intercom");const Ag=(0,b.forwardRef)(((e,t)=>{const n=(0,m.GV)((e=>{var t;return null==(t=e.session)?void 0:t.appId})),i=(0,m.GV)((e=>{var t;return null==(t=e.user)?void 0:t.id})),r=(0,m.GV)((e=>{var t;return(null==e||null==(t=e.app)?void 0:t.name)||""})),o=(0,m.GV)((e=>{var t;return null==e||null==(t=e.app)?void 0:t.isDeveloperWorkspace})),a=function(){const e=Rl(),t=(0,m.GV)(x.rp);if(!(0,Lh.Z)().poweredByDisabled)return null!=e&&e.poweredBy?e.poweredBy:null!=t&&t.poweredBy?t.poweredBy:void 0}();return(0,v.jsx)(kg,Object.assign({ref:t,poweredBy:a,appId:n,appName:r,userId:i,isDeveloperWorkspace:o},e))})),Cg=Ag;var Sg=n(94325);const Tg=(0,k.Ay)("div",{target:"e6876yz1"})("border-radius:0 0 6px 6px;z-index:3;",Sg.f.className,"{border-top:1px solid ",(0,k.w4)("borderEmphasisNeutral"),";padding:24px;}"),_g=(0,k.Ay)(Cg,{target:"e6876yz0"})({name:"ti75j2",styles:"margin:0"});const Eg=(0,k.Ay)("div",{target:"e1xe1m622"})("padding-bottom:2px;border-top:1px solid ",(0,k.w4)("borderEmphasisNeutral"),";background-color:",(0,k.w4)("containerBaseNeutral"),";box-shadow:none;border-color:",(0,k.w4)("lightBorder"),";"),Ig=(0,k.Ay)("div",{target:"e1xe1m621"})({name:"98unkj",styles:"padding-bottom:22px;text-align:center;display:flex;justify-content:center"}),zg=(0,k.Ay)("div",{target:"e1xe1m620"})((({theme:e})=>(0,k.AH)("color:",e.isPrimaryColorLight?(0,ve.e$)(e.textMuted,15):e.textMuted,";"))," margin:24px auto 12px;text-align:center;font-size:14px;padding-top:0px;line-height:21px;color:",(0,k.w4)("textMuted"),";");var Ng=n(38330),Mg=n(79148),Rg=n(49444),Bg=n(27362),Pg=n(84443);function Lg({styleVariant:e="primary",metricsContext:t,metadata:n={}}){const i=(0,m.jL)(),{showSpace:r}=F(),o=(0,m.GV)(x.Ei),a=(0,m.GV)(x.ed),s=(0,m.GV)(x._D),l=(0,m.GV)(x.TB),c=(0,m.GV)(Rg.ow),d=l&&!c,u=(0,m.GV)(Mg._9),{isStandalone:h}=(0,m.GV)(Mg.hb),g=(0,m.GV)(Ng.hH),f=(0,m.GV)(Pg.$),y=()=>d?(0,Xe.Tl)("messages_browse_articles_btn"):null!=u&&u.relatedConversationId?(0,Xe.Tl)("continue_the_conversation"):g?g.text:a||!s?(0,Xe.Tl)("ask_a_question"):(0,Xe.Tl)("send_us_a_message");if(!o)return null;const b=d?"ArticleOpenBook":g?g.icon||"NewConversation":a||!s?"AskQuestion":"NewConversation";return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(Bg.A,{onClick:()=>{if(d)r(p.ZL.id);else if(null!=u&&u.relatedConversationId)i((0,sn.QL)(Lt.Ay,u.relatedConversationId,{requestOrigin:"Article Related Conversation Click"})),i((0,ln.p)(u.relatedConversationId));else{let e;!u||null!=f&&f.snapshotId||(e={partType:"article_link",messageType:"link",body:[{type:"link",title:u.title,linkType:"educate.article",articleId:u.id,description:u.description,url:u.url,author:u.author}],createdAt:new Date,sentAt:new Date,isMessage:!0}),i((0,Jt.p6)({articleUrl:null==u?void 0:u.url,articleID:null==u?void 0:u.id,articleIsStandalone:h,articleLinkPart:e})),(0,Ve.A5)("clicked","new_conversation","messenger",t,n)}},borderRadius:10,variant:e,"data-testid":"send-a-message-button","aria-label":y(),children:[y(),(0,v.jsx)(Te.In,{type:b,flipInRtl:"NewConversation"===b||"ComposerSend"===b,ariaHidden:!0})]})})}const Og=(e,t,n)=>{var i;const r=null==e||null==(i=e.metadata)?void 0:i.merged_into_conversation_id;return t&&!n&&!!r},Dg=({allowNewConversation:e,inboundConversationsDisabled:t,conversationEndedButton:n})=>{var i;const r=(0,m.jL)(),o=(null==n?void 0:n.title)||(0,Xe.Tl)("conversation_has_ended"),a=null==n||null==(i=n.metadata)?void 0:i.merged_into_conversation_id,s=Og(n,e,t);return(0,v.jsxs)(Eg,{children:[(0,v.jsx)(zg,{children:o}),s&&(0,v.jsx)(Ig,{children:n?(0,v.jsx)(vr.A,{iconType:n.icon,onClick:()=>{"merged_into_conversation"===(null==n?void 0:n.reason)&&a&&(r((0,sn.QL)(Lt.Ay,a,{requestOrigin:"Conversation Ended Button"})),r((0,ln.p)(a)))},variant:"secondary",children:n.text}):(0,v.jsx)(Lg,{styleVariant:"primary_light"})})]})};var Hg=n(32589);const Fg=(0,k.Ay)("a",{target:"e1quee1w1"})("display:inline-block;height:40px;font-size:14px;line-height:40px;pointer-events:auto;cursor:pointer;border-radius:40px;text-align:center;transition:all 120ms;padding:0 24px;span{padding-left:10px;white-space:nowrap;font-weight:600;}",(({variant:e,theme:t})=>"default"===e&&(0,k.AH)("background-color:",t.buttonBackgroundColor,"!important;color:",t.buttonTextColor,"!important;transition:color 0.3s,background-color 0.3s;&:hover{background-color:",t.buttonBackgroundColorHover,"!important;}&:active{background-color:",t.buttonBackgroundColorActive,"!important;}"))," ",(({variant:e,theme:t})=>"default"===e&&t.isPrimaryColorAsTheme&&(0,k.AH)("border:1px solid ",t.borderEmphasisNeutral,";")),";"),Vg=(0,k.Ay)("div",{target:"e1quee1w0"})({name:"8irbms",styles:"display:inline-flex;align-items:center"});class ContinueOnWhatsappButton extends b.PureComponent{constructor(...e){super(...e),this.handleContinueOnWhatsppClick=()=>(this.continueOnWhatsappMetric(),!0),this.continueOnWhatsappMetric=()=>{(0,Ve.A5)("clicked","continue_on_whatsapp","messenger",this.props.metricsContext,this.props.metadata)}}render(){const{IconComponent:e}=this.props;return(0,v.jsx)(Fg,{href:"https://wa.me",target:"_blank",variant:"default",className:"continue-on-whatsapp-button",onClick:this.handleContinueOnWhatsppClick,children:(0,v.jsxs)(Vg,{children:[(0,v.jsx)(e,{variant:"default"}),(0,v.jsx)("span",{children:(0,Xe.Tl)("continue_on_whatsapp")})]})})}}ContinueOnWhatsappButton.defaultProps={IconComponent:function({variant:e}){return(0,v.jsx)(Hg.M,{focusable:"false","aria-hidden":"true",viewBox:"0 0 15 16",variant:e,children:(0,v.jsx)("g",{transform:"translate(-24.000000, -12.000000)",children:(0,v.jsx)("path",{d:"M25.4036262,27.3409362 C24.4176893,27.8509036 23.8195834,27.3951055 24.0683403,26.3201996 L25.0887779,21.910776 C25.2131242,21.3734618 25.7510472,20.8884231 26.3078778,20.8254187 L32.503417,20.1244045 C34.151155,19.9379658 34.1569707,19.6389088 32.503417,19.4549971 L26.3078778,18.7659164 C25.7589338,18.7048617 25.2129433,18.217839 25.0887779,17.6798715 L24.0683403,13.2586546 C23.8198614,12.1820783 24.408944,11.7182276 25.4036262,12.2327184 L38.22304,18.8634497 C39.208977,19.373417 39.2177223,20.1957141 38.22304,20.7102049 L25.4036262,27.3409362 Z"})})})},metadata:{}};const Gg=(0,k.Ay)("div",{target:"e2smsy12"})("padding-bottom:2px;border-top:1px solid ",(0,k.w4)("borderEmphasisNeutral"),";background-color:",(0,k.w4)("containerBaseNeutral"),";box-shadow:",(0,k.w4)("shadowXSmall"),";"),$g=(0,k.Ay)("div",{target:"e2smsy11"})({name:"8vudpi",styles:"padding-bottom:22px;text-align:center"}),qg=(0,k.Ay)("div",{target:"e2smsy10"})((({theme:e})=>(0,k.AH)("color:",e.textMuted,";"))," margin:16px auto;text-align:center;font-size:13px;padding-top:4px;"),Ug=(0,b.memo)((function(){const e=(0,b.useRef)(null);return(0,v.jsxs)(Gg,{ref:e,children:[(0,v.jsx)(qg,{children:(0,Xe.Tl)("can_continue_whatsapp")}),(0,v.jsx)($g,{children:(0,v.jsx)(ContinueOnWhatsappButton,{metricsContext:"whatsapp"})})]})}));const Wg=(0,k.Ay)("div",{target:"e1jolh732"})("height:120px;background-color:",(0,k.w4)("input"),";border-radius:0 0 6px 6px;text-align:center;overflow:hidden;"),Kg=(0,k.Ay)("div",{target:"e1jolh731"})("margin-top:20px;font-size:14px;line-height:150%;color:",(0,k.w4)("textDefault"),";"),Xg=(0,k.Ay)("div",{target:"e1jolh730"})({name:"zbsgha",styles:"margin:8px 0 32px 0;display:flex;justify-content:center"});function Yg({info:e,onJoinConversationClick:t}){const[n,i]=(0,b.useState)(!1);return(0,v.jsxs)(Wg,{children:[(0,v.jsx)(Kg,{children:e}),(0,v.jsx)(Xg,{children:n?(0,v.jsx)(w.A,{}):(0,v.jsx)(Bg.A,{iconType:"NewConversation",onClick:()=>{i(!0),t()},borderRadius:10,"data-testid":"send-a-message-button",children:(0,Xe.Tl)("join_conversation")})})]})}function Zg({name:e,children:t}){const n=(0,Dn.A)(e);return"function"==typeof t?(0,v.jsx)(v.Fragment,{children:t(n)}):n?(0,v.jsx)(v.Fragment,{children:t}):null}var Jg=n(18603);const Qg=({linkUrl:e="http://zapier.com/privacy",linkLabel:t="Privacy Policy"})=>(0,v.jsx)(Jg.v,{href:e,onClick:()=>{(0,Ve.A5)("clicked","privacy_policy","messenger","conversation",{})},target:"_blank","aria-label":e,children:(0,v.jsx)("span",{children:t})});const ex=function(e,t){const[n,i]=(0,b.useState)(!1),r=(0,b.useCallback)((()=>i(!0)),[]),o=(0,b.useCallback)((()=>i(!1)),[]);return(0,b.useEffect)((()=>{const t=e.current;return t&&(t.addEventListener("focusin",r),t.addEventListener("focusout",o)),()=>{t&&(t.removeEventListener("focusin",r),t.removeEventListener("focusout",o))}}),[e,r,o]),(0,b.useEffect)((()=>{t(n)}),[n,t]),n};const tx=k.i7`
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
`,nx=(0,k.Ay)("div",{target:"e1khxwsc2"})({name:"qt52wb",styles:"display:flex;flex-direction:column;align-items:flex-start;gap:8px;margin-bottom:16px;margin-left:8px;padding-left:16px;width:100%;position:relative;isolation:isolate;z-index:5;&::before{content:'';position:absolute;top:-4px;left:-4px;right:-4px;bottom:-4px;width:fit-content;backdrop-filter:blur(80px);-webkit-backdrop-filter:blur(80px);border-radius:100px;z-index:-1;pointer-events:none;}"}),ix=(0,k.Ay)("button",{target:"e1khxwsc1"})("height:36px;padding:8px 16px;background:#2c2d31;border:none;border-radius:100px;color:#ffffff;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Helvetica','Arial',sans-serif;font-size:13px;font-weight:500;line-height:1.3;cursor:pointer;transition:all 0.2s cubic-bezier(0.4, 0, 0.2, 1);white-space:nowrap;user-select:none;outline:none;box-sizing:border-box;position:relative;z-index:10;opacity:0;animation:",tx," 0.4s cubic-bezier(0.22, 0.61, 0.36, 1) both;animation-delay:",(e=>e.$animationDelay),"ms;&:hover{background:#1a1b1e;transform:translateY(-2px);}&:active{transform:scale(0.98);}&:focus-visible{outline:2px solid rgba(255, 255, 255, 0.5);outline-offset:2px;}@supports not (backdrop-filter: blur(80px)){background:rgba(0, 0, 0, 0.8);}"),rx=(0,k.Ay)("span",{target:"e1khxwsc0"})({name:"1r5gb7q",styles:"display:inline-block"}),ox=({texts:e,onButtonClick:t,show:n})=>{const i=(0,a.useNavigate)(),r=(0,a.useLocation)(),[o]=(0,a.useSearchParams)(),{meta:s}=Pl(),l=(0,b.useCallback)((e=>{t(e);const n=o.get("visibility");(0,Ve.A5)("clicked","engagement_button","messenger","fin_quick_reply_buttons",Object.assign({text:e},s)),n!==Qt.cy.collapsed&&n!==Qt.cy.shrinked||i(`${r.pathname}${(0,sc.WC)({visibility:Qt.cy.visible})}`,{replace:!0})}),[t,i,r,o,s]);return n?(0,v.jsx)(nx,{children:e.map(((t,n)=>{const i=e.length-1-n;return(0,v.jsx)(ix,{onClick:e=>{e.stopPropagation(),l(t)},onMouseDown:e=>{e.preventDefault()},$animationDelay:100*i,"aria-label":t,children:(0,v.jsx)(rx,{children:t})},t)}))}):null};const ax=(0,k.Ay)("div",{target:"e1a1lpa68"})("align-self:center;display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:12px 16px;gap:12px;margin-bottom:16px;width:calc(100% - 72px);background:",(0,k.w4)("containerNeutral"),";border-radius:12px;"),sx=(0,k.Ay)("span",{target:"e1a1lpa67"})("font-style:normal;font-weight:400;font-size:13px;line-height:16px;color:",(0,k.w4)("textMuted"),";a,a:visited,a:hover,a:active{color:inherit;text-decoration:underline;}"),lx=(0,k.Ay)("div",{target:"e1a1lpa66"})({name:"1p9mi4i",styles:"width:16px;height:16px;display:flex;justify-content:center;align-items:center"}),cx=(0,k.Ay)("div",{target:"e1a1lpa65"})("cursor:pointer;display:flex;color:",(0,k.w4)("iconMuted"),";"),dx=(0,k.Ay)("div",{target:"e1a1lpa64"})("display:flex;gap:4px;align-items:center;justify-content:center;width:100%;margin-top:-4px;",(({$isFinMessenger:e,$isVisible:t})=>e&&`\n    position: relative;\n    min-height: 20px;\n    opacity: ${t?"1":"0"};\n    transition: opacity 0.3s ease-out;\n    margin-top: -6px;\n    bottom: -8px;\n    `),";"),ux=(0,k.Ay)("div",{target:"e1a1lpa63"})("font-size:12px;font-weight:400;line-height:normal;color:",(0,k.w4)("textMuted"),";letter-spacing:0.01px;white-space:nowrap;margin:0;margin-top:",(({$isFinMessenger:e})=>e?"4px":"6px"),";padding-bottom:",(({$isFinMessenger:e})=>e?"0":"10px"),";"),px=(0,k.Ay)("span",{target:"e1a1lpa62"})({name:"o0e4ct",styles:"text-decoration:underline;text-underline-position:from-font;text-decoration-skip-ink:none;cursor:pointer;padding-bottom:8px;margin-left:4px"}),hx=(0,k.Ay)("div",{target:"e1a1lpa61"})("border-radius:16px;border:0.75px solid ",(0,k.w4)("borderNeutral"),";background:",(0,k.w4)("containerBaseNeutral"),";padding:8px 12px;box-shadow:",(0,k.w4)("shadowSmall"),";max-width:230px;color:",(0,k.w4)("textDefault"),";line-height:150%;font-size:14px;font-weight:400;margin-bottom:-8px;margin-right:5px;"),mx=(0,k.Ay)("div",{target:"e1a1lpa60"})("font-style:normal;font-weight:400;font-size:12px;line-height:16px;color:",(0,k.w4)("textMuted"),";white-space:normal;word-wrap:break-word;overflow-wrap:break-word;max-width:100%;a,a:visited,a:hover,a:active{color:inherit;text-decoration:underline;}");var gx=n(82381),xx=n(41041),fx=n(72038);const vx=({renderLocation:e="route"})=>{const{privacyPolicyNoticeText:t,isEnabled:n}=(0,m.GV)(x.q2),i=(0,m.GV)(Nl.Gm),r=(0,m.jL)(),o=(0,Dn.A)("newPrivacyPolicyLayout"),a=Ar(),s=ug(),l=(0,b.useCallback)((()=>{r((0,Jt.Pw)())}),[r]),c=a||o,d=s===Qt.cy.shrinked;if("route"===e&&a)return null;if("footer"===e&&!a)return null;if(!n||!t)return null;if(c){if(null!=i&&i.id)return null;const e=!a||!d;return(0,v.jsx)(dx,{$isVisible:e,$isFinMessenger:a,"data-testid":"new-privacy-notice-container",children:(0,v.jsxs)(ux,{$isFinMessenger:a,children:["By chatting with us, you agree to our",(0,v.jsxs)(gx.b,{children:[(0,v.jsx)(xx.l,{asChild:!0,children:(0,v.jsx)(px,{children:"Privacy Policy"})}),(0,v.jsx)(fx.U,{children:(0,v.jsx)(hx,{children:(0,v.jsx)(mx,{children:(0,v.jsx)($t.y,{text:t,tagName:"div",className:"intercom-block-paragraph",align:"left",noMargin:!0})})})})]})]})})}return(0,v.jsxs)(ax,{children:[(0,v.jsx)(sx,{children:(0,v.jsx)($t.y,{text:t,tagName:"div",className:"intercom-block-paragraph",align:"left",noMargin:!0})}),(0,v.jsx)(cx,{children:(0,v.jsx)(lx,{"data-testid":"dismiss-privacy-policy-notice","aria-label":(0,Xe.Tl)("dismiss"),onClick:()=>l(),children:(0,v.jsx)(Te.Ay,{type:"Close",size:9})})})]})},yx=({isIntercomLinkEnabled:e,children:t,showQuickReplies:n=!1,quickReplyTexts:i=[],onQuickReplyClick:r})=>{const{setNewFooterHeight:o,footerRef:a}=(0,b.useContext)(Zh),s=(0,b.useRef)(null),l=Ar(),c=(0,b.useCallback)((e=>{s.current=e,a.current=e}),[a]),d=ex(s,(()=>{p()})),u=(0,m.GV)(x.Nl),p=()=>{if(s.current){var e;let t=(null==(e=s.current)?void 0:e.offsetHeight)||0;d&&(0,Lo.rr)()&&(t-=26),o(t)}};return(0,Ti.A)(s.current,p,0),(0,v.jsxs)(sm,{isIntercomLinkEnabled:e,ref:c,"data-testid":"footer-container",isNewPrivacyPolicyLayoutVisible:u,children:[n&&i.length>0&&r&&(0,v.jsx)(ox,{texts:i,onButtonClick:r,show:n}),t,l&&(0,v.jsx)(vx,{renderLocation:"footer"})]})},bx=(0,b.createContext)(void 0);bx.displayName="ComposerContext";const wx=()=>{const e=(0,b.useContext)(bx);if(!e)throw new Error("This component needs to be wrapped in a Composer Context");return e},jx=(0,b.createContext)(void 0);jx.displayName="ComposerPopoverContext";const kx=()=>{const e=(0,b.useContext)(jx);if(!e)throw new Error("Component needs to be wrapped in Composer PopoverContext");return e};var Ax=n(54196),Cx=n(29212);const Sx=e=>e.metadata.previewUrl?{id:e.id,file:e.file,src:e.metadata.previewUrl,width:e.metadata.width??0,height:e.metadata.height??0,status:e.status,uploadError:e.uploadError,metadata:e.metadata}:null,Tx=async e=>{const t=(e=>{const t=Object.values(e);if(!t.every((e=>e.metadata.previewUrl)))return null;const n=[];for(const e of t){const t=Sx(e);t&&n.push(t)}return n})(e);if(null!==t)return t;const n=Object.values(e);return(await Promise.all(n.map((async e=>{try{if(e.metadata.previewUrl)return Sx(e);const t=await(0,Cx.kn)(e.file);return t?{id:e.id,file:e.file,src:t.src,width:t.width,height:t.height,status:e.status,uploadError:e.uploadError,metadata:e.metadata}:null}catch{return null}})))).filter((e=>null!==e))},_x=(e,t)=>{var n,i;return((null==(n=e.metadata)?void 0:n.fileAddedAt)??0)-((null==(i=t.metadata)?void 0:i.fileAddedAt)??0)};function Ex(e,t){const n=""!==e.trim(),i=t.length>0;if(!n&&!i)return{blocks:[]};if(i){const i=n?(0,cn.$B)(e):[];if(t.length>=1){const e=t[0];return{blocks:[...(0,cn.Fp)(e.src,e.width,e.height),...i],file:e.file}}}return n?{blocks:(0,cn.$B)(e),file:null}:{blocks:[]}}function Ix(e){return e.flatMap((({url:e,width:t,height:n})=>(0,cn.Fp)(e,t,n)))}async function zx(e){return(await Tx(e)).sort(_x).flatMap((({id:t,width:n,height:i})=>{const r=e[t];return r?(0,cn.Fp)(r.metadata.uploadedUrl,n,i):[]}))}function Nx(e){return Object.values(e).sort(_x).flatMap((e=>{if(!e.metadata.uploadId||!e.metadata.uploadedUrl)return[];const t=e.file;return(0,cn.Io)({name:t.name,contentType:t.type,size:t.size,id:e.metadata.uploadId,url:e.metadata.uploadedUrl})}))}const Mx=e=>e.composerDrafts,Rx=(0,X.Mz)([Mx],(e=>e.images)),Bx=(0,X.Mz)([Mx],(e=>e.files)),Px=(0,X.Mz)([Mx],(e=>e.gridImages)),Lx=(0,X.Mz)([Bx,Px],((e,t)=>Object.keys(e).length+Object.keys(t).length)),Ox=(0,X.Mz)([Bx,Px,(e,t)=>t],((e,t,n)=>e[n]??t[n]??null)),Dx=(0,X.Mz)([Bx,Px],((e,t)=>Object.values(e).every((e=>e.status===Ax.A8.Completed))&&Object.values(t).every((e=>e.status===Ax.A8.Completed)))),Hx=(0,X.Mz)([Bx,Px],((e,t)=>Object.values(e).some((e=>null!==e.uploadError&&void 0!==e.uploadError))||Object.values(t).some((e=>null!==e.uploadError&&void 0!==e.uploadError)))),Fx=e=>{var t;return null!=(t=e.metadata)&&t.previewUrl?{id:e.id,file:e.file,src:e.metadata.previewUrl,width:e.metadata.width??0,height:e.metadata.height??0,status:e.status,uploadError:e.uploadError,metadata:e.metadata}:null},Vx=(0,X.Mz)([Px],(e=>{const t=Object.values(e);if(!t.every((e=>{var t;return null==(t=e.metadata)?void 0:t.previewUrl}))&&t.length>0)return null;const n=[];for(const e of t){const t=Fx(e);t&&n.push(t)}return n.sort(_x)})),Gx=["forceStandardView","useDesktopLayoutOnMobileSize"];const $x=(0,k.Ay)("div",{target:"e5mgu3j5"})("align-items:flex-end;display:flex;inset:0 0 0 auto;padding:0 8px 0 7px;position:absolute;",(({theme:e,$useDesktopLayoutOnMobileSize:t})=>e.isMobileSize&&t&&(0,k.AH)("position:relative;inset:auto;width:100%;box-sizing:border-box;padding:0 8px 0 12px;background-color:",e.inputAlt,";")),";");var qx={name:"1ocp7dm",styles:"padding:4px 0 8px 4px"},Ux={name:"1m0bmdn",styles:"padding:4px 4px 8px 0"};const Wx=(0,k.Ay)("div",{target:"e5mgu3j4"})("align-items:center;display:flex;gap:16px;min-height:32px;width:100%;",ii.DL," ",(({theme:e})=>e.isRtlLocale?Ux:qx),";"),Kx=(0,k.Ay)("div",{target:"e5mgu3j3"})({name:"1nmkmzf",styles:"display:flex;align-items:center;gap:16px;width:100%;min-height:32px;height:32px;padding-left:12px;padding-right:8px"}),Xx=(0,k.Ay)("div",{target:"e5mgu3j2"})("display:flex;align-items:center;gap:16px;width:100%;min-height:32px;height:32px;padding-left:12px;padding-right:8px;",ii.DL,";"),Yx=(0,k.Ay)("button",{target:"e5mgu3j1"})("color:",(0,k.w4)("iconMuted"),";cursor:pointer;display:inline-block;position:relative;opacity:0.8;transition:opacity 200ms ease;width:16px;&:hover{opacity:1;}&[data-state='open']{",(({theme:e})=>(0,k.AH)("color:",e.primaryColor,";opacity:1;")),";}"),Zx=(0,k.Ay)(vr.A,{target:"e5mgu3j0"})("&:disabled{background-color:",(0,k.w4)("alphaBlack10"),";color:",(0,k.w4)("iconDisabled"),";}border:1px solid ",(({theme:e})=>e.isPrimaryColorAsTheme?e.borderEmphasisNeutral:"none"),";align-items:center;border-radius:32px;display:flex;justify-content:center;height:32px;width:32px;padding:0!important;",(({$isFinMessenger:e,theme:t})=>e&&(0,k.AH)("background-color:",t.textWhite,"!important;color:",t.textBlack,"!important;&:hover:not(:disabled){background-color:",t.textWhite,"!important;opacity:0.9;}&:disabled{background-color:",t.containerNeutral,"!important;color:",t.iconMuted,"!important;}")),";"),Jx=e=>{let{forceStandardView:t,useDesktopLayoutOnMobileSize:n}=e,i=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,Gx);const{useExpandedComposer:r}=wx();return r&&!t?(0,v.jsx)(Kx,{children:(0,v.jsx)(Xx,Object.assign({role:"toolbar","aria-label":"Composer actions"},i))}):(0,v.jsx)($x,{$useDesktopLayoutOnMobileSize:n,children:(0,v.jsx)(Wx,Object.assign({role:"toolbar","aria-label":"Composer actions"},i))})},Qx=e=>{let t=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));const{disabled:n,onSubmit:i,textField:{value:r},imageDrafts:o}=wx(),a=(0,m.GV)((e=>e.session)),s=(0,m.GV)(x.rp),l=(0,Ks.a4)(s),c=(0,qc.r)(),d=(0,m.GV)(Dx),u=(0,m.GV)(Hx),p=(0,m.GV)(Lx),h=(0,m.GV)(Px),g=(0,m.GV)(Bx),f=Ar(),y=o.images,b=""!==r.trim()||y.length>0||p>0,w=n||!b||c&&!d||c&&u;return(0,v.jsx)(Zx,Object.assign({variant:"primary",className:"intercom-composer-send-button",onClick:()=>(async()=>{if(!b)return;const e=""!==r.trim();if(c&&p>0){const t=await zx(h),n=Nx(g),o=e?(0,cn.$B)(r):[];i([...t,...n,...o],null)}else if(y.length<=1){const{blocks:e,file:t}=Ex(r,y);e.length>0&&i(e,t)}else try{const t=y.map((e=>(0,sn.oT)(Lt.Ay,a,e.file,{dimensions:{width:e.width,height:e.height},fileSizeLimit:l}))),n=Ix((await Promise.all(t)).map(((e,t)=>({url:e.publicUrl,width:y[t].width,height:y[t].height})))),o=e?(0,cn.$B)(r):[];i([...n,...o],null)}catch(e){return}})(),onMouseDown:e=>{e.preventDefault()},disabled:w,"aria-disabled":w?"true":"false","aria-label":(0,Xe.Tl)("send_a_message"),$isFinMessenger:f,padding:0},t,{children:(0,v.jsx)(Te._x,{type:"UpIcon"})}))};function ef(e,t,n){const i=(0,b.useContext)(Wr.t);(0,b.useEffect)((()=>{if(!n)return null==i||i.document.addEventListener("mouseup",r),()=>{null==i||i.document.removeEventListener("mouseup",r)};function r(n){e.some((e=>{var t;return null==(t=e.current)?void 0:t.contains(n.target)}))||t()}}),[e,t,i,n])}const tf=(0,k.Ay)("div",{target:"e1ft9lpm1"})("background-color:",(0,k.w4)("containerBaseNeutral"),";border:solid 1px ",(0,k.w4)("borderNeutral"),";border-radius:12px;box-shadow:",(0,k.w4)("shadowSmall"),";width:330px;z-index:",(0,ii.fE)(3),";"),nf=(0,k.Ay)("span",{target:"e1ft9lpm0"})("bottom:-12px;left:0;position:absolute;color:",(0,k.w4)("containerBaseNeutral"),";path{filter:drop-shadow(0px 1px 1px ",(0,k.w4)("alphaBlack10"),");}"),rf=({children:e,type:t})=>{const{popover:{isTypeOpen:n,closePopover:i}}=wx(),{refs:r,floatingStyles:o}=(0,Wl.we)({strategy:"fixed",placement:"top-end",middleware:[(0,Kl.cY)(28),(0,Kl.BN)({padding:20})]});return ef([r.floating,r.reference],(0,b.useCallback)((()=>i()),[i]),!n(t)||n("typeaheadEmoji")),(0,v.jsx)(jx.Provider,{value:{type:t,refs:r,floatingStyles:o},children:e})},of=e=>{const{popover:{isTypeOpen:t,openPopover:n,closePopover:i}}=wx(),{type:r,refs:o}=kx();return(0,v.jsx)(Yx,Object.assign({},e,{onClick:()=>{t(r)?i():n(r)},ref:o.setReference,"data-state":t(r)?"open":"closed","aria-expanded":t(r)}))},af=({children:e,showArrow:t=!0})=>{const{popover:{isTypeOpen:n,closePopover:i}}=wx(),{refs:r,floatingStyles:o,type:a}=kx();if(!n(a))return null;return(0,v.jsxs)(tf,{"data-testid":"popover-container",ref:r.setFloating,style:o,onKeyDown:e=>(e=>{(0,u.nx)(e)&&(e.stopPropagation(),i())})(e),children:[e,t&&r.reference.current&&(0,v.jsx)(nf,{style:(s=r.reference.current,(0,Xe.Vf)((0,Xe.JK)())?{right:s.getBoundingClientRect().left-20}:{left:s.getBoundingClientRect().left-20}),children:(0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",width:16,children:(0,v.jsx)("path",{d:"M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"})})})]});var s},sf=()=>{const{popover:{isTypeOpen:e}}=wx(),{type:t}=kx();return e(t)?(0,v.jsx)(Te.uD,{type:"GifFilledIcon"}):(0,v.jsx)(Te.uD,{type:"GifOutlineIcon"})},lf=()=>{const{popover:{isTypeOpen:e}}=wx(),{type:t}=kx();return e(t)?(0,v.jsx)(Te.uD,{type:"EmojiFilledIcon"}):(0,v.jsx)(Te.uD,{type:"EmojiOutlineIcon"})};const cf=(0,k.Ay)("div",{target:"efnb6w2"})({name:"1u2ek4o",styles:"margin:10px -5px;padding-left:3px"}),df=(0,k.Ay)("h3",{target:"efnb6w1"})("color:",(0,k.w4)("textMuted"),";font-weight:600;font-size:11px;margin:5px;text-transform:uppercase;line-height:1.27;"),uf=(0,k.Ay)("div",{target:"efnb6w0"})({name:"1kix44w",styles:"width:330px;height:260px"}),pf=(0,k.Ay)("div",{target:"ek4y4bd5"})("position:absolute;height:100%;width:100%;display:block;text-align:center;background-color:",(0,k.w4)("baseAlpha"),";z-index:1;"),hf=(0,k.Ay)("div",{target:"ek4y4bd4"})("height:50px;width:290px;padding-top:2px;padding-bottom:2px;display:inline-block;position:relative;background-color:",(0,k.w4)("containerBaseNeutral"),";box-shadow:",(0,k.w4)("shadowSmall"),";border-radius:6px;z-index:2;box-sizing:border-box;",(({emojiYOffset:e})=>(0,k.AH)("top:",e-17,"px;")),";"),mf=(0,k.Ay)("span",{target:"ek4y4bd3"})("padding:3px;width:36px;line-height:1.28;display:inline-block;height:36px;text-align:center;cursor:pointer;vertical-align:middle;font-size:28px;margin:4px 5px 0 6px;box-sizing:border-box;font-family:'Apple Color Emoji','Segoe UI Emoji','NotoColorEmoji','Segoe UI Symbol','Android Emoji','EmojiSymbols',sans-serif;&:hover{background-color:",(0,k.w4)("containerEmphasisNeutral"),";border-radius:3px;}"),gf=(0,k.Ay)("span",{target:"ek4y4bd2"})("border-right:1px solid ",(0,k.w4)("borderEmphasisNeutral"),";height:36px;width:1px;"),xf=({theme:e,emojiXOffset:t})=>(0,k.AH)("position:absolute;bottom:-8px;right:0;width:0;height:0;border-left:8px solid transparent;border-right:8px solid transparent;border-top:8px solid ",e.borderNeutral,";left:",t-7,"px;"),ff=(0,k.Ay)("div",{target:"ek4y4bd1"})(xf,";"),vf=(0,k.Ay)("div",{target:"ek4y4bd0"})(xf," bottom:-9px;border-top:none;"),yf=(0,b.memo)((({emoji:e,onEmojiClick:t,onClose:n,emojiXOffset:i,emojiYOffset:r})=>{const o=(0,b.useMemo)((()=>qs().getAllModifiedForBaseEmoji(e)),[e]),a=(0,b.useCallback)((n=>{var i;const r=(null==(i=n.target)?void 0:i.getAttribute("data-identifier"))||"",o=qs().unicodeFromIdentifier(r);t(e,o)}),[e,t]),s=(0,b.useCallback)((()=>{n()}),[n]);return o.length<=1?null:(0,v.jsx)(pf,{onClick:s,children:(0,v.jsxs)(hf,{emojiYOffset:r,children:[o.map(((e,t)=>{const n=qs().identifierFromUnicode(e),i=(0,Ms.Xl)(n),r=`${e}-${n}`;return(0,v.jsxs)("span",{children:[(0,v.jsx)(mf,{"data-identifier":n,title:i,"aria-label":i,onClick:a,children:e}),0===t&&(0,v.jsx)(gf,{})]},r)})),(0,v.jsx)(vf,{emojiXOffset:i}),(0,v.jsx)(ff,{emojiXOffset:i})]})})}));yf.displayName="EmojiSkintonePicker";const bf=yf;var wf={name:"13ufj22",styles:"transition-delay:0ms;transform:scale(1.2)"};const jf=(0,k.Ay)("span",{target:"evh3sr11"})("padding:6px;width:30px;line-height:1.07;display:inline-table;text-align:justify;cursor:pointer;vertical-align:middle;font-size:28px;transition:transform 60ms ease-out;transition-delay:60ms;font-family:'Apple Color Emoji','Segoe UI Emoji','NotoColorEmoji','Segoe UI Symbol','Android Emoji','EmojiSymbols',sans-serif;",(({isActive:e})=>e&&wf),";"),kf=(0,k.Ay)("img",{target:"evh3sr10"})("width:28px;height:28px;object-fit:contain;background-position:50%;background-repeat:no-repeat;background-size:contain;background-image:",(({backgroundImage:e})=>e?`url(${e})`:"none"),";"),Af=(0,b.forwardRef)((({emoji:e,title:t,onMouseUp:n,onKeyDown:i,onMouseDown:r,isActive:o,tabIndex:a=0,customEmoji:s},l)=>{const[c,d]=(0,b.useState)(!1),u=(0,Ms.Xl)(t),p=u.length>0&&/\D/.test(u)?u:`${e}`;return(0,v.jsx)(jf,{ref:l,title:u,role:"button","aria-label":p,tabIndex:a,onMouseUp:n,onMouseDown:r,onMouseEnter:()=>{d(!0)},onMouseLeave:()=>{d(!1)},onKeyDown:e=>{"Enter"===e.key||" "===e.key?(e.preventDefault(),n()):i(e)},isActive:c||o,children:s?(0,v.jsx)(kf,{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","aria-label":`Custom emoji: ${s.emoji_name}`,loading:"lazy",backgroundImage:s.small_asset_url}):e})})),Cf=(0,b.createContext)(null),Sf=()=>{const e=(0,b.useContext)(Cf);if(!e)throw new Error("useEmojiPickerContext must be used within a EmojiPickerContext");return e};var Tf=n(59744),_f=n(77520);const Ef="intercom.recentEmoji",If="1.0",zf=[{baseEmoji:"👍",skintoneEmoji:"👍"},{baseEmoji:"👎",skintoneEmoji:"👎"},{baseEmoji:"😭",skintoneEmoji:"😭"},{baseEmoji:"😕",skintoneEmoji:"😕"},{baseEmoji:"😐",skintoneEmoji:"😐"},{baseEmoji:"😊",skintoneEmoji:"😊"},{baseEmoji:"😍",skintoneEmoji:"😍"}];let Nf;const Mf=()=>(void 0===Nf&&(Nf=(0,Lo.G5)()),Nf);function Rf(){if(!Mf())return[];const e=_f.L.get(Ef),t=e?JSON.parse(e):{};return t.version&&t.version===If?t.emoji.slice(0,8)||[]:(_f.L.remove(Ef),(0,Tf.m)(zf))}function Bf(e){if(!Mf())return null;const t=_f.L.get(Ef),n=t?JSON.parse(t):null;if(!n||!n.emoji)return e;let i=e;return n.emoji.forEach((t=>{t.baseEmoji!==e||(i=t.skintoneEmoji)})),i}const Pf=(e,t=Bf(e))=>{Mf()&&(t&&function(e,t){const n=_f.L.get(Ef),i=n?JSON.parse(n):null;if(!i||!i.emoji)return;let r=!1,o=i.emoji;o.forEach((n=>{if(n.baseEmoji===e)return n.skintoneEmoji=t,void(r=!0)})),r||(o=(0,Tf.m)(o).concat({baseEmoji:e,skintoneEmoji:t})),_f.L.set(Ef,JSON.stringify({version:If,emoji:o}))}(e,t),function(e,t=e){const n=zf.find((t=>t.baseEmoji===e));let i=Rf();const r=i.findIndex((t=>t.baseEmoji===e));r>-1&&i.splice(r,1),i.unshift({baseEmoji:e,skintoneEmoji:t}),i.length<8&&!n&&(i=i.concat(zf)),_f.L.set(Ef,JSON.stringify({version:If,emoji:i}))}(e,t||e))},Lf=e=>{try{const t=(e=>{try{return qs().getGroupRepresentatives()[e][1].toLowerCase().replace(/\s+&\s+/g,"_").replace(/\s+/g,"_")}catch(e){return}})(e);return t?(0,Xe.Tl)(t):void 0}catch(e){return}},Of=(e,t)=>{const n=(0,b.useMemo)((()=>{const e=Rf(),n=qs().prettyEmoticonsUnicodeGroups().map(((e,t)=>({title:Lf(t),emojis:e.filter(qs().isEmojiBaseUnicode)})));return t&&t.length>0&&n.unshift({emojis:t}),e&&n.unshift({title:(0,Xe.Tl)("frequently_used"),emojis:e.map((e=>e.skintoneEmoji||e.baseEmoji))}),n}),[t]),i=(0,b.useMemo)((()=>e?((e,t)=>{const n=(0,Ms.Fu)().filter((e=>{const t=e.toLowerCase();return e=>e.title.indexOf(t)>-1})(e)).map((e=>e.emoji)),i=[];if(t&&t.length>0){const n=e.toLowerCase();i.push(...t.filter((e=>-1!==e.emoji_name.toLowerCase().indexOf(n))))}const r=[...i,...n];return 0===r.length?[]:[{title:void 0,emojis:r}]})(e,t):n),[e,n,t]);return i},Df=e=>window.getComputedStyle&&window.getComputedStyle(e)?window.getComputedStyle(e):e.style,Hf=({count:e,query:t})=>(0,v.jsx)("span",{"aria-live":"polite",children:t?(0,v.jsx)(cr,{children:e?(0,v.jsxs)("span",{children:[e," ",(0,Xe.Tl)("article_search_search_results_for_query",{query:t})]}):(0,Xe.Tl)("article_search_no_results_for_query",{query:t})}):null}),Ff=({popoverType:e,shouldHideUploads:t,theme:n})=>{const i=(({popoverType:e,shouldHideUploads:t})=>{let n="gif"===e?81:41;return t&&(n-=34),n})({popoverType:e,shouldHideUploads:t,theme:n});return(0,k.AH)("right:",i,"px;")},Vf=((0,ii.fE)(3),(0,k.w4)("alphaBlack10"),(0,k.w4)("containerBaseNeutral"),(0,k.w4)("borderNeutral"),(0,k.Ay)("div",{target:"e1v6ck14"})("position:absolute;left:0;top:50%;width:100%;margin-top:-7px;font-size:14px;font-weight:bold;text-align:center;color:",(0,k.w4)("textDefault"),";")),Gf=(0,k.Ay)("div",{target:"e1v6ck13"})("position:absolute;top:0;left:20px;right:20px;height:40px;border-bottom:1px ",(0,k.w4)("borderEmphasisNeutral")," solid;",ii.TD,";"),$f=(0,k.Ay)("div",{target:"e1v6ck12"})("position:absolute;left:-6px;top:50%;transform:translateY(-50%);display:flex;align-items:center;justify-content:center;width:25px;height:40px;pointer-events:none;color:",(0,k.w4)("iconMuted"),";"),qf=(0,k.Ay)("input",{target:"e1v6ck11"})("font-weight:normal;font-size:14px;color:",(0,k.w4)("textDefault"),";padding:10px 0 10px 25px;height:40px;width:100%;box-sizing:border-box;border:none;background:transparent;outline:none;&::placeholder{color:",(0,k.w4)("textMuted"),";}"),Uf=(0,k.Ay)("div",{target:"e1v6ck10"})("position:absolute;top:40px;left:0;right:0;bottom:5px;padding:0 20px;overflow-y:scroll;overscroll-behavior:contain;scrollbar-color:",(0,k.w4)("alphaBlack40")," transparent;scrollbar-width:thin;&::-webkit-scrollbar{appearance:none;width:5px;}&::-webkit-scrollbar-thumb{background-color:",(0,k.w4)("alphaBlack40"),";border-radius:16px;}&::-webkit-scrollbar-track{background-color:transparent;}",ii.TD,";"),Wf=(e,t,n)=>0===e&&0===t?[e,t]:0===t?[e-1,n(e-1)-1]:[e,t-1],Kf=(e,t,n,i)=>{const r=t===i(e)-1;return e===n-1&&r?[e,t]:r?[e+1,0]:[e,t+1]},Xf=(e,t,n,i=1,r=!1)=>{const o=(0,b.useRef)({}),[a,s]=(0,b.useState)([0,0]),l=(e,t)=>{var n,i;null!=(n=o.current[e])&&n[t]&&(null==(i=o.current[e][t])||i.focus())},c=n=>{const{key:o,shiftKey:a}=n;switch(o){case"Tab":r&&s((([t,i])=>{const r=a?((e,t)=>t>0?[e,0]:e>0?[e-1,0]:null)(t,i):((e,t,n)=>e<n-1?[e+1,0]:null)(t,0,e);return null===r?[t,i]:(n.preventDefault(),l(r[0],r[1]),r)}));break;case"ArrowUp":n.preventDefault(),s((([e,n])=>{const r=((e,t,n,i,r=1)=>{if(t<r&&e>0)return[e-1,i(e-1)-1];let o=e,a=t;for(let e=0;e<r;e++){const[e,t]=Wf(o,a,i);if(e===o&&t===a)break;if(e!==o)return[e,i(e)-1];o=e,a=t}return[o,a]})(e,n,0,t,i);return l(r[0],r[1]),r}));break;case"ArrowLeft":n.preventDefault(),s((([e,n])=>{const i=Wf(e,n,t);return l(i[0],i[1]),i}));break;case"ArrowDown":n.preventDefault(),s((([n,r])=>{const o=((e,t,n,i,r=1)=>{if(t>i(e)-r&&e<n-1)return[e+1,0];let o=e,a=t;for(let e=0;e<r;e++){const[e,t]=Kf(o,a,n,i);if(e===o&&t===a)break;if(e!==o)return[e,0];o=e,a=t}return[o,a]})(n,r,e,t,i);return l(o[0],o[1]),o}));break;case"ArrowRight":n.preventDefault(),s((([n,i])=>{const r=Kf(n,i,e,t);return l(r[0],r[1]),r}))}};return(0,b.useEffect)((()=>{s([0,0])}),n),(e,t)=>({ref:n=>{n&&(o.current[e]||={},o.current[e][t]=n)},tabIndex:e===a[0]&&t===a[1]?0:-1,onKeyDown:c,onClick:()=>{s([e,t])}})},Yf=(0,b.forwardRef)((({emoji:e,tabIndex:t,onKeyDown:n,onClick:i},r)=>{const{skintoneEmojiToShow:o,setSkintoneEmojiToShow:a,setEmojiXOffset:s,setEmojiYOffset:l,handleEmojiClick:c}=Sf(),d="object"==typeof e&&"custom_emoji"===e.type,u=d?`:${e.emoji_name}:`:e,p=d?e:null,{onMouseDown:h,onMouseUp:m}=(({onStart:e,onFinish:t,onEnd:n,timeout:i=500})=>{const r=(0,b.useRef)(null);return{onMouseDown:n=>{e(n),r.current&&clearTimeout(r.current),r.current=setTimeout((()=>{t()}),i)},onMouseUp:()=>{r.current&&clearTimeout(r.current),n()}}})({onStart(e){const t=e.currentTarget.offsetLeft,n=e.currentTarget.offsetTop-((e,t,n)=>{let i=Df(t);const r="absolute"===i.position,o=n?/(auto|scroll|hidden)/:/(auto|scroll)/;if("fixed"===i.position)return e.document.body;for(let e=t;e=e.parentElement;)if(i=Df(e),(!r||"static"!==i.position)&&o.test(i.overflow+i.overflowY+i.overflowX))return e;return e.document.body})(window,e.currentTarget).scrollTop;s(t),l(n)},onFinish(){d||a(u)},onEnd(){if(!o||d)if(d&&p){const e=p.emoji_name;(0,Ve.A5)("clicked","custom_emoji","messenger","emoji_picker",{emoji_type:"custom"}),c(e)}else c(u);a(null),i()}});if(!d&&!qs().isSupportedUnicode(u))return null;const g=d?(null==p?void 0:p.emoji_name)||u:qs().identifierFromUnicode(u),x=!d&&o===u,f=d?u:Bf(u)||u;return(0,v.jsx)(Af,{ref:r,emoji:f,title:g,onKeyDown:n,onMouseUp:m,onMouseDown:h,isActive:x,tabIndex:t,customEmoji:p})})),Zf=({emojiGroups:e})=>{const{searchValue:t}=Sf(),n=Xf(e.length,(t=>e[t].emojis.length),[t],6,true);return 0===e.length?(0,v.jsx)(cf,{children:(0,v.jsx)(Vf,{children:(0,Xe.Tl)("no_emoji_found")})}):(0,v.jsx)(v.Fragment,{children:e.map((({title:e,emojis:t},i)=>(0,v.jsxs)(cf,{children:[e?(0,v.jsx)(df,{children:e}):null,t.map(((e,t)=>(0,v.jsx)(Yf,Object.assign({emoji:e},n(i,t)),t)))]},i)))})},Jf=({onEmojiClick:e,customEmojis:t=[]})=>{var n;const[i,r]=(0,b.useState)(""),o=Bo(),[a,s]=(0,b.useState)(null),[l,c]=(0,b.useState)(0),[d,p]=(0,b.useState)(0),h=(t,n)=>{void 0!==t&&(Pf(t,n),e(n||t))},m=""!==i,g=Of(i,t);return(0,v.jsx)(Cf.Provider,{value:{skintoneEmojiToShow:a,setSkintoneEmojiToShow:s,searchValue:i,setSearchValue:r,emojiXOffset:l,setEmojiXOffset:c,emojiYOffset:d,setEmojiYOffset:p,handleEmojiClick:h},children:(0,v.jsxs)(uf,{onClick:e=>e.stopPropagation(),tabIndex:-1,role:"none",children:[a?(0,v.jsx)(bf,{emoji:a,emojiYOffset:d,emojiXOffset:l,onClose:()=>s(null),onEmojiClick:h}):null,(0,v.jsxs)(Gf,{children:[(0,v.jsx)($f,{children:(0,v.jsx)(Te.In,{type:"Search",size:20,color:"iconMuted",ariaHidden:!0})}),(0,v.jsx)(qf,{ref:o,name:"emoji",placeholder:(0,Xe.Tl)("search_for_emoji"),value:i,onChange:e=>r(e.target.value),onBlur:yr.BW,"aria-label":(0,Xe.Tl)("search_for_emoji")})]}),(0,v.jsx)(Hf,{query:m?i:void 0,count:(null==(n=g[0])||null==(n=n.emojis)?void 0:n.length)||0}),(0,v.jsx)(Uf,{onWheel:u.b$,"aria-live":"off",children:(0,v.jsx)(Zf,{emojiGroups:g})})]})})},Qf=({insertOnly:e=!1,customEmojis:t=[]})=>{const{onSubmit:n,textField:{value:i,setValue:r,cursorPosition:o},popover:{isTypeOpen:a,closePopover:s},disabled:l}=wx(),c=l||a("typeaheadEmoji");return(0,v.jsxs)(rf,{type:"emoji",children:[(0,v.jsx)(of,{title:(0,Xe.Tl)("emoji_picker"),"aria-label":(0,Xe.Tl)("emoji_picker"),disabled:c,children:(0,v.jsx)(lf,{})}),(0,v.jsx)(af,{children:(0,v.jsx)(Jf,{onEmojiClick:t=>{if(""===i.trim()&&!e)return n((0,cn.$B)(t)),void s();r((0,u.f$)(i,t,o)),s(o+t.length)},customEmojis:t})})]})};const ev=(0,k.Ay)("div",{target:"e10ie76x3"})({name:"1kix44w",styles:"width:330px;height:260px"}),tv=(0,k.Ay)("div",{target:"e10ie76x2"})({name:"nty499",styles:"float:left;width:50%;height:150px;padding:5px;box-sizing:border-box"}),nv=(0,k.Ay)("div",{target:"e10ie76x1"})("width:100%;height:100%;cursor:pointer;border-radius:2px;&:hover{box-shadow:",(0,k.w4)("shadowSmall"),";}"),iv=(0,k.Ay)("div",{target:"e10ie76x0"})({name:"t6no7m",styles:"margin:5px -5px;overflow:hidden"});var rv=n(84864);function ov({event:e,eventIdentifier:t,onClick:n}){!e||function(e){return function(){const e=-1!==navigator.userAgent.indexOf("Ghost Inspector"),t=window._DATADOG_SYNTHETICS_BROWSER,n=!1;return e||t||n}()||!1!==e.isTrusted}(e)?n(e):t&&(0,Ve.sq)("click_denied",{target:t},!0)}function av(e,t=""){return(n,i)=>{n(function(e){return{type:Ot.rGk,searchTerm:e}}(t));const{session:r}=i();return e.searchGifs(r,t).then((e=>{n(function(e,t){return{type:Ot.ZiH,gifs:t.results,searchTerm:e}}(t,e))})).catch((()=>{n(function(e){return{type:Ot.cdh,searchTerm:e}}(t))}))}}const sv=e=>{e&&(e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"}),e.focus())},lv=(e,t,n=0,i=1)=>{const r=(0,b.useRef)({}),[o,a]=(0,b.useState)(n),s=t=>{switch(t.key){case"ArrowDown":t.preventDefault(),a((t=>{const n=t+i;return n<e?(sv(r.current[n]),n):t}));break;case"ArrowRight":t.preventDefault(),a((t=>{const n=Math.min(t+1,e-1);return sv(r.current[n]),n}));break;case"ArrowUp":t.preventDefault(),a((e=>{const t=e-i;return t>=0?(sv(r.current[t]),t):e}));break;case"ArrowLeft":t.preventDefault(),a((e=>{const t=Math.max(e-1,0);return sv(r.current[t]),t}))}};(0,b.useEffect)((()=>{a(n)}),t);return e=>({ref:t=>{t&&(r.current[e]=t)},tabIndex:e===o?0:-1,onKeyDown:s,onClick:()=>a(e)})},cv=(e,t)=>n=>{ov({event:n,eventIdentifier:"select_gif",onClick:n=>{e(t),n.preventDefault()}})},dv=e=>e.gifs,uv=({query:e,onGifClick:t})=>{const{isFetching:n,gifs:i,fetchingFailed:r}=(0,m.GV)(dv),o=lv(i.length,[e],0,2);if(n)return(0,v.jsx)(w.A,{});const a=(0,Xe.Tl)("send");return(0,v.jsxs)(iv,{children:[r?(0,v.jsx)(Vf,{children:(0,Xe.Tl)("gifs_load_error")}):null,r||0!==i.length?null:(0,v.jsx)(Vf,{children:(0,Xe.Tl)("no_gifs_found")}),i.map(((e,n)=>(0,v.jsx)(tv,{children:(0,v.jsx)(nv,Object.assign({},o(n),{style:{background:`url(${e.url}) center center / cover`},onClick:cv(t,e),"aria-label":e.title?`${a} ${e.title} gif`:`${a} gif`}))},e.url)))]})},pv=({query:e,handlSearchInputChange:t,onGifClick:n})=>{const i=Bo(),{gifs:r}=(0,m.GV)(dv);return(0,v.jsxs)(ev,{onClick:e=>{e.stopPropagation()},tabIndex:-1,role:"none",children:[(0,v.jsxs)(Gf,{children:[(0,v.jsx)($f,{children:(0,v.jsx)(Te.In,{type:"Search",size:16,color:"iconMuted",ariaHidden:!0})}),(0,v.jsx)(qf,{ref:i,name:"gif",placeholder:(0,Xe.Tl)("search_gif"),onChange:t,onBlur:yr.BW,"aria-label":(0,Xe.Tl)("search_gif")}),(0,v.jsx)(Hf,{count:r.length,query:e})]}),(0,v.jsx)(Uf,{onWheel:u.b$,"aria-live":"off",children:(0,v.jsx)(uv,{query:e,onGifClick:n})})]})},hv=({onGifClick:e})=>{const t=(0,m.jL)(),[n,i]=(0,b.useState)(void 0);(0,b.useEffect)((()=>{t(av(Lt.Ay,n))}),[n,t]);const r=(0,b.useMemo)((()=>(0,rv.O)((e=>{i(e.target.value)}),200)),[]);return(0,v.jsx)(pv,{query:n,handlSearchInputChange:r,onGifClick:e})};var mv={name:"42d21o",styles:"right:0;left:45px"},gv={name:"42d21o",styles:"right:0;left:45px"};const xv=(0,k.Ay)("div",{target:"edc69mm0"})("&.fade-enter{opacity:0;}&.fade-enter-active{opacity:1;transition:opacity 150ms;}&.fade-exit{opacity:1;position:absolute;right:45px;",(({theme:e})=>e.isRtlLocale&&gv),";}&.fade-exit-active{position:absolute;right:45px;opacity:0;transition:opacity 150ms;",(({theme:e})=>e.isRtlLocale&&mv),";}"),fv=()=>{const{textField:{value:e},popover:{closePopover:t},onSubmit:n,disabled:i}=wx(),r=(0,b.useRef)(null),o=""===e.trim();return(0,v.jsx)(B.B1,{in:o,timeout:150,classNames:"fade",nodeRef:r,unmountOnExit:!0,children:(0,v.jsx)(xv,{ref:r,children:(0,v.jsxs)(rf,{type:"gif",children:[(0,v.jsx)(of,{title:(0,Xe.Tl)("gif_picker"),"aria-label":(0,Xe.Tl)("gif_picker"),disabled:i,children:(0,v.jsx)(sf,{})}),(0,v.jsx)(af,{children:(0,v.jsx)(hv,{onGifClick:e=>{const{url:i,width:r,height:o,attribution:a,title:s}=e;n((0,cn.Fp)(i,r,o,a,s)),t()}})})]})})})};var vv=n(93134);const yv=(0,k.Ay)("div",{target:"eeucxyc6"})({name:"1nj5ey2",styles:"display:flex;flex-wrap:nowrap;gap:6px;padding:12px 16px 0 16px;overflow-x:auto;overflow-y:hidden;scrollbar-width:none;-ms-overflow-style:none;&::-webkit-scrollbar{display:none;}"}),bv=(0,k.Ay)("div",{target:"eeucxyc5"})("display:flex;width:60px;height:60px;justify-content:center;align-items:center;position:relative;overflow:visible;&::after{content:'';position:absolute;top:0;left:0;right:0;bottom:0;border-radius:12px;box-shadow:inset 0 0 0 1px ",(0,k.w4)("alphaBlack10"),";pointer-events:none;z-index:1;}"),wv=(0,k.Ay)(vv.E9,{target:"eeucxyc4"})("width:60px;height:60px;object-fit:cover;display:block;border-radius:12px;opacity:1;cursor:",(e=>e.$isClickable?"pointer":"default"),";transition:opacity 0.2s ease;",(e=>e.$isClickable&&`\n    &:hover {\n      opacity: 0.9;\n    }\n\n    &:active {\n      opacity: 0.7;\n    }\n\n    &:focus-visible {\n      outline: 2px solid ${(0,k.w4)("primaryColor")};\n      outline-offset: 2px;\n    }\n  `),";"),jv=(0,k.Ay)("div",{target:"eeucxyc3"})("position:absolute;top:0;left:0;right:0;bottom:0;display:",(e=>e.$isVisible?"flex":"none"),";align-items:center;justify-content:center;background:",(0,k.w4)("uploadOverlay"),";border-radius:12px;"),kv=(0,k.Ay)(vr.A,{target:"eeucxyc2"})("position:absolute;top:-2px;",(e=>e.$isImage?"left: 44px;":"right: -2px;")," width:18px;height:18px;border-radius:50%;line-height:0;padding:0;box-sizing:border-box;z-index:4;&&{background:",(0,k.w4)("containerBaseNeutral"),";border:none;box-shadow:inset 0 0 0 20px ",(0,k.w4)("alphaBlack100"),";}&:hover{box-shadow:inset 0 0 0 20px ",(0,k.w4)("alphaBlack80"),";}&:focus-visible{outline:2px solid ",(0,k.w4)("primaryColor"),";outline-offset:2px;}"),Av=(0,k.Ay)("div",{target:"eeucxyc1"})("position:absolute;",(e=>e.$isImage?"bottom: -2px; left: 44px;":"bottom: -2px; right: -2px;")," width:20px;height:20px;line-height:0;z-index:5;"),Cv=(0,k.Ay)(jl.UC,{target:"eeucxyc0"})("height:44px;padding:0 12px;display:flex;align-items:center;justify-content:center;background:",(0,k.w4)("base"),";color:",(0,k.w4)("textDefault"),";font-size:13px;font-weight:400;line-height:20px;border-radius:8px;box-shadow:0 2px 8px ",(0,k.w4)("alphaBlack10"),";white-space:nowrap;max-width:none;");var Sv=n(96850),Tv=n(15452),_v=n(33096);const Ev=new Set(["image/jpeg","image/png","image/gif","image/bmp"]),Iv=e=>void 0!==e&&Ev.has(e);function zv(e){return"file_size"===e}function Nv(e){return"string"==typeof e&&null!==e.match("invalid_upload_extension")}const Mv=({id:e,file:t})=>async(n,i)=>{const r=i(),{session:o}=r,a=(e=>e.type.startsWith("image/")&&(0,Cx.SD)(e)?Ax.Sq.Image:Ax.Sq.File)(t),s=(0,x.xw)(r).split(",").map((e=>e.trim().toLowerCase().replace(".","")));const l=-1===(c=t.name).indexOf(".")?null:(null==(d=c.split("."))||null==(d=d.pop())?void 0:d.toLowerCase())||null;var c,d;if(null===l||-1===s.indexOf(l))return void n((0,Ax.nX)({id:e,file:t,uploadType:a,status:Ax.A8.Failed,uploadError:Ax.T8.ForbiddenFileExtension}));const u=(0,Ks.a4)(r.app);if(t.size>u)return void n((0,Ax.nX)({id:e,file:t,uploadType:a,status:Ax.A8.Failed,uploadError:Ax.T8.FileSizeTooLarge}));const p=new AbortController,h=n((0,Tv.ch)({predicate:t=>-1!==Ax.Km.indexOf(t.type)||t.type===Ot.AXP&&"id"in t&&t.id===e,effect:()=>p.abort()}));try{const i=(e=>{if((0,Cx.SD)(e)&&(0,Lo.I1)())return URL.createObjectURL(e)})(t);n((0,Ax.nX)({id:e,file:t,uploadType:a,status:Ax.A8.InProgress,uploadError:null,metadata:i?{previewUrl:i}:void 0})),i&&Iv(t.type)&&(async e=>{if(!e)return!1;const t=new Image;if(t.src=e,"function"==typeof t.decode)try{return await t.decode(),!0}catch{return!1}})(i);const r=await(async(e,t)=>{const n=[void 0,void 0];if(!e||Iv(t))return n;try{const t=await new Promise(((t,n)=>{const i=new Image;i.onload=()=>t(i),i.onerror=()=>n(new Error("Failed to load image for dimensions")),i.src=e}));return[t.width??void 0,t.height??void 0]}catch{return n}})(i,t.type),s=await(0,_v.Z)((()=>(0,sn.oT)(Lt.Ay,o,t,{dimensions:{width:r[0],height:r[1]},signal:p.signal})),{shouldNotRetry:e=>function(e){if(e instanceof Error){if("AbortError"===e.name)return!0;if("Upload aborted"===e.message)return!0;if("Upload aborted by user or system"===e.message)return!0}return!1}(e)||zv(e)||Nv(e)});n((0,Ax.nX)({id:e,uploadType:a,status:Ax.A8.Completed,metadata:{uploadId:s.id.toString(),uploadedUrl:s.publicUrl}}))}catch(t){const i=zv(t)?Ax.T8.FileSizeTooLarge:Nv(t)?Ax.T8.ForbiddenFileExtension:Ax.T8.UploadFailed;n((0,Ax.nX)({id:e,uploadType:a,status:Ax.A8.Failed,uploadError:i}))}finally{h()}};var Rv=n(57752),Bv=n(51213);const Pv=({image:e,index:t,totalCount:n,onRemove:i,onRetry:r,onPreview:o,fileSizeLimitMB:a})=>{const s=(0,qc.r)(),l=s&&e.uploadError,c=s&&e.status===Ax.A8.InProgress,d=!c&&!l;return(0,v.jsxs)(bv,{"aria-busy":!!c,"aria-live":c?"polite":"off",children:[(0,v.jsx)(wv,{src:e.src,alt:(0,Xe.Tl)("image_preview_alt",{index:String(t+1),total:String(n)}),loading:"lazy",loaded:!0,zoomable:!1,onClick:t=>{t.stopPropagation(),d&&o(e.id,t.currentTarget)},onKeyDown:t=>{if(("Enter"===t.key||" "===t.key)&&d){if(t.repeat)return;t.preventDefault(),o(e.id,t.currentTarget)}},tabIndex:d?0:void 0,$isClickable:d}),(0,v.jsx)(jv,{$isVisible:!!c,$isError:!!l,children:(0,v.jsx)(w.A,{size:"small",color:"whiteColor",inline:!0})}),l&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(jv,{$isVisible:!!l,$isError:!!l,children:e.uploadError===Ax.T8.UploadFailed&&(0,v.jsx)(Bv.$,{onClick:()=>r(e.id),testId:"image-upload-retry-button"})}),(0,v.jsx)(Av,{$isImage:!0,children:(0,v.jsxs)(jl.bL,{children:[(0,v.jsx)(jl.l9,{asChild:!0,children:(0,v.jsx)("div",{children:(0,v.jsx)(Rv.i,{errorCode:e.uploadError||null,testId:"image-upload-error-badge"})})}),(0,v.jsx)(Cv,{children:(0,Sv.Bb)(e.uploadError||null,a)})]})})]}),(0,v.jsx)(kv,{onClick:()=>i(e.id),"aria-label":(0,Xe.Tl)("remove_image",{index:String(t+1)}),title:(0,Xe.Tl)("remove_image",{index:String(t+1)}),variant:"subtle",$isImage:!0,children:(0,v.jsx)(Te.Ay,{type:"CloseM5",size:16,color:"iconOnInverse"})})]})},Lv=({images:e,onRemoveImage:t})=>{const n=(0,qc.r)(),i=(0,m.jL)(),r=(0,m.GV)(Px),o=(0,m.GV)(Bx),a=(0,m.GV)(Vx),s=(0,m.GV)(x.rp),l=(0,Ks.v0)(s),[c,d]=(0,b.useState)(e),u=(0,b.useMemo)((()=>{if(!n)return c.map((e=>Object.assign({},e,{uploadItemType:"image"})));const e=c.map((e=>Object.assign({},e,{uploadItemType:"image"}))),t=Object.values(o).map((e=>Object.assign({},e,{uploadItemType:"file"})));return[...e,...t].sort(_x)}),[n,c,o]),{openViewer:p,viewerOpen:h,currentImageIndex:g,imageBlocks:f,closeViewer:y,navigateToImage:w,returnFocus:j}=(({images:e})=>{const t=(0,qc.r)(),{viewerOpen:n,currentImageIndex:i,openViewer:r,closeViewer:o,navigateToImage:a,returnFocus:s}=ad({imageCount:e.length}),l=(0,b.useMemo)((()=>e.map((e=>({type:"image",id:e.id,url:e.src,width:e.width,height:e.height})))),[e]);return{openViewer:(0,b.useCallback)(((n,i)=>{const o=e.findIndex((e=>e.id===n));if(-1===o)return;const a=e[o],s=t&&a.status===Ax.A8.InProgress,l=t&&a.uploadError;s||l||r(o,i)}),[e,t,r]),viewerOpen:n,currentImageIndex:i,imageBlocks:l,closeViewer:o,navigateToImage:a,returnFocus:s}})({images:c});(0,b.useEffect)((()=>{const t=Object.keys(r).length>0;if(n&&t){if(null!==a)return void d(a);Tx(r).then((e=>{const t=e.sort(_x);d(t)}))}else d(e)}),[n,r,e,a]);const k=e=>{i((e=>(t,n)=>{const i=n(),r=Ox(i,e),o=null==r?void 0:r.file;r&&o&&r.status!==Ax.A8.InProgress&&t(Mv({id:e,file:r.file}))})(e))},A=e=>{n?(i((0,Ax.sq)(e)),i((e=>t=>{t({type:Ot.AXP,id:e})})(e))):t(e)};if(0===u.length)return null;const C=u.filter((e=>"image"===e.uploadItemType)).length;let S=0;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(yv,{role:"region","aria-label":(0,Xe.Tl)("image_previews"),children:u.map(((e,t)=>{if("file"===e.uploadItemType)return((e,t)=>{var n;return(0,v.jsx)(Sv.m1,{id:e.id,name:e.file.name,file:e.file,url:null==(n=e.metadata)?void 0:n.uploadedUrl,isUploading:e.status===Ax.A8.InProgress,hasError:!!e.uploadError,errorCode:e.uploadError,errorMessage:(0,Sv.Bb)(e.uploadError||null,l),onRetry:k,onRemove:A,removeFileIndex:t,isPreview:!0},e.id)})(e,t);const n=S++;return(0,v.jsx)(Pv,{image:e,index:n,totalCount:C,onRemove:A,onRetry:k,onPreview:p,fileSizeLimitMB:l},e.id)}))}),h&&(0,v.jsx)(od,{images:f,currentIndex:g,onClose:y,onNavigate:w,frameWindow:window,returnFocus:j})]})};const Ov=(0,k.Ay)("div",{target:"e1y8qs783"})("min-height:",(({theme:e})=>e.userIsFinMessenger?"45px":"48px"),";height:auto;max-height:200px;padding:0 ",(({theme:e,useUpdatedConversationPadding:t})=>t?e.conversationHorizontalPadding:e.globalHorizontalPadding),"px 0 ",(({theme:e,useUpdatedConversationPadding:t})=>t?e.conversationHorizontalPadding:e.globalHorizontalPadding),"px;width:100%;box-sizing:border-box;",ii.TD,";"),Dv=(0,k.Ay)("div",{target:"e1y8qs782"})("overflow:hidden;position:relative;color:",(0,k.w4)("textDefault"),";");var Hv={name:"11m65u3",styles:"transition:outline-width 150ms"};const Fv=(0,k.Ay)(Dv,{target:"e1y8qs781"})("border-radius:16px;border:1px solid ",(0,k.w4)("borderNeutral"),";background-color:",(0,k.w4)("inputAlt"),";outline:solid 0 ",(0,k.w4)("primaryColor"),";",(({transition:e})=>"none"===(null==e?void 0:e.transition.type)&&"entering"===(null==e?void 0:e.state)?null:Hv)," &:focus-within{outline-width:2px;}");var Vv={name:"1kru1si",styles:"box-shadow:0 3px 10px rgba(160, 120, 199, 0.4),0 4px 14px rgba(255, 99, 27, 0.35),0 5px 18px rgba(193, 182, 174, 0.2),0 2px 5px rgba(0, 0, 0, 0.15);&::after{opacity:0.3;inset:-7px;border-radius:31px;}"},Gv={name:"ybwo76",styles:"opacity:0.3;top:-7px;right:-7px;bottom:-7px;left:-7px;border-radius:31px"};const $v=(0,k.Ay)(Dv,{target:"e1y8qs780"})("overflow:visible;border-radius:",(({theme:e})=>`${e.composerBorderRadiusPx}px`),";box-shadow:",(({disabled:e,visibilityState:t})=>e&&t!==Qt.cy.shrinked?"0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.08)":"0 2px 8px rgba(160, 120, 199, 0.3), 0 3px 12px rgba(255, 99, 27, 0.25), 0 4px 16px rgba(193, 182, 174, 0.15), 0 2px 4px rgba(0, 0, 0, 0.12)"),";border:2px solid transparent;background:linear-gradient(",(0,k.w4)("inputAlt"),", ",(0,k.w4)("inputAlt"),") padding-box,",(({disabled:e,visibilityState:t,theme:n})=>e&&t!==Qt.cy.shrinked?`linear-gradient(135deg, ${n.borderNeutral}, ${n.borderNeutral}) border-box`:"linear-gradient(135deg, #a078c7 0%, #ff631b 50%, #c1b6ae 100%) border-box"),";outline:none;transition:width 0.35s cubic-bezier(0.22, 0.61, 0.36, 1),box-shadow 0.14s cubic-bezier(0.4, 0, 0.2, 1);&::after{content:'';position:absolute;top:-2px;right:-2px;bottom:-2px;left:-2px;border-radius:26px;padding:5px;background:linear-gradient(135deg, #a078c7, #ff631b, #c1b6ae);mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);mask-composite:exclude;opacity:0;z-index:-1;transition:opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1),inset 0.3s cubic-bezier(0.4, 0, 0.2, 1),border-radius 0.3s cubic-bezier(0.4, 0, 0.2, 1);pointer-events:none;",(({visibilityState:e,disabled:t})=>t||!e||e!==Qt.cy.collapsed&&e!==Qt.cy.visible?null:Gv),";}&:hover{",(({disabled:e,visibilityState:t})=>(!e||t===Qt.cy.shrinked)&&Vv),";}"),qv=e=>null!=e&&e.userImagesGrid?10:1,Uv=["onChange","onSubmit","onSetText","validate","initialValue","draftKey","disabled","conversationEnded","useUpdatedConversationPadding","visibilityState"];const Wv=e=>{let{onChange:t,onSubmit:n,onSetText:i,validate:r,initialValue:o="",draftKey:a=mg.A.NEW_CONVERSATION_DRAFT_ID,disabled:s=!1,conversationEnded:l=!1,useUpdatedConversationPadding:c=!1,visibilityState:d}=e,p=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,Uv);const[h,g]=(0,b.useState)(),[f,y]=(0,b.useState)((()=>o||mg.A.loadDraft(a)||"")),w=(0,m.jL)(),j=!(0,Lo.rr)(),k=(0,m.GV)(x.ve),A=qv(k),C=Ar(),[S,T]=(0,b.useState)(),_=(0,b.useRef)(null),E=(0,b.useRef)(null),I=()=>{mg.A.removeDraft(a),y(""),t&&t("")};(0,b.useEffect)((()=>{C&&l&&(I(),w((0,Ax.X0)()),w((0,Ax.aw)()))}),[C,l]);const z=(0,b.useCallback)((e=>{mg.A.saveDraft(a,e),y(e),t&&t(e)}),[a,t]);(0,b.useEffect)((()=>{null==i||i(z)}),[z,i]);const N=(0,b.useCallback)((e=>{setTimeout((()=>{(0,u.a8)(_.current,e||S)}),0),g(void 0)}),[S]),M=O(),R=(0,b.useRef)(null),B=(0,m.GV)((e=>e.composerDrafts.images)),P=C?$v:Fv;return(0,v.jsx)(bx.Provider,{value:{disabled:s,conversationEnded:l,visibilityState:d,onSubmit:(...e)=>{if(!r||r(f)){if(n(...e),w((0,Ax.X0)()),w((0,Ax.aw)()),I(),E.current&&(E.current.value=""),_.current){const e=_.current.getAttribute("aria-label");_.current.setAttribute("aria-label",(0,Xe.Tl)("message_sent")),_.current.focus();const t=()=>{var n,i,r,o;e?null==(r=_.current)||r.setAttribute("aria-label",e):null==(o=_.current)||o.removeAttribute("aria-label");null==(n=_.current)||n.removeEventListener("input",t),null==(i=_.current)||i.removeEventListener("blur",t)};_.current.addEventListener("input",t,{once:!0}),_.current.addEventListener("blur",t,{once:!0})}_.current&&_.current.focus()}},popover:{isTypeOpen:e=>h===e,closePopover:N,openPopover:e=>{var t;T(null==(t=_.current)?void 0:t.selectionEnd),g(e)}},textField:{value:f,setValue:z,ref:_,cursorPosition:S||f.length,setCursorPosition:T},imageDrafts:{images:B,addImage:e=>{B.length<A&&w((0,Ax.vp)(e))},removeImage:e=>w((0,Ax.Px)(e)),updateImage:(e,t)=>w((0,Ax.yy)({id:e,image:t})),uploadInputRef:E},useExpandedComposer:j},children:(0,v.jsx)(Ov,{ref:R,useUpdatedConversationPadding:c,children:(0,v.jsx)(P,Object.assign({transition:M,visibilityState:d,disabled:s},p))})})};function Kv(...e){return(...t)=>{for(const n of e)"function"==typeof n&&n(...t)}}function Xv(e,t){const n=e.window.getComputedStyle(t);return/(auto|scroll)/.test(n.overflow+n.overflowX+n.overflowY)}let Yv,Zv=0;function Jv(e){const{isDisabled:t,appWindow:n,mobileSaferiOnly:i}=e;(0,b.useLayoutEffect)((()=>{if(!t){if(Zv++,1===Zv){const e={window:n,document:n.document};Yv=(0,Lo.un)()?function(e){let t,n=null;const i=i=>{t=function(e,t){let n=t;for(;n&&!Xv(e,n);)n=n.parentElement;return n||e.document.scrollingElement||e.document.documentElement}(e,i.target),t===e.document.documentElement&&t===e.document.body||t.nodeType===Node.ELEMENT_NODE&&"auto"===e.window.getComputedStyle(t).overscrollBehavior&&(n=Qv(t,"overscrollBehavior","contain"))},r=n=>{t&&t!==e.document.documentElement&&t!==e.document.body?t.scrollHeight===t.clientHeight&&t.scrollWidth===t.clientWidth&&n.preventDefault():n.preventDefault()},o=()=>{n&&n()},a=Kv(ey(e.document,"touchstart",i,{passive:!1,capture:!0}),ey(e.document,"touchmove",r,{passive:!1,capture:!0}),ey(e.document,"touchend",o,{passive:!1,capture:!0}),ey(e.document,"focus",P.K,!0));return()=>{null==n||n(),a()}}(e):i?null:function(e){return Kv(Qv(e.document.documentElement,"paddingRight",e.window.innerWidth-e.document.documentElement.clientWidth+"px"),Qv(e.document.documentElement,"overflow","hidden"))}(e)}return()=>{Zv--,Yv&&0===Zv&&Yv()}}}),[t,n,i])}function Qv(e,t,n){const i=e.style[t];return e.style[t]=n,()=>{e.style[t]=i}}function ey(e,t,n,i){return e.addEventListener(t,n,i),()=>{e.removeEventListener(t,n,i)}}const ty=["children"];function ny(e){let{children:t}=e,n=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,ty);const i=(0,b.useContext)(Wr.t);return Jv(Object.assign({},n,{appWindow:i||window})),(0,v.jsx)(v.Fragment,{children:t})}const iy=e=>{const t=e.clipboardData||e.originalEvent.clipboardData,{items:n}=t,i=[],r=oy(n);for(const e in n){const t=n[e];if("file"===t.kind&&!r){const e=t.getAsFile();i.push(e)}}return i},ry=e=>e.dataTransfer.files,oy=e=>{if(e.length<=1)return!1;let t=!1,n=!1;for(const i in e){const r=e[i];"string"===r.kind&&"text/plain"===r.type&&(t=!0),"file"===r.kind&&(n=!0)}return t&&n};var ay=n(44644);const sy=(e,t,n)=>{const i=Math.max(0,n-t);if(0===i)return r=e.length+t,(0,Ve.oS)("attachment_limit_exceeded",{file_count:r,place:"composer"}),[];var r;return e.slice(0,i)},ly=({files:e})=>async(t,n)=>{const i=n(),r=Lx(i),o=(0,x.ve)(i),a=qv(o);if(0===e.length)return;sy(e,r,a).filter(Boolean).forEach((e=>{const n=(0,Qr.l)();t(Mv({id:n,file:e}))}))};const cy=(0,k.Ay)("div",{target:"e1yoqqo51"})({name:"1vaz8kq",styles:"position:relative;height:20px;overflow:hidden;pointer-events:none;user-select:none"});var dy={name:"k8nzfv",styles:"opacity:0;transform:translateY(-10px);transition:opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1),transform 0.5s cubic-bezier(0.4, 0, 0.2, 1)"},uy={name:"1so00h",styles:"opacity:1;transform:translateY(0);transition:opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1),transform 0.5s cubic-bezier(0.4, 0, 0.2, 1)"},py={name:"1ooqi06",styles:"opacity:0;transform:translateY(10px);transition:none"};const hy=(0,k.Ay)("span",{target:"e1yoqqo50"})("position:absolute;top:0;left:0;color:",(0,k.w4)("textMuted"),";font-family:inherit;font-size:inherit;line-height:20px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;pointer-events:none;user-select:none;width:100%;",(({state:e})=>{switch(e){case"enter":return py;case"active":return uy;case"exit":return dy;default:return(0,k.AH)("")}}),";"),my=({texts:e,rotationInterval:t=3e3,className:n})=>{const[i,r]=(0,b.useState)((()=>e.map(((e,t)=>({text:e,state:0===t?"active":"enter"})))));return(0,b.useEffect)((()=>{if(e.length<=1)return;let n=0;const i=setInterval((()=>{const t=(n+1)%e.length;e.length;r((e=>e.map(((e,i)=>i===n?Object.assign({},e,{state:"exit"}):i===t?Object.assign({},e,{state:"active"}):Object.assign({},e,{state:"enter"}))))),n=t}),t);return()=>clearInterval(i)}),[e.length,t]),1===e.length?(0,v.jsx)(cy,{className:n,children:(0,v.jsx)(hy,{state:"active",children:e[0]})}):(0,v.jsx)(cy,{className:n,children:i.map(((e,t)=>(0,v.jsx)(hy,{state:e.state,children:e.text},t)))})},gy=["placeholder","onChange","onTyping","autoFocus","maxHeight","paddingTop","marginTop","onFocus","onBlur","placeholderTexts","shouldAnimatePlaceholder","placeholderRotationInterval","useDesktopLayoutOnMobileSize"];const xy=(0,k.Ay)("div",{target:"e1j0ryx4"})("background-color:",(0,k.w4)("inputAlt"),";min-height:",(({useExpandedComposer:e,theme:t})=>!e&&t.userIsFinMessenger?"45px":"0px"),";position:relative;margin-top:",(({$marginTop:e})=>e??0),"px;",ii.TD,";");var fy={name:"1vdszam",styles:"padding:0 16px 0 16px"};const vy=(0,k.Ay)("pre",{target:"e1j0ryx3"})("box-sizing:border-box;font-family:",(0,k.w4)("fontSansSerif"),";font-size:14px;font-weight:normal;line-height:150%;max-height:",(0,k.xk)("maxHeight"),"px;overflow:hidden;overflow-wrap:break-word;padding:",(({useExpandedComposer:e})=>e?"12px 8px 2px 14px":"14px 72px 14px 16px"),";",(({useExpandedComposer:e,theme:t,$useDesktopLayoutOnMobileSize:n})=>!e&&t.isMobileSize&&n&&!t.userIsFinMessenger&&fy),";",(({useExpandedComposer:e,theme:t})=>!e&&(0,k.AH)("padding-left:",t.userIsFinMessenger?"36px":"16px",";")),";padding-top:",(({paddingTop:e,useExpandedComposer:t})=>e+(t?0:2)),"px;visibility:hidden;width:100%;white-space:pre-wrap;");var yy={name:"11g4mt0",styles:"font-size:16px"},by={name:"1vdszam",styles:"padding:0 16px 0 16px"};const wy=(0,k.Ay)("textarea",{target:"e1j0ryx2"})("appearance:none;box-sizing:border-box;resize:none;font-family:",(0,k.w4)("fontSansSerif"),";font-size:14px;font-weight:normal;inset:0;line-height:150%;max-height:",(0,k.xk)("maxHeight"),"px;outline:none;overflow-wrap:break-word;padding:14px 72px 14px 16px;",(({theme:e,$useDesktopLayoutOnMobileSize:t})=>e.isMobileSize&&t&&!e.userIsFinMessenger&&by)," padding-top:",(({theme:e,paddingTop:t})=>e.isMobileSize?0:t+2),"px;position:absolute;white-space:pre-wrap;width:100%;background-color:",(0,k.w4)("inputAlt"),";overscroll-behavior:contain;scrollbar-color:",(0,k.w4)("alphaBlack40")," transparent;scrollbar-width:thin;&::-webkit-scrollbar{appearance:none;width:5px;}&::-webkit-scrollbar-thumb{background-color:",(0,k.w4)("alphaBlack40"),";border-radius:5px;}&::-webkit-scrollbar-track{background-color:transparent;}&::placeholder{color:",(0,k.w4)("textMuted"),";}&:disabled{cursor:not-allowed;}&:disabled[data-visibility-shrinked='true']{cursor:not-allowed;}",(({theme:e})=>e.isMobileBrowser&&yy),";");var jy={name:"11g4mt0",styles:"font-size:16px"},ky={name:"18r0t9p",styles:"right:16px"};const Ay=(0,k.Ay)("div",{target:"e1j0ryx1"})("position:absolute;top:12px;left:",(({theme:e})=>e.userIsFinMessenger?"36px":"16px"),";right:72px;",(({theme:e,$useDesktopLayoutOnMobileSize:t})=>e.isMobileSize&&t&&!e.userIsFinMessenger&&ky)," pointer-events:none;font-family:",(0,k.w4)("fontSansSerif"),";font-size:14px;line-height:150%;",(({theme:e})=>e.isMobileBrowser&&jy),";");var Cy={name:"11g4mt0",styles:"font-size:16px"};const Sy=(0,k.Ay)("textarea",{target:"e1j0ryx0"})("appearance:none;box-sizing:border-box;resize:none;font-family:",(0,k.w4)("fontSansSerif"),";font-size:14px;font-weight:normal;inset:0;line-height:150%;max-height:",(0,k.xk)("maxHeight"),"px;outline:none;overflow:auto;overflow-wrap:break-word;padding:12px 8px 2px 16px;padding-top:",(0,k.xk)("paddingTop"),"px;position:absolute;white-space:pre-wrap;width:100%;background-color:",(0,k.w4)("inputAlt"),";padding-left:",(({theme:e})=>e.userIsFinMessenger?"36px":"16px"),";overscroll-behavior:contain;scrollbar-color:",(0,k.w4)("alphaBlack40")," transparent;scrollbar-width:thin;&::-webkit-scrollbar{appearance:none;width:5px;}&::-webkit-scrollbar-thumb{background-color:",(0,k.w4)("alphaBlack40"),";border-radius:5px;}&::-webkit-scrollbar-track{background-color:transparent;}&::placeholder{color:",(0,k.w4)("textMuted"),";}&:disabled{cursor:not-allowed;}&:disabled[data-visibility-shrinked='true']{cursor:not-allowed;}",(({theme:e})=>e.isMobileBrowser&&Cy),";"),Ty=e=>{let{placeholder:t,onChange:n,onTyping:i,autoFocus:r=!0,maxHeight:o=200,paddingTop:a=12,marginTop:s=0,onFocus:l,onBlur:c,placeholderTexts:d,shouldAnimatePlaceholder:p=!1,placeholderRotationInterval:h=3e3,useDesktopLayoutOnMobileSize:g=!1}=e,x=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,gy);const{onSubmit:f,textField:{value:y,setValue:w,ref:j,setCursorPosition:k},popover:{isTypeOpen:A},disabled:C,conversationEnded:S,visibilityState:T,useExpandedComposer:_,imageDrafts:E}=wx(),{footerRef:I}=(0,b.useContext)(Zh),z=Ar(),N=z&&S&&T!==Qt.cy.shrinked,M=z&&S&&T===Qt.cy.shrinked,R=(0,m.jL)(),B=(0,qc.r)(),L=(0,m.GV)(Lx),O=(0,m.GV)(Px),D=(0,m.GV)(Bx),H=z&&C,F=(0,b.useMemo)((()=>{if(i)return(0,Jp.n)((()=>i()),1e3)}),[i]),V=(0,m.GV)((e=>e.session)),[G,$]=(0,b.useState)(!1),q=(0,m.GV)((e=>e.app.isMessengerOpen)),U=(0,b.useRef)(!1);(0,b.useEffect)((()=>{r&&j.current&&!1===U.current&&q&&((0,u.a8)(j.current,y.length),U.current=!0),q||(U.current=!1)}),[r,j,y,q]);const W=e=>{null==l||l(e),(0,Lo.rr)()&&j.current&&setTimeout((()=>{var e;I.current?I.current.scrollIntoView({behavior:"smooth",block:"start"}):null==(e=j.current)||e.scrollIntoView({behavior:"smooth",block:"start"})}),200)},K=e=>{null==c||c(e)},X=e=>{w(e.target.value),k(e.target.selectionEnd),n&&n(e)},Y=e=>{try{if(H)return void e.preventDefault();const t=iy(e),n=t.filter((e=>e.type.startsWith("image/")));if(t.length>0&&e.preventDefault(),B&&t.length>0)R(ly({files:Array.from(t)}));else if(n.length>0){const e=n[0],t=Math.random().toString(36).substring(2,11),i=URL.createObjectURL(e);(0,Cx.kn)(e).then((n=>{const r={id:t,file:e,src:i,width:n?n.width:0,height:n?n.height:0,status:Ax.A8.NotStarted};E.addImage(r)})).catch((()=>{(0,ay.jP)("Error getting image preview for pasted file")}))}}catch(e){(0,ay.jP)(`Error handling pasted files: ${e}`)}},Z=async e=>{if(!("Enter"!==e.key||e.altKey||e.shiftKey||G||A("typeaheadEmoji")||(0,Lo.rr)())){const t=E.images,n=""!==y.trim(),i=t.length>0;if(!(n||i||L>0))return;if(e.preventDefault(),C)return;if(B&&L>0){const e=await zx(O),t=Nx(D),i=n?(0,cn.$B)(y):[];return void f([...e,...t,...i],null)}if(t.length<=1){const{blocks:e,file:n}=Ex(y,t);if(0===e.length)return;n?f(e,n):f(e)}else try{if(!V)return;const e=await Promise.all(t.map((e=>(0,sn.oT)(Lt.Ay,V,e.file,{dimensions:{width:e.width,height:e.height}})))),i=Ix(e.map(((e,n)=>({url:e.publicUrl,width:t[n].width,height:t[n].height})))),r=n?(0,cn.$B)(y):[];f([...i,...r],null)}catch(e){return}}F&&F()},J=(0,Lo.un)()?{onTouchEnd:P.K,onTouchStart:P.K}:{},Q=e=>{e.preventDefault(),e.stopPropagation()},ee=e=>{try{if(e.preventDefault(),e.stopPropagation(),H)return;const t=ry(e);if(!t||0===t.length)return;const n=Array.from(t).filter((e=>e.type.startsWith("image/")));if(0===t.length)return;if(B)R(ly({files:Array.from(t)}));else if(n.length>0){const e=n[0],t=Math.random().toString(36).substring(2,11);(0,Cx.kn)(e).then((n=>{if(!n)return;const i=(0,Ks.U$)(n.src,e.name,e.type)||e,r={id:t,file:i,src:n.src??URL.createObjectURL(i),width:n.width||0,height:n.height||0,status:Ax.A8.NotStarted};E.addImage(r)})).catch((()=>{}))}}catch(e){}},te=Object.assign({},J,x),ne=p&&d&&d.length>0&&!y;return(0,v.jsxs)(xy,{useExpandedComposer:_,$useDesktopLayoutOnMobileSize:g,$marginTop:s,onDrop:ee,onDragOver:Q,children:[(0,v.jsxs)(vy,{maxHeight:o,paddingTop:a,useExpandedComposer:_,$useDesktopLayoutOnMobileSize:g,"aria-hidden":"true",children:[y,(0,v.jsx)("br",{})]}),(0,v.jsx)(ny,{mobileSaferiOnly:!0,children:_?(0,v.jsx)(Sy,Object.assign({rows:1,ref:j,onCompositionStart:()=>$(!0),onCompositionEnd:()=>$(!1),onKeyDown:Z,onPaste:Y,onDrop:ee,onDragOver:Q,value:y,placeholder:ne?"":t,"aria-label":t,onChange:X,maxHeight:o,paddingTop:a,onFocus:W,onBlur:K,disabled:N,readOnly:M,"data-visibility-shrinked":T===Qt.cy.shrinked},te)):(0,v.jsx)(wy,Object.assign({rows:1,ref:j,onCompositionStart:()=>$(!0),onCompositionEnd:()=>$(!1),onKeyDown:Z,onPaste:Y,onDrop:ee,onDragOver:Q,value:y,placeholder:ne?"":t,"aria-label":t,onChange:X,maxHeight:o,paddingTop:a,$useDesktopLayoutOnMobileSize:g,onFocus:W,onBlur:K,disabled:N,readOnly:M,"data-visibility-shrinked":T===Qt.cy.shrinked},te))}),ne&&(0,v.jsx)(Ay,{$useDesktopLayoutOnMobileSize:g,children:(0,v.jsx)(my,{texts:d,rotationInterval:h})})]})},_y=(0,k.Ay)(jl.UC,{target:"e1nzqzhi0"})("background:",(0,k.w4)("base"),";color:",(0,k.w4)("textDefault"),";padding:12px;min-width:100px;max-width:300px;width:fit-content;justify-content:center;align-items:center;gap:4px;border-radius:12px;border:1px solid ",(0,k.w4)("borderNeutral"),";box-shadow:",(0,k.w4)("shadowMedium"),";font-size:13px;font-weight:400;line-height:150%;white-space:nowrap;");var Ey={name:"vhahf5",styles:"right:0;left:8px"},Iy={name:"vhahf5",styles:"right:0;left:8px"};const zy=(0,k.Ay)("div",{target:"e166ta0"})("&.fade-enter{opacity:0;}&.fade-enter-active{opacity:1;transition:opacity 150ms;}&.fade-exit{opacity:1;position:absolute;right:8px;",(({theme:e})=>e.isRtlLocale&&Iy),";}&.fade-exit-active{position:absolute;right:8px;opacity:0;transition:opacity 150ms;",(({theme:e})=>e.isRtlLocale&&Ey),";}"),Ny=e=>{const t=(0,b.useRef)(null),{onSubmit:n,disabled:i,imageDrafts:r,textField:o}=wx(),a=(0,m.jL)(),s=(0,qc.r)(),l=(0,m.GV)(Lx);(0,b.useEffect)((()=>{r.uploadInputRef.current=t.current}),[r.uploadInputRef]);const c=(0,b.useRef)(null),d=(0,m.GV)(x.ve),u=qv(d),p=e.allowMultipleUploads&&u>1,h=s?l:r.images.length,g=h<u,f=()=>{var e;(0,Lo.rr)()?setTimeout((()=>{var e;null==(e=t.current)||e.click()}),100):null==(e=t.current)||e.click()},y=(0,b.useMemo)((()=>s&&l>=10),[s,l]),w=(0,b.useMemo)((()=>i||y),[i,y]),j=()=>(0,v.jsx)(Yx,{disabled:w,"aria-label":(0,Xe.Tl)("upload_attachment"),onClick:f,"data-type":"upload",children:(0,v.jsx)(Te._x,{type:"AttachmentIcon"})});return(0,v.jsx)(B.B1,{in:g,timeout:150,classNames:"fade",nodeRef:c,unmountOnExit:!0,children:(0,v.jsxs)(zy,{ref:c,children:[(0,v.jsx)("input",{ref:t,type:"file",multiple:p,disabled:w,onChange:e=>{const i=e.target.files;if(!i)return;const l=u-h,c=Array.from(i);if(l<=0)return void(0,Ve.oS)("attachment_limit_exceeded",{file_count:i.length,place:"composer",source:"upload_button"});const d=c.slice(0,l);d.length<c.length&&(0,Ve.oS)("attachment_limit_exceeded",{file_count:c.length-d.length,place:"composer",source:"upload_button"}),d.forEach((e=>(e=>{s?a(ly({files:[e]})):(0,Cx.kn)(e).then((t=>{if(t){const{width:n,height:i,src:o}=t,a=(0,Ks.U$)(t.src,e.name,e.type);a&&r.addImage({id:Math.random().toString(36).substring(2,11),file:a,src:o,width:n,height:i,status:Ax.A8.NotStarted})}else{const{name:t,type:i,size:r}=e,a=(0,cn.VJ)(t,i,r),s=o.value.trim()?(0,cn.$B)(o.value):[];n([...a,...s],e)}})).catch((()=>{}))})(e))),t.current&&(t.current.value="")},hidden:!0,accept:e.allowedAttachmentExtensions,"data-testid":"composer-upload-input"}),(()=>{if(!y)return j();const e=(0,Xe.Tl)("upload_max_files_allowed",{limit:10..toString()});return(0,v.jsxs)(jl.bL,{defaultOpen:!s,children:[(0,v.jsx)(jl.l9,{asChild:!0,children:j()}),(0,v.jsx)(_y,{children:e})]})})()]})})};var My=n(27155);const Ry=":";function By(e,t,n,i){const r=t-n.length-1,o=e.substring(0,Math.max(0,r))+e.substring(t),a=(0,u.f$)(o,i,r);return Object.assign({text:a,cursorPosition:r+i.length},{emojiTypeaheadState:{isActive:!1,suggestions:[],currentTypeaheadTerm:null}})}const Py=(e,t)=>{const n=(0,Ms.Fu)({useFallback:!0}),i=new RegExp(`${Ry}(?<identifier>[^\\s${Ry}]{2,})(?<terminator>[${Ry}])?`,"gi");let r=null,o=null,a=null;for(;null!=(r=i.exec(e));){const{index:e,groups:n}=r;if(e>t)break;const{identifier:i,terminator:s}=n||{};if(s&&(a=s),t===e+1+i.length+(a?a.length:0)){o=i;break}}if(!o)return{emojiTypeaheadState:{isActive:!1,suggestions:[],currentTypeaheadTerm:null}};if(a){var s;const i=null==(s=n.find((e=>o===e.title)))?void 0:s.emoji;return i?By(e,t,`${o}${a}`,i):{emojiTypeaheadState:{isActive:!1,suggestions:[],currentTypeaheadTerm:null}}}const l=new RegExp(`^${c=o,c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}`,"i");var c;const d=n.filter((e=>l.test(e.title)));return{emojiTypeaheadState:{isActive:!(0,My.I)(d),suggestions:d,currentTypeaheadTerm:o}}};const Ly=(0,k.Ay)("div",{target:"e1wapn193"})("box-sizing:border-box;position:relative;overflow-x:hidden;width:330px;height:260px;padding:",10,"px 0px;display:flex;flex-direction:column;flex-grow:0;align-items:stretch;font-size:",14,"px;"),Oy=(0,k.Ay)("span",{target:"e1wapn192"})("padding:",10,"px 20px;&,*{cursor:pointer;}&:hover{background:",(0,k.w4)("backgroundHover"),";}"),Dy=(0,k.Ay)("span",{target:"e1wapn191"})("padding:",10,"px 20px;background-color:",(0,k.w4)("backgroundHover"),";"),Hy=(0,k.Ay)("span",{target:"e1wapn190"})({name:"nkt64x",styles:"margin-right:10px"}),Fy=["Down","ArrowDown","Up","ArrowUp","Enter","Tab","Esc","Escape"],Vy=({typeaheadSuggestions:e,frameWindow:t,onSelect:n})=>{const i=(0,b.useRef)(null),[r,o]=(0,b.useState)(0),a=(0,b.useRef)(r),s=(0,b.useCallback)((e=>{a.current=e,o(e)}),[]),l=(0,b.useCallback)((e=>{const t=10+34*e;i.current&&i.current.scrollTo&&i.current.scrollTo(0,t)}),[i]),c=(0,b.useCallback)((t=>{let i,r;switch(t.key){case"Down":case"ArrowDown":i=Math.min(a.current+1,e.length-1),s(i),l(i);break;case"Up":case"ArrowUp":i=Math.max(a.current-1,0),s(i),l(i);break;case"Enter":case"Tab":r=e[a.current],n(r.emoji)}}),[a,n,l,s,e]);return(0,b.useEffect)((()=>((0,u.q2)(t,"keydown",c),()=>{(0,u.f)(t,"keydown",c)})),[t,c]),(0,v.jsx)(Ly,{ref:i,tabIndex:-1,"data-testid":"emoji-typeahead-suggestions",children:e.map(((e,t)=>{const i=t===a.current,r=i?Dy:Oy;return(0,v.jsxs)(r,{"data-testid":"emoji-typeahead-suggestion","aria-selected":i,onClick:()=>n(e.emoji),children:[(0,v.jsx)(Hy,{children:e.emoji}),e.title]},`emoji-${e.title}`)}))})};const Gy=(0,k.Ay)("div",{target:"e1vqfiac1"})({name:"16hjiy4",styles:"position:relative;display:flex;flex-direction:column"}),$y=(0,k.Ay)("div",{target:"e1vqfiac0"})({name:"13afnc",styles:"position:absolute;top:20px"}),qy=({children:e})=>{const t=(0,Wr.x)(),{textField:{value:n,cursorPosition:i,setValue:r},popover:{isTypeOpen:o,openPopover:a,closePopover:s}}=wx(),[l,c]=(0,b.useState)(!1),d=(0,b.useMemo)((()=>((e,t)=>{try{return Py(e,t)}catch(e){return{emojiTypeaheadState:{isActive:!1,suggestions:[],currentTypeaheadTerm:null}}}})(n,i)),[n,i]),{emojiTypeaheadState:u,text:p,cursorPosition:h}=d;(0,b.useEffect)((()=>{p&&h&&(r(p),s(h))}),[p,h,r,s]);const m=o("typeaheadEmoji");(0,b.useEffect)((()=>{u.isActive&&!l?a("typeaheadEmoji"):m&&s(h)}),[u,a,s,m,l,h]);return(0,v.jsxs)(Gy,{onKeyDown:e=>{u.isActive&&-1!==Fy.indexOf(e.key)?(e.preventDefault(),-1!==["Escape","End"].indexOf(e.key)&&(e.stopPropagation(),c(!0),s())):c(!1)},children:[e,(0,v.jsx)($y,{tabIndex:-1,children:(0,v.jsxs)(rf,{type:"typeaheadEmoji",children:[(0,v.jsx)(of,{title:"Type an :emoji",tabIndex:-1}),(0,v.jsx)(af,{showArrow:!1,children:(0,v.jsx)(Vy,{frameWindow:t,typeaheadSuggestions:u.suggestions,onSelect:e=>{const{text:t,cursorPosition:o}=By(n,i,u.currentTypeaheadTerm||"",e);r(t),s(o+e.length)}})})]})})]})};var Uy={name:"19f9cpk",styles:"margin-left:0;margin-right:auto"},Wy={name:"vhahf5",styles:"right:0;left:8px"},Ky={name:"vhahf5",styles:"right:0;left:8px"};const Xy=(0,k.Ay)("div",{target:"esf8er314"})("&.fade-enter{opacity:0;}&.fade-enter-active{opacity:1;transition:opacity 150ms;}&.fade-exit{opacity:1;right:8px;",(({theme:e})=>e.isRtlLocale&&Ky),";}&.fade-exit-active{opacity:0;transition:opacity 150ms;position:absolute;right:8px;",(({theme:e})=>e.isRtlLocale&&Wy),";}",(({theme:e})=>e.isMobileSize&&(0,k.AH)("margin-left:auto;",e.isRtlLocale&&Uy,";")),";");var Yy={name:"1k13dmf",styles:"right:0;left:77px;transform:translateX(-20px)"},Zy={name:"3m0i3z",styles:"right:0;left:77px"};const Jy=(0,k.Ay)("div",{target:"esf8er313"})("&.fade-enter{opacity:0;}&.fade-enter-active{opacity:1;transition:all 150ms;}&.fade-exit{opacity:1;position:absolute;right:77px;",(({theme:e})=>e.isRtlLocale&&Zy),";}&.fade-exit-active{opacity:0;transform:translateX(20px);transition:all 150ms;position:absolute;right:77px;",(({theme:e})=>e.isRtlLocale&&Yy),";}");var Qy={name:"bl89wh",styles:"right:0;left:55px;transform:translateX(20px)"},eb={name:"mxrjkq",styles:"right:0;left:55px"};const tb=(0,k.Ay)("div",{target:"esf8er312"})("&.fade-enter{opacity:0;}&.fade-enter-active{opacity:1;transition:all 150ms;}&.fade-exit{opacity:1;position:absolute;right:55px;",(({theme:e})=>e.isRtlLocale&&eb),";}&.fade-exit-active{opacity:0;transform:translateX(-20px);transition:all 150ms;position:absolute;right:55px;",(({theme:e})=>e.isRtlLocale&&Qy),";}"),nb=(0,k.Ay)("div",{target:"esf8er311"})("padding-bottom:8px;background-color:",(0,k.w4)("inputAlt"),";"),ib=(0,k.Ay)("div",{target:"esf8er310"})({name:"wbnp2s",styles:"display:flex;flex-direction:column;max-height:158px"}),rb=(0,k.Ay)("div",{target:"esf8er39"})({name:"1h8nup8",styles:"overflow:visible"});var ob={name:"vhahf5",styles:"right:0;left:8px"},ab={name:"vhahf5",styles:"right:0;left:8px"};const sb=(0,k.Ay)("div",{target:"esf8er38"})("&.fade-enter{opacity:0;}&.fade-enter-active{opacity:1;transition:opacity 150ms;}&.fade-exit{opacity:1;position:absolute;right:8px;",(({theme:e})=>e.isRtlLocale&&ab),";}&.fade-exit-active{opacity:0;position:absolute;right:8px;transition:opacity 150ms;",(({theme:e})=>e.isRtlLocale&&ob),";}display:flex;align-items:center;justify-content:flex-end;");var lb={name:"1k13dmf",styles:"right:0;left:77px;transform:translateX(-20px)"},cb={name:"3m0i3z",styles:"right:0;left:77px"};const db=(0,k.Ay)("div",{target:"esf8er37"})("&.fade-enter{opacity:0;}&.fade-enter-active{opacity:1;transition:all 150ms;}&.fade-exit{opacity:1;position:absolute;right:77px;",(({theme:e})=>e.isRtlLocale&&cb),";}&.fade-exit-active{opacity:0;right:77px;transform:translateX(20px);transition:all 150ms;",(({theme:e})=>e.isRtlLocale&&lb),";}display:flex;align-items:center;padding:4px;"),ub=(0,k.Ay)("div",{target:"esf8er36"})({name:"dcsrxs",styles:"display:flex;align-items:center;gap:8px;min-height:32px;height:32px;padding:4px 8px 0px 12px"}),pb=(0,k.Ay)("div",{target:"esf8er35"})({name:"14ec76i",styles:"display:flex;align-items:center;height:32px;position:relative;padding:4px;&.fade-enter{opacity:0;transform:translateX(-20px);}&.fade-enter-active{opacity:1;transform:translateX(0);transition:opacity 150ms,transform 150ms;}&.fade-exit{opacity:1;transform:translateX(0);}&.fade-exit-active{opacity:0;transform:translateX(-20px);transition:opacity 150ms,transform 150ms;}"}),hb=(0,k.Ay)("div",{target:"esf8er34"})("display:flex;align-items:center;padding:0 8px;gap:10px;background-color:",(0,k.w4)("inputAlt"),";"),mb=(0,k.Ay)("div",{target:"esf8er33"})("overflow:hidden;overflow-x:hidden;overflow-y:hidden;display:flex;align-items:flex-end;position:relative;width:100%;min-height:45px;background-color:",(0,k.w4)("inputAlt"),";border-radius:",(0,k.w4)("composerBorderRadiusPx"),"px;-ms-overflow-style:none;scrollbar-width:none;&::-webkit-scrollbar{display:none;width:0;height:0;background:transparent;}"),gb=(0,k.Ay)("div",{target:"esf8er32"})("position:absolute;left:16px;bottom:14px;display:flex;align-items:center;pointer-events:none;z-index:1;flex-shrink:0;svg{width:16px;height:16px;flex-shrink:0;path{fill:",(0,k.w4)("textDefault"),";}}");var xb={name:"10civrc",styles:"padding-left:0;padding-right:4px"};const fb=(0,k.Ay)("div",{target:"esf8er31"})("flex:1;width:100%;padding-bottom:10px;padding-left:4px;",(({theme:e})=>e.isRtlLocale&&xb),";");var vb={name:"12tbfhu",styles:"right:auto;left:8px"};const yb=(0,k.Ay)("div",{target:"esf8er30"})("position:absolute;right:8px;bottom:0;z-index:1;display:flex;align-items:flex-end;padding-bottom:7px;",(({theme:e})=>e.isRtlLocale&&vb),"button{height:32px!important;width:32px!important;padding:0!important;border-radius:32px!important;}&.fade-enter{opacity:0;}&.fade-enter-active{opacity:1;transition:opacity 150ms;}&.fade-exit{opacity:1;}&.fade-exit-active{opacity:0;transition:opacity 150ms;}");var bb=n(73273);const wb={name:"1p0xc46",styles:".voice-visualizer{width:100%;.voice-visualizer__canvas-container{margin:0;width:100%!important;canvas{cursor:pointer;border-radius:4px;}}.voice-visualizer__audio-info-container,.voice-visualizer__buttons-container{display:none;}}"},jb=(0,k.Ay)("div",{target:"e2w7n533"})("display:flex;flex:1 1 0%;overflow:hidden;height:36px;margin:5px 0;align-items:center;",wb,";");var kb={name:"1wd0p8c",styles:"gap:4px"};const Ab=(0,k.Ay)("div",{target:"e2w7n532"})("display:flex;align-items:center;justify-content:center;gap:8px;width:100%;",(({error:e})=>e&&kb),";"),Cb=(0,k.Ay)($t.y,{target:"e2w7n531"})({name:"mmdt3g",styles:"font-size:14px"}),Sb=(0,k.Ay)(Zx,{target:"e2w7n530"})("background-color:",(0,k.w4)("alphaBlack10"),"!important;&:hover{background-color:",(0,k.w4)("alphaBlack20"),"!important;}border:none;padding:0;"),Tb={MOBILE:{height:150,speed:1,barWidth:2,gap:1,rounded:1},DESKTOP:{height:150,speed:2,barWidth:1.5,gap:2,rounded:5}},_b=(0,b.forwardRef)((({voiceControls:e,onClear:t,onStopRecording:n,showStopButton:i,isTranscribing:r,onCancelTranscription:o},a)=>{const s=(0,di.A)(),l=(0,yr.IS)()?Tb.MOBILE:Tb.DESKTOP,{isRecordingInProgress:c,isProcessingRecordedAudio:d=!1,recordedBlob:u,error:p}=e,h=d&&!u,m=(0,b.useCallback)((()=>{null==t||t(),(0,Ve.A5)("cleared","voice_note_cleared","messenger","",{source:"voice_note_recorder"})}),[t]);return(0,b.useImperativeHandle)(a,(()=>({clearCanvas:m})),[m]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(Sb,{variant:"secondary",onClick:r?o:m,"aria-label":r?"Cancel transcription":"Clear recording",children:(0,v.jsx)(Te.Ay,{type:"CloseM5"})}),(0,v.jsxs)(jb,{children:[c&&!p&&(0,v.jsx)(bb.B,{controls:e,height:l.height,width:"100%",backgroundColor:"transparent",mainBarColor:s.alphaBlack100,secondaryBarColor:s.alphaBlack100,speed:l.speed,barWidth:l.barWidth,gap:l.gap,rounded:l.rounded,isDefaultUIShown:!1,isDownloadAudioButtonShown:!1,isControlPanelShown:!1,isAudioProcessingTextShown:!1,isProgressIndicatorTimeShown:!1,animateCurrentPick:!0,onlyRecording:!1,isProgressIndicatorShown:!1,isProgressIndicatorOnHoverShown:!1,isProgressIndicatorTimeOnHoverShown:!1,fullscreen:!0}),(r||p)&&(0,v.jsx)(Ab,{error:!!p,children:p?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(Te.Ay,{type:"Alert",color:"textError",inline:!0}),(0,v.jsx)(Cb,{color:s.textError,children:null==p?void 0:p.message})]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(w.A,{color:"defaultColor",size:"tiny",inline:!0}),(0,v.jsx)(Cb,{color:s.textMuted,children:"Transcribing..."})]})})]}),h&&(0,v.jsx)(Zx,{variant:"primary","aria-label":"Processing recording",disabled:!0,children:(0,v.jsx)(w.A,{color:"defaultColor",size:"tiny"})}),i&&n&&(0,v.jsx)(Zx,{variant:"primary",onClick:n,"aria-label":"Stop recording",children:(0,v.jsx)(Te.Ay,{type:"Stop",color:s.isPrimaryColorAsTheme?"iconDefault":"iconOnInverse"})}),r&&(0,v.jsx)(Zx,{variant:"primary","aria-label":"Transcribing",disabled:!0,children:(0,v.jsx)(Te._x,{type:"UpIcon"})})]})})),Eb=_b;async function Ib(){if(!navigator.permissions)return null;try{return(await navigator.permissions.query({name:"microphone"})).state}catch(e){if(function(e){if(!e)return!1;const t=e,n=(t.message??String(e)).toLowerCase(),i=(t.name??"").toLowerCase(),r=-1!==n.indexOf("not implemented on this platform"),o=-1!==n.indexOf("'microphone' is not a valid value for enumeration permissionname")||"typeerror"===i&&-1!==n.indexOf("microphone")&&-1!==n.indexOf("permissionname"),a=-1!==n.indexOf("permissions::query")||-1!==n.indexOf("does not support this api");return r||o||a||("notsupportederror"===i||"domexception"===i)&&a}(e))return null;throw e}}const zb=({isSupported:e,isRecording:t,startRecording:n,stopRecording:i})=>{const{element:r}=Al(),[o,a]=(0,b.useState)(!1),s=(0,b.useCallback)((async()=>{if(t)i();else try{if(!await(async()=>{try{const e=await Ib();return"granted"===e||"denied"!==e&&((await navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks().forEach((e=>e.stop())),!0)}catch(e){return!1}})()||!e)return a(!0),void(0,Ve.A5)("denied","voice_recording_permission","messenger","",{source:"voice_recording_button"});n()}catch(e){a(!0),(0,Ve.A5)("denied","voice_recording_permission_error","messenger","",{source:"voice_recording_button",message:(null==e?void 0:e.message)||"Unknown error"})}}),[t,e,n,i]),l=(0,b.forwardRef)(((e,t)=>(0,v.jsx)(zy,{children:(0,v.jsx)(Yx,Object.assign({},e,{ref:t,onClick:s,"aria-label":"Start recording",children:(0,v.jsx)(Te.Ay,{type:"Microphone",color:"iconMuted"})}))})));return e&&!o?(0,v.jsx)(l,{}):(0,v.jsxs)(jl.bL,{children:[(0,v.jsx)(jl.l9,{asChild:!0,children:(0,v.jsx)(l,{})}),r&&(0,fl.createPortal)((0,v.jsx)(jl.UC,{children:(0,v.jsx)(pl,{explanation:"Enable microphone access in your browser settings to use Voice Notes."})}),r)]})},Nb=["duration","recordingTime","error","stopRecording","recordedBlob","isRecordingInProgress","isProcessingRecordedAudio","clearCanvas"];const Mb=e=>{const{maxDuration:t=120,session:n,onTranscriptionComplete:i,onTranscriptionError:r}=e,[o,a]=(0,b.useState)(!1),[s,l]=(0,b.useState)(!1),c=(0,b.useRef)(null),d=(0,b.useRef)(null),[u,p]=(0,b.useState)(null),h=(0,bb.k)({onStartRecording:()=>{(0,Ve.A5)("started","voice_note_recording","messenger","",{source:"voice_note_recording"})},onStopRecording:()=>{(0,Ve.A5)("stopped","voice_note_recording","messenger","",{source:"voice_note_recording",duration:m})},onClearCanvas:()=>{},shouldHandleBeforeUnload:!1}),{duration:m,recordingTime:g,error:x,stopRecording:f,recordedBlob:v,isRecordingInProgress:y,isProcessingRecordedAudio:w,clearCanvas:j}=h,k=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(h,Nb),A=(0,b.useCallback)((()=>{j(),d.current=null,c.current&&(c.current.abort(),c.current=null),l(!1),p(null)}),[j]),C=(0,b.useCallback)((async e=>{if(!n||!i)return;if(e.size>10485760){if((0,Ve.A5)("exceeded","voice_note_file_size","messenger","",{file_size_kb:Math.round(e.size/1024)}),r){const e=new Error("File too large to transcribe");p(e),r(e)}A()}else{l(!0),c.current=new AbortController,(0,Ve.A5)("started","voice_transcription","messenger","",{blob_size:e.size,mime_type:e.type});try{const t=await(0,Lt.Ks)(n,e,c.current.signal);(0,Ve.A5)("success","voice_transcription","messenger","",{blob_size:e.size,mime_type:e.type}),i(t.text),A(),l(!1)}catch(e){if(e instanceof Error&&"AbortError"!==e.name&&((0,Ve.A5)("error","voice_transcription_error","messenger","",{message:e.message}),r)){const e=new Error("Transcription failed");p(e),r(e)}}finally{c.current&&(c.current=null)}}}),[n,i,r,A]),S=(0,b.useCallback)((()=>{c.current&&(c.current.abort(),(0,Ve.A5)("cancelled","voice_transcription_cancelled_by_user","messenger","",{source:"voice_transcription_cancelled_by_user"})),l(!1),A()}),[A]);return(0,b.useEffect)((()=>{const e=v!==d.current;!y&&v&&!x&&!s&&e&&n&&i&&(d.current=v,C(v))}),[y,v,x,s,n]),(0,b.useEffect)((()=>{g/1e3>=t&&(f(),(0,Ve.A5)("exceeded","voice_note_max_duration","messenger","",{max_duration_seconds:t}))}),[t,g]),(0,b.useEffect)((()=>{var e;!(!window.MediaRecorder||null==(e=navigator.mediaDevices)||!e.getUserMedia)?(async()=>"denied"===await Ib())().then((e=>{a(!e)})):a(!1)}),[]),Object.assign({duration:m,isSupported:o,recordingDuration:m,recordingTime:g,stopRecording:f,error:u||x,recordedBlob:v,isRecordingInProgress:y,isProcessingRecordedAudio:w,clearCanvas:A,isTranscribing:s,cancelTranscription:S},k)};var Rb=n(79225);const Bb=()=>(0,m.GV)((e=>(0,Nl.Gm)(e)||(0,Nl.BJ)(e))),Pb=()=>{var e,t,n;const i=Bb(),r=(0,m.GV)(Ng.CL),o=(i&&"header"in i?i.header:void 0)||r,a=null==o||null==(e=o.collapsed)?void 0:e.avatarGroup,s=i&&"lastParticipatingAdmin"in i?null==(t=i.lastParticipatingAdmin)?void 0:t.avatar:void 0;return(null==a||null==(n=a.avatars)?void 0:n[0])||s},Lb=({composerContent:e,placeholder:t,autoFocus:n,allowedActions:i,forceShowSubmitButton:r,onTyping:o,onFocus:a,onBlur:s,placeholderTexts:l,shouldAnimatePlaceholder:c,placeholderRotationInterval:d})=>{var u,p,h;const g=(0,b.useRef)(null),f=(0,b.useRef)(null),y=(0,b.useRef)(null),w=(0,b.useRef)(null),j=(0,b.useRef)(null),k=(0,b.useRef)(null),{useExpandedComposer:A,textField:C,imageDrafts:S,conversationEnded:T}=wx(),_=(0,b.useRef)(null),E=(0,m.GV)((e=>e.session)),I=Ar(),z=(0,m.GV)((e=>e.app.customEmojiMap||new Map)),N=Array.from(z.values()),M=(0,m.GV)(x.ve),R=qv(M),P=Pb(),L="dark"===(0,di.A)().themeMode,O=(0,m.GV)(Ng.CL),D=Bb(),H=D&&"header"in D?D.header:O,F=null==H||null==(u=H.collapsed)?void 0:u.avatarGroup,V=Mb({maxDuration:120,session:E,onTranscriptionComplete:(0,b.useCallback)((e=>{if(C.setValue(e),C.ref.current){const t=e.length;C.setCursorPosition(t),C.ref.current.setSelectionRange(t,t)}}),[C]),onTranscriptionError:(0,b.useCallback)((e=>{Ve.Ay.buildAndAddHcMetric("voice_transcription_error",{error:e.message})}),[])}),{isSupported:G,isRecordingInProgress:$,isProcessingRecordedAudio:q,startRecording:U,stopRecording:W,clearCanvas:K,isTranscribing:X,cancelTranscription:Y}=V,Z=""!==(null==e?void 0:e.trim())||S.images.length>0||(0,Lo.rr)()||r,J=$||q||X,Q=(0,qc.r)(),ee=(0,m.GV)(Lx),te=Q&&ee>0,ne=Q?ee:S.images.length,ie=S.images.length>0||Q&&ee>0,re=""!==(null==(p=C.value)?void 0:p.trim());if(J)return(0,v.jsx)(hb,{children:(0,v.jsx)(Eb,{ref:_,voiceControls:V,onClear:K,onStopRecording:W,showStopButton:$,isTranscribing:X,onCancelTranscription:Y})});if(I)return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(Lv,{images:S.images,onRemoveImage:S.removeImage}),(0,v.jsxs)(mb,{children:[(0,v.jsx)(gb,{children:P?(0,v.jsx)(Ne.e,{initials:P.initials,label:P.label,imageUrl:Uh(P,F,L),shape:P.shape,size:16,showStatus:"squircle"===P.shape,statusSize:6,statusBottomOffset:-3,statusRightOffset:-3}):(0,v.jsx)(Rb.A,{})}),(0,v.jsx)(fb,{children:(0,v.jsx)(Ty,{placeholder:t,onTyping:o,autoFocus:n,onFocus:a,onBlur:s,placeholderTexts:l,shouldAnimatePlaceholder:c,placeholderRotationInterval:d})}),!T&&(0,v.jsx)(yb,{children:(0,v.jsx)(Qx,{})})]})]});const oe=ie?70:142;return A?(0,v.jsxs)(nb,{children:[(0,v.jsxs)(ib,{children:[(0,v.jsx)("div",{children:(0,v.jsx)(Lv,{images:S.images,onRemoveImage:S.removeImage})}),(0,v.jsx)(rb,{children:i.emojis?(0,v.jsx)(qy,{children:(0,v.jsx)(Ty,{placeholder:t,onTyping:o,autoFocus:n,paddingTop:0,marginTop:12,maxHeight:oe,onFocus:a,onBlur:s})}):(0,v.jsx)(Ty,{placeholder:t,onTyping:o,autoFocus:n,paddingTop:0,marginTop:12,maxHeight:oe,onFocus:a,onBlur:s})})]}),(0,v.jsxs)(ub,{role:"group","aria-label":"Composer actions",children:[i.uploads&&ne<R&&(0,v.jsx)(B.B1,{in:ne<R,timeout:150,classNames:"fade",nodeRef:w,unmountOnExit:!0,children:(0,v.jsx)(pb,{ref:w,children:(0,v.jsx)(Ny,{allowMultipleUploads:i.uploads.allowMultipleUploads,allowedAttachmentExtensions:i.uploads.allowedAttachmentExtensions})})}),i.emojis&&(0,v.jsx)(db,{ref:f,children:(0,v.jsx)(Qf,{customEmojis:re?[]:N})}),i.gifs&&(0,v.jsx)(B.B1,{in:!Z&&!te,timeout:150,classNames:"fade",nodeRef:y,unmountOnExit:!0,children:(0,v.jsx)(pb,{ref:y,children:(0,v.jsx)(fv,{})})}),i.voiceNotes&&(0,v.jsx)(B.B1,{in:!Z&&!te,timeout:150,classNames:"fade",nodeRef:j,unmountOnExit:!0,children:(0,v.jsx)(pb,{ref:j,children:(0,v.jsx)(zb,{isSupported:G,isRecording:$,startRecording:U,stopRecording:W})})}),(0,v.jsx)("div",{style:{flex:1},"aria-hidden":"true"}),(0,v.jsx)(sb,{children:(0,v.jsx)(Qx,{})})]})]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(Lv,{images:S.images,onRemoveImage:S.removeImage}),(0,v.jsx)("div",{children:i.emojis&&!ie?(0,v.jsx)(qy,{children:(0,v.jsx)(Ty,{placeholder:t,onTyping:o,autoFocus:n,maxHeight:oe,marginTop:12,useDesktopLayoutOnMobileSize:!0,onFocus:a,onBlur:s})}):(0,v.jsx)(Ty,{placeholder:t,onTyping:o,autoFocus:n,maxHeight:oe,marginTop:12,useDesktopLayoutOnMobileSize:!0,onFocus:a,onBlur:s})}),(0,v.jsxs)(Jx,{useDesktopLayoutOnMobileSize:!0,children:[i.emojis&&!ie&&(0,v.jsx)(B.B1,{in:!Z,timeout:150,classNames:"fade",nodeRef:g,unmountOnExit:!0,children:(0,v.jsx)(Jy,{ref:g,children:(0,v.jsx)(Qf,{customEmojis:re?[]:N})})}),i.gifs&&!te&&(0,v.jsx)(fv,{}),i.uploads&&ne<R&&(0,v.jsx)(Ny,{allowMultipleUploads:i.uploads.allowMultipleUploads,allowedAttachmentExtensions:i.uploads.allowedAttachmentExtensions}),i.emojis&&!ie&&(0,v.jsx)(B.B1,{in:Z,timeout:150,classNames:"fade",nodeRef:f,unmountOnExit:!0,children:(0,v.jsx)(tb,{ref:f,children:(0,v.jsx)(Qf,{customEmojis:re?[]:N})})}),i.voiceNotes&&!(null!=(h=C.value)&&h.trim())&&!te&&(0,v.jsx)(zb,{isSupported:G,isRecording:$,startRecording:U,stopRecording:W}),(0,v.jsx)(B.B1,{in:Z,timeout:150,classNames:"fade",nodeRef:k,unmountOnExit:!0,children:(0,v.jsx)(Xy,{ref:k,children:(0,v.jsx)(Qx,{})})})]})]})},Ob=({initialValue:e,draftKey:t,composerContent:n,placeholder:i,disabled:r,conversationEnded:o,autoFocus:a,allowedActions:s,forceShowSubmitButton:l,onSubmit:c,onChange:d,onSetText:u,onTyping:p,onFocus:h,onBlur:m,useUpdatedConversationPadding:g,visibilityState:x,placeholderTexts:f,shouldAnimatePlaceholder:y,placeholderRotationInterval:b})=>(0,v.jsx)(Wv,{initialValue:e,onSubmit:c,draftKey:t,disabled:r,conversationEnded:o,onChange:d,onSetText:u,useUpdatedConversationPadding:g,visibilityState:x,"aria-live":"off",children:(0,v.jsx)(Lb,{composerContent:n,placeholder:i,autoFocus:a,allowedActions:s,forceShowSubmitButton:l,onTyping:p,onFocus:h,onBlur:m,placeholderTexts:f,shouldAnimatePlaceholder:y,placeholderRotationInterval:b})});const Db=(0,k.Ay)("div",{target:"e17243fp2"})("background-color:",(0,k.w4)("inputAlt"),";min-height:48px;position:relative;padding-bottom:1px;",ii.TD,";");var Hb={name:"11g4mt0",styles:"font-size:16px"};const Fb=(0,k.Ay)("input",{target:"e17243fp1"})("appearance:none;box-sizing:border-box;resize:none;font-family:",(0,k.w4)("fontSansSerif"),";font-size:14px;font-weight:normal;inset:0;line-height:20px;max-height:200px;outline:none;overflow-wrap:break-word;padding:14px 16px 14px 4px;white-space:pre-wrap;width:calc(100% - 24px);border-bottom:1px solid ",(0,k.w4)("borderEmphasisNeutral"),";padding-bottom:16px;margin:0 12px;background-color:",(0,k.w4)("inputAlt"),";&::placeholder{color:",(0,k.w4)("textMuted"),";}",(({theme:e})=>e.isMobileBrowser&&Hb)," ",(({theme:e,hasError:t})=>t&&(0,k.AH)("border-bottom:1px solid ",e.textError,";margin-bottom:6px;")),";"),Vb=(0,k.Ay)("span",{target:"e17243fp0"})("font-family:",(0,k.w4)("fontSansSerif"),";font-size:13px;line-height:13px;color:",(0,k.w4)("textError"),";padding:0 14px;"),Gb=({value:e,autoFocus:t,onChange:n,onBlur:i,errorMessage:r})=>{const o=(0,b.useRef)(null);(0,b.useEffect)((()=>{null!=o&&o.current&&t&&!e&&o.current.focus()}),[o,t,e]),(0,b.useEffect)((()=>{null!=o&&o.current&&r&&o.current.focus()}),[o,r]);const a=r?{"aria-invalid":!0}:{};return(0,v.jsxs)(Db,{children:[(0,v.jsx)(Fb,Object.assign({name:"email",ref:o,placeholder:Sa.o,value:e,type:"email",autoComplete:"email",onChange:e=>{const{value:t}=e.currentTarget;n&&n(t)},onBlur:e=>{const{value:t}=e.currentTarget;i&&i(t)},"aria-label":(0,Xe.Tl)("your_email"),hasError:!!r},a)),r&&(0,v.jsx)(Vb,{children:r})]})},$b=(0,k.Ay)("div",{target:"e11lf1ti0"})("background-color:",(0,k.w4)("inputAlt"),";min-height:90px;"),qb=({initialText:e,initialEmail:t="",draftKey:n=mg.A.NEW_CONVERSATION_DRAFT_ID,placeholder:i,autoFocus:r,disabled:o,onSubmit:a,onTyping:s})=>{const[l,c]=(0,b.useState)((()=>e||mg.A.loadDraft(n)||"")),[d,u]=(0,b.useState)(t),[p,h]=(0,b.useState)(""),g=(0,m.jL)();(0,b.useEffect)((()=>(g((0,Jt.Lt)()),()=>{g((0,Jt.Lt)())})),[g]);const x=""===l.trim()||""===d.trim()||!(0,Ta.B)(d.trim());return(0,v.jsxs)(Wv,{initialValue:e,validate:e=>d&&d.trim().length>0&&!(0,Ta.B)(d)?(h((0,Xe.Tl)("that_email_address_doesnt_look_quite_right")),!1):0!==e.trim().length,onSubmit:(...e)=>(a(e[0],null,null,d),!0),onChange:e=>{c(e)},draftKey:n,disabled:o||x,children:[(0,v.jsx)(Gb,{value:d,errorMessage:p,onChange:e=>{u(e)},onBlur:e=>{0!==e.trim().length?(0,Ta.B)(e)?h(""):h((0,Xe.Tl)("that_email_address_doesnt_look_quite_right")):h("")},autoFocus:r}),(0,v.jsxs)($b,{children:[(0,v.jsx)(qy,{children:(0,v.jsx)(Ty,{placeholder:i,onTyping:s,autoFocus:!1,maxHeight:135})}),(0,v.jsxs)(Jx,{forceStandardView:!0,children:[(0,v.jsx)(Qf,{insertOnly:!0}),(0,v.jsx)(Qx,{})]})]})]})},Ub="Continue conversation",Wb=({conversation:e,shouldShowUpfrontEmailComposer:t,onJoinConversationClick:n,onReactionSelect:i,allowNewConversation:r,accessToTeammateEnabledAfterBot:o,composerDisabled:s,onSetComposerText:l})=>{var c,d;const u=(0,m.jL)(),p=(0,a.useLocation)(),h=(0,a.useNavigate)(),[g]=(0,a.useSearchParams)(),f=(0,b.useRef)(null),y=(0,b.useRef)(null),w=(0,m.GV)(x.km),j=(0,m.GV)(x.a3),k=(0,m.GV)(ac.nC),A=(0,m.GV)(x.iO),C=(0,m.GV)(x.Ei),S=(0,m.GV)(Y.dI),T=null==S?void 0:S[0],_="string"==typeof k?k.trim():"",E=ug(),I=!e.id,z=(e=>{const t=(0,m.GV)((e=>e.aiSuggestions.aiSuggestions)),[n,i]=(0,b.useState)(0),r=(0,b.useRef)(null),o=t.length>0;return(0,b.useEffect)((()=>{if(e&&o)return r.current=setTimeout((()=>{i((e=>(e+1)%t.length))}),5e3),()=>{r.current&&(clearTimeout(r.current),r.current=null)};r.current&&(clearTimeout(r.current),r.current=null)}),[e,n,o,t.length]),e&&o?{text:t[n]||"",texts:t,timeout:5e3,shouldAnimate:!0}:e?{text:"",texts:[],timeout:0,shouldAnimate:!1}:{text:Ub,texts:[Ub],timeout:0,shouldAnimate:!1}})(I),N=(()=>{if(!A)return;if(e.preventEndUserReplies)return(0,Xe.Tl)("conversation_has_ended");return E===Qt.cy.shrinked?!C&&I?"Continue conversation":z.text:_||void 0})()||(null==e||null==(c=e.composerState)?void 0:c.placeholder)||(0,Xe.Tl)("message_placeholder"),M=(0,Dn.A)("mercuryUiChanges"),R=(0,m.GV)(x.MK),B=(0,qc.r)()||!(void 0===e.id)&&!e.composerState.customBotActive,P=(0,m.GV)(x.xw),L=(0,m.GV)(x.ed),O=null!=e&&e.uxStyle?"bot"===e.uxStyle:L,D=(0,Dn.A)("disableFinImageReading"),H=O&&D,F=(0,m.GV)(x.Bf)&&(0,Lo.I1)()&&!H,V=(0,m.GV)(x.VR),G=(0,m.GV)(xg.cE)&&!t,$=(0,b.useContext)(qa)||Ua,{meta:q}=Pl(),U=(0,b.useCallback)((()=>{if(E===Qt.cy.shrinked){if(A&&!C&&"/messages/conversation/new"===p.pathname&&T)return(0,Ve.A5)("clicked","existing_conversation","messenger","shrinked_composer",Object.assign({},q)),void h(`/messages/conversation/${T.id}`,{replace:!0});(0,Ve.A5)("clicked","new_conversation","messenger","shrinked_composer",Object.assign({},q)),"/messages/conversation/new"===p.pathname?h(`${p.pathname}${(0,sc.WC)({visibility:Qt.cy.collapsed})}`,{replace:!0}):h(`${p.pathname}${(0,sc.WC)({visibility:Qt.cy.visible})}`,{replace:!0})}}),[E,h,p.pathname,q,A,C,T]),W=(0,b.useCallback)((()=>{E===Qt.cy.collapsed&&h(`${p.pathname}${(0,sc.WC)({visibility:Qt.cy.shrinked})}`,{replace:!0})}),[E,h,p.pathname]),K=(0,m.GV)(li.b),X=!0===(null==K?void 0:K.finOnlyMessenger),J=(0,m.GV)((e=>e.openOnBoot)),Q=(0,b.useRef)(null==J?void 0:J.type);void 0===Q.current&&(Q.current=null==J?void 0:J.type);const ee=(0,b.useMemo)((()=>{if(s)return!0;const{parts:t,id:n}=e,i=t.filter((e=>"bot_intro"!==e.partType&&"article_link"!==e.partType&&"failed"!==e.saveState));return(!i||0!==i.length)&&!n}),[s,e]),te="whatsapp"===e.currentChannel,[ne,ie]=(0,b.useState)((null==e?void 0:e.defaultMessage)||mg.A.loadDraft((null==e?void 0:e.id)||mg.A.NEW_CONVERSATION_DRAFT_ID)||""),re=(0,m.GV)(x.Nl),oe=(0,b.useCallback)((t=>{G&&(""===t.trim()?u((0,gg.mN)(null,null==e?void 0:e.id)):u((0,gg.bU)(t,null==e?void 0:e.id)))}),[null==e?void 0:e.id,u,G]),ae=(0,b.useCallback)((t=>{ie(t),u((0,sn.GO)(null==e?void 0:e.id,t,new Date)),oe(t)}),[null==e?void 0:e.id,u,oe]),se=(0,b.useCallback)((e=>{y.current=e}),[]),le=(0,b.useCallback)((t=>{const n=(0,cn.$B)(t),i={clientId:(0,Qr.l)(),createdAt:new Date,body:n};u((0,sn.yk)(Lt.Ay,e.id,i,!1,e.lastParticipatingAdmin,j,!1,void 0))}),[u,e,j]);(0,b.useEffect)((()=>{l&&y.current&&l(y.current)}),[l]);const ce=(0,Z.dF)(e),de=ce&&ce.reactionsReply&&"text"!==ce.replyType;if(te)return(0,v.jsx)(Tg,{children:(0,v.jsx)(Ug,{})});if(de){const{reactionsReply:e}=ce,{reactionSet:t,reactionIndex:n}=e;return(0,v.jsx)(Tg,{children:(0,v.jsx)(fg.A,{reactionSet:t,reactionIndex:n,onReactionSelect:i})})}if(e.preventEndUserReplies&&!A)return(0,v.jsx)(Tg,{children:(0,v.jsx)(Dg,{allowNewConversation:r,accessToTeammateEnabledAfterBot:o,inboundConversationsDisabled:e.inboundConversationsDisabled,conversationEndedButton:e.conversationEndedButton})});if(null!=(d=e.ticket)&&null!=(d=d.sharing)&&d.canJoin){var ue;const t=null==(ue=e.ticket)?void 0:ue.sharing;return null!=t&&t.info?(0,v.jsx)(Tg,{children:(0,v.jsx)(Yg,{info:t.info,onJoinConversationClick:n})}):null}const pe="OPEN_NEW_CONVERSATION_ON_BOOT"===Q.current,he="/messages/conversation/new"===p.pathname&&E===Qt.cy.collapsed,me=X&&E===Qt.cy.shrinked,ge=pe&&X&&!he||me,xe=E===Qt.cy.shrinked,fe=A&&!C&&I;if(A&&!C&&I&&!T)return null;const ve=A&&I&&xe&&z.texts.length>0&&!fe,ye={draftKey:(null==e?void 0:e.id)||mg.A.NEW_CONVERSATION_DRAFT_ID,placeholder:N,disabled:ee,conversationEnded:e.preventEndUserReplies,autoFocus:!(0,Lo.rr)()&&!ge&&((null==$?void 0:$.composerShouldFocus)??!0),onSubmit:(t,n,i,r)=>{const o={clientId:(0,Qr.l)(),createdAt:new Date,body:t,file:n};u((0,sn.yk)(Lt.Ay,e.id,o,!1,e.lastParticipatingAdmin,j,i,r));const a=g.get("visibility");a!==Qt.cy.collapsed&&a!==Qt.cy.shrinked||h(`${p.pathname}${(0,sc.WC)({visibility:Qt.cy.visible})}`,{replace:!0})},onChange:ae,onTyping:()=>{s||u((0,sn.xA)(null==e?void 0:e.id))},onFocus:U,onBlur:W,placeholderTexts:fe?[]:["Ask Fin anything",...z.texts],shouldAnimatePlaceholder:ve,placeholderRotationInterval:z.timeout},be=(0,Z.wX)(e),we=A&&I&&E===Qt.cy.collapsed&&!t&&!fe;return be?(0,v.jsx)(sm,{isIntercomLinkEnabled:w,isNewPrivacyPolicyLayoutVisible:!1,children:w&&!re?(0,v.jsx)(_g,{ref:f,intercomLinkSolution:e.intercomLinkSolution}):(0,v.jsx)("div",{})}):(0,v.jsxs)(yx,{isIntercomLinkEnabled:w,showQuickReplies:we,quickReplyTexts:z.texts,onQuickReplyClick:le,children:[!be&&(t?(0,v.jsx)(qb,Object.assign({initialText:null==e?void 0:e.defaultMessage},ye)):(0,v.jsx)(Ob,Object.assign({initialValue:null==e?void 0:e.defaultMessage,composerContent:ne,forceShowSubmitButton:H,allowedActions:{emojis:!(0,Lo.rr)()&&!M,gifs:!(0,Lo.rr)()&&R&&!H,uploads:F?{allowMultipleUploads:B,allowedAttachmentExtensions:P}:void 0,voiceNotes:V},onSetText:se,useUpdatedConversationPadding:!0,visibilityState:E},ye))),w&&!re?(0,v.jsx)(_g,{ref:f,intercomLinkSolution:e.intercomLinkSolution}):(0,v.jsx)("div",{}),!be&&!re&&(0,v.jsx)(Zg,{name:"customerPrivacyPolicy",children:(0,v.jsx)(Qg,{})})]})};var Kb=n(22989),Xb=n(77063),Yb=n(77493);var Zb=n(23043);const Jb="cubic-bezier(0.23, 1, 0.32, 1)",Qb=320,ew=230,tw=k.i7`
  0% {
    opacity: 0;
    transform: translateX(8px);
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
`,nw=k.i7`
  0% {
    opacity: 1;
    transform: translateX(0);
  }
  100% {
    opacity: 0;
    transform: translateX(8px);
  }
`,iw=k.i7`
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
`,rw=k.i7`
  0% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
`,ow=k.i7`
  0% {
    opacity: 0;
    transform: translateY(15px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
`,aw=k.i7`
  0% {
    opacity: 1;
    transform: translateY(0);
  }
  100% {
    opacity: 0;
    transform: translateY(15px);
  }
`,sw=(0,k.Ay)("div",{target:"elmmg9z0"})("display:flex;flex-direction:column;flex:1;max-width:100%;&:not([data-fin-messenger='true']){",Vp.className,"{",(({transition:e})=>"none"!==(null==e?void 0:e.transition.type)||"entered"!==(null==e?void 0:e.state)&&"entering"!==(null==e?void 0:e.state)?(0,k.AH)("opacity:1;transform:translateX(0);animation-name:",tw,";animation-duration:",Qb,"ms;animation-timing-function:",Jb,";animation-delay:",ew,"ms;animation-fill-mode:backwards;"):null),";}",Hp.className,":after{animation-name:",iw,";animation-duration:",Qb,"ms;animation-timing-function:",Jb,";animation-delay:",ew,"ms;animation-fill-mode:backwards;}}",rm.className,"{",(({transition:e})=>"none"!==(null==e?void 0:e.transition.type)&&"fade"!==(null==e?void 0:e.transition.type)||"entered"!==(null==e?void 0:e.state)&&"entering"!==(null==e?void 0:e.state)?(0,k.AH)("opacity:1;transform:translateY(0);animation-name:",ow,";animation-duration:",Qb,"ms;animation-timing-function:",Jb,";animation-delay:",230,"ms;animation-fill-mode:both;"):null),";}",Tg.className,",",Zb.mc.className,"{opacity:1;transform:translateY(0);}&:not([data-fin-messenger='true']){",Tg.className,",",Zb.mc.className,"{animation-name:",ow,";animation-duration:",Qb,"ms;animation-timing-function:",Jb,";animation-delay:",230,"ms;animation-fill-mode:both;}}.intercom-messenger-from-inline-article-view &.intercom-messenger-body-view-enter,.intercom-messenger-from-browse-mode &.intercom-messenger-body-view-enter{",Vp.className,"{animation-delay:",ew,"ms;}",Hp.className,":after{animation-delay:",ew,"ms;}",rm.className,",",Tg.className,",",Zb.mc.className,"{animation-delay:",250,"ms;}}&.intercom-messenger-body-view-enter{z-index:",(0,ii.fE)(),";}&.intercom-messenger-body-view-exit{z-index:",(0,ii.fE)(1),";",Vp.className,"{animation-name:",nw,";animation-duration:",Qb,"ms;animation-timing-function:",Jb,";animation-delay:",20,"ms;animation-fill-mode:both;}",Hp.className,":after{animation-name:",rw,";animation-duration:",Qb,"ms;animation-timing-function:",Jb,";animation-delay:",20,"ms;animation-fill-mode:both;}",rm.className,",",Tg.className,",",Zb.mc.className,"{animation-name:",aw,";animation-duration:",Qb,"ms;animation-timing-function:",Jb,";animation-delay:",120,"ms;animation-fill-mode:both;}.intercom-messenger-from-conversation &{",rm.className,",",Zb.mc.className,"{animation:none;}}}&.intercom-messenger-body-view-exit-active{",rm.className,",",Zb.mc.className,"{opacity:0;}}",(({isFetching:e,transition:t})=>e&&(0,k.AH)(Vp.className,",",Tg.className,"{opacity:0;animation:none;}",rm.className,"{opacity:","none"!==(null==t?void 0:t.transition.type)&&"fade"!==(null==t?void 0:t.transition.type)||"entered"!==(null==t?void 0:t.state)&&"entering"!==(null==t?void 0:t.state)?0:1,";animation:none;}")),";");function lw(e,t){var n;if(!t)return!1;const{dataTransfer:i}=e;if(!i)return!1;if(i.items&&i.items.length>0){return Array.from(i.items).some((e=>"file"===e.kind))}return null!=(n=i.types)&&-1!==n.indexOf("Files")}function cw(e){e.preventDefault(),e.stopPropagation()}function dw(){const[e,t]=(0,b.useState)(!1),n=(0,b.useRef)(0),i=(0,m.jL)(),r=(0,qc.r)(),o=(0,m.GV)(Rx),a=(0,m.GV)(x.Bf),s=(0,m.GV)(Lx),l=(0,m.GV)(x.ve),c=s>=qv(l),d=(0,b.useCallback)((e=>{cw(e),c||(n.current++,lw(e,a)&&t(!0))}),[a,c]),u=(0,b.useCallback)((e=>{cw(e),n.current>0&&n.current--,0===n.current&&t(!1)}),[]),p=(0,b.useCallback)((n=>{cw(n),c?n.dataTransfer&&(n.dataTransfer.dropEffect="none"):(n.dataTransfer&&(n.dataTransfer.dropEffect="copy"),!e&&lw(n,a)&&t(!0))}),[e,a,c]),h=(0,b.useCallback)((async e=>{var a;if(cw(e),t(!1),n.current=0,!c)try{const t=null!=(a=e.dataTransfer)&&a.files?Array.from(a.files):[];if(0===t.length)return;if(r)i(ly({files:t}));else{const e=t.filter((e=>(0,Cx.SD)(e))),n=0===o.length;if(e.length>0&&n){const t=e[0],n=await async function(e){try{const t=await(0,Cx.kn)(e);if(!t)return null;const{width:n,height:i,src:r}=t,o=(0,Ks.U$)(t.src,e.name,e.type);return o?{id:(0,Qr.l)(),file:o,src:r,width:n,height:i,status:Ax.A8.NotStarted}:null}catch(t){return(0,Ur.l2)(t,{context:"drag_drop_image_processing",fileName:e.name,fileType:e.type}),(0,ay.jP)("Error getting image preview for dropped file"),null}}(t);n&&i((0,Ax.vp)(n))}}}catch(e){(0,ay.jP)(`Error handling dropped files: ${e}`)}}),[i,r,o.length,c]);return{isDragActive:e,dragHandlers:{onDragEnter:d,onDragLeave:u,onDragOver:p,onDrop:h}}}const uw=(0,k.Ay)("div",{target:"et1bcfw3"})("position:absolute;inset:0;z-index:",(0,ii.fE)(),";background-color:",(({theme:e})=>(0,ve.vf)(e.containerBaseNeutral,.9)),";display:flex;align-items:center;justify-content:center;opacity:",(({isVisible:e})=>e?1:0),";transform:",(({isVisible:e})=>e?"scale(1)":"scale(0.9)"),";transition:opacity 0.2s ease-out,transform 0.2s ease-out;pointer-events:",(({isVisible:e})=>e?"auto":"none"),";"),pw=(0,k.Ay)("div",{target:"et1bcfw2"})({name:"1azakc",styles:"text-align:center"}),hw=(0,k.Ay)("h3",{target:"et1bcfw1"})("font-size:18px;font-weight:600;color:",(0,k.w4)("textDefault"),";margin:0 0 6px 0;font-family:",(0,k.w4)("fontSansSerif"),";text-align:center;"),mw=(0,k.Ay)("p",{target:"et1bcfw0"})("font-size:14px;color:",(0,k.w4)("textMuted"),";margin:0;line-height:1.4;font-family:",(0,k.w4)("fontSansSerif"),";text-align:center;");function gw({isVisible:e}){return(0,v.jsx)(uw,{isVisible:e,"aria-hidden":!e,role:"region","aria-live":"polite",children:(0,v.jsxs)(pw,{children:[(0,v.jsx)(hw,{children:(0,Xe.Tl)("drag_drop_overlay_title")}),(0,v.jsx)(mw,{children:(0,Xe.Tl)("drag_drop_overlay_subtitle")})]})})}const xw=(0,k.Ay)("div",{target:"elcpu9t0"})({name:"170qjm4",styles:"display:flex;flex-direction:row;flex:1 1 auto;min-width:100%"});function fw({children:e}){const{isDragActive:t,dragHandlers:n}=dw();return(0,v.jsxs)(xw,Object.assign({},n,{children:[e,(0,v.jsx)(gw,{isVisible:t})]}))}const vw=(e,t,n)=>{var i;const r=null==(i=t.body)||null==(i=i.filter((e=>"createTicketCard"===e.type))[0])?void 0:i.ticket_type_id;(0,Ve.A5)("received","reply","messenger","in_conversation",{conversation_id:e.id,part_id:t.id,ticket_type_id:r,fin_only:n})},yw=(e,t,n)=>{(0,Ve.A5)("received","operator_reply","messenger","in_conversation",{conversation_id:e.id,part_id:t.id,type:(0,Z.Am)(t),fin_only:n}),bw(e,t,n)},bw=(e,t,n)=>{const{form:i}=t;i&&i.attributes.forEach((({identifier:r})=>{let o="automated_lead_qualification";return"upfront_collection"===i.type&&(o="upfront_user_collection"),(0,Ve.A5)("received","operator_reply","messenger","in_conversation",{type:o,conversation_id:e.id,part_id:t.id,attribute_identifier:r,attribute_type:(0,Z.MF)(i,r),form_type:i.type,attribute_is_custom_data:(0,Z.S9)({identifier:r}),fin_only:n})}))};var ww=n(26311);const jw=e=>{var t,n;const i=null==(t=e.session)?void 0:t.email,r=null==(n=e.user)?void 0:n.userSuppliedEmail;return i||r},kw=e=>{var t;return null==(t=e.session)?void 0:t.helpCenterSession},Aw=e=>{var t;return null==(t=e.user)?void 0:t.role},Cw=e=>{var t;return null==(t=e.user)?void 0:t.userHasEmail};let Sw=null;const Tw=(0,o.Ng)(((e,{conversation:t})=>{const{userConversationGifsEnabled:n}=e.app,{isPresent:i}=e.user,r=e.app&&e.app.officeHoursResponse,{lastParticipatingAdmin:o}=t,a=(0,x.Bf)(e),s=(0,x.K1)(e),l=(0,x.Ei)(e),c=(0,xg.FK)(t)(e),d=(0,xg.cE)(e),u=(0,x._D)(e),p=(e=>(0,X.Mz)([Ma.Vy,t=>(0,xg.FK)(e)(t),e=>e.botIntro],((e,t,n)=>e||t.isInboundBotSuggestions?null:n.id?n:null)))(t)(e),h=(0,xg.VV)(t)(e),m=(e=>{var t;return null==(t=e.user)?void 0:t.notificationLinkConversationId})(e);return{conversation:t,conversationSuggestions:c,userIsPresent:i,officeHoursResponse:r,lastParticipatingAdmin:o,uploadsEnabled:a,gifsEnabled:n,shouldShowUpfrontEmailComposer:s,allowNewConversation:l,selfServeSuggestionsEnabled:d,accessToTeammateEnabledAfterBot:u,eligibleBotIntro:p,eligibleSuggestionParts:h,notificationLinkConversationId:m}}),(e=>({onArticleCardClick:(t,n)=>e((0,Ue.Y0)(t,n,!1)),onRetry:(t,n)=>{e((0,sn.sD)(Lt.Ay,t,n))},onReactionSelect:(t,n)=>{e((0,sn.yf)(Lt.Ay,t,n,!0))},setComposerSuggestionsDismissed:t=>{e((0,gg.B$)(t))},onAttachmentSubmit:(t,n,i,r,o=new Date)=>{const a={clientId:n,createdAt:o,body:i,file:r};e((0,sn.yk)(Lt.Ay,t,a))},onSuggestionClicked:(t,n,i,r)=>e((0,Tc.R)(Lt.Ay,t,n,!1,i,!1,r)),onNewConversationClick:()=>{e((0,Jt.p6)("",!0))},deliverBotIntro:t=>{e((0,ww.L)(t))},deliverComposerSuggestionParts:t=>{e((0,gg.Ak)(t))},onJoinConversationClick:t=>{e((0,sn.Sh)(Lt.Ay,t))},onSetComposerText:e=>{Sw=e},clearUserSuggestions:()=>{e((0,Xb.GT)())}})),((e,t,n)=>{const i=e.conversation.id,r=e.officeHoursResponse,o={onAttachmentSubmit:(e,n)=>{t.onAttachmentSubmit(i,(0,Qr.l)(),e,n)},onRetry:n=>{t.onRetry(e.conversation,n)},onReactionSelect:e=>{t.onReactionSelect(i,e)},setComposerSuggestionsDismissed:()=>{t.setComposerSuggestionsDismissed(i)},onSuggestionClicked:n=>{const{conversation:i}=e;if("user_suggestion"===n.type)return Sw&&Sw(n.text),void t.clearUserSuggestions();const o=(0,xg.xH)(i);return t.onSuggestionClicked(i,n,o,r)},onJoinConversationClick:()=>{t.onJoinConversationClick(i)}};return Object.assign({},n,e,t,o)}))((({conversation:e,conversationSuggestions:t,userIsPresent:n,shouldShowUpfrontEmailComposer:i,allowNewConversation:r,uploadsEnabled:o,onReactionSelect:a,onConversationRead:s,onRetry:l,onArticleCardClick:c,onAttachmentSubmit:d,onJoinConversationClick:u,deliverBotIntro:p,deliverComposerSuggestionParts:h,onSuggestionClicked:g,setComposerSuggestionsDismissed:f,onSetComposerText:y,selfServeSuggestionsEnabled:w,accessToTeammateEnabledAfterBot:j,eligibleBotIntro:k,eligibleSuggestionParts:A,notificationLinkConversationId:C})=>{var S,T,_;const E=(0,b.useRef)(null),{isFetching:I,isUpdating:z,fetchState:N,parts:M,composerState:R,ticket:B}=e,P=(0,m.GV)(x.iO),L=(0,m.GV)(li.b),D=(0,qc.r)(),H=M.length?M[0]:void 0,F=(0,Z.dF)(e),V=e.parts.length>0&&"reactions"===e.parts[0].replyType,G=!!R&&R.visible,$=t.isInboundBotSuggestions&&t.composerDisabled,q=!G||e.preventEndUserReplies||$,U=!!R.disabled||!(!H||"saving"!==H.saveState&&"failed"!==H.saveState)||!(!P||!q&&!e.preventEndUserReplies),W="attribute_collector"===(null==F?void 0:F.replyType)&&!(void 0!==F.form.attributes.find((({value:e})=>null!=e)));const K=(P||!(q&&!e.preventEndUserReplies))&&!W,[X,Y]=(0,b.useState)(!0),J=Og(e.conversationEndedButton,r,e.inboundConversationsDisabled);(0,b.useEffect)((()=>{!e.read&&n&&s&&s()}),[e,n,s]);const Q=(0,Z.cG)(e),ee=(0,Kb.Z)(Q)||0,te=null==L?void 0:L.finOnlyMessenger;(0,b.useEffect)((()=>{"all"===N&&Q>0&&Q>ee&&((e,t)=>{const n=(0,Z.dF)(e);(0,Z.wy)(n)?yw(e,n,t):vw(e,n,t)})(e,!0===te?"true":"false")}),[N,Q,ee,e,te]);const ne=(0,Kb.Z)(B);(0,b.useEffect)((()=>{void 0===ne&&void 0!==B&&(0,Ve.A5)("received","ticket_details","messenger","in_conversation",{ticket_type_id:B.ticketTypeId})}),[B,ne]),((e,t,n,i)=>{const[r,o]=(0,b.useState)(!e.id&&"botIntroId"in e&&!e.botIntroId&&!t.isInboundBotSuggestions&&!e.articleUrl&&i);(0,b.useEffect)((()=>{r&&i&&(n(i),o(!1))}),[r,i,n])})(e,t,p,k),((e,t,n,i)=>{const[r,o]=(0,b.useState)(!e.id&&t.suggestionParts&&i);(0,b.useEffect)((()=>{r&&i&&(n(i),o(!1))}),[r,i,n])})(e,t,h,A),((e,t)=>{var n;const[i,r]=(0,b.useState)(!1),o=(0,m.jL)(),a=(0,m.GV)((e=>e.aiSuggestions.aiSuggestionsAvailable)),s=!e.id,l=!("userParticipated"in e)||!e.userParticipated,c=e.parts.length>0&&(null==(n=e.parts[e.parts.length-1])||null==(n=n.replyOptions)?void 0:n.length)>0,d=t.isInboundBotSuggestions,u="botIntroId"in e&&e.botIntroId;(0,b.useEffect)((()=>{if(a&&s&&l&&!c&&!d&&!u&&!i){var e;const t=(0,Yb.$)(),n=null==t||null==(e=t.document)||null==(e=e.body)?void 0:e.innerText;n&&n.trim()&&(o((0,Xb.nt)(n)),r(!0))}}),[o,a,s,l,c,d,u,i])})(e,t),qe({object:e.id?"conversation":"new_conversation",place:"messenger",context:C?"from_email":"",metadata:{conversation_id:e.id,self_serve_suggestions_enabled:!!w,url:null==(S=(0,ai.KQ)())?void 0:S.href,ticket_type_id:null==(T=e.ticket)?void 0:T.ticketTypeId,status:null==(_=e.ticket)?void 0:_.status,fin_only:!0===(null==L?void 0:L.finOnlyMessenger)?"true":"false"}});const ie=async e=>{try{const t=await(0,Cx.kn)(e);if(t){const{width:n,height:i,src:r}=t,o=(0,Ks.U$)(t.src,e.name,e.type);d((0,cn.Fp)(r,n,i),o)}else{const{name:t,type:n,size:i}=e;d((0,cn.VJ)(t,n,i),e)}}catch{}},re=t=>{if(U)return;if(q)return;if(i)return;if(!o)return;if(!t||0===t.length)return;if(V)return;if(D)return;const n=t.filter((e=>!(0,Cx.SD)(e)));n.length>0&&(t=>{const{customBotActive:n}=R,i=void 0===e.id;if(t.length>5)return void(0,Ve.oS)("attachment_limit_exceeded",{file_count:t.length,place:"conversation"});const r=Array.from(t);i||n?ie(r[0]):r.forEach((e=>ie(e)))})(n)};return(0,v.jsx)(fw,{children:(0,v.jsx)(sw,{className:"intercom-conversation",onPaste:e=>{if(D)return;const t=iy(e).filter((e=>!(0,Cx.SD)(e)));t.length>0&&re(t)},onDragOver:e=>{var t;if(e.preventDefault(),D)return;Array.from((null==(t=e.dataTransfer)?void 0:t.items)||[]).some((e=>!(0,Cx.SD)(e.getAsFile())))&&e.stopPropagation()},onDrop:async e=>{if(e.preventDefault(),D)return;const t=ry(e),n=Array.from(t).filter((e=>!(0,Cx.SD)(e)));n.length>0&&(e.stopPropagation(),re(n))},tabIndex:-1,role:"presentation",isFetching:I&&!z,transition:O(),"data-fin-messenger":P?"true":void 0,ref:E,children:(0,v.jsx)(Cl,{children:(0,v.jsxs)(qa.Provider,{value:{composerShouldFocus:X,setComposerShouldFocus:Y},children:[(0,v.jsx)(ah.Root,{children:(0,v.jsx)(hg,{conversation:e,conversationSuggestions:t,onArticleCardClick:c,onReactionSelect:a,onRetry:l,onSuggestionClicked:g,setComposerSuggestionsDismissed:f,conversationButtonShowing:J})}),K&&(0,v.jsx)(Wb,{composerDisabled:U,conversation:e,accessToTeammateEnabledAfterBot:j,shouldShowUpfrontEmailComposer:i,allowNewConversation:r,onReactionSelect:a,onJoinConversationClick:u,onSetComposerText:y})]})})})})})),_w=(0,b.createContext)(null);_w.displayName="AppWindowContext";const Ew=_w;const Iw=(0,k.Ay)("div",{target:"ebn4jki1"})({name:"z5atxi",styles:"display:flex;flex-direction:column;flex-grow:1"}),zw=(0,k.Ay)("div",{target:"ebn4jki0"})({name:"a7jy8",styles:"padding:20px 20px 40px;display:flex;flex-grow:1;justify-content:center;flex-direction:column;align-items:center"});const Nw=(0,k.Ay)("div",{target:"e1vu97tc2"})({name:"a7jy8",styles:"padding:20px 20px 40px;display:flex;flex-grow:1;justify-content:center;flex-direction:column;align-items:center"}),Mw=(0,k.Ay)("p",{target:"e1vu97tc1"})("font-size:18px;font-weight:700;margin-bottom:12px;color:",(0,k.w4)("textDefault"),";"),Rw=(0,k.Ay)("p",{target:"e1vu97tc0"})("font-size:14px;font-weight:400;margin-bottom:16px;color:",(0,k.w4)("textDefault"),";");function Bw({errorTitle:e=(0,Xe.Tl)("something_is_wrong"),errorMessage:t=(0,Xe.Tl)("unable_to_load_the_messenger"),retryTitle:n=(0,Xe.Tl)("try_again"),onRetry:i}){return(0,v.jsxs)(Nw,{children:[(0,v.jsx)(Mw,{children:e}),(0,v.jsx)(Rw,{children:t}),(0,v.jsx)(Bg.A,{onClick:i,variant:"primary",children:n})]})}var Pw=n(757);const Lw=(0,k.Ay)("div",{target:"e1aatf811"})({name:"1bxd5px",styles:"min-height:45px;height:auto;padding:0 20px;width:100%;box-sizing:border-box"}),Ow=(0,k.Ay)("div",{target:"e1aatf810"})("overflow:hidden;position:relative;min-height:45px;border-radius:",(({theme:e})=>`${e.composerBorderRadiusPx}px`),";box-shadow:0 1px 3px rgba(0, 0, 0, 0.12),0 1px 2px rgba(0, 0, 0, 0.08);border:2px solid transparent;background:linear-gradient(",(0,k.w4)("inputAlt"),", ",(0,k.w4)("inputAlt"),") padding-box,linear-gradient(135deg, ",(0,k.w4)("borderNeutral"),", ",(0,k.w4)("borderNeutral"),") border-box;"),Dw=()=>(0,v.jsx)(sm,{isIntercomLinkEnabled:!1,isNewPrivacyPolicyLayoutVisible:!1,"data-testid":"footer-container-skeleton",children:(0,v.jsx)(Lw,{children:(0,v.jsx)(Ow,{})})});var Hw=n(65018),Fw=n(30952);function Vw({children:e}){const t=(0,m.jL)(),n=(0,m.GV)(x.Tf),i=(0,m.GV)(x.mF),r=Ar(),o=(0,m.GV)((e=>e.openOnBoot)),a=(0,m.GV)(Fw.N),s=(0,b.useCallback)((()=>{t((0,Pw.W)())}),[t]),l=r&&(null==o?void 0:o.type)===Hw.yE&&a!==Qt.cy.shrinked;return n?(0,f.z)()?null:(0,v.jsxs)(Iw,{"data-testid":"open-content-loading-spinner",children:[(0,v.jsx)(zw,{children:(0,v.jsx)(w.A,{delay:i?0:300})}),l&&(0,v.jsx)(Dw,{})]}):(0,v.jsx)(v.Fragment,{children:i?(0,v.jsx)(Bw,{errorTitle:(0,Xe.Tl)("spaces_error_title"),errorMessage:(0,Xe.Tl)("spaces_error_description"),retryTitle:"Reload",onRetry:s}):e})}const Gw=()=>{const e=Ml(),t=(0,m.jL)(),n=(0,m.GV)(Nl.BJ),i=null==e?void 0:e.id,r=!(null!=e&&e.read&&null!=e&&e.readAt),o=(null==e?void 0:e.ticket)&&!(null!=e&&e.ticket.read),a=null==e?void 0:e.isFetching,s=(0,m.GV)(Qi.A),l=(0,m.GV)(x.ve),c=null==l?void 0:l.nexusAbly,d=ug(),u=(0,b.useMemo)((()=>(0,Jp.n)((()=>t((0,sn.QL)(Lt.Ay,i,{isUpdating:!0,requestOrigin:"Conversation visibility/focus change"}))),5e3,{leading:!0,trailing:!1})),[t,i]);(e=>{const t=(0,m.jL)(),n=(0,m.GV)(Qi.A),{enabled:i,startTimeout:r,syncInterval:o}=(0,m.GV)(x.eI),a=e?(0,Z.dF)(e):void 0,s=null==a?void 0:a.createdAt;Xs((0,b.useCallback)((()=>{if(i&&n&&null!=e&&e.id){const n=(new Date).getTime();s&&n-s.getTime()>=r&&t((0,sn.QL)(Lt.Ay,e.id,{isUpdating:!0,requestOrigin:Lt.r0,lastAdminPartCreatedAt:s.toISOString(),lastAdminPartId:a.id}))}}),[e,i,n,t,s,r,a]),o)})(e);const p=(0,b.useContext)(Ew);(0,b.useEffect)((()=>{i&&t((0,sn.Ew)())}),[i,t]),(0,b.useEffect)((()=>{const e=p&&("visible"===p.document.visibilityState||p.document.hasFocus()),n=d===Qt.cy.visible;s&&i&&!a&&(r||o)&&e&&n&&t((0,sn.$G)(Lt.Ay,i))}),[t,s,i,r,a,o,p,d]);const h=(0,b.useCallback)((()=>{i&&p&&("visible"===p.document.visibilityState||p.document.hasFocus())&&u()}),[i,p,u]);return(0,b.useEffect)((()=>{if(p&&!c)return["focus","visibilitychange"].forEach((function(e){p.addEventListener(e,h)})),()=>{["focus","visibilitychange"].forEach((function(e){p.removeEventListener(e,h)}))}}),[h,p,c]),(0,v.jsx)(Vw,{children:(0,v.jsx)(Jr,{children:(0,v.jsx)(Tw,{conversation:e||n,frameWindow:window,appWindow:window})})})};let $w=function(e){return e.Visible="visible",e.Hidden="hidden",e.Unknown="unknown",e}({});const qw=(0,b.createContext)(null);qw.displayName="ConversationHeroContext";const Uw=({initialConversationHeroVisible:e})=>{const[t,n]=(0,b.useState)(e);return(0,b.useMemo)((()=>({conversationHeroVisible:t,setConversationHeroVisible:n})),[t,n])},Ww={isLoaded:!1,expanded:null,collapsed:null,displayActiveIndicator:!1,useBotHeader:!1,hideGreeting:!0,isInactive:!1,showSubtitle:!1},Kw=(0,k.Ay)("button",{target:"e1jajdke0"})("display:flex;flex-direction:row;justify-content:center;align-items:center;padding:8px 12px;margin-left:10px;margin-right:4px;gap:6px;font-style:normal;font-weight:600;font-size:14px;white-space:nowrap;line-height:20px;color:",(0,k.w4)("textDefault"),";background:",(0,k.w4)("alphaBlack10"),";border-radius:20px;transition:all 0.2s ease-in-out;&:hover{background:",(0,k.w4)("alphaBlack20"),";}"),Xw=()=>{const e=(0,m.jL)();return(0,v.jsxs)(Kw,{onClick:()=>{e((0,Jt.p6)())},children:[(0,v.jsx)(Te.Ay,{type:"Retry",color:"iconDefault"}),(0,v.jsx)("div",{children:"Start again"})]})};var Yw=n(33149);const Zw=(0,k.Ay)("div",{target:"e19u07ry5"})("display:flex;flex-direction:column;justify-content:center;align-items:start;color:",(0,k.w4)("headerTitleColor"),";"),Jw=(0,k.Ay)("div",{target:"e19u07ry4"})({name:"1wovfva",styles:"display:flex;flex-direction:row;gap:8px;width:100%"}),Qw=(0,k.Ay)("h1",{target:"e19u07ry3"})("font-size:14px;font-weight:600;color:",(0,k.w4)("headerTitleColor"),";line-height:1.1em;overflow:hidden;display:flex;gap:8px;max-height:2.3em;"),ej=(0,k.Ay)("div",{target:"e19u07ry2"})("color:",(0,k.w4)("textMuted"),";padding-right:4px;font-size:14px;overflow:hidden;font-weight:400;display:flex;align-items:center;gap:4px;svg path{fill:",(e=>"clock"===e.iconType?(0,k.w4)("iconMuted")(e):(0,k.w4)("iconOnInverse")(e)),";}"),tj=(0,k.Ay)("p",{target:"e19u07ry1"})({name:"16ev3o0",styles:"overflow:hidden;line-height:1.5em;max-height:2.4em;display:block;font-size:13px"}),nj=(0,k.Ay)("div",{target:"e19u07ry0"})("width:",(({fullWidth:e})=>e?"100%":"auto"),";"),ij=(0,k.Ay)("div",{target:"erximzr0"})((({fullWidth:e})=>e&&"width: 100%;")," &.fade-enter{opacity:0;}&.fade-enter-active{opacity:1;transition:opacity ",150,"ms;}&.fade-exit{opacity:1;}&.fade-exit-active{opacity:0;transition:opacity ",150,"ms;}"),rj=({transitionKey:e,children:t,fullWidth:n})=>{const i=(0,b.useRef)(null);return(0,v.jsx)(B.wY,{children:(0,v.jsx)(B.B1,{addEndListener:e=>{var t;return null==(t=i.current)?void 0:t.addEventListener("transitionend",e,!1)},classNames:"fade",nodeRef:i,children:(0,v.jsx)(ij,{ref:i,fullWidth:n,children:t})},e)})},oj={clock:"ClockFilled",ai:"AICurved"},aj=({title:e,subtitle:t,icon:n,avatarGroup:i,displayActiveIndicator:r=!1,isInactive:o=!1})=>{const a=n?oj[n]:null,s=!t&&!n&&!i,l=s?"1":"2";return(0,v.jsx)(rj,{transitionKey:l,fullWidth:!s,children:(0,v.jsx)(nj,{fullWidth:!s,children:s?(0,v.jsx)(Er.Title,{children:e}):(0,v.jsxs)(Jw,{children:[(0,v.jsx)(Kh,{avatarSize:32,avatarGroup:i,displayActiveIndicator:r,isInactive:o}),(0,v.jsxs)(Zw,{children:[(0,v.jsx)(Qw,{children:e}),t&&(0,v.jsxs)(ej,{iconType:n,children:[a&&(0,v.jsx)(Te.Ay,{inline:!0,type:a,size:12,ariaHidden:!0}),(0,v.jsx)(tj,{children:t})]})]})]})})})},sj=(0,b.createContext)(void 0);sj.displayName="DropdownMenuContext";const lj=()=>{const e=(0,b.useContext)(sj);if(void 0===e)throw new Error("useDropdownMenuContext must be used within a DropdownMenuProvider");return e},cj=["children","onClick"];const dj=(0,b.forwardRef)(((e,t)=>{let{children:n,onClick:i}=e,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,cj);if(b.Children.count(n)>1)throw new Error("Only single element as the trigger");if(!(0,b.isValidElement)(n))throw new Error("Invalid element");const o=Object.fromEntries(Object.entries(r).filter((([e])=>"asChild"!==e)));return(0,b.cloneElement)(n,Object.assign({},n.props,o,{ref:t,className:`${r.className} ${n.props.className}`,onClick:e=>{i&&i(e),n.props.onClick&&n.props.onClick()}}))})),uj=({open:e,onClose:t,triggerRef:n})=>{const i=(0,b.useRef)(null);(0,b.useEffect)((()=>{if(!e||!i.current)return;const t=i.current.querySelectorAll('[role="button"]');t.length>0&&t[0].focus()}),[e]);return{menuRef:i,handleKeyNavigation:e=>{var r,o,a;if(!i.current)return;const s=Array.from(i.current.querySelectorAll('[role="button"]'));if(0===s.length)return;const l=s[0].ownerDocument.activeElement,c=s.findIndex((e=>e===l||e.contains(l))),d=e=>-1===c?e>0?0:s.length-1:(c+e+s.length)%s.length;switch(e.key){case"ArrowDown":e.preventDefault(),null==(r=s[d(1)])||r.focus();break;case"ArrowUp":e.preventDefault(),null==(o=s[d(-1)])||o.focus();break;case"Tab":e.preventDefault(),null==(a=s[d(e.shiftKey?-1:1)])||a.focus();break;case"Escape":e.preventDefault(),e.stopPropagation(),t(),(()=>{const e=null==n?void 0:n.current;null!=e&&e.focus&&e.focus()})()}}}},pj=["children"];const hj=(0,k.Ay)(Ae.A,{target:"e18h0w5d0"})({name:"9aeb3p",styles:"padding:28px 20px;z-index:20"}),mj=["children"];const gj=({children:e,defaultOpen:t=!1,offset:n=10,placement:i="bottom-end",onOpen:r})=>{const{refs:o,floatingStyles:a}=(0,Wl.we)({placement:i,middleware:[(0,Kl.cY)(n),(0,Kl.UU)()]}),[s,l]=(0,b.useState)(t),c=(0,b.useCallback)((e=>{l(e),r&&e&&r()}),[r]);return ef([o.floating,o.reference],(0,b.useCallback)((()=>c(!1)),[c]),!s),(0,v.jsx)(sj.Provider,{value:{refs:o,floatingStyles:a,open:s,setOpen:c},children:e})},xj=e=>{const{refs:t,open:n,setOpen:i}=lj();if("asChild"in e&&!0===e.asChild)return(0,v.jsx)(dj,Object.assign({onClick:()=>i(!n),ref:t.setReference,"data-state":n?"open":"closed","aria-haspopup":"menu","aria-expanded":n},e));const{onClick:r}=e;return(0,v.jsx)("button",Object.assign({onClick:e=>{i(!n),r&&r(e)},ref:t.setReference,"data-state":n?"open":"closed","aria-haspopup":"menu","aria-expanded":n},e,{tabIndex:"0"}))},fj=e=>{let{children:t}=e,n=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,pj);const{refs:i,floatingStyles:r,open:o,setOpen:a}=lj(),{menuRef:s,handleKeyNavigation:l}=uj({open:o,onClose:()=>a(!1),triggerRef:i.reference});return o?(0,v.jsx)(hj,Object.assign({ref:e=>{i.setFloating(e),s.current=e},style:r,onKeyDown:l},n,{children:(0,v.jsx)(Ce.A,{noDivider:!0,children:t})})):null},vj=e=>{let{children:t}=e,n=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,mj);return(0,v.jsx)(Se.A,Object.assign({size:"small",role:"button",tabIndex:0},n,{children:t}))};const yj=(0,k.Ay)(gj,{target:"e1s4y8682"})(),bj=(0,k.Ay)(fj,{target:"e1s4y8681"})({name:"mzgeh9",styles:"padding:16px 20px;z-index:110"}),wj=(0,k.Ay)(vj,{target:"e1s4y8680"})({name:"1n0y3b6",styles:"font-size:14px;font-weight:normal;line-height:1.5;max-width:260px;padding-top:10px;padding-bottom:10px"});const jj=(0,k.Ay)(xj,{target:"e1q6rcge1"})("@media not (hover: hover){&[data-state='open']{background:",(({theme:e})=>e.alphaBlack10),";}}svg{path{fill:",(({theme:e})=>e.iconMuted),";}}@media (hover: hover){transition:outline 0.2s;&:hover{svg{path{fill:",(({theme:e})=>e.iconDefault),";}}}",(({theme:e,whiteBackground:t})=>t?(0,ve.e$)(e.containerBaseNeutral,10):(0,ve.e$)(e.secondaryColor,10)),";}"),kj=(0,k.Ay)("button",{target:"e1q6rcge0"})({name:"1ka6mps",styles:"position:relative;width:100%;min-height:40px;padding:6px 12px;box-sizing:border-box;text-align:center;font-weight:700;cursor:default"}),Aj=({isActionProcessing:e=!1})=>{const{whiteBackground:t}=M(),n=(0,Dn.A)("mercuryUiChanges");return(0,v.jsx)(jj,{asChild:!0,whiteBackground:t,children:e?(0,v.jsx)(kj,{"data-testid":"more-menu-loading-container",children:(0,v.jsx)(w.A,{size:"small",inline:!0})}):(0,v.jsx)(Er.Button,{iconType:n?"MercuryEllipsisVerticalIcon":"EllipsisHorizontalIcon","aria-label":(0,Xe.Tl)("conversation_options"),"data-testid":"more-menu-trigger"})})},Cj=({items:e,defaultOpen:t=!1,onOpen:n})=>{const i=e.some((e=>e.isLoading));return 0===e.length?null:(0,v.jsxs)(yj,{defaultOpen:t,onOpen:n,children:[(0,v.jsx)(Aj,{isActionProcessing:i}),(0,v.jsx)(bj,{children:e.map((e=>(0,b.createElement)(Sj,Object.assign({},e,{key:e.id}))))})]})},Sj=({onClick:e,icon:t,label:n,disabled:i,id:r})=>{const o=(0,v.jsx)(Te.In,{type:t,color:"linkColor"}),{setOpen:a}=lj(),s=(0,b.useCallback)((()=>{e(),a(!1)}),[e,a]);return(0,v.jsx)(wj,{hoverBackground:!0,onClick:s,left:o,disabled:i,id:r,children:n},`more-menu-item-${r}`)},Tj=()=>{const e=(0,Dn.A)("conversationsAreExpandable"),t=(0,yr.IS)(),n=(0,di.A)();return e&&!t&&!n.isEmbeddedMode};const _j=(0,k.Ay)(gj,{target:"e16ti7w710"})(),Ej=(0,k.Ay)(fj,{target:"e16ti7w79"})({name:"1cxnnsu",styles:"padding:16px 20px;z-index:110;box-shadow:none;border-top-left-radius:0;border-top-right-radius:0"}),Ij=(0,k.Ay)("div",{target:"e16ti7w78"})("font-size:14px;font-weight:normal;line-height:20px;width:320px;padding:8px;display:flex;flex-direction:row;align-items:flex-start;gap:8px;border-radius:4px;cursor:pointer;transition:background-color 250ms;&:hover{",(({theme:e})=>(0,k.AH)("background:",e.backgroundHover,";")),";}"),zj=(0,k.Ay)(Ij,{target:"e16ti7w77"})({name:"1c7yrj1",styles:"border-radius:0 0 4px 4px;padding-top:10px;padding-bottom:12px"}),Nj=(0,k.Ay)("div",{target:"e16ti7w76"})({name:"1yimred",styles:"width:20px;height:20px;flex-shrink:0;display:flex;align-items:center;justify-content:center;margin-top:5px"}),Mj=(0,k.Ay)("div",{target:"e16ti7w75"})({name:"ybaih9",styles:"display:flex;flex-direction:column;gap:2px;flex:1;min-width:0"}),Rj=(0,k.Ay)("div",{target:"e16ti7w74"})({name:"e0q4eq",styles:"font-size:14px;font-weight:normal;line-height:20px;display:flex;align-items:center;gap:8px"}),Bj=(0,k.Ay)("div",{target:"e16ti7w73"})("font-size:12px;line-height:16px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;",(({theme:e})=>(0,k.AH)("color:",e.textMuted,";")),";"),Pj=(0,k.Ay)("span",{target:"e16ti7w72"})("width:8px;height:8px;border-radius:50%;flex-shrink:0;margin-top:6px;margin-left:auto;",(({theme:e})=>(0,k.AH)("background-color:",e.linkColor,";")),";"),Lj=(0,k.Ay)("div",{target:"e16ti7w71"})("height:1px;margin:0 -20px;",(({theme:e})=>(0,k.AH)("background:",e.borderNeutral,";")),";"),Oj=(0,k.Ay)("div",{target:"e16ti7w70"})("max-height:192px;overflow-x:hidden;overflow-y:auto;scrollbar-width:thin;",(({theme:e})=>(0,k.AH)("scrollbar-color:",e.alphaBlack20," transparent;"))," &::-webkit-scrollbar{width:4px;}&::-webkit-scrollbar-track{background:transparent;}&::-webkit-scrollbar-thumb{",(({theme:e})=>(0,k.AH)("background:",e.alphaBlack20,";"))," border-radius:2px;}"),Dj=({conversation:e,isCurrent:t,onClick:n,currentConversationAvatar:i,avatarGroup:r,darkMode:o})=>{const{assigneeName:a,assignedAdmins:s}=zn(e),l=On({conversationId:e.id,title:e.title??"",speed:25}),c=(0,Xe.Tl)("chat_with",{assignee_name:a??""}),d=l||c,u=(e=>{var t;return null==(t=un(e))?void 0:t.summaryText})(e),p=pn(e),{setOpen:h}=lj(),m=(0,b.useCallback)((()=>{n(),h(!1)}),[n,h]),g=null==s?void 0:s[0],x=(0,v.jsx)(Nj,{children:t?i?(0,v.jsx)(Ne.e,{initials:i.initials,label:i.label,imageUrl:Uh(i,r,o),shape:i.shape,size:20}):(0,v.jsx)(Te.In,{type:"FinLauncher",size:16,color:"iconDefault"}):g?(0,v.jsx)(Oe.l,{admin:g,size:20,solidBackground:"squircle"!==(null==(f=g.avatar)?void 0:f.shape)}):(0,v.jsx)(Te.In,{type:"FinLauncher",size:16,color:"iconDefault"})});var f;return(0,v.jsxs)(Ij,{onClick:m,"data-is-current":t,"data-testid":`conversation-menu-item-${e.id}`,role:"button",tabIndex:0,children:[x,(0,v.jsxs)(Mj,{children:[(0,v.jsx)(Rj,{children:d}),u&&(0,v.jsx)(Bj,{children:u})]}),p&&(0,v.jsx)(Pj,{})]})},Hj=({onClick:e})=>{const{setOpen:t}=lj(),n=(0,b.useCallback)((()=>{e(),t(!1)}),[e,t]),i=(0,v.jsx)(Nj,{children:(0,v.jsx)(Te.In,{type:"New",color:"linkColor",size:20})});return(0,v.jsxs)(zj,{onClick:n,"data-testid":"new-conversation-menu-item",role:"button",tabIndex:0,children:[i,(0,v.jsx)(Mj,{children:(0,v.jsx)(Rj,{children:(0,Xe.Tl)("new_conversation")})})]})},Fj=({children:e,defaultOpen:t=!1})=>{var n;const i=(0,a.useNavigate)(),{context:r,meta:o}=Pl(),s=Bb(),l=(0,m.GV)(Y.dI),c=(0,m.GV)(x.Ei),d=(0,m.GV)(x.iO),u=Pb(),p="dark"===(0,di.A)().themeMode,h=(0,m.GV)(Ng.CL),g=(s&&"header"in s?s.header:void 0)||h,f=null==g||null==(n=g.collapsed)?void 0:n.avatarGroup,y=l,b=!(d&&!c);return(0,v.jsxs)(_j,{defaultOpen:t,placement:"bottom-start",offset:{mainAxis:10},children:[(0,v.jsx)(xj,{asChild:!0,children:e}),(0,v.jsxs)(Ej,{children:[(0,v.jsx)(Oj,{children:y.map((e=>{const t=(null==s?void 0:s.id)===e.id;return(0,v.jsx)(Dj,{conversation:e,isCurrent:t,onClick:()=>{return t=e.id,(0,Ve.A5)("clicked","previous_conversation","fin_messenger",r,o),void i(`/messages/conversation/${t}`);var t},currentConversationAvatar:t?u:void 0,avatarGroup:f,darkMode:p},e.id)}))}),b&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(Lj,{}),(0,v.jsx)(Hj,{onClick:()=>{(0,Ve.A5)("clicked","new_conversation_from_menu","fin_messenger",r,o),i("/messages/conversation/new?visibility=collapsed")}})]})]})]})};const Vj=(0,k.Ay)(vr.A,{target:"e11v37237"})("&&{min-width:32px;min-height:32px;padding:8px;border-radius:100px;display:inline-flex;align-items:center;justify-content:center;background:",(({theme:e})=>e.containerNeutral),";border:none;",(({theme:e})=>(0,k.AH)("color:",e.textDefault,";@media (hover: hover){&:hover{background:",e.containerEmphasisNeutral,";}}")),";}"),Gj=(0,k.Ay)("div",{target:"e11v37236"})((({theme:e})=>(0,k.AH)("height:56px;margin-top:12px;padding:0 ",e.conversationHorizontalPadding,"px;color:",e.textDefault,";display:flex;align-items:center;box-sizing:border-box;")),";"),$j=(0,k.Ay)("div",{target:"e11v37235"})({name:"1up24vs",styles:"display:flex;align-items:center;justify-content:space-between;gap:16px;width:100%"}),qj=(0,k.Ay)("div",{target:"e11v37234"})({name:"1j36p78",styles:"display:flex;align-items:center;gap:8px;flex:0 1 auto;min-width:0;padding-left:14px"}),Uj=(0,k.Ay)("button",{target:"e11v37233"})({name:"x98wy7",styles:"display:flex;align-items:center;gap:6px;flex:0 1 auto;min-width:0;padding:8px 0;background:transparent;border:none;cursor:pointer;border-radius:100px"}),Wj=(0,k.Ay)("div",{target:"e11v37232"})({name:"1ojnsow",styles:"display:flex;flex-direction:column;min-width:0"}),Kj=(0,k.Ay)("h1",{target:"e11v37231"})("margin:0;font-size:14px;font-weight:600;line-height:20px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;",(({theme:e})=>(0,k.AH)("color:",e.textDefault,";")),";"),Xj=(0,k.Ay)("div",{target:"e11v37230"})({name:"18hwl53",styles:"display:flex;align-items:center;gap:8px;margin-right:12px"}),Yj=()=>null,Zj=()=>{const e=(0,a.useNavigate)(),t=(0,a.useLocation)(),n=ci(),i=(0,m.GV)(g.qB),r=(0,Dn.A)("mercuryUiChanges");if(!n)return null;return(0,v.jsx)(Vj,{variant:"header",iconType:r?"MercuryChevronDown":"FinCollapseIcon",iconSize:16,"aria-label":(0,Xe.Tl)("close"),onClick:()=>{(0,Ve.A5)("clicked","close_button","messenger","",{space_opened:null==i?void 0:i.id,source:"close_button"});const n=(0,sc.CH)(t.search),r=Object.assign({},n,{visibility:"shrinked"});e(`${t.pathname}${(0,sc.WC)(r)}`)},gap:0})},Jj=()=>{var e,t;const n=Bb(),{setHeight:i,setWhiteBackground:r}=M(),{assigneeName:o}=zn(n),a=(0,m.GV)(Ng.CL);(0,b.useEffect)((()=>{r(!1)}),[r]);const s=On({conversationId:null==n?void 0:n.id,title:(null==n?void 0:n.title)??"",speed:25}),l=!(null!=n&&n.id),c=n&&"header"in n?null==(e=n.header)?void 0:e.collapsed.title:void 0,d=l?null==a?void 0:a.collapsed.title:void 0,u=((null==n?void 0:n.lastParticipatingAdmin)||(null==n||null==(t=n.parts)?void 0:t[0])&&"teamAuthor"in n.parts[0]&&n.parts[0].teamAuthor?o:void 0)||d||c||o,p=(0,Xe.Tl)("chat_with",{assignee_name:u??""}),h=(0,b.useMemo)((()=>s||p),[s,p]);return(null==n?void 0:n.isFetching)&&!(null!=n&&n.isUpdating)?null:(0,v.jsx)(dr,{onHeightChange:e=>i(e),children:(0,v.jsx)(Gj,{"data-testid":"fin-conversation-header",children:(0,v.jsxs)($j,{children:[(0,v.jsx)(Fj,{children:(0,v.jsx)(qj,{children:(0,v.jsxs)(Uj,{"data-testid":"conversation-title-button",children:[(0,v.jsx)(Wj,{children:(0,v.jsx)(Kj,{title:h,children:h})}),(0,v.jsx)(Te.In,{type:"ThinDownArrowIcon",size:16,color:"iconMuted"})]})})}),(0,v.jsxs)(Xj,{children:[(0,v.jsx)(Yj,{}),(0,v.jsx)(Zj,{})]})]})})})};const Qj=(0,k.Ay)("div",{target:"e1izh3060"})({name:"107gg21",styles:"height:64px"}),ek=()=>{const{setHeight:e}=M();return(0,v.jsx)(St.A,{onHeightChange:t=>e(t),children:(0,v.jsx)(Qj,{})})},tk=()=>{const e=function(){const[e]=(0,a.useSearchParams)(),t=(0,a.useNavigate)(),n=(0,m.jL)(),i=(0,sc.CH)((0,a.useLocation)().search).backFallbackRoute,r=(0,Yw.Jl)(-1),o=e.get("fromArticleID"),s="true"===e.get("fromStandaloneArticle"),l=(0,m.GV)(Nl.BJ);return()=>{o&&(null!=l&&l.fromStandaloneArticle||s?n((0,Ue.GN)(o,{},!0)):n((0,Ue.L7)(o,null,!0))),null!==r&&"/loading"!==r.pathname?t(-1):t(i||"/messages",{replace:!0})}}(),t=Rl(),n=(e=>{var t,n,i,r,o;const a=(0,m.GV)(Ng.CL),s=(null==e?void 0:e.header)||a,l=null==e||null==(t=e.lastParticipatingAdmin)?void 0:t.lastActiveAt;if(!s||!a)return Ww;if(e&&"all"!==e.fetchState)return Ww;if((0,Z.wX)(e))return Ww;const{collapsed:c,hideGreeting:d,useBotHeader:u=!1,displayActiveIndicator:p=!1}=s,h=s.expanded||a.expanded,g=!!c.expandedSubtitle,x=!!(null!=(n=c.avatarGroup)&&null!=(n=n.avatars)&&n.length&&(null==(i=c.avatarGroup)||null==(i=i.avatars)?void 0:i.length)>1),f=u||x,v=!(f||null!=e&&null!=(r=e.lastParticipatingAdmin)&&r.isActive),y=f||null!=e&&null!=(o=e.lastParticipatingAdmin)&&o.isActive?void 0:l;return c&&h?{isLoaded:!0,expanded:h,collapsed:c,displayActiveIndicator:p,useBotHeader:u,hideGreeting:d,lastActiveAt:l,isInactive:v,showSubtitle:!!y||g}:Ww})(t),{context:i,meta:r}=Pl(),{isLoaded:o}=n,s=function(){const e=Rl(),t=(0,m.jL)(),n=Tj(),i=(0,m.GV)(wr.l),r=(0,b.useCallback)((()=>{null!=e&&e.id&&((0,Ve.A5)("download_transcript","conversation","messenger","more_menu",{conversation_id:e.id}),t((0,sn.Cw)(e.id)))}),[e,t]),o=[];return n&&o.push({label:i?(0,Xe.Tl)("expanded_mode_disable"):(0,Xe.Tl)("expanded_mode_enable"),icon:i?"CollapseIcon":"ExpandIcon",onClick:()=>{t((0,br.D)(!i))},id:"expand-conversation"}),e&&o.push({label:(0,Xe.Tl)("download_transcript"),icon:"Download",onClick:r,id:"download-transcript"}),o}(),{hideConversationHeader:l}=(0,m.GV)((e=>e.app)),c=Ar(),d=pg(),u=(0,v.jsx)(Cj,{items:s,onOpen:()=>{(0,Ve.A5)("clicked","more_menu","messenger",i,r)}});if((0,Lh.Z)().headerDisabled)return(0,v.jsx)(v.Fragment,{});if(l&&!c)return(0,v.jsx)(v.Fragment,{});if(c)return d?(0,v.jsx)(v.Fragment,{}):(0,v.jsx)(Jj,{});if(!o)return(0,v.jsx)(ek,{});const{collapsed:p,displayActiveIndicator:h,isInactive:g}=n,x=(0,f.z)()&&!(null==t||!t.id)&&"state_closed"!==(null==t?void 0:t.state),y=!(0,f.z)(),w=t||x,j=(0,v.jsxs)(v.Fragment,{children:[u,w&&x&&(0,v.jsx)(Xw,{})]}),k=y&&(0,v.jsx)(Er.BackButton,{onBack:e,ariaLabel:(0,Xe.Tl)("messages_space_title")});return(0,v.jsx)(Er.Content,{children:(0,v.jsx)(Er.TitleArea,{leftButtonArea:k,rightButtonArea:j,showExpandButton:!1,children:(0,v.jsx)(aj,{title:p.title,subtitle:p.subtitle,icon:p.icon,avatarGroup:p.avatarGroup,displayActiveIndicator:h,isInactive:g})})})};var nk=n(71784);const ik=300,rk=600,ok=(0,k.Ay)("div",{target:"e1q4x2x90"})("display:flex;justify-content:space-between;align-items:center;min-height:",(0,k.xk)("height"),"px;height:",(0,k.xk)("height"),"px;padding-left:18px;padding-right:18px;padding-top:4px;padding-bottom:4px;font-size:13px;",(({connectionState:e,theme:t})=>"connected"===e&&(0,k.AH)("animation:",(({theme:e})=>k.i7`
  from {
    color: ${e.textBlack};
    background-color: ${e.fillNotice};
  }
  to {
    color: ${e.textWhite};
    background-color: ${e.fillSuccess};
  }
`)({theme:t})," 300ms;"))," ",(({connectionState:e,theme:t})=>"connected"===e?(0,k.AH)("color:",t.textWhite,";background-color:",t.fillSuccess,";"):(0,k.AH)("color:",t.textBlack,";background-color:",t.fillNotice,";"))," &.realtime-status-banner{&-enter{opacity:0;min-height:0px;height:0px;padding-top:0px;padding-bottom:0px;transform:translateY(100%);}&-enter-active{opacity:1;transform:translateY(0);min-height:",(0,k.xk)("height"),"px;height:",(0,k.xk)("height"),"px;padding-top:4px;padding-bottom:4px;transition:transform ",ik,"ms,min-height ",ik,"ms,height ",ik,"ms,opacity ",ik,"ms,padding-top ",ik,"ms,padding-bottom ",ik,"ms;}&-exit{opacity:1;min-height:",(0,k.xk)("height"),"px;height:",(0,k.xk)("height"),"px;padding-top:4px;padding-bottom:4px;transform:translateY(0);}&-exit-active{opacity:0;transform:translateY(100%);min-height:0px;height:0px;padding-top:0px;padding-bottom:0px;transition:transform ",ik,"ms ",rk,"ms,min-height ",ik,"ms ",rk,"ms,height ",ik,"ms ",rk,"ms,opacity ",ik,"ms ",rk,"ms,padding-top ",ik,"ms ",rk,"ms,padding-bottom ",ik,"ms ",rk,"ms;}}");var ak=n(37798),sk=n(34120);const lk={[nk.gK]:(0,Xe.Tl)("connecting"),[nk.w3]:(0,Xe.Tl)("cant_load_new_messages"),[nk.a$]:(0,Xe.Tl)("successfully_reconnected")};function ck({height:e=44}){const t=(0,m.jL)(),n=(0,m.GV)(ak.g);qe({object:"realtime_status_banner_visible",context:"in_conversation",place:"messenger",sendMetricCondition:n===nk.w3});const i=(0,b.useCallback)((()=>{n===nk.w3&&(t((0,sk.t9)()),(0,Ve.A5)("clicked","realtime_status_banner","messenger","in_conversation",{retry_connection:!0}))}),[t,n]),r=(0,b.useRef)(null);return(0,v.jsx)(B.B1,{in:n===nk.w3||n===nk.gK,classNames:"realtime-status-banner",mountOnEnter:!0,unmountOnExit:!0,timeout:{enter:300,exit:900},nodeRef:r,children:(0,v.jsxs)(ok,{connectionState:n,height:e,ref:r,children:[(0,v.jsx)("span",{children:lk[n]}),n===nk.w3?(0,v.jsx)("button",{onClick:i,tabIndex:"0",children:(0,v.jsx)("b",{children:(0,Xe.Tl)("reconnect")})}):null]})})}const dk=()=>{const e=Uw({initialConversationHeroVisible:$w.Unknown}),t=Ar();return(0,v.jsx)(qw.Provider,{value:e,children:(0,v.jsxs)(G,{header:(0,v.jsx)(tk,{}),children:[(0,v.jsx)(Gw,{}),(0,v.jsx)(vx,{}),!t&&(0,v.jsx)(ck,{})]})})},uk=()=>{const e=Uw({initialConversationHeroVisible:$w.Unknown}),t=Ar();return(0,v.jsx)(qw.Provider,{value:e,children:(0,v.jsxs)(G,{header:(0,v.jsx)(tk,{}),children:[(0,v.jsx)(Gw,{}),(0,v.jsx)(vx,{}),!t&&(0,v.jsx)(ck,{})]})})};const pk=(0,k.Ay)("div",{target:"e1cx53rm0"})({name:"1d3w5wq",styles:"width:100%"});class MessengerTriggerScreen extends b.PureComponent{renderError(){return(0,v.jsx)(tt,{duration:200,animationKey:"error-state",children:(0,v.jsx)(Bw,{onRetry:this.props.handleTryAgain})})}renderLoading(){return(0,v.jsx)(w.A,{delay:300})}render(){const{failed:e}=this.props;return(0,v.jsxs)(pk,{children:[e&&this.renderError(),!e&&this.renderLoading()]})}}var hk=n(4908),mk=n(98333);function gk(){return e=>{e((0,hk.dv)(Lt.Ay))}}const xk=(0,o.Ng)((function(e){return{failed:(0,mk.WY)(e)}}),(function(e){return(0,rr.zH)({handleTryAgain:gk},e)}))(MessengerTriggerScreen),fk=()=>(0,v.jsx)(G,{header:null,children:(0,v.jsx)(xk,{})}),vk=e=>{var t;const n=(0,m.GV)(g.$B);return null==n||null==(t=n.find((t=>t.id===(null==e?void 0:e.id))))?void 0:t.title};function yk({space:e,inSheet:t}){const n=vk(e),i=(0,a.useNavigate)();return(0,v.jsx)(Ir,{title:n,onBack:t?()=>i(-1):void 0,backDirection:t?"down":"left"})}var bk=n(72916);const wk=(0,k.Ay)("div",{target:"e4tjxi33"})("flex:1;width:100%;max-height:100%;overflow-y:scroll;-webkit-overflow-scrolling:touch;overscroll-behavior:contain;scrollbar-color:",(0,k.w4)("alphaBlack40")," transparent;scrollbar-width:thin;&::-webkit-scrollbar{appearance:none;width:5px;}&::-webkit-scrollbar-thumb{background-color:",(0,k.w4)("alphaBlack40"),";border-radius:5px;}&::-webkit-scrollbar-track{background-color:transparent;}"),jk=(0,k.Ay)(Ce.A,{target:"e4tjxi32"})((({addBottomPadding:e})=>(0,k.AH)("padding:0 0 ",e?80:0,"px 0;")),";"),kk=(0,k.Ay)("div",{target:"e4tjxi31"})("z-index:",(0,ii.fE)(1),";text-align:center;position:absolute;bottom:0;left:0;right:0;border-radius:0 0 6px 6px;display:flex;align-items:center;justify-content:center;pointer-events:none;",(({showFade:e,theme:t})=>e&&(0,k.AH)("background:linear-gradient(0deg, ",t.alphaWhite100,", ",t.baseAlpha,");"))," ",(({largeFade:e})=>(0,k.AH)("height:",e?150:90,"px;")),";"),Ak=(0,k.Ay)("div",{target:"e4tjxi30"})("display:flex;flex-direction:column;align-items:center;justify-content:center;gap:20px;margin:0 35px;min-height:100%;color:",(0,k.w4)("textDefault"),";h2{font-size:18px;line-height:24px;font-weight:600;color:",(0,k.w4)("textDefault"),";}span{font-weight:400;line-height:20px;font-size:14px;text-align:center;color:",(0,k.w4)("textDefault"),";}button{position:absolute;bottom:20px;}");function Ck(){return(0,v.jsx)(wk,{children:(0,v.jsxs)(Ak,{children:[(0,v.jsx)(bk.NoMessagesIcon,{}),(0,v.jsx)("h2",{children:(0,Xe.Tl)("messages_empty_state_title")}),(0,v.jsx)("span",{children:(0,Xe.Tl)("messages_empty_state_text")}),(0,v.jsx)(Lg,{})]})})}const Sk=({conversations:e,showFooterFade:t,largeFooterFade:n,onConversationClick:i,onScroll:r})=>{const o=(0,b.useRef)(null),a=(0,b.useMemo)((()=>(0,Zp.s)((e=>{const t=e.target,n=(0,u.T5)(t);r(t.scrollTop,n)}),200)),[r]);return(0,v.jsxs)(wk,{"data-testid":"messages-body",onScroll:a,onWheel:u.b$,ref:o,children:[(0,v.jsx)(jk,{addBottomPadding:t,children:e.map((e=>(0,v.jsx)(Fn,{conversation:e,onClick:()=>{return t=e.id,(0,Ve.A5)("clicked",t?"conversation":"new_conversation","messenger","from_conversation_list",{conversation_id:t}),void i(t);var t}},e.id)))}),(0,v.jsx)(kk,{showFade:t,largeFade:n})]})},Tk=(0,X.Mz)([x.TB,x.Ei,Y.DP],((e,t,n)=>!n&&(!e&&t))),_k=()=>{const e=(0,m.GV)(Y.dI),t=(0,m.GV)(Y.PE),n=(0,m.GV)(x._D),i=(0,m.GV)(Tk),r=(0,m.GV)(g.$P).length>1,{isFetching:o=!0,pagesFetched:a=0,totalPages:s=0}=(0,m.GV)(Y.bX),l=(0,m.jL)(),c=(0,b.useCallback)((e=>{l((0,Du.lS)(Lt.Ay,"onConversationsPage",e,10))}),[l]),d=(0,b.useCallback)(((e,t)=>{l((0,Du.xb)(e));!o&&a<s&&t>.5&&c(a+1)}),[l,o,a,s,c]);return qe({object:"conversation_list",place:"messenger"}),t?(0,v.jsx)(Ck,{}):(0,v.jsx)(Sk,{conversations:e,accessToTeammateEnabledAfterBot:n,onScroll:d,onConversationClick:e=>{l((0,sn.QL)(Lt.Ay,e,{requestOrigin:"Messages Page - Click Conversation"})),l((0,ln.p)(e))},showFooterFade:i,largeFooterFade:!r})},Ek=e=>async()=>{const t=e.getState();return 0!==t.conversations.pagesFetched||t.conversations.isFetching||e.dispatch((0,Du.lS)(Lt.Ay,"Messages route loader")),null},Ik=()=>{const{isFetching:e=!0,pagesFetched:t=0}=(0,m.GV)(Y.bX),n=e&&0===t;return(0,v.jsx)(G,{header:(0,v.jsx)(yk,{space:p.Ij}),children:n?(0,v.jsx)(w.A,{}):(0,v.jsx)(_k,{})})},zk=()=>{const e=(0,a.useNavigate)();return(0,b.useCallback)((()=>{e(-1)}),[e])},Nk=e=>e.ticketForm,Mk=e=>(0,X.Mz)([Nk],(t=>(null==t?void 0:t[e])||null)),Rk=()=>(0,m.GV)(Ma.JG)?(0,Xe.Tl)("home_space_title"):(0,Xe.Tl)("messages_space_title"),Bk=()=>{const{ticketTypeId:e}=(0,a.useParams)(),t=zk(),n=Rk();(0,b.useEffect)((()=>{e||t()}),[e,t]);const i=(0,m.GV)(Mk(parseInt(e||"")));return(0,v.jsx)(Ir,{title:null==i?void 0:i.name,onBack:t,backDirection:"left",backAriaLabel:n})},Pk=()=>{const{ticketId:e=""}=(0,a.useParams)(),t=(0,m.GV)((0,Hi.aw)(e)),n=zk(),i=Rk();return(0,v.jsx)(Ir,{title:null==t?void 0:t.name,onBack:n,backDirection:"left",backAriaLabel:i})};const Lk=(0,k.Ay)("label",{target:"e1tmiq3k8"})("display:block;margin-bottom:4px;font-size:14px;font-weight:600;line-height:21px;color:",(0,k.w4)("textDefault"),";"),Ok=(0,k.Ay)("p",{target:"e1tmiq3k7"})("font-size:14px;color:",(0,k.w4)("textMuted"),";margin-top:8px;line-height:21px;");var Dk={name:"143spw1",styles:"height:105px"};const Hk=(0,k.Ay)("input",{target:"e1tmiq3k6"})("display:block;width:100%;height:40px;box-sizing:border-box;resize:none;padding:10px 10px 9px;border:1px solid ",(0,k.w4)("borderNeutral"),";border-radius:8px;color:",(0,k.w4)("textDefault"),";background-color:",(0,k.w4)("containerBaseNeutral"),";font-size:14px;line-height:1.5;&::placeholder{color:",(0,k.w4)("textMuted"),";}&[type='datetime-local']{color-scheme:",(e=>"dark"===e.theme.themeMode?"dark":"light"),";&::-webkit-calendar-picker-indicator{opacity:0;}}",(({error:e,theme:t})=>e&&(0,k.AH)("border-color:",t.textError,";"))," ",(({visuallyDisabled:e,theme:t})=>e&&(0,k.AH)("cursor:not-allowed;border:1px solid ",t.borderEmphasisNeutral,";color:",t.textMuted,";box-shadow:inset 0 1px 3px 0 ",t.elevation1,";background:",t.input,";-webkit-text-fill-color:",t.textMuted,";-webkit-opacity:1;user-select:none;"))," ",(({multiline:e})=>e&&Dk),";"),Fk=(0,k.Ay)("div",{target:"e1tmiq3k5"})("input[type='radio']{opacity:0;position:fixed;width:0;}label{display:block;padding:10px 20px;margin:0 0 8px;font-size:14px;line-height:1.5;color:",(0,k.w4)("textDefault"),";background-color:",(0,k.w4)("containerBaseNeutral"),";border:1px solid ",(0,k.w4)("borderNeutral"),";border-radius:5px;cursor:pointer;",(({error:e,theme:t})=>e&&(0,k.AH)("border-color:",t.textError,";")),";}input[type='radio']:checked+label{box-shadow:inset 0 0 0 1px ",(0,k.w4)("borderNeutral"),";background-color:",(0,k.w4)("buttonBackgroundColor"),";color:",(0,k.w4)("buttonTextColor"),";}"),Vk=(0,k.Ay)("div",{target:"e1tmiq3k4"})("position:relative;height:38px;padding:0 8px;border-radius:5px;border:1px solid ",(0,k.w4)("borderNeutral"),";background-color:",(0,k.w4)("containerBaseNeutral"),";&>path{fill:",(({theme:e})=>e.borderEmphasisNeutral),";}"),Gk=(0,k.Ay)("select",{target:"e1tmiq3k3"})("width:100%;height:100%;appearance:none;background-color:transparent;border:none;color:",(0,k.w4)("textMuted"),";",(({error:e,theme:t})=>e&&(0,k.AH)("border-color:",t.textError,";")),";"),$k=(0,k.Ay)("i",{target:"e1tmiq3k2"})("position:absolute;top:12px;right:7px;pointer-events:none;color:",(0,k.w4)("iconMuted"),";"),qk=(0,k.Ay)("p",{target:"e1tmiq3k1"})("display:flex;align-items:center;gap:6px;margin:8px 0;font-size:14px;color:",(({theme:e})=>e.textError),";&>*{fill:",(({theme:e})=>e.textError),";}"),Uk=(0,k.Ay)("span",{target:"e1tmiq3k0"})("color:",(({theme:e})=>e.textError),";"),Wk=(0,b.forwardRef)((function({inputId:e,errorId:t,descriptor:n,onChange:i,error:r,multiline:o,placeholder:a=(0,Xe.Tl)("placeholder_text_inputs"),autoFocus:s},l){const[c,d]=(0,b.useState)();return(0,v.jsx)(Hk,{as:o?"textarea":"input",error:r,id:e,autoComplete:"off",value:c,name:n.id,"aria-label":n.name,"aria-required":n.required,"aria-invalid":!!r,"aria-describedby":r?t:void 0,onChange:e=>{const t=e.target.value;d(t),i(n,t)},multiline:o,placeholder:a,autoFocus:s,ref:l})}));var Kk;function Xk(){return Xk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Xk.apply(null,arguments)}const Yk=e=>b.createElement("svg",Xk({xmlns:"http://www.w3.org/2000/svg",width:19,height:16,fill:"none",viewBox:"0 0 19 16","aria-hidden":"true"},e),Kk||(Kk=b.createElement("path",{fill:"currentColor",d:"M5.559 6.98c-.36-.392-.047-.98.52-.98h7.255c.568 0 .88.588.521.98l-3.28 3.574c-.449.49-1.287.49-1.736 0z"}))),Zk=(0,b.forwardRef)((function({inputId:e,errorId:t,descriptor:n,value:i,onChange:r,error:o,placeholder:a=(0,Xe.Tl)("please_select"),autoFocus:s},l){var c;return(0,v.jsxs)(Vk,{children:[(0,v.jsxs)(Gk,{ref:l,name:n.id,id:e,"aria-required":n.required,"aria-label":n.name,"aria-invalid":!!o,"aria-describedby":o?t:void 0,onChange:e=>{const t=e.target.value;r(n,t)},value:i||"",error:o,"data-testid":`attribute-list-${n.id}`,autoFocus:s,children:[(0,v.jsx)("option",{value:"",disabled:!0,children:a}),null==(c=n.listOptions)?void 0:c.map((e=>(0,v.jsx)("option",{value:e.id,children:e.label},`dropdown-${n.id}-${e.id}`)))]}),(0,v.jsx)($k,{children:(0,v.jsx)(Yk,{})})]})}));const Jk=(0,b.forwardRef)((function({errorId:e,descriptor:t,onChange:n,error:i,autoFocus:r},o){const[a,s]=(0,b.useState)(null),l=e=>{const i=function(e){return"true"===e}(e.target.value);s(i),n(t,i)};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(Fk,{error:i,children:[(0,v.jsx)("input",{type:"radio",id:`${t.id}-true`,name:t.id,value:"true",checked:!0===a,onChange:l,"aria-describedby":i?e:void 0,autoFocus:r}),(0,v.jsx)("label",{ref:o,htmlFor:`${t.id}-true`,tabIndex:-1,children:(0,Xe.Tl)("attribute_collector_positive")})]}),(0,v.jsxs)(Fk,{error:i,children:[(0,v.jsx)("input",{type:"radio",id:`${t.id}-false`,name:t.id,value:"false",checked:!1===a,onChange:l,"aria-describedby":i?e:void 0}),(0,v.jsx)("label",{htmlFor:`${t.id}-false`,children:(0,Xe.Tl)("attribute_collector_negative")})]})]})}));var Qk=n(46203);const eA=(0,k.Ay)("div",{target:"e3up0ta1"})({name:"bjn8wh",styles:"position:relative"}),tA=(0,k.Ay)("div",{target:"e3up0ta0"})("position:absolute;right:12px;top:50%;transform:translateY(-50%);cursor:pointer;color:",(0,k.w4)("iconMuted"),";"),nA=(0,b.forwardRef)((function({inputId:e,errorId:t,descriptor:n,onChange:i,error:r,autoFocus:o},a){const[s,l]=(0,b.useState)(""),c=(0,b.useRef)(null);(0,b.useImperativeHandle)(a,(()=>c.current));return(0,v.jsxs)(eA,{children:[(0,v.jsx)(Hk,{ref:c,error:r,id:e,autoComplete:"off",value:s,name:n.id,"aria-label":n.name,"aria-required":n.required,"aria-invalid":!!r,"aria-describedby":r?t:void 0,type:"datetime-local",onChange:e=>{const t=e.target.value;l(t),i(n,t)},autoFocus:o}),(0,v.jsx)(tA,{onClick:()=>{c.current&&(c.current.focus(),"function"==typeof c.current.showPicker?c.current.showPicker():c.current.click())},children:(0,v.jsx)(Qk.A,{})})]})}));function iA(e,t,n){return e.map(((e,i)=>i===t?Object.assign({},e,n):e))}function rA(e,t,n,i,r){const o=e.name.substring(e.name.lastIndexOf(".")).toLocaleLowerCase();return n>i?Promise.reject("file_max_limit"):r&&-1===r.indexOf(o)?Promise.reject("file_type_not_allowed"):(0,sn.oT)(Lt.Ay,t,e)}const oA="ADD_FILES";const aA="UPLOAD_COMPLETE";const sA="UPLOAD_FAILED";const lA="REMOVE_FILE";const cA="RETRY_UPLOAD";const dA={limit:10,uploads:[]};function uA(e,t){const n="clientId"in t?e.uploads.findIndex((e=>e.clientId===t.clientId)):-1;switch(t.type){case oA:{const n=[...e.uploads,...t.files];return Object.assign({},e,{uploads:n})}case lA:return Object.assign({},e,{uploads:e.uploads.filter((e=>e.clientId!==t.clientId))});case cA:return-1===n?e:Object.assign({},e,{uploads:iA(e.uploads,n,{state:"loading",promise:t.promise})});case aA:return-1===n?e:Object.assign({},e,{uploads:iA(e.uploads,n,{state:"complete",data:t.data,error:null})});case sA:return-1===n?e:Object.assign({},e,{uploads:iA(e.uploads,n,{state:"failed",error:t.error})})}}const pA=async(e,t,n,i,r,o,a)=>{try{e(function(e,t){return{type:aA,clientId:e,data:t}}(n,await rA(i,t,r,o,a)))}catch(t){e(function(e,t){return{type:sA,clientId:e,error:t}}(n,t))}},hA={limit:10};function mA(e={}){const t=Object.assign({},hA,e),n=(0,m.GV)((e=>e.session)),[i,r]=(0,b.useReducer)(uA,Object.assign({},dA,{limit:t.limit})),o=i.uploads,a=o.every((e=>"complete"===e.state)),s=o.some((e=>"failed"===e.state));return{uploadFiles:async e=>{if(!n)return;const i=Array.from(e).map((e=>function(e){return{clientId:(0,Qr.l)(),name:e.name,data:null,state:"loading",file:e,error:null}}(e)));(0,fl.flushSync)((()=>{r({type:oA,files:i})}));let a=o.length;for(const e of i)await pA(r,n,e.clientId,e.file,a,t.limit,t.accept),a++},removeFile:e=>r(function(e){return{type:lA,clientId:e}}(e)),retry:async e=>{const i=o.find((t=>t.clientId===e));if(!i||!n)return;const a=o.filter((e=>"failed"!==e.state)).length;r(function(e,t,n,i,r,o){const a=rA(t,n,i,r,o);return{type:cA,clientId:e,promise:a}}(e,i.file,n,a,t.limit,t.accept)),await pA(r,n,i.clientId,i.file,a,t.limit,t.accept)},uploads:o,allComplete:a,anyFailed:s,canAddFiles:o.length<i.limit}}var gA=n(58820);const xA=(0,k.Ay)("ul",{target:"e1vo4x9o5"})({name:"14tgb9e",styles:"margin-top:8px;display:block;max-width:100%;list-style:none"}),fA=(0,k.Ay)("button",{target:"e1vo4x9o4"})("height:36px;margin-bottom:8px;width:fit-content;max-width:100%;box-sizing:border-box;padding:8px;border:1px solid ",(0,k.w4)("alphaBlack10"),";border-radius:8px;display:flex;justify-content:center;align-items:center;color:",(({theme:e})=>e.textDefault),";",Wd.I.className,"{svg{path{fill:",(({theme:e})=>e.iconDefault),";}circle{stroke:",(({theme:e})=>e.iconDefault),";}}}"),vA=(0,k.Ay)(fA,{target:"e1vo4x9o3"})("cursor:pointer;&:hover{background:",(({theme:e})=>e.listItemHover),";color:",(({theme:e})=>e.isPrimaryColorAsTheme?e.textDefault:e.primaryColor),";border:",(({theme:e})=>e.isPrimaryColorAsTheme?`1px solid ${e.alphaBlack20};`:`1px solid ${e.alphaBlack10}`),";svg{path{fill:",(({theme:e})=>e.isPrimaryColorAsTheme?e.iconDefault:e.primaryColor),";}circle{stroke:",(({theme:e})=>e.isPrimaryColorAsTheme?e.iconDefault:e.primaryColor),";}}}");var yA={name:"1ffgyqb",styles:"max-width:calc(100% - 42px)"};const bA=(0,k.Ay)("div",{target:"e1vo4x9o2"})("display:flex;",(({canRetry:e})=>e&&yA),";"),wA=(0,k.Ay)(fA,{target:"e1vo4x9o1"})("&:hover{cursor:default;}",(({state:e,theme:t})=>"failed"===e&&(0,k.AH)("border:1px solid ",t.textError,";color:",t.textError,";",Wd.I.className,",&{svg path{fill:",t.textError,";}svg circle{stroke:",t.textError,";}}",gA.A.className,"{svg path{stroke:",t.textError,";}}")),";"),jA=(0,k.Ay)("div",{target:"e1vo4x9o0"})("margin-left:6px;font-size:14px;line-height:20px;font-weight:400;font-family:",(0,k.w4)("fontSansSerif"),";white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:inherit;");function kA({files:e}){return(0,v.jsx)(xA,{children:e.map((e=>(0,v.jsx)("li",{children:(0,v.jsxs)(vA,{onClick:()=>(e=>{window.open(e)})(e.url),children:[(0,v.jsx)(AA,{mediaType:e.mediaType}),(0,v.jsx)(jA,{title:e.name,children:e.name})]})},e.id)))})}function AA({mediaType:e}){let t="Attachment";switch(e){case"image":t="Photo";break;case"video":t="Video"}return(0,v.jsx)(Te.Ay,{type:t,size:16})}const CA=["onClick"];function SA(e){let{onClick:t}=e,n=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,CA);return(0,v.jsx)(vr.A,Object.assign({variant:"secondary",borderRadius:8,iconType:"Retry",preventDefault:!0,onClick:t,"aria-label":"Retry"},n))}const TA=(0,k.Ay)(SA,{target:"e12ifqpl0"})("margin-left:10px;height:36px;width:36px;",Wd.I.className,"{svg{path{fill:none;stroke:",(({theme:e})=>e.iconDefault),";}}}");const _A=(0,k.Ay)("div",{target:"ey2f0c11"})({name:"1bo1xyw",styles:"padding:0 3px 0 2px"}),EA=(0,k.Ay)("div",{target:"ey2f0c10"})("margin-left:8px;",gA.A.className,"{display:",(e=>e.showSpinner?"none":"flex"),";}",_A.className,"{display:",(e=>e.showSpinner?"block":"none"),";}&:hover{",gA.A.className,"{display:flex;}",_A.className,"{display:none;}}");function IA({file:e,onClickRemove:t}){const n="loading"===e.state;return(0,v.jsxs)(EA,{showSpinner:n,children:[(0,v.jsx)(_A,{children:(0,v.jsx)(w.A,{inline:!0,color:"primary",size:"small"})}),(0,v.jsx)(vr.A,{padding:4,variant:"subtle",preventDefault:!0,onClick:()=>{t(e.clientId)},iconType:"CloseM5",borderRadius:8,"aria-label":(0,Xe.Tl)("remove_file")})]})}function zA({file:e,showRetry:t,onClickRemove:n,onClickRetry:i}){const r=t&&"failed"===e.state;return(0,v.jsxs)(bA,{canRetry:r,children:[(0,v.jsxs)(wA,{as:"span",state:e.state,children:["failed"===e.state?(0,v.jsx)(Te.Ay,{type:"Alert"}):(0,v.jsx)(AA,{mediaType:NA(e.name)}),(0,v.jsx)(jA,{title:e.name,children:e.name}),(0,v.jsx)(IA,{file:e,onClickRemove:n})]}),r&&(0,v.jsx)(TA,{onClick:()=>i(e.clientId)})]})}function NA(e){const t=e.substring(e.lastIndexOf("."));return/(gif|jpg|jpeg|tiff|png)$/i.test(t)?"image":/(mp4|mov|avi|wmv|mkv)$/i.test(t)?"video":"attachment"}const MA=(0,b.memo)(zA);function RA({files:e,limit:t=10,onClickRemove:n,onClickRetry:i}){const r=e.filter((e=>"failed"!==e.state)).length<t;return(0,v.jsx)(xA,{children:e.map((e=>(0,v.jsx)("li",{children:(0,v.jsx)(MA,{file:e,showRetry:r,onClickRemove:n,onClickRetry:i})},e.clientId)))})}const BA=(0,k.Ay)("label",{target:"en2e5go0"})({name:"3ekvfs",styles:"display:block;width:fit-content"}),PA=(e,t=10)=>{switch(e){case"file_size":return`${(0,Xe.Tl)("upload_failed")}. ${(0,Xe.Tl)("upload_max_files_size",{limit:`${Ks.pS}`})}`;case"file_max_limit":return`${(0,Xe.Tl)("upload_failed")}. ${(0,Xe.Tl)("upload_max_files_allowed",{limit:`${t}`})}`;default:return(0,Xe.Tl)("upload_failed")}};function LA({inputId:e,descriptor:t,onChange:n,setTicketCreationEnabled:i,error:r}){var o,a;const[s,l]=(0,b.useState)(),{uploadFiles:c,removeFile:d,uploads:u,allComplete:p,anyFailed:h,retry:m,canAddFiles:g}=mA({limit:t.limit,accept:null==(o=t.options)?void 0:o.accept});(0,b.useEffect)((()=>{l(p?u.map((e=>{var t;return(null==(t=e.data)?void 0:t.id)||-1})):[]),i(0===u.length||p)}),[p,u,i]),(0,b.useEffect)((()=>{n(t,s||[])}),[s]);const x="multiple"===t.identifier,f=u.find((e=>e.error));return(0,v.jsxs)("div",{children:[x&&!h&&(0,v.jsx)(Ok,{children:(0,Xe.Tl)("file_max_limit",{limit:`${t.limit}`})}),h&&(0,v.jsx)(qk,{children:PA(null==f?void 0:f.error,t.limit)}),(0,v.jsx)(RA,{files:u,limit:t.limit,onClickRemove:d,onClickRetry:m}),(0,v.jsxs)(BA,{htmlFor:e,children:[(0,v.jsx)(Hk,{id:e,as:"input",type:"file",accept:(null==(a=t.options)?void 0:a.accept)||"*",multiple:x,error:r,autoComplete:"off",name:t.id,"aria-label":t.name,"aria-required":t.required,"aria-invalid":!!r,onChange:e=>{const t=e.target,n=t.files;null!=n&&c(n),t.value=""},style:{display:"none"}}),g&&(0,v.jsx)(vr.A,{as:"div",iconType:"New",gap:8,variant:"secondary",borderRadius:"8px",padding:"6px 12px",children:x?(0,Xe.Tl)("tickets_add_files"):(0,Xe.Tl)("tickets_add_file")})]})]})}var OA=n(7236);function DA(e,t,n,i){var r,o;const a=Object.assign({inputId:e,errorId:t},n),{descriptor:s}=n;switch(s.type){case"list":return(0,v.jsx)(Zk,Object.assign({value:n.value},a,{ref:i}));case"boolean":return(0,v.jsx)(Jk,Object.assign({},a,{ref:i}));case"datetime":return(0,v.jsx)(nA,Object.assign({},a,{ref:i}));case"string":return(0,v.jsx)(Wk,Object.assign({},a,{multiline:!(null==(r=s.options)||!r.multiline),autoFocus:n.autoFocus,ref:i}));case"integer":case"decimal":case"float":return(0,v.jsx)(Wk,Object.assign({},a,{multiline:!(null==(o=s.options)||!o.multiline),placeholder:(0,Xe.Tl)("placeholder_numerical_inputs"),autoFocus:n.autoFocus,ref:i}));case"files":return(0,v.jsx)(LA,Object.assign({},a));default:return null}}const HA=(0,b.forwardRef)(((e,t)=>{const{descriptor:n,error:i}=e,r=`attribute-${n.type}-${n.id}`,o=`${r}-error`,a=n.description?`${r}-description`:void 0;return(0,v.jsxs)("div",{children:[(0,v.jsxs)(Lk,{htmlFor:r,children:[n.name,n.required&&(0,v.jsx)(Uk,{children:"*"})]}),i&&(0,v.jsxs)(qk,{id:o,children:[(0,v.jsx)(OA.A,{}),(0,v.jsx)("span",{children:i})]}),DA(r,o,e,t),n.description&&(0,v.jsx)(Ok,{id:a,children:n.description})]})}));var FA=n(44605);const VA=(0,k.Ay)("div",{target:"e1i4t6d65"})("padding:",(({theme:e})=>e.globalHorizontalPadding),"px;overflow:auto;overscroll-behavior:contain;-webkit-overflow-scrolling:touch;scrollbar-color:",(({theme:e})=>e.alphaBlack20)," transparent;scrollbar-width:thin;&::-webkit-scrollbar{appearance:none;width:5px;}&::-webkit-scrollbar-thumb{background-color:",(({theme:e})=>e.alphaBlack20),";border-radius:5px;}&::-webkit-scrollbar-track{background-color:transparent;}&,&>form{flex:1;display:flex;flex-direction:column;justify-content:space-between;}"),GA=(0,k.Ay)("div",{target:"e1i4t6d64"})({name:"budh8k",styles:"display:flex;flex-direction:column;gap:16px"}),$A=(0,k.Ay)("div",{target:"e1i4t6d63"})("font-size:14px;line-height:1.5;color:",(0,k.w4)("textError"),";"),qA=(0,k.Ay)(FA.A,{target:"e1i4t6d62"})("font-size:14px;margin-bottom:0;font-weight:600;cursor:pointer;",(({disabled:e,theme:t})=>e&&(0,k.AH)("cursor:not-allowed;background-color:",t.appColorSemiTransparent30,";*{cursor:not-allowed;}"))," ",(({theme:e,styleVariant:t})=>"primary"===t&&(0,k.AH)("color:",e.isPrimaryColorAsTheme?e.iconDefault:e.iconOnInverse,";svg{margin-left:8px;path{fill:",e.isPrimaryColorAsTheme?e.iconDefault:e.iconOnInverse,";}}"))," ",(({theme:e,styleVariant:t})=>"muted"===t&&(0,k.AH)("color:",e.textMuted,";")),";"),UA=(0,k.Ay)("div",{target:"e1i4t6d61"})({name:"1qj1ra3",styles:"display:flex;flex-direction:column;align-self:center;margin:20px 0 20px 0"}),WA=(0,k.Ay)("div",{target:"e1i4t6d60"})({name:"1wnowod",styles:"display:flex;align-items:center;justify-content:center"}),KA=(0,k.Ay)("div",{target:"e1wc2x0w2"})("position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);z-index:1;display:flex;align-items:center;background:",(0,k.w4)("alphaWhite80"),";transition:opacity 0.2s,visibility 0.2s;opacity:",(({isVisible:e})=>e?1:0),";visibility:",(({isVisible:e})=>e?"visible":"hidden"),";animation:",(({isVisible:e})=>e?YA:ZA)," 0.2s ease-in-out;pointer-events:",(({isVisible:e})=>e?"auto":"none"),";"),XA=(0,k.Ay)("div",{target:"e1wc2x0w1"})("opacity:",(({isVisible:e})=>e?1:0),";pointer-events:",(({isVisible:e})=>e?"auto":"none"),";transition:opacity 0.2s ease-in-out;"),YA=k.i7`
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
`,ZA=k.i7`
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
`,JA=(0,k.Ay)("p",{target:"e1wc2x0w0"})("font-size:14px;color:",(0,k.w4)("textMuted"),";margin-bottom:16px;line-height:21px;");var QA=n(68561);const eC="__internal-notifications-prompt",tC=(0,b.forwardRef)((function({initialEmail:e,email:t,onChange:n,error:i,autoFocus:r},o){const a=!!e,[s,l]=(0,b.useState)(""),c=(0,b.useRef)(null);(0,b.useImperativeHandle)(o,(()=>c.current),[]);(0,b.useEffect)((()=>{const e=c.current,t=t=>{t.preventDefault(),l((0,Xe.Tl)("that_email_address_doesnt_look_quite_right")),null==e||e.focus()};return e&&e.addEventListener("invalid",t),()=>{e&&e.removeEventListener("invalid",t)}}),[]);const d=i||s,u=`${eC}-error`,p=`${eC}-description`,h=[p];d&&h.push(u);const m=h.join(" ");return(0,v.jsxs)("div",{children:[(0,v.jsxs)(Lk,{htmlFor:eC,children:[(0,Xe.Tl)("get_notified_by_email"),(0,v.jsx)(Uk,{children:"*"})]}),d&&(0,v.jsx)(qk,{id:u,children:d}),(0,v.jsx)(Hk,{ref:c,id:eC,type:"email",name:eC,autoComplete:"off",autoFocus:r,placeholder:Sa.o,value:e||t,error:d,visuallyDisabled:a,readOnly:a,onChange:e=>{const t=e.target.value;s&&l(""),n(t)},"aria-label":(0,Xe.Tl)("get_notified_by_email"),"aria-required":!0,"aria-invalid":!!d,"aria-describedby":m}),(0,v.jsx)(Ok,{id:p,children:(0,Xe.Tl)("tickets_email_copy")})]})}));function nC(e,t,n,i,r=!1){const o=function(e){return e.map((e=>{switch(e.type){case"string":return function(e){const t=5e3,n={id:e.id,rule:QA.Yj().max(t,(0,Xe.Tl)("surveys_response_too_long",{character_count:`${t}`})).trim()};e.required&&(n.rule=n.rule.required((0,Xe.Tl)("surveys_required_response")));return n}(e);case"integer":return function(e){const t={id:e.id,rule:QA.ai().typeError((0,Xe.Tl)("number_is_incorrect")).integer((0,Xe.Tl)("number_is_incorrect"))};e.required&&(t.rule=t.rule.required((0,Xe.Tl)("surveys_required_response")));return t}(e);case"decimal":case"float":return function(e){const t={id:e.id,rule:QA.ai().typeError((0,Xe.Tl)("number_is_incorrect"))};e.required&&(t.rule=t.rule.required((0,Xe.Tl)("surveys_required_response")));return t}(e);case"boolean":return function(e){const t={id:e.id,rule:QA.zM()};e.required&&(t.rule=t.rule.required((0,Xe.Tl)("surveys_required_response")));return t}(e);case"list":return function(e){const t={id:e.id,rule:QA.Yj()};e.required&&(t.rule=t.rule.required((0,Xe.Tl)("surveys_required_response")));return t}(e);case"datetime":return function(e){const t={id:e.id,rule:QA.p6().typeError((0,Xe.Tl)("string_is_incorrect"))};e.required&&(t.rule=t.rule.required((0,Xe.Tl)("surveys_required_response")));return t}(e);case"files":return function(e){const t={id:e.id,rule:QA.YO().of(QA.ai())};e.required&&(t.rule=t.rule.required((0,Xe.Tl)("surveys_required_response")));return t}(e);default:return function(e){const t={id:e.id,rule:QA.Yj()};e.required&&(t.rule=t.rule.required((0,Xe.Tl)("surveys_required_response")));return t}(e)}})).reduce(((e,t)=>Object.assign({},e,{[t.id]:t.rule})),{})}(e),a=QA.Yj().test("email",(0,Xe.Tl)("that_email_address_doesnt_look_quite_right"),Ta.B);return i&&!r?QA.Ik(Object.assign({},o,{[eC]:a})).validateSync(Object.assign({},t,{[eC]:n}),{abortEarly:!1}):QA.Ik(Object.assign({},o)).validateSync(Object.assign({},t),{abortEarly:!1})}function iC(e){var t;return(null==e||null==(t=e.inner)?void 0:t.reduce(((e,t)=>t.path?Object.assign({},e,{[t.path]:t.message}):e),{}))||{}}const rC=["children"];const oC=e=>{let{children:t}=e,n=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,rC);return(0,v.jsx)("form",{onKeyDown:e=>{const t="TEXTAREA"===e.target.nodeName;if("Enter"===e.key&&!t){if((0,Lo.U0)()&&e.metaKey||e.ctrlKey)return;e.preventDefault()}},onSubmit:n.onSubmit,children:t})};function aC({email:e,descriptors:t=[],isLoading:n,hasFailed:i,onSubmit:r,onCancel:o,isUpdatingForm:a,updateForm:s}){const[l,c]=(0,b.useState)(e),[d,u]=(0,b.useState)({}),[p,h]=(0,b.useState)({}),[g,x]=(0,b.useState)(!0),f=(0,m.GV)(Aw),y=!!(0,m.GV)(Cw),j=(0,Dn.A)("disableTicketEmailNotification"),k="user"===f&&!e&&y,[A,C]=(0,b.useState)(t||[]),S=(0,b.useRef)({}),T=k||j||!!e;(0,b.useEffect)((()=>{const e=new Set([...A.map((e=>e.id)),eC]);Object.keys(S.current).forEach((t=>{e.has(t)||(S.current[t]=null)}))}),[A]);function _(e){return Object.entries(e).map((([e,n])=>{const i=t.find((t=>t.id===e));if(!i)throw"missing descriptor";return{descriptor_id:parseInt(e),value:E(i,n)}}))}function E(e,t){switch(e.type){case"datetime":return new Date(t).toISOString();case"integer":return parseInt(t);case"decimal":case"float":return parseFloat(t)}return t}const I=async(e,t)=>{const n=Object.assign({},d,{[e.id]:t});if(u(n),p[e.id])try{h({}),nC(A,n,l,!k,j)}catch(e){h(iC(e))}if(s&&e.isControllingAttribute){const t=await s(n,_(n),e);if(null!==t){const{values:e,formFields:n}=t;C(n),u(e)}}};return(0,v.jsx)(VA,{children:(0,v.jsxs)(oC,{onSubmit:e=>{if(e.preventDefault(),!n)try{nC(A,d,l,!k,j),h({}),r(_(d),l)}catch(e){var t;const n=iC(e);h(n);const r=n[eC]?eC:null==(t=A.find((e=>n[e.id])))?void 0:t.id;var i;if(r)null==(i=S.current[r])||i.focus()}},children:[(0,v.jsx)(KA,{isVisible:a,children:(0,v.jsx)(w.A,{})}),(0,v.jsx)(XA,{isVisible:!a,children:(0,v.jsxs)(GA,{children:[(0,v.jsx)(JA,{children:(0,Xe.Tl)("required_fields_asterisk_explanation")}),i?(0,v.jsx)($A,{role:"alert",children:(0,Xe.Tl)("something_is_wrong")}):null,!k&&!j&&(0,v.jsx)(tC,{ref:e=>S.current[eC]=e,initialEmail:e,email:l,error:p[eC],onChange:c,autoFocus:!e}),A.map(((e,t)=>(0,v.jsx)(HA,{ref:t=>S.current[e.id]=t,error:p[e.id],descriptor:e,value:d[e.id],onChange:I,setTicketCreationEnabled:x,autoFocus:0===t&&T},e.id)))]})}),(0,v.jsxs)(UA,{children:[(0,v.jsx)(qA,{styleVariant:"primary",disabled:n||!g||a,"aria-label":(0,Xe.Tl)("tickets_create_ticket"),children:n?(0,v.jsx)(w.A,{size:"small",color:"greyColor"}):(0,v.jsxs)(WA,{children:[(0,Xe.Tl)("tickets_create_ticket"),(0,v.jsx)(bp.A,{})]})}),(0,v.jsx)(qA,{styleVariant:"muted",onClick:o,children:(0,Xe.Tl)("cancel")})]})]})})}var sC=n(19326);const lC=({children:e,selector:t,fallback:n,action:i})=>{const r=(0,a.useNavigate)(),o=(0,m.jL)(),s=(0,m.GV)(t),l=(0,My.I)(s),c=(0,b.useCallback)((()=>o(i(Lt.Ay))),[o,i]),d=(0,b.useCallback)((async()=>{await c()||r(-1)}),[c,r]);return(0,b.useEffect)((()=>{l&&d()}),[s,d,l]),(0,v.jsx)(v.Fragment,{children:l?n:e})};function cC(){const[e,t]=(0,b.useState)(!1),[n,i]=(0,b.useState)(!1),[r,o]=(0,b.useState)(!1),s=(0,a.useNavigate)(),l=(0,m.jL)(),c=(0,a.useLocation)(),d=(0,a.useParams)(),u=parseInt(d.ticketTypeId||"0"),[p]=(0,a.useSearchParams)(),h=(0,m.GV)(jw),g=(0,m.GV)(Mk(u));(0,b.useEffect)((()=>()=>{l((0,sC.is)(u))}),[l,u]);return(0,v.jsx)(lC,{selector:Mk(u),action:e=>(0,sC.Zw)(e,u),fallback:(0,v.jsx)(w.A,{}),children:(0,v.jsx)(aC,{email:h,descriptors:null==g?void 0:g.formFields,isLoading:e,hasFailed:n,onSubmit:async(e,n)=>{try{t(!0),i(!1);const o=Lt.Ay;n&&n!==h&&await l((0,Na.$8)(o,n));const a=p.get("conversationId"),d=await l((0,sC.Z2)(o,u,e,a));if(null==d||!d.id)throw new Error("Couldn't create ticket");var r;(0,Ve.A5)("submitted","create_ticket_form","messenger",null==(r=c.state)?void 0:r.context,{ticket_type_id:u}),l((0,sC.Vf)([d])),s((0,fp.sq)(d.id,!0),{replace:!0}),t(!1)}catch(e){(0,Ur.l2)(e),i(!0)}},onCancel:e=>{e.preventDefault(),s(-1)},updateForm:async(e,t,n)=>{try{o(!0);const i=await l((0,sC.Zw)(Lt.Ay,u,t,n.id));if(i){const t=new Set(i.formFields.map((e=>e.id))),n=i.formFields.reduce(((e,t)=>(e[t.id]=t.value,e)),{}),r=Object.entries(e).reduce(((e,[i,r])=>(t.has(i)&&n[i]&&(e[i]=r),e)),{});return o(!1),{values:r,formFields:i.formFields}}return o(!1),null}catch(e){return(0,Ur.l2)(e),o(!1),null}},isUpdatingForm:r})})}const dC=()=>(0,v.jsx)(G,{header:(0,v.jsx)(Bk,{}),children:(0,v.jsx)(cC,{})});var uC=n(90644);const pC=(0,k.Ay)("div",{target:"ed94l235"})({name:"epubhy",styles:"min-width:100%;min-height:calc(100% - 71px - 32px);margin:0;background-color:none"}),hC=(0,k.Ay)("div",{target:"ed94l234"})("border-top:none;padding:0 ",(({theme:e})=>`${e.globalHorizontalPadding}px`)," 10px;background-color:none;"),mC=(0,k.Ay)("div",{target:"ed94l233"})("display:flex;justify-content:center;background-color:",(({theme:e})=>e.containerBaseNeutral),";",(({horizontal:e,theme:t})=>e&&(0,k.AH)("padding:0px ",t.globalHorizontalPadding,"px;")),";"),gC=(0,k.Ay)("div",{target:"ed94l232"})("min-height:152px;background:",(({theme:e})=>e.containerBaseNeutral),";padding-top:16px;"),xC=(0,k.Ay)("div",{target:"ed94l231"})("background-color:",(0,k.w4)("iconDisabled"),";min-height:32px;display:flex;align-items:center;justify-content:center;svg{margin-right:10px;}"),fC=(0,k.Ay)("div",{target:"ed94l230"})("display:flex;flex-direction:column;position:relative;align-items:center;justify-content:center;gap:8px;margin-top:auto;margin-bottom:32px;color:",(0,k.w4)("textMuted"),";font-size:14px;line-height:21px;");var vC=n(61641);function yC(){return(0,v.jsxs)(xC,{children:[(0,v.jsx)(vC.A,{}),(0,v.jsx)("span",{children:(0,Xe.Tl)("tickets_submitted_confirmation_header")})]})}const bC=(0,k.Ay)(Se.A,{target:"enos32b0"})({name:"5s17cv",styles:"padding:12px 0px"});function wC(e,t){if("image"===e||"video"===e||"attachment"===e)return e;const n=t.substring(t.lastIndexOf("."));return/(gif|jpg|jpeg|tiff|png)$/i.test(n)?"image":/(mp4|mov|avi|wmv|mkv)$/i.test(n)?"video":"attachment"}function jC({attributes:e}){return(0,v.jsx)(v.Fragment,{children:Object.keys(e).map((t=>{const n=e[t].id,i=e[t].name,r=(0,fp.ZQ)(e[t].value),o=e[t].type;if(null===r||0===r.length)return null;if("files"===o&&Array.isArray(r)){const e=r.map((e=>({id:e.id,name:e.name,url:e.url,mediaType:wC(e.mediaType,e.name)})));return(0,v.jsxs)(bC,{size:"medium",children:[(0,v.jsx)("strong",{children:i}),(0,v.jsx)(kA,{files:e},n)]},n)}if("blocks"===o){const e="string"==typeof r?JSON.parse(r):r;return(0,v.jsxs)(bC,{size:"small",children:[(0,v.jsx)("strong",{children:i}),(0,v.jsx)(pi.A,{blocks:e})]},n)}return"string"==typeof r?(0,v.jsx)(bC,{note:(0,fp.a2)(r,o),size:"small",children:(0,v.jsx)("strong",{children:i})},n):null}))})}function kC({value:e}){const t=(0,di.A)();return(0,v.jsx)(Se.A,{bgColor:t.containerNeutral,rounded:!0,rightIcon:"NotificationsIcon",rightIconColor:"iconDefault",note:e,style:{marginBottom:"10px"},children:(0,v.jsx)("strong",{children:(0,Xe.Tl)("youll_be_notified_here_and_by_email")})})}var AC;function CC(){return CC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},CC.apply(null,arguments)}const SC=e=>b.createElement("svg",CC({xmlns:"http://www.w3.org/2000/svg",width:40,height:40,fill:"none",viewBox:"0 0 40 40","aria-hidden":"true"},e),AC||(AC=b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M20 40c11.046 0 20-8.954 20-20S31.046 0 20 0 0 8.954 0 20s8.954 20 20 20m9.601-25.4a.85.85 0 1 0-1.202-1.201l-11.92 11.92-4.878-4.877a.85.85 0 0 0-1.202 1.202l5.478 5.479a.85.85 0 0 0 1.202 0z",clipRule:"evenodd"}))),TC=(0,k.Ay)("div",{target:"eja8muk2"})("background-color:",(0,k.w4)("containerBaseNeutral"),";display:flex;flex-direction:column;align-items:center;padding:8px 20px 24px;text-align:center;svg{path{fill:",(0,k.w4)("iconSuccess"),";}}"),_C=(0,k.Ay)("p",{target:"eja8muk1"})("font-weight:600;line-height:19px;margin-top:25px;margin-bottom:18px;color:",(0,k.w4)("textDefault"),";"),EC=(0,k.Ay)("p",{target:"eja8muk0"})("font-size:14px;line-height:17px;color:",(0,k.w4)("textDefault"),";");function IC(){return(0,v.jsxs)(TC,{children:[(0,v.jsx)(SC,{}),(0,v.jsx)(_C,{ref:e=>{null==e||e.focus()},tabIndex:-1,children:(0,Xe.Tl)("tickets_created_confirmation_header")}),(0,v.jsx)(EC,{children:(0,Xe.Tl)("tickets_submitted_confirmation_paragraph")})]})}const zC=(0,k.Ay)("div",{target:"e849yud2"})({name:"1erklzy",styles:"position:relative;box-sizing:border-box;overflow-y:hidden"}),NC=(0,k.Ay)(B.B1,{target:"e849yud1"})("position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;color:",(0,k.w4)("textDefault"),";transition:opacity ",(e=>e.duration),"ms;&,&.fade-enter,&.fade-appear{opacity:0;z-index:1;}&.fade-enter-active,&.fade-appear-active{opacity:1;z-index:1;}&.fade-exit{z-index:2;opacity:1;pointer-events:none;}&.fade-exit-active,&.fade-exit-done{z-index:2;opacity:0;pointer-events:none;}&.fade-enter-done,&.fade-appear-done{opacity:1;}"),MC=(0,k.Ay)("div",{target:"e849yud0"})({name:"1advd6w",styles:"min-width:100%;min-height:100%"});function RC({children:e,duration:t=zr.qZ,transitionKey:n,className:i,innerClassName:r,onEnter:o}){const a=(0,b.useRef)({});return a.current[n]||=(0,b.createRef)(),(0,v.jsx)(zC,{className:i,children:(0,v.jsx)(B.F,{children:(0,v.jsx)(NC,{classNames:"fade",className:r,timeout:t,duration:t,appear:!0,mountOnEnter:!0,unmountOnExit:!0,nodeRef:a.current[n],onEnter:()=>{var e;const t=null==(e=a.current[n])?void 0:e.current;t&&o&&o(t)},children:(0,v.jsx)(MC,{ref:a.current[n],children:e})},n)})})}const BC=["onHeightChange","children"];function PC(e){let{onHeightChange:t,children:n}=e,i=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,BC);const[r,o]=(0,At.A)(),a=(0,Kb.Z)(r.height);return(0,b.useEffect)((()=>{r.height>-1&&r.height!==a&&t&&t(r.height)}),[t,r.height,a]),(0,v.jsx)(k.Z2,{children:({css:e,cx:t})=>(0,v.jsx)(RC,Object.assign({},i,{className:t(i.className,e`
              min-height: ${r.height}px;
              min-width: 100%;
            `),onEnter:e=>{e.firstChild&&(o.current=e.firstChild)},children:(0,v.jsx)("div",{children:n})}))})}const LC={send:"NewConversation",conversation:"ViewConversation"};function OC({text:e,icon:t,conversationId:n}){const i=(0,m.jL)();return(0,v.jsx)(Bg.A,{iconType:LC[t],onClick:()=>{i((0,sn.QL)(Lt.Ay,n,{requestOrigin:"Ticket Details Click"})),i((0,ln.p)(n))},borderRadius:10,variant:"secondary","data-testid":"ticket-details-conversation-button",children:e})}function DC({ticket:e}){const{conversationButton:t}=e;return(0,v.jsxs)(fC,{children:[(0,Xe.Tl)("tickets_cta_text"),t?!t.continueConversation&&t.conversationChannel?(0,v.jsxs)("span",{"data-testid":"ticket-details-conversation-text",children:["Continue this conversation via ",t.conversationChannel]}):(0,v.jsx)(OC,{text:t.text,icon:t.icon,conversationId:e.conversationId}):e.isFetching&&(0,v.jsx)(w.A,{inline:!0})]})}function HC({ticket:e,notificationsEmail:t,notificationsEnabled:n,showTicketCreatedMessage:i,showSubmittedScreen:r=!1}){const o=(0,a.useLocation)(),{state:s}=o,l=s&&s.navigatingFrom,c=l===Ge.wU||l===Ge.vU,d=l||"conversation",u=c&&e.conversationId;return(0,b.useEffect)((()=>{(0,Ve.A5)("viewed","ticket_details","messenger",d,{ticketTypeId:e.ticketTypeId,status:e.status,conversationId:e.conversationId})}),[e.ticketTypeId,e.status,e.conversationId,d]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(pC,{children:[(0,v.jsx)(gC,{children:(0,v.jsx)(PC,{transitionKey:r.toString(),children:r?(0,v.jsx)(IC,{}):(0,v.jsx)(mC,{horizontal:!0,children:e.history.length?(0,v.jsx)(Km,{history:e.history,currentStatus:e.status,assignee:e.assignee}):null})})}),(0,v.jsxs)(hC,{children:[n&&t&&(0,v.jsx)(kC,{value:t}),e.attributes&&(0,v.jsx)(jC,{attributes:e.attributes})]})]}),i&&(0,v.jsx)(yC,{}),u&&(0,v.jsx)(DC,{ticket:e})]})}var FC=n(85937);const VC=(0,uC.A)("div",{target:"e1heqk1y0"})({name:"1jasg0b",styles:"flex-grow:1;overflow-y:auto"});function GC(){const{ticketId:e=""}=(0,a.useParams)(),t=(0,m.GV)((0,Hi.aw)(e)),n=(0,m.GV)(x.bA),i=(0,m.GV)(jw),[r]=(0,a.useSearchParams)(),o=r.get("submitted"),s=(0,m.jL)(),l=!1===(null==t?void 0:t.read);return(0,b.useEffect)((()=>{l&&s((0,FC.C)(e))}),[e,l,s]),t&&t.id?(0,v.jsx)(VC,{children:(0,v.jsx)(HC,{showSubmittedScreen:!!o,ticket:t,notificationsEnabled:n,notificationsEmail:i,showTicketCreatedMessage:!1})}):null}const $C=()=>(0,v.jsx)(G,{header:(0,v.jsx)(Pk,{}),children:(0,v.jsx)(GC,{})});var qC=n(7494);var UC={name:"wjx6sl",styles:"padding-bottom:400px"},WC={name:"2o6p8u",styles:"justify-content:space-between"};const KC=(0,k.Ay)("div",{target:"e1e4bhdc6"})("display:flex;flex-direction:column;min-height:100%;box-sizing:border-box;",(({spaced:e})=>e&&WC)," ",(e=>e.extraIOSPadding&&UC),";"),XC=(0,k.Ay)("section",{target:"e1e4bhdc5"})("flex:1;position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;display:flex;flex-direction:column;",St.m.className,"{flex:1;display:flex;flex-direction:column;}",(e=>e.searchView&&`\n    ${qC.L4.className} {\n      height: 36px;\n      background: linear-gradient(180deg, ${(0,k.w4)("baseAlpha")} 0%, ${(0,k.w4)("alphaWhite100")} 100%);\n    }`),";"),YC=(0,k.Ay)("div",{target:"e1e4bhdc4"})({name:"xdvdnl",styles:"margin-top:auto"});var ZC={name:"1n11t60",styles:"padding:24px 0 12px;box-sizing:border-box;border-top-width:1px;border-top-style:solid;margin-left:-24px;margin-right:-24px;width:auto"};const JC=(0,k.Ay)("div",{target:"e1e4bhdc3"})("display:flex;flex-direction:column;align-items:center;width:100%;border-color:",(0,k.w4)("borderEmphasisNeutral"),";",(({withBorderTop:e})=>e&&ZC),";"),QC=(0,k.Ay)("div",{target:"e1e4bhdc2"})("display:flex;align-items:center;a{white-space:nowrap;}color:",(0,k.w4)("textDefault"),";text-align:center;font-size:14px;line-height:22px;margin-top:8px;"),eS=(0,k.Ay)("div",{target:"e1e4bhdc1"})("display:flex;flex-direction:column;align-items:center;",Ee.className,"{margin-right:10px;}"),tS=(0,k.Ay)("div",{target:"e1e4bhdc0"})({name:"iqoq9n",styles:"margin-top:20px"});function nS({inArticle:e=!1}){var t;const n=(0,m.GV)(Ke.FQ),i=(0,m.GV)(Mg._9),r=(0,m.GV)(he);return(0,v.jsxs)(eS,{children:[(0,v.jsx)(Lg,{metricsContext:e?Ge.BU:Ge.m4,metadata:e?{article_id:null==i?void 0:i.id}:{phrase:n}}),(0,v.jsx)(QC,{children:(null==r||null==(t=r.action)?void 0:t.subtitle)??(0,Xe.Tl)("the_team_can_help_if_needed")})]})}function iS({inArticle:e=!1,withBorderTop:t=!1,onlyShowAfterArticleView:n=!1}){const i=(0,m.GV)(x._D),r=(0,m.GV)(Ke.Rz);return n&&!r?null:(0,v.jsx)(YC,{children:(0,v.jsx)(JC,{withBorderTop:t,children:i?(0,v.jsx)(nS,{inArticle:e}):(0,v.jsx)(tS,{children:(0,v.jsx)(Lg,{})})})})}var rS=n(60077);function oS(e){const{children:t,hideBorder:n}=e,[i,r]=(0,b.useState)(!1),[o,a]=(0,b.useState)(!0);return(0,v.jsxs)(qC.kV,{hideBorder:n||i,children:[(0,v.jsx)(rS.A,{isInsideModal:!1,flex:!0,dynamicChildrenHeight:!0,onScroll:e=>((e,t,n)=>{const i=e.target;t(i.scrollTop>0),n(i.scrollHeight-i.scrollTop!==i.clientHeight)})(e,r,a),children:t}),(0,v.jsx)(qC.L4,{hideBottomShadow:!o})]})}function aS(){const{hasSearchResults:e,showSearchResults:t,phrase:n,searchResults:i,hideResultsWithDelay:r}=(0,m.GV)((e=>e.browseMode)),[o,a]=(0,b.useState)(!1),[s,l]=(0,b.useState)(!1),c=(null==i?void 0:i.length)||0,d=n&&n.trim().length<=5&&0===c,u=(0,b.useRef)(null);return(0,b.useEffect)((()=>(e&&!t?(l(!1),d?u.current=setTimeout((()=>a(!0)),1e3):a(!0)):o!==t&&(t||e||!r?s||a(t):(l(!0),u.current=setTimeout((()=>{a(!1),l(!1)}),500))),()=>{u.current&&clearTimeout(u.current)})),[e,t,d,o,r,s]),o}const sS=(0,k.Ay)("div",{target:"ekb0q030"})({name:"18malc6",styles:"display:flex;justify-content:center;align-items:center;height:70vh"});const lS=(0,k.Ay)(Tm._,{target:"eb7y7dq1"})({name:"c7q9dg",styles:"margin-bottom:4px;font-weight:600"}),cS=(0,k.Ay)(Tm._,{target:"eb7y7dq0"})("margin-bottom:4px;word-break:break-word;color:",(0,k.w4)("textDefault"),";"),dS=(0,k.Ay)("span",{target:"e1mxjt2c0"})("color:",(0,k.w4)("textMuted"),";"),uS=({title:e,description:t,articlesCount:n,onClick:i})=>{const r=(0,Xe.Tl)(1===n?"single_article":"multiple_articles",{total_articles:n.toString()});return(0,v.jsxs)(Se.A,{note:(0,v.jsx)(dS,{children:r}),rightIcon:"RightChevronColorable",rightIconColor:"linkColor",hoverBackground:!0,onClick:i,useGlobalHorizontalPadding:!0,"data-testid":"collection-card",children:[!!e&&(0,v.jsx)(lS,{children:e}),!!t&&(0,v.jsx)(cS,{children:t})]})};const pS=(0,k.Ay)("div",{target:"e1beiou2"})({name:"a7jy8",styles:"padding:20px 20px 40px;display:flex;flex-grow:1;justify-content:center;flex-direction:column;align-items:center"}),hS=(0,k.Ay)("div",{target:"e1beiou1"})("svg>path{fill:",(0,k.w4)("iconDefault"),";}svg>path[class$='stroke']{stroke:",(0,k.w4)("iconDefault"),";fill:none;}svg{*[class$='__circle']{fill:",(0,k.w4)("iconDefault"),";stroke:",(0,k.w4)("iconDefault"),";}*[class$='__negative']{stroke:",(0,k.w4)("iconOnInverse"),";}circle[class*='__negative']{fill:",(0,k.w4)("iconOnInverse"),";stroke:none;}}"),mS=(0,k.Ay)("p",{target:"e1beiou0"})("display:block;margin-top:10px;margin-bottom:20px;font-weight:600;font-size:18px;line-height:24px;color:",(0,k.w4)("textDefault"),";"),gS=()=>(0,v.jsxs)(pS,{children:[(0,v.jsx)(hS,{children:(0,v.jsx)(Te.Ay,{type:"HelpActive",size:30})}),(0,v.jsx)(mS,{children:(0,Xe.Tl)("no_articles_to_display")})]}),xS=({collections:e,onCollectionClick:t})=>{const n=(null==e?void 0:e.length)||0;if(0===n)return(0,v.jsx)(sS,{children:(0,v.jsx)(gS,{})});const i=1===n?(0,Xe.Tl)("single_collection"):(0,Xe.Tl)("multiple_collections",{total_collection:n.toString()});return(0,v.jsx)(Ce.A,{title:i,children:null==e?void 0:e.map(((e,n)=>(0,v.jsx)(uS,{title:e.title,description:e.description,articlesCount:e.articlesCount,onClick:()=>t(e.id)},n)))})},fS=e=>e.sections.reduce(((e,t)=>{var n;return e+((null==(n=t.articles)?void 0:n.length)||0)}),0),vS=()=>{const e=(0,m.jL)(),t=(0,m.GV)((e=>e.articleCollections)),n=(0,m.GV)((e=>e.browseMode.isFetching)),i=t.map((e=>{const t=e.children.length>0||e.articles.length>0;return{id:e.id,title:e.name,description:e.description,articlesCount:t?e.articleCount:fS(e),articles:e.articles,children:e.children}}));if(n)return(0,v.jsx)(w.A,{});return(0,v.jsx)(xS,{collections:i,onCollectionClick:t=>{n||e((0,We.LF)(t))}})};var yS=n(35304);function bS({html:e,color:t="textDefault"}){return e.split(/<\/?highlight>/).map(((e,n)=>function(e,t,n){if(t%2)return(0,v.jsx)(jS,{color:n,children:e},t);return(0,v.jsx)(wS,{color:n,children:e},t)}(e,n,t)))}const wS=(0,k.Ay)("span",{target:"e1ufeahq1"})("color:",(({color:e})=>(0,k.w4)(e)),";"),jS=(0,k.Ay)("span",{target:"e1ufeahq0"})("color:",(({color:e})=>(0,k.w4)(e)),";font-weight:600;"),kS=(0,k.Ay)(Se.A,{target:"e1yf8hpl2"})((({isSearch:e,theme:t})=>e&&(0,k.AH)("&:hover{",AS.className,"{color:",t.textMuted,";}}")),";"),AS=(0,k.Ay)(Tm._,{target:"e1yf8hpl1"})("color:",(0,k.w4)("textMuted"),";",jS.className,"{font-weight:400;color:",(({theme:e})=>e.isPrimaryColorAsTheme?e.textDefault:e.primaryColor),";}"),CS=(0,k.Ay)(Tm._,{target:"e1yf8hpl0"})("font-weight:400;flex:1;",jS.className,"{font-weight:400;color:",(0,k.w4)("linkColor"),";}"),SS=({title:e,onClick:t,children:n,search:i,role:r})=>(0,v.jsxs)(kS,{isSearch:i,size:"medium",rightIcon:"RightChevronColorable",rightIconColor:"linkColor",hoverBackground:!0,onClick:t,useGlobalHorizontalPadding:!0,role:r,children:[(0,v.jsx)(CS,{children:e}),n&&(0,v.jsx)(AS,{children:n})]});var TS=n(27606);const _S=(0,k.Ay)(yS.Sv,{target:"ew5plsk0"})({name:"1sdjnkx",styles:"word-break:break-word"}),ES=({title:e,articleCount:t,description:n,authors:i})=>{const r=i.reduce(((e,t)=>{const n=(0,TS.sU)(t);return n&&e.push(n),e}),[]),o=(0,De.v)(r,3,!0),a=i.length>0;let s="";return 1===i.length?s=(0,Xe.Tl)("article_single_author",{author_first_name:o[0].firstName}):2===i.length?s=(0,Xe.Tl)("article_double_author",{author_first_name1:o[0].firstName,author_first_name2:o[1].firstName}):i.length>2&&(s=(0,Xe.Tl)("article_multiple_authors",{author_first_name1:o[0].firstName,number_of_other_authors:(o.length-1).toString()})),(0,v.jsxs)(b.Fragment,{children:[(0,v.jsx)(yS.ed,{children:e}),n&&(0,v.jsx)(_S,{children:n}),(0,v.jsxs)(yS.dE,{children:[(0,v.jsxs)(yS.Mx,{children:[(0,Xe.Tl)(1===t?"single_article":"multiple_articles",{total_articles:t.toString()}).toLowerCase(),(0,v.jsx)("br",{}),a&&(0,v.jsx)("span",{"data-testid":"authors-container",children:s})]}),a&&(0,v.jsx)(Fe,{admins:r,avatarSize:28,avatarPixelsToShow:25,maxAdmins:3,useCutout:!0})]})]})},IS=({title:e,onClick:t})=>(0,v.jsx)(Ce.E.Provider,{value:{insideList:!0,noDivider:!0},children:(0,v.jsx)(SS,{title:e,onClick:t})}),zS=({name:e,description:t,articleCount:n,sections:i,articles:r,children:o,authors:a,onArticleClick:s,onCollectionClick:l})=>{if(r.length>0||o.length>0){const i={headerContent:(0,v.jsx)(ES,{title:e,articleCount:n,description:t,authors:a})};return(0,v.jsxs)(Ce.A,Object.assign({},i,{children:[r.length>0&&r.map((e=>(0,v.jsx)(IS,{title:e.title,onClick:()=>s(e.id)},e.id))),o.map((e=>(0,v.jsx)(uS,{title:e.name,description:e.description,articlesCount:e.articleCount,onClick:()=>l(e.id)},e.id)))]}))}{const r={title:e,description:t,note:(0,Xe.Tl)(1===n?"single_article":"multiple_articles",{total_articles:n.toString()})};if(1===i.length){const e=i[0].articles;return(0,v.jsx)(Ce.A,Object.assign({noDivider:!0},r,{children:e.map((e=>(0,v.jsx)(IS,{title:e.title,onClick:()=>s(e.id)},e.id)))}))}return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(Ce.A,Object.assign({},r)),null==i?void 0:i.map((e=>(0,v.jsx)(Ce.E.Provider,{value:{insideList:!0,noDivider:!1},children:(0,v.jsxs)("div",{children:[e.name&&(0,v.jsx)(yS.iS,{children:(0,v.jsx)(yS.w6,{children:e.name})}),(0,v.jsx)(Ce.A,{noDivider:!0,children:e.articles.map((e=>(0,v.jsx)(IS,{title:e.title,onClick:()=>s(e.id)},e.id)))})]})},e.id)))]})}},NS=()=>{const{"*":e}=(0,a.useParams)(),t=(0,m.GV)(Mg.ZV),n=null==e?void 0:e.split("/").slice(-1)[0];return n||1!==t.length?n:`${t[0].id}`},MS=()=>{const e=(0,m.jL)(),t=(e=>{const t=(0,m.GV)(Mg.ZV);if(!e)return null;const n=t=>t.id===parseInt(e)?t:t.children?t.children.map((e=>n(e))).reduce(((e,t)=>e||t),null):null;return t.map((e=>n(e))).reduce(((e,t)=>e||t),null)})(NS()),n=(null==t?void 0:t.sections)||[];return t?(0,v.jsx)(zS,{id:t.id,name:t.name,description:t.description,articleCount:t.articleCount,sections:n,articles:t.articles,authors:t.authors,onArticleClick:t=>{e((0,Ue.Y0)(t,null,!0,!0))},onCollectionClick:t=>{e((0,We.LF)(t))},children:t.children}):null};function RS(e){if(!e)return"";const t=e.indexOf("<highlight>"),{innerWidth:n}=(0,ai.mC)();let i;return i=n>400?30:n/40,t<i?e:function(e,t){const n=e.substring(t);return"..."+n.substring(n.indexOf(" "))}(e,t-i)}function BS(e){const[t,n]=(0,b.useState)(RS(e.text));return(0,b.useEffect)((()=>{const t=()=>{n(RS(e.text))};return(0,ai.eA)(t),()=>(0,ai.Jz)(t)}),[e.text]),(0,v.jsx)(bS,{html:t})}const PS=(0,k.Ay)(yS.B8,{target:"e1sazqd70"})();var LS=n(23617);const OS=["title","sectionTitle","description","note","headerContent","padding","noDivider","children"];const DS=function(e){let{title:t,sectionTitle:n,description:i,note:r,headerContent:o,padding:a=0,noDivider:s=!1,children:l}=e,c=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,OS);const{insideList:d}=(0,b.useContext)(Ce.E),{fullBleed:u}=(0,b.useContext)(Ae.E);return(0,v.jsxs)(PS,Object.assign({padding:a,divider:d,fullBleed:u},c,{children:[(0,LS.G)({title:t,description:i,note:r,headerContent:o}),(0,LS.O)({sectionTitle:n}),(0,v.jsx)(Ce.E.Provider,{value:{insideList:!0,noDivider:s},children:l})]}))};const HS=(0,k.Ay)(DS,{target:"e1ft3ngy0"})({name:"74n2tq",styles:"padding-top:12px"}),FS=()=>{const e=(0,m.jL)(),t=(0,m.GV)(Ke.mE),n=(0,m.GV)(Ke.sO);return(0,v.jsx)(HS,{noDivider:!0,role:"listbox",id:"help-search-results-listbox","aria-label":"Search results",children:t.map(((t,i)=>(0,v.jsx)(SS,{onClick:()=>((t,n,i)=>{(0,Ve.A5)("clicked","help_center","search_results","",{article_id:t,result_rank:n,search_query:i},"search_browse_event"),e((0,Ue.Y0)(t,{result_rank:n,phrase:i},!0,!0))})(t.id,i+1,n),title:(0,v.jsx)(bS,{html:t.title}),search:!0,role:"option",children:t.summary&&(0,v.jsx)(BS,{text:t.summary})},t.id)))})};const VS=(0,k.Ay)("div",{target:"eil0dwm2"})({name:"a7jy8",styles:"padding:20px 20px 40px;display:flex;flex-grow:1;justify-content:center;flex-direction:column;align-items:center"}),GS=(0,k.Ay)("div",{target:"eil0dwm1"})("text-align:center;p{line-height:21px;font-size:14px;color:",(0,k.w4)("textMuted"),";&:first-of-type{color:",(0,k.w4)("textDefault"),";span{font-weight:600;}}}"),$S=(0,k.Ay)("p",{target:"eil0dwm0"})("display:block;margin:24px 0 12px 0;font-weight:600;font-size:18px;line-height:24px;color:",(0,k.w4)("textDefault"),";"),qS=()=>{const e=(0,m.GV)(Ke.sO);return(0,v.jsxs)(VS,{children:[(0,v.jsx)($S,{children:(0,Xe.Tl)("try_again")}),(0,v.jsx)(GS,{children:(0,v.jsxs)("p",{children:[(0,Xe.Tl)("no_results_for_searchterm",{searchTerm:""}),(0,v.jsxs)("span",{children:["'",e,"'"]})]})})]})},US=(0,k.Ay)("div",{target:"e101p0br0"})("margin-top:auto;margin-bottom:20px;display:flex;flex-direction:column;align-items:center;position:relative;",gA.A.className,"{margin-top:16px;box-shadow:",(0,k.w4)("shadowSmall"),";border:1px solid ",(0,k.w4)("alphaWhite10"),"!important;}"),WS=()=>(0,v.jsx)(tt,{animationKey:"help-space-footer",children:(0,v.jsx)(US,{children:(0,v.jsx)(Lg,{styleVariant:"secondary"})})}),KS=e=>e.browseMode.hasSearchResults||e.browseMode.showSearchResults,XS=e=>e.browseMode.isSearchFocused,YS=(0,b.forwardRef)((function(e,t){const n=(0,m.GV)(x.Ei),i=(0,m.GV)(XS),[r,o]=(0,b.useState)(!1),[a,s]=(0,b.useState)(!0),[l,c]=(0,b.useState)(!1),d=(0,m.GV)(KS),u=aS()||d,p=NS(),h=!p,g=!!p,f=(0,Lo.rr)(),y=(0,m.GV)(Ke.P5),w=(0,m.GV)(Ke.Rz);function j(){const e=u&&n;return e&&y||e&&!y&&w?(0,v.jsx)(WS,{}):(0,v.jsx)(tt,{animationKey:"search-browse-footer",children:(0,v.jsx)(v.Fragment,{children:e&&(0,v.jsx)(iS,{onlyShowAfterArticleView:!y,withBorderTop:!0})})},`search-browse-footer-${String(u)}`)}const k=(0,b.useRef)(null),A=(0,b.useRef)(null),C=(0,b.useRef)(null);return(0,v.jsx)(XC,{ref:t,searchView:u,children:(0,v.jsx)(oS,{hideBorder:!0,children:(0,v.jsxs)(KC,{extraIOSPadding:(0,Lo.un)()&&i,spaced:u,children:[(0,v.jsx)(B.B1,{in:h&&!r&&!u&&!l,classNames:"intercom-search-browse-fade",appear:!1,timeout:150,mountOnEnter:!0,unmountOnExit:!0,onEnter:()=>s(!1),onExited:()=>s(!0),nodeRef:k,children:(0,v.jsx)("div",{ref:k,children:(0,v.jsx)(vS,{})})}),(0,v.jsx)(B.B1,{in:g&&a&&!u&&!l,classNames:"intercom-search-browse-article-collection-fade",timeout:150,appear:!1,mountOnEnter:!0,unmountOnExit:!0,onEnter:()=>o(!0),onEntered:()=>o(!0),onExited:()=>{o(!1)},nodeRef:A,children:(0,v.jsx)("div",{ref:A,children:(0,v.jsx)(MS,{})})}),(0,v.jsx)(B.B1,{in:u&&a&&!r,classNames:"intercom-search-browse-fade",timeout:150,mountOnEnter:!0,unmountOnExit:!0,onEnter:()=>c(!0),onExited:()=>c(!1),nodeRef:C,children:(0,v.jsxs)("div",{ref:C,children:[(0,v.jsx)(v.Fragment,{children:y?(0,v.jsx)(qS,{}):(0,v.jsx)(FS,{})}),!f&&j()]})}),f&&j()]})})})}));var ZS=n(64426);var JS={name:"13udsys",styles:"height:100%"},QS={name:"1h8nup8",styles:"overflow:visible"};const eT=(0,k.Ay)("div",{target:"eq193l70"})("position:relative;min-width:100%;display:flex;flex-direction:column;overflow:auto;",(({showArticle:e})=>e&&QS)," ",(({fullHeight:e})=>e&&JS)," .intercom-search-browse-fade{&-enter{opacity:0;}&-enter-active{opacity:1;transition:opacity 100ms ease-in-out;}&-exit{opacity:1;}&-exit-active{opacity:0;transition:opacity 100ms ease-in-out;}}.intercom-search-browse-article-collection-fade{&-enter{opacity:0;}&-enter-active{opacity:1;transition:opacity 100ms ease-in-out;}&-exit{opacity:1;}&-exit-active{opacity:0;transition:100ms ease-in-out;}}.intercom-search-browse-slide-left-out{&-exit{transform:translateX(0);opacity:1;}&-exit-active{transform:translateX(-12px);opacity:0;transition:100ms ease-in-out;}}.intercom-search-browse-article-collection-in{&-enter,&-appear{transform:translateX(12px);opacity:0;}&-enter-active,&-appear-active{transform:translateX(0);opacity:1;transition:100ms ease-in-out;}&-exit{transform:translateX(0);opacity:1;}&-exit-active{transform:translateX(12px);opacity:0;transition:100ms ease-in-out;}}.intercom-search-browse-article-collection-fade-in{&-enter,&-appear{opacity:0;}&-enter-active,&-appear-active{opacity:1;transition:25ms ease-in-out;}}",ZS.j.className,"{color:",(0,k.w4)("textDefault"),";background-color:",(0,k.w4)("containerBaseNeutral"),";border:1px solid ",(0,k.w4)("borderEmphasisNeutral"),";transition:color 0.15s ease 0s,background-color 0.15s ease 0s,border 0.15s ease 0s;",(({theme:e})=>{const t=e.isPrimaryColorLight?e.appColorDarker:e.primaryColor;return(0,k.AH)(Hg.M.className,"{path{fill:",t,";}}&:hover,&:active{color:",t,";border:1px solid ",t,";background-color:",e.containerBaseNeutral,";",Hg.M.className,"{path{fill:",t,";}}}")}),";span{font-weight:400;}}");function tT(){return(0,v.jsx)(eT,{showArticle:!1,fullHeight:!0,children:(0,v.jsx)(YS,{})})}const nT=(0,k.Ay)("div",{target:"e1xvqlab0"})({name:"hkh81z",styles:"margin-top:8px"}),iT=e=>e.current&&clearTimeout(e.current),rT=({showSearchResults:e,onPhraseChange:t,onCloseClick:n,focusOnMount:i})=>{var r;const[o,a,s]=(({timeout:e=1500}={})=>{const[t,n]=(0,b.useState)(!1),i=(0,b.useRef)(),r=(0,b.useRef)(null),o=(0,b.useRef)(null),a=(0,b.useCallback)((()=>{var e;return void 0!==i.current&&""!==(null==(e=i.current)?void 0:e.value)}),[i]),s=(0,b.useCallback)((()=>{iT(r),r.current=setTimeout((()=>{iT(o),o.current=null,n(!1)}),1e3)}),[]);return(0,b.useEffect)((()=>()=>{iT(r),iT(o)}),[]),(0,b.useEffect)((()=>{if(n(!1),!i.current)return;const t=t=>{a()?("Enter"===t.key||o.current||(o.current=setTimeout((()=>{iT(o),n(a())}),e)),s()):(iT(r),iT(o),o.current=null,n(!1))},l=()=>{iT(r),iT(o),o.current=null,n(!1)},c=i.current;return c.addEventListener("keyup",t),c.addEventListener("blur",l),()=>{c.removeEventListener("keyup",t),c.removeEventListener("blur",l)}}),[i,a,s,e]),[i,t,n]})({timeout:500}),l=(0,Kb.Z)(a),c=(0,Kb.Z)(null==(r=o.current)?void 0:r.value),[d,p]=(0,b.useState)(!1),h=(0,yr.IS)(),m=aS()||e;(0,b.useEffect)((()=>{let e;return i&&o.current&&(e=(0,u.nB)(o.current,500)),()=>clearTimeout(e)}),[o,i]);return{inputRef:o,isCurrentlyTyping:a,previouslyWasTyping:l,hideResultsWithDelay:d,isMobile:h,showResults:m,handleKeyDown:e=>{if(e.keyCode===u.Rk.ENTER){const t=e.target.value;t&&t!==c&&s(!0)}p(e.keyCode===u.Rk.DELETE||e.keyCode===u.Rk.BACKSPACE)},handleOnCloseClick:()=>{h?n():(t("",d),o.current&&o.current.focus())}}};var oT={name:"y74jut",styles:"input{font-size:16px;}"};const aT=(0,k.Ay)("div",{target:"ejr06bz4"})("display:flex;align-items:center;justify-content:center;position:relative;transition:250ms;border-radius:12px;",(({hasValue:e,theme:t})=>e&&(0,k.AH)("border:1px solid ",t.borderEmphasisNeutral,";background-color:",t.containerBaseNeutral,";color:",t.textDefault,";"))," background-color:",(0,k.w4)("input"),";input{width:100%;padding:11.5px 5px;padding-left:10px;font-size:14px;color:",(0,k.w4)("textDefault"),";}",(({theme:e})=>e.isMobileBrowser&&oT),";"),sT=(0,k.Ay)("div",{target:"ejr06bz3"})({name:"145x1ps",styles:"cursor:text;display:flex;align-items:center;width:100%;position:relative"});var lT={name:"160lj66",styles:"p{opacity:0%;}"},cT={name:"16ro1vx",styles:"i{opacity:0%;}"};const dT=(0,k.Ay)("div",{target:"ejr06bz2"})("position:absolute;display:flex;align-items:center;left:50%;transform:translateX(-50%);transition:opacity 250ms;color:",(0,k.w4)("textMuted"),";padding:0 10px;width:calc(100% - 19px);flex-direction:row-reverse;justify-content:space-between;pointer-events:none;p,i{opacity:100%;transition:opacity 150ms;}p{font-size:14px;color:",(0,k.w4)("textMuted"),";color:",(({theme:e,whiteBackground:t})=>t||e.isSecondaryColorWhite?e.textDefault:e.textMuted),";}",(({isShowingLoadingSpinner:e,isShowingCloseButton:t})=>(e||t)&&cT)," ",(({isFocused:e})=>e&&lT),";"),uT=(0,k.Ay)("div",{target:"ejr06bz1"})({name:"e0dnmk",styles:"cursor:pointer"}),pT=(0,k.Ay)("div",{target:"ejr06bz0"})({name:"w61jrk",styles:"position:absolute;right:13px;transform:translateY(-50%);&.fade-enter{opacity:0;}&.fade-exit{opacity:1;}&.fade-enter-active{opacity:1;}&.fade-exit-active{opacity:0;}&.fade-enter-active,&.fade-exit-active{transition:opacity 100ms;}"}),hT=({showSearchResults:e,onPhraseChange:t,onCloseClick:n,showBrowseMode:i,phrase:r,onSearchBlur:o,onSearchFocus:a,focusOnMount:s,isFetchingSearchResults:l})=>{var c;const[d,u]=(0,b.useState)(s),{inputRef:p,hideResultsWithDelay:h,handleKeyDown:m,isCurrentlyTyping:g,previouslyWasTyping:x,showResults:f}=rT({showSearchResults:e,onPhraseChange:t,onCloseClick:n,focusOnMount:s}),y=!!p.current&&(null==(c=p.current)?void 0:c.value.length)>0,j=Boolean(g||l&&y&&x),k=!j&&f&&i,A=(0,Xe.Tl)("search_for_help");(0,b.useEffect)((()=>{""===r&&p.current&&""!==p.current.value&&(p.current.value="")}),[p,r]);const C=d||!(!r||""===r),{whiteBackground:S}=M(),T=(0,b.useRef)(null),_=(0,b.useRef)(null);return(0,v.jsx)(aT,{hasValue:C,children:(0,v.jsxs)(sT,{onClick:()=>{var e;return null==(e=p.current)?void 0:e.focus()},role:"none",tabIndex:-1,children:[(0,v.jsx)("input",{ref:p,defaultValue:r,onChange:e=>t(e.target.value,h),onKeyDown:m,onFocus:()=>{u(!0),a()},onBlur:()=>{u(!1),o()},"aria-label":A,role:"combobox","aria-expanded":f,"aria-controls":"help-search-results-listbox","aria-autocomplete":"list"}),(0,v.jsxs)(dT,{whiteBackground:S,isFocused:C,className:"search-input-placeholder",isShowingCloseButton:k,isShowingLoadingSpinner:j,tabIndex:-1,children:[(0,v.jsx)(Te.Ay,{color:"linkColor",type:"Search"}),(0,v.jsx)("p",{children:A})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)(B.B1,{in:j,classNames:"fade",timeout:100,mountOnEnter:!0,unmountOnExit:!0,nodeRef:T,children:(0,v.jsx)(pT,{ref:T,children:(0,v.jsx)(w.A,{size:"tiny",inline:!0})})}),(0,v.jsx)(B.B1,{in:k,classNames:"fade",timeout:100,mountOnEnter:!0,unmountOnExit:!0,nodeRef:_,children:(0,v.jsx)(pT,{ref:_,children:(0,v.jsx)(uT,{"aria-label":(0,Xe.Tl)("clear"),onClick:()=>{t("",h),p.current&&(p.current.focus(),p.current.value="")},children:(0,v.jsx)(Te.Ay,{size:16,type:"CloseM5"})})})})]})]})})},mT=(0,X.Mz)((e=>e.browseMode),(e=>({phrase:e.phrase,isFetchingSearchResults:e.isFetchingSearchResults,showSearchResults:e.showSearchResults}))),gT=()=>{const[e]=(0,a.useSearchParams)(),t=!!e.get("fromHome"),n=(0,m.jL)(),{phrase:i,isFetchingSearchResults:r,showSearchResults:o}=(0,m.GV)(mT),s=(0,m.GV)(Mg.vT),l=!s,c=vk(p.ZL)||(0,Xe.Tl)("help_space_title"),d=(0,a.useLocation)(),u=s||"/help"!==d.pathname||t,h=(0,a.useNavigate)(),g=M(),x=(0,b.useMemo)((()=>Object.assign({},g,{height:64})),[g]),f=u&&(0,v.jsx)(Er.BackButton,{onBack:()=>{s?n((0,Ue.IP)()):(n((0,We.uz)("",!1)),h(-1))},chevronDirection:"left",ariaLabel:(0,Xe.Tl)("help_space_title")});return(0,v.jsx)(N.Provider,{value:s?x:g,children:(0,v.jsxs)(Er.Content,{whiteBackground:!1,showBorder:!0,children:[(0,v.jsx)(Er.TitleArea,{title:s?void 0:c,leftButtonArea:f,backDirection:"left",showExpandButton:s}),!s&&(0,v.jsx)(nT,{children:(0,v.jsx)(hT,{focusOnMount:t,showSearchResults:o,onPhraseChange:(e,t)=>{n((0,We.uz)(e,t))},onCloseClick:()=>{n((0,Jt.Mu)(!0))},isFetchingSearchResults:r,showBrowseMode:l,phrase:i,onSearchBlur:()=>{n((0,We.vs)(!1))},onSearchFocus:()=>{n((0,We.vs)(!0))}})})]})})};var xT=n(59057);const fT=(0,b.forwardRef)((function(e,t){const n=(0,m.GV)(x.ed),i=(0,m.GV)(x._D),r=!i&&n;return(0,v.jsxs)(xT.Jc,{ref:t,children:[!r&&(0,v.jsx)(xT.Oe,{}),i?(0,v.jsx)(xT.Bx,{children:(0,v.jsx)(iS,{inArticle:!0})}):(0,v.jsx)(iS,{inArticle:!0})]})})),vT=(0,k.Ay)("div",{target:"eg87d390"})("min-width:51px;height:51px;box-sizing:border-box;padding:8px;display:flex;justify-content:center;flex-direction:column;align-items:center;cursor:pointer;>svg{width:12;height:12;}>svg>path{fill:",(0,k.w4)("iconMuted"),";}",(({theme:e})=>e.isMobileSize&&(0,k.AH)(">svg>path{fill:",e.isPrimaryColorAsTheme?e.textDefault:e.primaryColor,";}"))," border-radius:",(0,k.w4)("messengerBorderRadiusPx"),"px;&:hover{>svg>path{fill:",(0,k.w4)("iconMuted"),";}}");const yT="ease-out",bT=k.i7`
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
`,wT=k.i7`
  0% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
`,jT=(0,k.Ay)("div",{target:"eub3n504"})({name:"augt7s",styles:"display:flex;flex-direction:row;flex-grow:1"});var kT={name:"1yh8glp",styles:"margin-top:-12px"};const AT=(0,k.Ay)("div",{target:"eub3n503"})("display:flex;flex-grow:1;height:51px;",(({theme:e})=>!e.isMobileSize&&kT)," align-items:center;padding:5px 12px;box-sizing:border-box;overflow:hidden;");var CT={name:"3ix1vd",styles:"opacity:1"};const ST=(0,k.Ay)("div",{target:"eub3n502"})("color:",(0,k.w4)("textDefault"),";font-size:14px;line-height:21px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;transition:opacity 200ms ease-in-out;transition-delay:150ms;overflow:hidden;opacity:0;",(({show:e})=>e&&CT),";");var TT={name:"3ix1vd",styles:"opacity:1"},_T={name:"1j6452b",styles:"position:relative;top:-12px"};const ET=(0,k.Ay)("div",{target:"eub3n501"})("display:flex;flex:1;transition:opacity 0.3s;opacity:0;",(({theme:e})=>e.isMobileSize&&_T)," ",(({show:e})=>e&&TT),";"),IT=(0,k.Ay)("div",{target:"eub3n500"})("padding:24px 8px 5px;display:flex;flex-direction:row;pointer-events:none;",(({headerHeight:e})=>(0,k.AH)("margin:-",e+6,"px 48px 0;"))," &.intercom-messenger-header-view-enter{",ST.className,",",vT.className,"{animation-name:",bT,";animation-duration:","250ms",";animation-timing-function:",yT,";animation-delay:","350ms",";animation-fill-mode:both;}}&.intercom-messenger-header-view-exit{",ST.className,",",vT.className,"{animation-name:",wT,";animation-duration:","150ms",";animation-timing-function:",yT,";animation-delay:","0s",";animation-fill-mode:both;}}");function zT({articleIsScrolled:e,showTitle:t,transitioningBack:n}){const{title:i}=(0,m.GV)(Mg._9)||{},r=(0,m.GV)(Mg.Wm),o=(0,m.GV)(wr.l),a=(0,b.useRef)(null),{height:s}=M(),l=o&&!e,c=(0,b.useRef)(null);return(0,v.jsx)(IT,{ref:a,expanded:l,headerHeight:s,children:(0,v.jsx)(jT,{children:(0,v.jsx)(B.B1,{in:!n,classNames:"intercom-search-browse-fade",timeout:100,mountOnEnter:!0,unmountOnExit:!0,nodeRef:c,children:(0,v.jsx)(ET,{show:r,ref:c,children:(0,v.jsx)(AT,{children:(0,v.jsx)(ST,{show:t,"aria-hidden":"true",children:i})})})})})})}const NT=k.i7`
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
`,MT=(0,k.Ay)("div",{target:"e94v8qu12"})("padding-top:20px;animation-name:",NT,";animation-duration:","50ms",";animation-timing-function:","ease-in-out",";animation-delay:","0s",";animation-fill-mode:both;"),RT=(0,k.Ay)(MT,{target:"e94v8qu11"})(),BT=({theme:e})=>(0,k.AH)("margin-left:10%;background:",e.containerNeutral,";border-radius:100px;",RT.className," &{margin-left:0;}"),PT=(0,k.Ay)("div",{target:"e94v8qu10"})("width:40%;min-height:16px;",BT,";"),LT=(0,k.Ay)("div",{target:"e94v8qu9"})("width:60%;min-height:16px;margin-top:16px;",BT,";"),OT=(0,k.Ay)("div",{target:"e94v8qu8"})(),DT=(0,k.Ay)("div",{target:"e94v8qu7"})({name:"qoz2rc",styles:"margin-top:68px"}),HT=(0,k.Ay)("div",{target:"e94v8qu6"})("width:36px;height:36px;border-radius:50%;background:",(0,k.w4)("iconOnInverse"),";margin-left:10%;margin-top:16px;float:left;",RT.className," &{margin-left:0;}"),FT=(0,k.Ay)("div",{target:"e94v8qu5"})({name:"g0dsyy",styles:"float:left"}),VT=(0,k.Ay)("div",{target:"e94v8qu4"})("min-width:120px;min-height:8px;margin-top:19px;",BT,";"),GT=(0,k.Ay)("div",{target:"e94v8qu3"})("position:relative;min-width:80px;min-height:8px;margin-top:12px;",BT,";"),$T=(0,k.Ay)("div",{target:"e94v8qu2"})("width:80%;min-height:8px;margin-top:16px;",BT,";"),qT=(0,k.Ay)("div",{target:"e94v8qu1"})("width:75%;min-height:8px;margin-top:16px;",BT,";"),UT=(0,k.Ay)("div",{target:"e94v8qu0"})("width:160px;min-height:8px;margin-top:16px;",BT,";");function WT(){return(0,v.jsxs)(MT,{"data-testid":"article-skeleton",children:[(0,v.jsx)(PT,{}),(0,v.jsx)(LT,{}),(0,v.jsxs)(OT,{children:[(0,v.jsx)(HT,{}),(0,v.jsxs)(FT,{children:[(0,v.jsx)(VT,{}),(0,v.jsx)(GT,{})]})]}),(0,v.jsxs)(DT,{children:[(0,v.jsx)($T,{}),(0,v.jsx)(qT,{}),(0,v.jsx)(UT,{})]})]})}var KT=n(427);let XT=function(e){return e.ALEXANDRIA_LOADED="alexandria-loaded",e.SHEET_LOADED="sheet-loaded",e.HEIGHT_CHANGE="height-change",e.SCROLL_TO="scroll-to",e.LINK_CLICKED="link-clicked",e}({});function YT({title:e,url:t,onLoad:n,onSetScrollPosition:i,helpCenterSession:r,appColor:o,navigationSource:a,hash:s}){var l;const c=(0,m.jL)(),d=(0,b.useRef)(null),[u,p]=(0,b.useState)(0),[h,g]=(0,b.useState)(!1),x=(0,di.A)();let f={iframe:"true",user:r,color_override:o,current_url:null==(l=(0,ai.KQ)())?void 0:l.href.toLowerCase(),cross_origin_isolated:window.crossOriginIsolated,theme:x.themeMode};a&&(f=Object.assign({},f,{utm_source:"intercom-messenger",utm_content:a}));const y=s?`${t}?${new URLSearchParams(f).toString()}#${s}`:`${t}?${new URLSearchParams(f).toString()}`;return(0,b.useEffect)((()=>{var e;const t=({data:{intercomSheet:e}})=>{if(!e)return;const{type:t,payload:r}=e;switch(t){case XT.ALEXANDRIA_LOADED:case XT.SHEET_LOADED:h&&g(!1),n&&n(t);break;case XT.HEIGHT_CHANGE:p(r.height+20);break;case XT.SCROLL_TO:i(r.offsetTop);break;case XT.LINK_CLICKED:(0,Ve.A5)("clicked","alexandria-article-link","search-browse","messenger",{url:r.url}),c((0,Ue.NQ)(r.url))}},r=null==(e=d.current)||null==(e=e.ownerDocument)?void 0:e.defaultView;return r&&r.addEventListener("message",t,!1),()=>{r&&r.removeEventListener("message",t)}}),[d,n,c,i,h]),(0,b.useEffect)((()=>{g(!0),d.current&&ZT(d.current,y)}),[x.themeMode,y]),(0,v.jsx)("iframe",{"data-testid":"help-center-article",title:e,sandbox:"allow-scripts allow-forms allow-same-origin allow-popups allow-popups-to-escape-sandbox allow-downloads",src:Vr({overflowHidden:!0}),onLoad:function(e){ZT(e.target,y)},allowFullScreen:!0,allow:"microphone *; camera *; autoplay *",ref:d,style:{width:"100%",minHeight:"100%",height:u,visibility:h?"hidden":"visible"},credentialless:window.crossOriginIsolated?"true":void 0})}function ZT(e,t){var n;const i=(0,KT.oH)(KT.N0,t,KT.N0);null==(n=e.contentWindow)||n.postMessage(i,"*")}function JT({title:e,show:t,onHeightChange:n}){const i=(0,m.GV)(wr.l);return(0,v.jsx)(St.A,{onHeightChange:n,children:(0,v.jsx)(t_,{show:t,isExpanded:i,children:e})})}var QT={name:"6rria8",styles:"padding:20px 40px 4px 40px;font-size:28px;line-height:130%"},e_={name:"3ix1vd",styles:"opacity:1"};const t_=(0,k.Ay)("h1",{target:"eltcq8z0"})("opacity:0;padding:20px 24px 4px 22px;font-size:24px;font-weight:700;line-height:130%;transition:all 300ms ease;color:",(0,k.w4)("textDefault"),";",(({show:e})=>e&&e_)," ",(({isExpanded:e})=>e&&QT),";"),n_=(e="")=>e.replace("#","%23"),i_=(e="")=>`"data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' fill='currentColor' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8 15C11.866 15 15 11.866 15 8C15 4.13401 11.866 1 8 1C4.13401 1 1 4.13401 1 8C1 11.866 4.13401 15 8 15Z' stroke='${n_(e)}' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M7.99982 15C9.39931 15 10.5338 11.866 10.5338 8C10.5338 4.13401 9.39931 1 7.99982 1C6.60033 1 5.46582 4.13401 5.46582 8C5.46582 11.866 6.60033 15 7.99982 15Z' stroke='${n_(e)}' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M1.44824 5.75977H14.5242' stroke='${n_(e)}' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M1.44824 10.2402H14.5242' stroke='${n_(e)}' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E"`,r_=(e="")=>`"data:image/svg+xml;utf8,%3Csvg width='16' height='16' viewBox='0 0 16 16' fill='${n_(e)}' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M4.23431 5.74408C3.9219 6.06951 3.9219 6.59715 4.23431 6.92259L7.43431 10.2559C7.74673 10.5814 8.25327 10.5814 8.56569 10.2559L11.7657 6.92259C12.0781 6.59715 12.0781 6.06951 11.7657 5.74408C11.4533 5.41864 10.9467 5.41864 10.6343 5.74408L8 8.48816L5.36569 5.74408C5.05327 5.41864 4.54673 5.41864 4.23431 5.74408Z' fill='${n_(e)}'/%3E%3C/svg%3E"\n`,o_=(0,k.Ay)("div",{target:"e1trrwbj1"})("background-color:",(0,k.w4)("containerBaseNeutral"),";text-align:center;padding:9px 0 20px 0;margin-top:auto;display:flex;justify-content:center;align-items:flex-end;"),a_=(0,k.Ay)("select",{target:"e1trrwbj0"})("font-weight:400;font-size:14px;font-family:",(0,k.w4)("fontSansSerif"),";line-height:20px;height:36px;color:",(0,k.w4)("textMuted"),";padding:0 32px 0 22px;box-sizing:border-box;margin:0 8px;appearance:none;border:none;background-color:",(0,k.w4)("containerBaseNeutral"),";background-image:url(",(e=>i_(e.theme.iconMuted)),"),url(",(e=>r_(e.theme.iconMuted)),");background-repeat:no-repeat,no-repeat;background-position:0 10px,right 12px center;background-size:14px,16px;transition:border-color 0.25s,outline 0.25s;cursor:pointer;&:hover{color:",(e=>e.theme.primaryColor),";background-image:url(",(e=>i_(e.theme.primaryColor)),"),url(",(e=>r_(e.theme.primaryColor)),");}&:focus{outline:none;}"),s_=({locales:e=[],selectedLocale:t,onChange:n=()=>{}})=>(0,v.jsx)(o_,{children:(0,v.jsx)(a_,{value:null==t?void 0:t.locale,onChange:t=>{const i=t.currentTarget.value,r=e.find((e=>e.locale===i));n(r)},children:e.map((({locale:e,name:t})=>(0,v.jsx)("option",{value:e,children:t},e)))})});var l_=n(48801);const c_=(0,k.Ay)("span",{target:"e1p39j031"})("position:relative;top:3px;margin-right:5px;opacity:0.9;svg{path.box{stroke:",(0,k.w4)("iconMuted"),";}}"),d_=(0,k.Ay)("div",{target:"e1p39j030"})("padding-top:8px;a{color:",(0,k.w4)("textMuted"),";margin:0 8px;font-size:14px;line-height:20px;&:hover{color:",(e=>e.theme.primaryColor),";svg{path.box{stroke:",(e=>e.theme.primaryColor),";}path.arrow{fill:",(e=>e.theme.primaryColor),";}}}}"),u_=({publicUrl:e})=>(0,v.jsx)(d_,{children:(0,v.jsxs)("a",{href:e,target:"_blank",rel:"noopener noreferrer","aria-label":`${(0,Xe.Tl)("open_article_in_help_center")} ${(0,Xe.Tl)("opens_in_new_tab")}`,children:[(0,v.jsx)(c_,{children:(0,v.jsx)(l_.A,{})}),(0,Xe.Tl)("open_article_in_help_center")]})});const p_=e=>{const{article:{reactionsReply:t},onReactionSelect:n}=e;return(0,v.jsx)(xT.dz,{children:(0,v.jsx)(fg.A,Object.assign({},t,{prompt:(0,Xe.Tl)("article_question"),onReactionSelect:n}))})};const{assign:h_}=Object,m_=(0,o.Ng)(((e,t)=>{const{hideReactions:n}=t,i=(0,Mg._9)(e);return{article:i,articleFromHomeScreenSuggestions:(0,Mg.zO)(e),shouldArticleFadeIn:(0,Mg.Wm)(e),allowNewConversationAutoReaction:(0,x.Sl)(e),shouldArticleSkeletonFadeIn:(0,Mg.th)(e),appColor:(0,x.Eu)(e),transitioningBack:e.article.transitioningBack,hash:e.article.hash,selectedArticleLocale:e.article.articleLocale,hideReactions:n,helpCenterSession:kw(e)||(null==i?void 0:i.alexandriaData)}}),(e=>({onReactionSelect:(t,n,i,r)=>{e((0,Ue.TO)(Lt.Ay,t,r,n,i))},onLoad:()=>{e((0,Ue.OQ)())},onArticleLocaleChange:t=>e((0,Ue.Md)(t))})),((e,t,n)=>{const i=h_({},e,t,n),{article:r,onReactionSelect:o}=i,a=r&&r.id,s=r&&r.contentId,l=r&&r.helpCenterId;return h_(i,{onReactionSelect:o.bind(null,a,s,l)})}))((function(e){var t;const{article:n,articleFromHomeScreenSuggestions:i,shouldArticleFadeIn:r,onLoad:o,allowNewConversationAutoReaction:s,shouldArticleSkeletonFadeIn:l,appColor:c,transitioningBack:d,hash:p,onArticleLocaleChange:h,selectedArticleLocale:g,hideReactions:x,helpCenterSession:y}=e,[w,j]=(0,b.useState)(!1),[k,A]=(0,b.useState)(!1),[C,S]=(0,b.useState)(0),[T,_]=(0,b.useState)(!1),[E,I]=(0,b.useState)(!1),[z,N]=(0,b.useState)(null),[M,R]=(0,b.useState)(0),P=function(e){const{pathname:t}=(0,a.useLocation)(),n="/help"===t,i=(0,m.GV)(Ma.JG),r=(0,m.GV)(Ma.tc),o=(0,m.GV)(Ma.qs);return e?"suggested_article":n?"search_browse":i?"home_screen":r?"conversation":o?"checklist":"search_browse"}(i),L=(0,Dn.A)("viewInHelpCenterButton"),O="search_browse"===P||L,D=(0,m.jL)(),H=(0,m.GV)((e=>e.article.isLoaded));(0,b.useEffect)((()=>{H||I(!1)}),[H]);const F=(0,b.useCallback)((e=>{_(!0),e===XT.ALEXANDRIA_LOADED&&I(!0),o()}),[_,o]),V=(0,b.useCallback)((()=>{r||F()}),[r,F]);(0,Ul.A)(V,4e3);const G=e=>{const t=e>0,n=e>C;k!==t&&A(t),w!==n&&j(n)},$=(0,b.useRef)(null),q=(0,b.useRef)(null),U=(0,b.useRef)(null),W=(0,b.useRef)(null),K=(0,Kb.Z)(null==n?void 0:n.id);if((0,b.useEffect)((()=>{K===(null==n?void 0:n.id)&&(null==g?void 0:g.url)===(null==n?void 0:n.url)||(A(!1),j(!1),R(0))}),[n,K,g]),(0,b.useEffect)((()=>{var e;null==z||z.scroll({top:M}),null==(e=U.current)||null==(e=e.scrollable)||null==e.scroll||e.scroll({top:M})}),[z,M,U]),!n)return null;const{url:X,reactionsReply:Y}=n,Z=!!Y&&!(0,f.z)(),J=s&&2===(null==Y?void 0:Y.reactionIndex),Q=l&&!r;return(0,v.jsx)(xT.Kj,{children:(0,v.jsx)(B.F,{children:(0,v.jsx)(B.B1,{classNames:"",timeout:250,nodeRef:$,children:(0,v.jsxs)(xT.q,{ref:$,children:[(0,v.jsx)(zT,{articleIsScrolled:w,showTitle:w,transitioningBack:d}),Q&&(0,v.jsx)(WT,{}),(0,v.jsx)(B.B1,{in:!d,classNames:"intercom-search-browse-slide-right",timeout:100,mountOnEnter:!0,unmountOnExit:!0,onExited:()=>{D((0,Ue.rm)(Lt.Ay))},nodeRef:q,children:(0,v.jsx)(xT.n2,{show:r,ref:q,children:(0,v.jsxs)(rS.A,{isInsideModal:!1,onScroll:e=>G(e.target.scrollTop),ref:U,onScrollable:e=>{N(e)},children:[(0,v.jsx)(JT,{show:!w,title:n.title,onHeightChange:S}),(0,v.jsxs)("div",{style:{flexGrow:1,marginBottom:"15px",position:"relative"},children:[!E&&(0,v.jsx)(WT,{}),(0,v.jsx)(YT,{helpCenterSession:y,title:n.title,url:X,hash:p,onLoad:F,appColor:c,suggestedArticle:i,onSetScrollPosition:e=>{var t;G(e),null==z||z.scroll({top:e}),null==(t=U.current)||null==(t=t.scrollable)||null==t.scroll||t.scroll({top:e}),R(e)},navigationSource:P},X)]}),E&&Z&&(0,v.jsxs)(xT._o,{children:[T&&!x?p_(e):null,!x&&(0,v.jsx)(B.B1,{classNames:"search-browse-reaction-followup",in:J,appear:!0,mountOnEnter:!0,onEntered:()=>{U&&setTimeout((()=>{var e;(0,u.Fp)(null==U||null==(e=U.current)?void 0:e.scrollable)}),150)},timeout:150,nodeRef:W,children:(0,v.jsx)(fT,{ref:W})}),(0,v.jsxs)(xT.cR,{children:[(null==(t=n.available_locales)?void 0:t.length)>1?(0,v.jsx)(s_,{selectedLocale:g||n.available_locales.find((e=>e.url===X)),locales:n.available_locales,onChange:h}):null,n.publicUrl&&O&&(0,v.jsx)(u_,{publicUrl:n.publicUrl})]})]})]})})})]},X)},X)})})}));const g_=(0,k.Ay)("div",{target:"ezwlh9l1"})({name:"vc1hld",styles:"flex:1;display:flex;flex-direction:column;overflow-y:auto"}),x_=(0,k.Ay)("div",{target:"ezwlh9l0"})({name:"r7hikz",styles:"position:absolute;top:0;left:0;right:0"});function f_(){const{height:e}=M();if((0,m.GV)(Mg.vT))return(0,v.jsx)(v_,{});const t=((0,$r.x3)()??document).getElementById("intercom-header-placeholder");return(0,v.jsxs)(g_,{children:[t?(0,fl.createPortal)((0,v.jsx)(x_,{children:(0,v.jsx)(gT,{})}),t):(0,v.jsx)(x_,{children:(0,v.jsx)(gT,{})}),(0,v.jsx)("div",{style:{minHeight:e}}),(0,v.jsx)(tT,{})]})}function v_(){return(0,v.jsxs)(g_,{children:[(0,v.jsx)(gT,{}),(0,v.jsx)(eT,{showArticle:!0,fullHeight:!0,children:(0,v.jsx)(m_,{})})]})}const y_=()=>(0,v.jsx)(G,{header:null,children:(0,v.jsx)(f_,{})});var b_={name:"1lr8nsg",styles:"opacity:1;height:auto"};const w_=(0,k.Ay)("div",{target:"e1feuvn40"})("background:none;position:absolute;display:flex;flex-direction:column;width:100%;top:0;left:0;bottom:0;height:0;opacity:0;z-index:",(0,ii.fE)(3),";",(e=>e.isSearchBrowseOpen?"transition: opacity 0ms 0ms;":"transition: opacity 300ms 0ms;")," ",(e=>e.isOpen&&b_),";"),j_=()=>{const{isStandalone:e}=(0,m.GV)(Mg.hb),t=(0,m.GV)(Ke.qZ),n=(0,m.jL)(),[i]=(0,a.useSearchParams)(),r="true"===i.get("hideReactions");return(0,v.jsxs)(w_,{"data-testid":"article-standalone-wrapper",isSearchBrowseOpen:t,isOpen:Boolean(e),children:[(0,v.jsx)(Er.Content,{children:(0,v.jsx)(Er.TitleArea,{backDirection:"left",onBack:()=>n((0,Ue.IP)()),showExpandButton:!0})}),(0,v.jsx)(m_,{hideReactions:r})]})},k_=()=>(0,v.jsx)(G,{header:null,children:(0,v.jsx)(j_,{})});function A_(){const e=vk(p.ND),t=(0,a.useNavigate)();return(0,v.jsx)(Ir,{title:e,onBack:()=>t(-1),showExpandButton:!0,isSubView:!0,backAriaLabel:(0,Xe.Tl)("news_space_title")})}var C_=n(74884);const S_=e=>e.newsItem,T_=(0,X.Mz)(S_,(e=>e.activeNewsItem)),__=(0,X.Mz)(S_,(e=>e.detailsFetchingStatus));var E_=n(93949);function I_({newsItem:e}){var t;return(0,v.jsx)(E_.d,{children:(0,v.jsxs)(_t.jt,{children:[(0,v.jsx)(_t.Jr,{children:e.author&&(0,v.jsx)(co.h,{author:e.author,size:24})}),(0,v.jsxs)(Rs.$z,{children:[(0,v.jsxs)(Rs.Z,{children:[(0,v.jsx)(Rs.v6,{children:`${(0,Xe.Tl)("shared_by")}`}),(0,v.jsx)(Rs.Bi,{children:null==(t=e.author)?void 0:t.firstName})]}),(0,v.jsx)("span",{"aria-hidden":!0,children:"•"}),(0,v.jsx)("div",{children:(0,v.jsx)(Rs.v6,{children:(0,En.iw)(null==e?void 0:e.publishedAt)})})]})]})})}function z_(){return(0,v.jsxs)(RT,{children:[(0,v.jsx)(PT,{}),(0,v.jsx)(LT,{}),(0,v.jsxs)(OT,{children:[(0,v.jsx)(HT,{}),(0,v.jsxs)(FT,{children:[(0,v.jsx)(VT,{}),(0,v.jsx)(GT,{})]})]}),(0,v.jsxs)(DT,{children:[(0,v.jsx)($T,{}),(0,v.jsx)(qT,{}),(0,v.jsx)(UT,{})]})]})}function N_(){const e=(0,m.GV)(Ut.V_),t=(0,m.GV)(Ut.aP),n=(0,m.jL)();(0,b.useEffect)((()=>{t&&(e||n((0,Kt.c6)()))}),[n,t,e])}function M_(){var e;const t=(0,m.jL)(),n=(0,a.useLocation)(),{state:i}=n,r=(0,b.useRef)(null),[o,s]=(0,b.useState)(!1),[l,c]=(0,b.useState)(!1),d=(0,a.useParams)(),u=(0,m.GV)(wr.l),p=(0,m.GV)(T_),h=(0,m.GV)(__);if((0,b.useEffect)((()=>{const e=parseInt(d.newsItemId||"0"),n=p&&p.blocks;(e!==(null==p?void 0:p.id)||0!==e&&!n)&&t(Dt(e))}),[t,d.newsItemId,p]),qe({object:Ge.uV,place:Ge.mM,context:null==i?void 0:i.navigatingFrom,metadata:{news_item_id:null==p?void 0:p.id},sendMetricCondition:!!p}),N_(),!p||h===Qt.n5.failure)return null;const g=h===Qt.n5.success&&(null==(e=p.reactionsReply)?void 0:e.reactionSet)&&p.reactionsReply.reactionSet.length>0;return(0,v.jsx)(C_.X_,{children:(0,v.jsxs)(rS.A,{isInsideModal:!1,onScroll:e=>{const t=null!=p&&p.coverImageUrl?350:120,n=e.target,i=n.scrollTop>0,r=n.scrollTop>t;l!==i&&c(i),o!==r&&s(r)},ref:r,children:[(0,v.jsxs)(C_.AK,{children:[p.coverImageUrl&&(0,v.jsx)(C_.mL,{children:(0,v.jsx)("img",{src:p.coverImageUrl,alt:p.title})}),(0,v.jsxs)(C_.i3,{isExpanded:u,children:[(0,v.jsx)(Gt,{newsItem:p}),(0,v.jsx)(C_.AM,{children:p.title}),(0,v.jsx)(I_,{newsItem:p}),(0,v.jsx)(C_.GG,{children:p.blocks?(0,v.jsx)(tt,{animationKey:"news-items",duration:300,children:(0,v.jsx)(pi.A,{blocks:p.blocks,onLinkClick:e=>{t((0,Ue.NQ)(e,!1))}})}):(0,v.jsx)(z_,{})})]})]}),g&&(0,v.jsx)(C_.yL,{children:(0,v.jsx)(fg.A,Object.assign({},p.reactionsReply,{prompt:`${(0,Xe.Tl)("how_would_you_rate_this")}`,onReactionSelect:e=>{t(Ht(p.id,e))}}))})]})},"please don't change")}const R_=()=>(0,v.jsx)(G,{header:(0,v.jsx)(A_,{}),children:(0,v.jsx)(M_,{})});var B_=n(98767);const P_=(0,k.Ay)("div",{target:"e2tswn72"})({name:"1jqm16y",styles:"text-align:center;align-items:center;margin:32px 16px 16px;align-self:center;display:flex;flex-direction:column;gap:8px"}),L_=(0,k.Ay)("div",{target:"e2tswn71"})("width:40px;height:40px;border-radius:50%;background:",(0,k.w4)("containerNeutral"),";text-align:center;",B_.N.className,"{margin-top:10px;}svg{width:21;height:21;path{fill:",(0,k.w4)("installGrey1"),";}}"),O_=(0,k.Ay)("div",{target:"e2tswn70"})("display:flex;color:",(0,k.w4)("textMuted"),";font-weight:400;font-size:16px;line-height:20px;");function D_(){return(0,v.jsxs)(P_,{children:[(0,v.jsx)(L_,{children:(0,v.jsx)(vC.A,{})}),(0,v.jsx)(O_,{children:`${(0,Xe.Tl)("you_are_all_up_to_date")}`})]})}const H_=(0,k.Ay)("div",{target:"ehen3gr4"})("display:flex;flex-direction:column;max-height:100%;width:100%;height:100%;z-index:",(0,ii.fE)(3),";overflow:hidden;"),F_=(0,k.Ay)("div",{target:"ehen3gr3"})({name:"1ei7lwx",styles:"position:relative;flex:1;display:flex;overflow:hidden"}),V_=(0,k.Ay)("div",{target:"ehen3gr2"})({name:"1mupyrl",styles:"margin-bottom:62px"}),G_=(0,k.Ay)("div",{target:"ehen3gr1"})("display:flex;flex-direction:column;overflow:hidden;padding:20px ",(0,k.w4)("globalHorizontalPadding"),"px;",It.className,"{margin-top:10px;}"),$_=(0,k.Ay)("div",{target:"ehen3gr0"})({name:"1s9ici2",styles:"display:flex;justify-content:center;align-items:center;padding-top:20px"}),q_=(0,k.Ay)("div",{target:"e174rxpv1"})("margin:16px ",(({theme:e})=>e.globalHorizontalPadding+4),"px 0px;display:flex;"),U_=(0,k.Ay)("div",{target:"e174rxpv0"})("display:flex;flex-direction:column;flex:1;color:",(0,k.w4)("textDefault"),";h2{font-weight:600;font-size:16px;line-height:24px;}sub{font-weight:400;font-size:14px;line-height:21px;}");function W_(){const e=(0,m.GV)((e=>e.app.name));return(0,v.jsxs)(q_,{children:[(0,v.jsxs)(U_,{children:[(0,v.jsx)("h2",{children:(0,Xe.Tl)("news_latest_title")}),(0,v.jsx)("sub",{children:(0,Xe.Tl)("news_latest_subtitle",{team_name:e||""})})]}),(0,v.jsx)(Fe,{avatarSize:36,avatarPixelsToShow:30,maxAdmins:3})]})}var K_,X_,Y_;function Z_(){return Z_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Z_.apply(null,arguments)}const J_=e=>b.createElement("svg",Z_({xmlns:"http://www.w3.org/2000/svg",width:32,height:32,fill:"none",viewBox:"0 0 32 32","aria-hidden":"true"},e),K_||(K_=b.createElement("mask",{id:"d819a",fill:"#fff"},b.createElement("path",{fillRule:"evenodd",d:"M13.403 18.667a.736.736 0 0 0-.736.736v7.573a3.024 3.024 0 0 1-5.941.796l-2.237-8.2c-.243-.893-.911-1.59-1.667-2.125A6.667 6.667 0 0 1 6.666 5.333h7.618a1 1 0 0 0 .55-.165L20.6 1.365a1.333 1.333 0 0 1 2.068 1.112v19.68A1.333 1.333 0 0 1 20.6 23.27l-6.791-4.482a.74.74 0 0 0-.405-.121m12.889-.567a.85.85 0 0 0 1.268 1.133A10.83 10.83 0 0 0 30.318 12c0-2.777-1.043-5.313-2.758-7.233A.85.85 0 0 0 26.292 5.9a9.12 9.12 0 0 1 2.326 6.1c0 2.344-.879 4.48-2.326 6.1",clipRule:"evenodd"}))),X_||(X_=b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.403 18.667a.736.736 0 0 0-.736.736v7.573a3.024 3.024 0 0 1-5.941.796l-2.237-8.2c-.243-.893-.911-1.59-1.667-2.125A6.667 6.667 0 0 1 6.666 5.333h7.618a1 1 0 0 0 .55-.165L20.6 1.365a1.333 1.333 0 0 1 2.068 1.112v19.68A1.333 1.333 0 0 1 20.6 23.27l-6.791-4.482a.74.74 0 0 0-.405-.121m12.889-.567a.85.85 0 0 0 1.268 1.133A10.83 10.83 0 0 0 30.318 12c0-2.777-1.043-5.313-2.758-7.233A.85.85 0 0 0 26.292 5.9a9.12 9.12 0 0 1 2.326 6.1c0 2.344-.879 4.48-2.326 6.1",clipRule:"evenodd"})),Y_||(Y_=b.createElement("path",{fill:"currentColor",d:"m6.726 27.772 1.64-.448zm-2.237-8.2 1.64-.448zm-1.667-2.125.982-1.388zM14.834 5.168l-.936-1.419zM20.6 1.365l-.936-1.42zm0 21.905.936-1.42zm-6.791-4.482-.936 1.42zm12.552.513 1.132-1.268zm-.068-1.2-1.268-1.133zm1.268 1.132L26.292 18.1zm0-14.466 1.268-1.132zm-1.2-.068 1.132 1.268zm-.068 1.2-1.268 1.133zM14.367 19.404a.964.964 0 0 1-.964.964v-3.4a2.436 2.436 0 0 0-2.436 2.436zm0 7.573v-7.573h-3.4v7.573zM9.643 31.7a4.724 4.724 0 0 0 4.724-4.724h-3.4c0 .731-.593 1.324-1.324 1.324zm-4.557-3.481a4.724 4.724 0 0 0 4.557 3.48v-3.4c-.597 0-1.12-.399-1.277-.975zm-2.237-8.2 2.237 8.2 3.28-.895-2.237-8.2zm-1.008-1.183c.61.43.914.836 1.008 1.183l3.28-.895c-.392-1.44-1.424-2.427-2.325-3.065zM-1.7 12a8.36 8.36 0 0 0 3.54 6.836l1.964-2.777A4.96 4.96 0 0 1 1.7 12zm8.367-8.366A8.367 8.367 0 0 0-1.7 12h3.4a4.967 4.967 0 0 1 4.967-4.966zm7.617 0H6.667v3.4h7.617zm-.386.115a.7.7 0 0 1 .386-.115v3.4a2.7 2.7 0 0 0 1.487-.447zm5.765-3.803-5.765 3.803 1.873 2.838 5.764-3.804zm4.704 2.531c0-2.416-2.687-3.862-4.704-2.531l1.872 2.837a.367.367 0 0 1-.568-.306zm0 19.68V2.477h-3.4v19.68zm-4.704 2.532c2.017 1.33 4.704-.116 4.704-2.532h-3.4c0-.293.325-.467.568-.306zm-6.791-4.482 6.79 4.482 1.873-2.838-6.79-4.481zm.53.16a.97.97 0 0 1-.53-.16l1.872-2.837a2.44 2.44 0 0 0-1.341-.403zm14.09-2.334c.35.313.38.85.068 1.2l-2.536-2.265a2.55 2.55 0 0 0 .203 3.6zm-1.2.067a.85.85 0 0 1 1.2-.067l-2.265 2.536a2.55 2.55 0 0 0 3.6-.204zm2.326-6.1c0 2.344-.879 4.48-2.326 6.1l2.536 2.265A12.52 12.52 0 0 0 32.018 12zm-2.326-6.1a9.12 9.12 0 0 1 2.326 6.1h3.4c0-3.21-1.208-6.146-3.19-8.365zm1.2.067a.85.85 0 0 1-1.2-.067l2.536-2.265a2.55 2.55 0 0 0-3.6-.203zm.068-1.2a.85.85 0 0 1-.068 1.2l-2.265-2.535a2.55 2.55 0 0 0-.203 3.6zM30.318 12c0-2.777-1.043-5.313-2.758-7.233l-2.536 2.265A7.42 7.42 0 0 1 26.918 12zm-2.758 7.233A10.82 10.82 0 0 0 30.318 12h-3.4c0 1.91-.714 3.647-1.894 4.968z",mask:"url(#d819a)"})));const Q_=(0,k.Ay)("div",{target:"ehyu2s53"})({name:"46whl4",styles:"display:flex;flex-direction:column;justify-content:center;align-items:center;max-width:330px;height:100%;margin:0 auto"}),eE=(0,k.Ay)(J_,{target:"ehyu2s52"})("width:32px;height:32px;color:",(0,k.w4)("iconDefault"),";"),tE=(0,k.Ay)("h2",{target:"ehyu2s51"})("margin:20px 0;font-size:18px;line-height:1.33;font-weight:600;color:",(0,k.w4)("textDefault"),";"),nE=(0,k.Ay)("h3",{target:"ehyu2s50"})("font-size:14px;line-height:1.43;text-align:center;color:",(0,k.w4)("textDefault"),";"),iE=()=>(0,v.jsxs)(Q_,{children:[(0,v.jsx)(eE,{}),(0,v.jsx)(tE,{children:(0,Xe.Tl)("news_empty_title")}),(0,v.jsx)(nE,{children:(0,v.jsx)("p",{children:(0,Xe.Tl)("check_later_for_updates")})})]});function rE(){const[e,t]=(0,b.useState)(1),n=(0,m.jL)(),i=(0,m.GV)(Ut.AL),r=(0,m.GV)(Ut.V_),o=(0,m.GV)(Ut.u9),{loading:a,newsItems:s}=Xt(),l=(null==s?void 0:s.length)||0;N_(),qe({object:Ge.aq,place:Ge.mM,sendMetricCondition:l>0});const c=(0,m.GV)(Ut.VC),d=(0,b.useCallback)((i=>{const r=i.target;r.scrollHeight-r.scrollTop<r.clientHeight+70&&!a&&c&&e!==c&&(t(c),n((0,Kt.Nr)(c)))}),[n,a,c,e]);if(!(a||s&&0!==s.length))return(0,v.jsx)(iE,{});const u=a&&0===l,p=a&&l>0;return(0,v.jsx)(H_,{children:(0,v.jsx)(F_,{children:(0,v.jsx)(rS.A,{isInsideModal:!1,flex:!0,dynamicChildrenHeight:!0,onScroll:d,children:(0,v.jsx)(oS,{hideBorder:!0,children:(0,v.jsxs)(V_,{children:[(0,v.jsx)(W_,{}),(0,v.jsxs)(G_,{children:[u?(0,v.jsx)(w.A,{}):null==s?void 0:s.map((e=>{const t=o&&!r&&!Wt(e,i);return(0,v.jsx)(qt,{newsItem:e,isUnread:!!t,renderingContext:Ge.V},`news-item-${e.id}`)})),p&&(0,v.jsx)($_,{children:(0,v.jsx)(w.A,{inline:!0})}),!a&&(0,v.jsx)(D_,{})]})]})})})})})}function oE(){return(0,v.jsx)(rE,{})}const aE=()=>(0,v.jsx)(G,{header:(0,v.jsx)(yk,{space:p.ND}),children:(0,v.jsx)(oE,{})});const sE=(0,k.Ay)("div",{target:"e6hpzjp1"})({name:"vt6su8",styles:"display:flex;justify-content:center;align-items:center;padding:20px 0"}),lE=(0,k.Ay)("div",{target:"e6hpzjp0"})({name:"13ubd8d",styles:"margin:10px"}),cE=({ticketsPortalUrl:e,tickets:t,loading:n,onTicketClick:i,onTicketsScroll:r})=>{const{whiteBackground:o}=M(),a=e?{href:e,label:(0,Xe.Tl)("ticket_portal_card_title"),subLabel:(0,Xe.Tl)("ticket_portal_card_link_title")}:null;return(0,v.jsx)(ErrorBoundary,{errorText:"Something went wrong loading your tickets",align:"center",style:{marginTop:"20px",flex:1},children:(0,v.jsxs)(rS.A,{isInsideModal:!1,flex:!0,dynamicChildrenHeight:!0,onScroll:r,showScrollingBorder:o,children:[a&&(0,v.jsx)(lE,{onClick:()=>(0,Ve.A5)("clicked","tickets_portal_link","messenger",Ge.wU,{tickets_portal_url:e}),children:(0,v.jsx)(ni,{boldLabel:!0,linkSize:"medium",listPadding:0,links:[a]})}),(0,v.jsxs)(Ce.A,{children:[t.map((e=>(0,v.jsx)(Li,{title:e.name,publicTicketId:e.publicTicketId,typeName:e.ticketTypeName,status:e.status,statusLabel:e.statusLabel,unread:!1===e.read,onClick:()=>i(e.id),useGlobalHorizontalPadding:!0},e.id))),n&&(0,v.jsx)(sE,{children:(0,v.jsx)(w.A,{inline:!0})})]})]})})},dE=()=>{const e=(0,a.useNavigate)(),t=(0,m.GV)(Hi.e_),n=(0,m.GV)(Hi.Qt),i=(0,m.GV)(Hi.tK),[r,o]=(0,b.useState)(1),s=(0,m.GV)(Hi.$L),l=(0,m.jL)(),c=(0,b.useCallback)((e=>{const t=e.target;t.scrollHeight-t.scrollTop<t.clientHeight+70&&!i&&s&&r!==s&&(o(s),l((0,FC.Ip)(s)))}),[l,i,s,r]);return(0,v.jsx)(cE,{ticketsPortalUrl:t,tickets:n,loading:i,onTicketClick:t=>{e(`/tickets/details/${t}`,{state:{navigatingFrom:Ge.wU}})},onTicketsScroll:c})},uE=e=>async()=>{const t=e.getState();if(t.tickets.isFetching||t.tickets.isFetched)return null;return(0,e.dispatch)((0,FC.Ip)()),null},pE=()=>(0,v.jsx)(G,{header:(0,v.jsx)(yk,{space:p.rK}),children:(0,v.jsx)(dE,{})}),hE=e=>async({params:t})=>{var n;const i=t.ticketId,r=e.getState();return i?(null!=(n=r.tickets.dataById[i])&&n.isFetching||e.dispatch((0,FC.rs)(i)),null):null},mE=()=>(0,v.jsx)(G,{header:(0,v.jsx)(Pk,{}),children:(0,v.jsx)(GC,{})});var gE;function xE(){return xE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},xE.apply(null,arguments)}const fE=e=>b.createElement("svg",xE({xmlns:"http://www.w3.org/2000/svg",width:33,height:32,fill:"none",viewBox:"0 0 33 32","aria-hidden":"true"},e),gE||(gE=b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M26.3 21.737V6.262A4.06 4.06 0 0 0 22.237 2.2H6.764A4.063 4.063 0 0 0 2.7 6.262v15.475A4.06 4.06 0 0 0 6.763 25.8h15.475a4.06 4.06 0 0 0 4.062-4.063m-6.705-11.04c.45.45.45 1.178 0 1.627l-5.417 5.417a1.15 1.15 0 0 1-1.627 0l-2.709-2.708a1.151 1.151 0 1 1 1.628-1.628l1.894 1.894 4.603-4.602a1.15 1.15 0 0 1 1.628 0m8.869 2.168a1.151 1.151 0 1 1 2.302 0v9.276a7.92 7.92 0 0 1-7.922 7.922h-9.48a1.151 1.151 0 1 1 0-2.302h9.48a5.62 5.62 0 0 0 5.62-5.62z",clipRule:"evenodd"})));const vE=(0,k.Ay)("div",{target:"e1q1owy93"})({name:"46whl4",styles:"display:flex;flex-direction:column;justify-content:center;align-items:center;max-width:330px;height:100%;margin:0 auto"}),yE=(0,k.Ay)(fE,{target:"e1q1owy92"})("width:33px;height:33px;color:",(0,k.w4)("iconDefault"),";"),bE=(0,k.Ay)("h2",{target:"e1q1owy91"})("margin:20px 0;font-size:18px;line-height:1.33;font-weight:600;color:",(0,k.w4)("textDefault"),";"),wE=(0,k.Ay)("h3",{target:"e1q1owy90"})("font-size:14px;line-height:1.43;text-align:center;color:",(0,k.w4)("textMuted"),";"),jE=()=>(0,v.jsxs)(vE,{"data-testid":"checklist-empty-state",children:[(0,v.jsx)(yE,{}),(0,v.jsx)(bE,{children:(0,Xe.Tl)("no_tasks")}),(0,v.jsxs)(wE,{children:[(0,v.jsx)("p",{children:(0,Xe.Tl)("no_tasks_available_currently")}),(0,v.jsx)("p",{children:(0,Xe.Tl)("check_later_for_updates")})]})]});const kE=(0,k.Ay)("div",{target:"ep9ja670"})({name:"1878o4o",styles:"display:grid;gap:20px"});const AE=(0,k.Ay)("div",{target:"exti8xz7"})("padding:16px 20px;box-shadow:",(0,k.w4)("shadowMedium"),";cursor:pointer;border-radius:12px;border:1px solid ",(0,k.w4)("borderNeutral"),";&:hover h2{color:",(0,k.w4)("linkColor"),";}background-color:",(({isComplete:e})=>e?(0,k.w4)("containerNeutral"):(0,k.w4)("containerBaseNeutral")),";"),CE=(0,k.Ay)("div",{target:"exti8xz6"})({name:"198cu3l",styles:"display:flex;justify-content:space-between;align-items:center;margin-bottom:4px"}),SE=(0,k.Ay)("h2",{target:"exti8xz5"})("font-size:14px;font-weight:600;line-height:21px;color:",(0,k.w4)("textDefault"),";"),TE=(0,k.Ay)("p",{target:"exti8xz4"})("font-size:14px;font-weight:400;line-height:20px;margin-bottom:12px;color:",(0,k.w4)("textDefault"),";"),_E=(0,k.Ay)("div",{target:"exti8xz3"})("margin-bottom:",(({isComplete:e})=>e?"0px":"12px"),";"),EE=(0,k.Ay)("div",{target:"exti8xz2"})("font-size:14px;font-weight:400;line-height:20px;color:",(0,k.w4)("textDefault"),";"),IE=(0,k.Ay)("span",{target:"exti8xz1"})({name:"16ceglb",styles:"font-weight:600"}),zE=(0,k.Ay)("div",{target:"exti8xz0"})({name:"1r5gb7q",styles:"display:inline-block"}),NE=({title:e,subtitle:t,checklistStatus:n,checklistTasks:i,completedTasks:r,estimatedTimeRemaining:o,nextStepTitle:a,onClick:s})=>{const l=r>0?"Next step":"First step",c=n===ki.vb.Complete&&i===r,d=n===ki.vb.New;return(0,v.jsxs)(AE,{isComplete:c,onClick:s,children:[(0,v.jsxs)(CE,{children:[(0,v.jsx)(SE,{children:(0,v.jsx)(pi.A,{blocks:e})}),(0,v.jsx)(Te.Ay,{type:d?"UnreadIndicator":"RightChevronColorable",color:d?void 0:"linkColor"})]}),t&&!c&&(0,v.jsx)(TE,{children:(0,v.jsx)(pi.A,{blocks:t})}),(0,v.jsx)(_E,{isComplete:c,children:(0,v.jsx)(bi.A,{checklistTasks:i,completedChecklistTasks:r,estimatedTimeRemaining:o,condensed:!0,prefillProgressIfEmpty:!0})}),a&&(0,v.jsxs)(EE,{children:[(0,v.jsxs)(IE,{children:[l,": "]}),(0,v.jsx)(zE,{children:(0,v.jsx)(pi.A,{blocks:a})})]})]})},ME=({checklist:e,onClick:t})=>{const n=(0,Ai.Sg)(e),i=(0,Ai.zE)(n),r=(0,Ai.fp)(n),o=(0,Ai.M2)(r),a=r.reduce(((e,t)=>e+t.estimatedTime),0);return(0,v.jsx)(NE,{title:e.titleBlocks,subtitle:e.subtitleBlocks,checklistStatus:e.status,checklistTasks:n.length,completedTasks:i.length,estimatedTimeRemaining:a,nextStepTitle:null==o?void 0:o.titleBlocks,onClick:t})},RE=({checklists:e,onChecklistClick:t})=>(0,v.jsx)("div",{"data-testid":"checklists-home",children:(0,v.jsx)(kE,{children:e.map((e=>(0,v.jsx)(ME,{checklist:e,onClick:()=>t(e.checklistProgressId)},e.id)))})});const BE=(0,k.Ay)("div",{target:"e1g75ecv1"})({name:"1e876fv",styles:"display:flex;flex-direction:column;width:100%;overflow-y:auto"}),PE=(0,k.Ay)("div",{target:"e1g75ecv0"})("box-sizing:border-box;padding:30px ",(({theme:e})=>e.globalHorizontalPadding),"px;height:100%;overflow-y:auto;-webkit-overflow-scrolling:touch;");var LE=function(e){return e[e.SINGLE_CHECKLIST=0]="SINGLE_CHECKLIST",e[e.MULTIPLE_CHECKLISTS=1]="MULTIPLE_CHECKLISTS",e[e.NO_CHECKLIST=2]="NO_CHECKLIST",e}(LE||{});const OE=()=>{const[e,t]=(0,b.useState)(),n=(0,m.GV)(wi.RK),i=(0,m.jL)(),r=(0,b.useCallback)((e=>{i((0,ji.tB)(e))}),[i]),o=(0,b.useCallback)((()=>{i((0,ji._Y)()),i((0,ji.ow)())}),[i]);return(0,b.useEffect)((()=>{if(e===LE.SINGLE_CHECKLIST){const{checklistProgressId:e}=n[0];(0,Ai.C2)(`Showing single checklist progress ID: ${e}`),r(e)}}),[n,r,e]),(0,b.useEffect)((()=>{1===n.length&&t(LE.SINGLE_CHECKLIST),n.length>1&&t(LE.MULTIPLE_CHECKLISTS),0===n.length&&t(LE.NO_CHECKLIST)}),[n.length]),(0,b.useEffect)((()=>{o()}),[o]),(0,v.jsx)(BE,{children:(0,v.jsxs)(PE,{children:[e===LE.MULTIPLE_CHECKLISTS&&(0,v.jsx)(RE,{checklists:n,onChecklistClick:r}),e===LE.NO_CHECKLIST&&(0,v.jsx)(jE,{})]})})},DE=()=>(0,v.jsx)(G,{header:(0,v.jsx)(yk,{space:p.Ul}),children:(0,v.jsx)(OE,{})}),HE=()=>{const e=(0,a.useNavigate)(),t=(0,a.useLocation)(),n=(0,m.jL)(),i=(0,m.GV)(wi.J3),r=(0,g.ke)(t.pathname),o=vk(p.Ul),s=i||r,l=s?"":o;return(0,v.jsx)(Er.Content,{whiteBackground:!1,showBorder:!0,children:(0,v.jsx)(Er.TitleArea,{title:l,onBack:s?()=>{n((0,ji.$1)()),e(-1)}:void 0,backAriaLabel:(0,Xe.Tl)("checklists_feature_title")})})};var FE=n(97330);const VE=(0,k.Ay)("div",{target:"eoxpqij3"})("padding:24px ",(({theme:e})=>e.globalHorizontalPadding+8),"px 14px;background:",(0,k.w4)("containerBaseNeutral"),";z-index:10;"),GE=(0,k.Ay)("h2",{target:"eoxpqij2"})("font-size:24px;font-weight:700;line-height:1.5;color:",(0,k.w4)("textDefault"),";text-align:center;"),$E=(0,k.Ay)("div",{target:"eoxpqij1"})("font-size:16px;font-weight:400;line-height:1.5;color:",(0,k.w4)("textDefault"),";text-align:center;"),qE=(0,k.Ay)("div",{target:"eoxpqij0"})({name:"g2fy0f",styles:"display:flex;justify-content:center;margin-top:12px"});const UE=(0,k.Ay)("div",{target:"e1womzdd2"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),WE=(0,k.Ay)("div",{target:"e1womzdd1"})({name:"1d7rrwu",styles:"display:inline-block;margin-right:8px;vertical-align:middle"}),KE=(0,k.Ay)("div",{target:"e1womzdd0"})("font-size:14px;display:inline-block;vertical-align:middle;color:",(0,k.w4)("textMuted"),";line-height:20px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;&.lastUpdated{flex:none;}"),XE=(e,t)=>t?e.name:e.firstName,YE=(e,t)=>"team"!==e.type?(0,Xe.Tl)("from_app",{app_name:t}):null,ZE=({sender:e,avatarMargin:t,linkingText:n,showFullName:i,lastUpdatedAt:r,appName:o})=>(0,v.jsxs)(UE,{children:[(0,v.jsx)(WE,{style:{marginRight:t||8},children:(0,v.jsx)(co.h,{author:e})}),(0,v.jsxs)(KE,{children:[n&&`${n}`," ",XE(e,i),o&&` ${YE(e,o)}`]}),Boolean(r)&&(0,v.jsxs)(KE,{className:"lastUpdated",children:[(0,v.jsxs)("span",{style:{whiteSpace:"pre-wrap"},"aria-hidden":!0,children:[" ","•"," "]}),(0,v.jsx)("span",{children:(0,En.iw)(r)})]})]}),JE=(0,X.Mz)((e=>e.app),(({name:e})=>({name:e}))),QE=({title:e,subtitle:t,sender:n})=>{const{name:i=""}=(0,m.GV)(JE);return(0,v.jsxs)(VE,{children:[(0,v.jsx)(GE,{children:(0,v.jsx)(pi.A,{blocks:e})}),t&&(0,v.jsx)($E,{children:(0,v.jsx)(pi.A,{blocks:t})}),n&&(0,v.jsx)(qE,{children:(0,v.jsx)(ZE,{sender:n,appName:i})})]})};var eI;function tI(){return tI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},tI.apply(null,arguments)}const nI=e=>b.createElement("svg",tI({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16","aria-hidden":"true"},e),eI||(eI=b.createElement("path",{fill:"currentColor",d:"m14.884 3.95-.951-.86a.35.35 0 0 0-.495.026l-7.236 8.012-3.757-3.393a.35.35 0 0 0-.495.025l-.86.951a.35.35 0 0 0 .026.495l4.96 4.48a.34.34 0 0 0 .17.082.4.4 0 0 0 .097.008.35.35 0 0 0 .243-.115l8.324-9.217a.35.35 0 0 0-.026-.494"})));const iI="200ms",rI={name:"14z3k8d",styles:"position:absolute;top:0;right:0;bottom:0;left:0;margin:auto"},oI=(0,k.Ay)("div",{target:"euryngc5"})("display:flex;align-items:baseline;",(({theme:e,expanded:t})=>t&&(0,k.AH)(sI.className,"{color:",e.textDefault,";font-weight:600;}",lI.className,"{transform:scale(-1);color:",e.checklistMainColor,";}",aI.className,"{background:",e.disabledButtonBackground,";color:",e.checklistMainColor,";}"))," ",(({theme:e,completed:t})=>t&&(0,k.AH)(cI.className,"{opacity:0;visibility:hidden;}",dI.className,"{opacity:1;visibility:visible;}",aI.className,"{background:",e.containerEmphasisNeutral,";color:",e.textDefault,";}"))," ",(({theme:e,expanded:t,completed:n})=>t&&n&&(0,k.AH)(lI.className,"{transform:scale(-1);color:",e.checklistMainColor,";}")),";"),aI=(0,k.Ay)("div",{target:"euryngc4"})("position:relative;display:flex;justify-content:center;align-items:center;flex:0 0 32px;width:32px;height:32px;border-radius:50px;background:",(({theme:e})=>(0,ve.vf)(String(e.disabledButtonBackground),.1)),";color:",(0,k.w4)("iconMuted"),";"),sI=(0,k.Ay)("h3",{target:"euryngc3"})("flex:1;padding:0 8px;font-weight:400;font-size:14px;line-height:1.42;color:",(0,k.w4)("textDefault"),";"),lI=(0,k.Ay)("span",{target:"euryngc2"})("position:relative;top:4px;width:16px;height:16px;flex:0 0 16px;color:",(0,k.w4)("iconMuted"),";transition:transform ease-in-out ",iI,";"),cI=(0,k.Ay)("span",{target:"euryngc1"})("font-size:14px;font-weight:600;line-height:1;transition:opacity ease-in ",iI,";color:",(({expanded:e})=>!e&&(0,k.w4)("textDefault")),";"),dI=(0,k.Ay)(nI,{target:"euryngc0"})(rI," width:16px;height:16px;opacity:0;transition:opacity cubic-bezier(0.53, 1.88, 0.56, 0.65) ",iI,";transition-delay:",iI,";");var uI;function pI(){return pI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},pI.apply(null,arguments)}const hI=e=>b.createElement("svg",pI({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16","aria-hidden":"true"},e),uI||(uI=b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3.934 5.935a.8.8 0 0 1 1.13 0L8 8.869l2.935-2.934a.8.8 0 0 1 1.13 1.13l-3.5 3.5a.8.8 0 0 1-1.13 0l-3.5-3.5a.8.8 0 0 1 0-1.13",clipRule:"evenodd"}))),mI=({expanded:e,completed:t,title:n,order:i})=>(0,v.jsxs)(oI,{expanded:Boolean(e),completed:t,children:[(0,v.jsxs)(aI,{children:[(0,v.jsx)(cI,{expanded:Boolean(e),children:i}),(0,v.jsx)(dI,{})]}),(0,v.jsx)(sI,{children:n}),(0,v.jsx)(lI,{children:(0,v.jsx)(hI,{})})]});const gI=(0,k.Ay)("div",{target:"e70n5i45"})({name:"1axw7wj",styles:"font-size:14px;font-weight:400;line-height:1.5"}),xI=(0,k.Ay)("div",{target:"e70n5i44"})("display:flex;flex-direction:column;padding-top:8px;padding-bottom:4px;color:",(0,k.w4)("textMuted"),";margin-left:40px;margin-right:15px;img,iframe{max-width:100%;}*+.intercom-block-video{margin-top:8px;}.intercom-block-video+*{margin-top:8px;}*+.intercom-block-image{margin-top:8px;}.intercom-block-image+*{margin-top:8px;}.intercom-block-paragraph{min-height:1.5em;a:not(.intercom-block-button){color:",(0,k.w4)("linkColor"),";text-decoration:underline;&:not(.intercom-block-button):hover{text-decoration:none;color:",(0,k.w4)("linkColorHover"),";}}}"),fI=(0,k.Ay)("div",{target:"e70n5i43"})("padding-top:16px;a:hover,button:hover{",(({theme:e})=>e.isPrimaryColorAsTheme&&(0,k.AH)("border:1px solid ",e.elevation2,";margin:-1px;")),";}"),vI=(0,k.Ay)("div",{target:"e70n5i42"})("border-top:1px solid ",(0,k.w4)("alphaBlack10"),";margin-top:16px;padding-bottom:20px;"),yI=(0,k.Ay)("button",{target:"e70n5i41"})("display:flex;align-items:center;margin-left:40px;margin-bottom:4px;color:",(({isComplete:e})=>e?(0,k.w4)("textMuted"):(0,k.w4)("checklistMainColor")),";"),bI=(0,k.Ay)(nI,{target:"e70n5i40"})({name:"1n33gzm",styles:"width:12px;height:12px;margin-right:8px"}),wI=({id:e,currentChecklist:t,actionType:n,actionContentId:i,actionUrl:r,openActionUrlInNewTab:o,onTaskActionClick:a,customActionButtonText:s,actionContentUrl:l})=>{const c=(0,m.jL)(),d=()=>c((0,ji.sC)(null==t?void 0:t.id,null==t?void 0:t.checklistProgressId,e)),u=s||(0,Xe.Tl)("checklist_step_action_button");switch(n){case ki.X2.ReadOnly:return null;case ki.X2.OpenUrl:return(0,v.jsx)(fI,{children:(0,v.jsx)(vr.z,{"data-testid":"checklist-task-action-button",href:r,rel:"noopener noreferrer",target:o?"_blank":void 0,onClick:d,children:u})});default:return(0,v.jsx)(fI,{children:(0,v.jsx)(vr.A,{"data-testid":"checklist-task-action-button",onClick:()=>{d(),a(n,i,l||void 0)},children:u})})}},jI=({id:e,currentChecklist:t,content:n,actionType:i,actionContentId:r,actionUrl:o,actionContentUrl:a,openActionUrlInNewTab:s,canBeManuallyResolved:l,customActionButtonText:c,isComplete:d,onTaskActionClick:u,onTaskResolve:p})=>(0,v.jsxs)(gI,{children:[(0,v.jsxs)(xI,{children:[n,(0,v.jsx)(wI,{id:e,currentChecklist:t,actionType:i,actionContentId:r,actionUrl:o,openActionUrlInNewTab:s,customActionButtonText:c,onTaskActionClick:u,actionContentUrl:a})]}),l&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(vI,{}),(0,v.jsxs)(yI,{"data-testid":"checklist-manual-resolve-button",isComplete:d,onClick:t=>(t=>{t.stopPropagation(),d||p(e)})(t),children:[(0,v.jsx)(bI,{}),d?(0,Xe.Tl)("checklist_step_completed"):(0,Xe.Tl)("checklist_mark_step_as_complete")]})]})]});const kI=160,AI=(0,k.Ay)("div",{target:"euomxk33"})("min-height:40px;height:",(({height:e})=>e&&`${e}px`),";background:",(0,k.w4)("containerBaseNeutral"),";transition:height ",kI,"ms;border-radius:12px;box-shadow:",(0,k.w4)("shadowMedium"),";border:1px solid ",(0,k.w4)("borderNeutral"),";",(({background:e})=>e&&(0,k.AH)("background:",e,";")),";"),CI=(0,k.Ay)("div",{target:"euomxk32"})({name:"e0dnmk",styles:"cursor:pointer"}),SI=(0,k.Ay)("div",{target:"euomxk31"})({name:"1x95h09",styles:"padding:16px;box-sizing:border-box"}),TI=(0,k.Ay)("div",{target:"euomxk30"})("opacity:0;visibility:hidden;height:0;",(({canDisplayContent:e})=>e&&(0,k.AH)("opacity:1;visibility:visible;height:auto;transition:opacity ",320,"ms ease-in-out ",kI,"ms;")),";"),_I=(0,b.forwardRef)((({header:e,content:t,expanded:n,className:i,background:r,isComplete:o,onExpand:a},s)=>{const[l,c]=(0,b.useState)(!1),[d,u]=(0,b.useState)(null),p=l&&void 0!==t,h=(0,b.useRef)(null),m=()=>{var e;null==(e=h.current)||e.scrollIntoView({behavior:"smooth",block:"center"})};return(0,b.useImperativeHandle)(s,(()=>({scrollInView:m}))),(0,b.useEffect)((()=>{c(n)}),[n]),(0,v.jsx)(AI,{height:d,className:i,background:r,isComplete:o,"data-testid":"collapsible-card",role:"region",ref:h,children:(0,v.jsx)(St.A,{onHeightChange:u,children:(0,v.jsxs)(SI,{children:[(0,v.jsx)(CI,{onClick:()=>{const e=!l;c(e),a&&a(e)},"data-testid":"collapsible-card-header",role:"button",tabIndex:0,"aria-expanded":l,children:(0,b.cloneElement)(e,{expanded:l?1:0})}),(0,v.jsx)(Pa.A,{appearDelay:kI,duration:kI,children:(0,v.jsx)(TI,{"data-testid":"collapsible-card-content",canDisplayContent:p,"aria-live":"off",children:p?t:null})})]})})})}));const EI=(0,k.Ay)("ol",{target:"eijad5j1"})({name:"z06qs",styles:"list-style:none;margin:0;padding:0"}),II=(0,k.Ay)("li",{target:"eijad5j0"})({name:"ucde38",styles:"&:not(:first-of-type){margin-top:10px;}"}),zI=(0,b.forwardRef)((({cards:e,expandedCardId:t,className:n,onExpand:i},r)=>{const o=(0,b.useRef)([]),a=t=>{var n;const i=e.map((e=>e.id)).indexOf(t);null==(n=o.current[i])||n.scrollInView()};return(0,b.useImperativeHandle)(r,(()=>({scrollToCard:a}))),(0,v.jsx)(EI,{className:n,children:(null==e?void 0:e.length)>0&&e.map(((e,n)=>{const r=t===e.id;return(0,v.jsx)(II,{children:(0,v.jsx)(_I,{header:e.header,content:e.content,expanded:r,background:e.background,isComplete:e.isComplete,onExpand:t=>i(e.id,t),ref:e=>o.current[n]=e})},e.id)}))})})),NI=(0,b.forwardRef)((({activeCardId:e,cards:t,className:n,onCardExpand:i},r)=>{const o=(0,b.useRef)(null),[a,s]=(0,b.useState)(null),l=(e,t=!1)=>{var n;(s(e),t)&&(null==(n=o.current)||n.scrollToCard(e))},c=()=>{var e;null==(e=o.current)||e.scrollToCard(t[0].id)};return(0,b.useImperativeHandle)(r,(()=>({expandCard:l,scrollToTop:c}))),(0,b.useEffect)((()=>{i&&i(a)}),[a,i]),(0,b.useEffect)((()=>{(null==t?void 0:t.length)>0&&s(t[0].id)}),[]),(0,b.useEffect)((()=>{e&&s(e)}),[e]),(0,v.jsx)(zI,{cards:t,expandedCardId:a,onExpand:(e,t)=>{t&&s(e)},className:n,ref:o})}));const MI=(0,k.Ay)("div",{target:"emyskci5"})({name:"1e876fv",styles:"display:flex;flex-direction:column;width:100%;overflow-y:auto"}),RI=(0,k.Ay)("div",{target:"emyskci4"})({name:"pybav8",styles:"width:100%;height:100%;overflow-y:auto;-webkit-overflow-scrolling:touch"}),BI=(0,k.Ay)("section",{target:"emyskci3"})("padding:24px ",(({theme:e})=>e.globalHorizontalPadding),"px 30px;"),PI=(0,k.Ay)("h2",{target:"emyskci2"})("font-size:16px;line-height:1.5;margin-bottom:10px;color:",(({theme:e})=>e.textDefault),";"),LI=(0,k.Ay)("div",{target:"emyskci1"})("&+&{margin-top:",(({hasMultipleTaskGroups:e})=>e?"30px":"0"),";}"),OI=(0,k.Ay)("div",{target:"emyskci0"})("padding:0px ",(({theme:e})=>e.globalHorizontalPadding),"px;margin-top:8px;");var DI=n(99928);const HI=({cardListRef:e,taskList:t,onTaskResolve:n,onTaskActionClick:i,checklistProgressId:r})=>{const o=(0,di.A)(),a=(0,m.jL)(),s=(0,m.GV)((0,wi.f$)(Number(r))),l=t.map(((e,t)=>({id:e.id,background:e.isComplete?o.containerNeutral:o.containerBaseNeutral,isComplete:e.isComplete,header:(0,v.jsx)(mI,{order:t+1,title:(0,v.jsx)(pi.A,{blocks:e.titleBlocks}),completed:e.isComplete,expanded:!1}),content:(0,v.jsx)(jI,{id:e.id,currentChecklist:s,content:(0,v.jsx)(pi.A,{blocks:e.bodyBlocks}),actionType:e.actionType,actionContentId:e.actionContentId,actionUrl:e.actionUrl,actionContentUrl:e.actionContentUrl,openActionUrlInNewTab:e.openActionUrlInNewTab,canBeManuallyResolved:e.canBeManuallyResolved,customActionButtonText:e.customActionButtonText,isComplete:e.isComplete,onTaskResolve:n,onTaskActionClick:i})}))),c=(0,b.useCallback)((e=>a((0,ji.qs)(null==s?void 0:s.id,null==s?void 0:s.checklistProgressId,e))),[null==s?void 0:s.id,null==s?void 0:s.checklistProgressId,a]);return(0,v.jsx)(NI,{ref:e,cards:l,onCardExpand:c})},FI=({cardListRef:e,checklist:t,checklistTasksLength:n,completedChecklistTasksLength:i,estimatedTimeRemaining:r,onTaskResolve:o,onTaskActionClick:a,isFetching:s})=>{if(!t)return(0,v.jsx)(MI,{"aria-live":"off",children:s?(0,v.jsx)(w.A,{}):(0,v.jsx)(jE,{})});const l=t.taskGroups.length>1;return(0,v.jsx)(oS,{hideBorder:!0,children:(0,v.jsx)(MI,{"aria-live":"off",children:(0,v.jsxs)(RI,{"data-testid":"checklist-task-list",children:[(0,v.jsx)(QE,{title:t.titleBlocks,subtitle:t.subtitleBlocks,sender:t.sender}),(0,v.jsx)(OI,{children:(0,v.jsx)(bi.A,{checklistTasks:n,completedChecklistTasks:i,estimatedTimeRemaining:r})}),(0,v.jsx)(BI,{children:t.taskGroups.map((n=>(0,v.jsxs)(LI,{hasMultipleTaskGroups:l,children:[l&&(0,v.jsx)(PI,{children:(0,v.jsx)(pi.A,{blocks:n.titleBlocks})}),(0,v.jsx)(HI,{cardListRef:e,taskList:n.tasks,onTaskResolve:o,onTaskActionClick:a,checklistProgressId:t.checklistProgressId})]},n.id)))})]})})})},VI=()=>{const e=(0,a.useParams)(),t=(0,m.jL)(),n=(0,b.useRef)(null),i=(0,m.GV)((0,wi.f$)(Number(null==e?void 0:e.checklistProgressId)));!function(e){const t=(0,m.jL)(),n=(0,Dn.A)("checklistsReminders");(0,b.useEffect)((()=>{n&&e&&((e.status!==ki.vb.New||e.hasEverBeenNotified)&&!e.shouldRenotify||e.hasUpdatedNotificationDetails||t((0,ji.lP)(e.id,e.checklistProgressId)))}),[n,t,e])}(i);const r=(0,Ai.Sg)(i),o=(0,Ai.zE)(r),s=(0,Ai.fp)(r),l=(0,m.GV)((0,FE.F)()),c=(0,b.useRef)(!1),d=(0,m.GV)((e=>e.tasks.isFetching));(0,b.useEffect)((()=>{let e;e=l?r.find((e=>e.id===l)):(0,Ai.sE)(r);const t=c.current;if(c.current=Boolean(l),e){var o;const i=Boolean(l)||t;null==(o=n.current)||o.expandCard(e.id,i)}else{var a,d;if(null==(a=n.current)||a.expandCard(null),null==(d=n.current)||d.scrollToTop(),t&&i&&0===s.length){const{id:e,checklistProgressId:t,showCompletionScreen:n}=i;if(!e)return;u(t,n)}}}),[o.length,l]);const u=(e,n)=>{n&&setTimeout((()=>{t((0,ji.Lf)(e))}),1200)};return(0,b.useEffect)((()=>{i&&t((0,ji.Mw)(i.id,i.checklistProgressId))}),[t,i]),(0,b.useEffect)((()=>{i&&i.status===ki.vb.New&&!i.dismissed&&t((0,ji.cA)(Lt.Ay,i.id,i.checklistProgressId))}),[t,i]),(0,v.jsx)(FI,{cardListRef:n,checklist:i,checklistTasksLength:r.length,completedChecklistTasksLength:o.length,onTaskResolve:e=>{if(!i)return;const{id:n,checklistProgressId:r,showCompletionScreen:o}=i;n&&r&&e&&(t((0,ji.FK)(n,r,e)),1===s.length&&s[0].id===e&&u(r,o))},onTaskActionClick:(e,n,i)=>{switch(e){case ki.X2.ProductTour:n&&t((0,DI.os)(n));break;case ki.X2.Article:i?(0,_o.CV)(i):n&&t((0,Ue.n$)(n,{}))}},estimatedTimeRemaining:s.reduce(((e,t)=>e+t.estimatedTime),0),isFetching:d})},GI=()=>(0,v.jsx)(G,{header:(0,v.jsx)(HE,{}),children:(0,v.jsx)(VI,{})});const $I=(0,k.Ay)("div",{target:"e8wnlmk2"})({name:"12d09kj",styles:"display:flex;flex-direction:column;width:100%;height:100%;position:absolute;justify-content:center"}),qI=(0,k.Ay)("div",{target:"e8wnlmk1"})("display:flex;flex-direction:column;align-items:center;gap:28px;padding:0 16px 0 16px;line-height:24px;.intercom-block-paragraph{color:",(0,k.w4)("textMuted"),";}button:hover{",(({theme:e})=>e.isPrimaryColorAsTheme&&(0,k.AH)("border:1px solid ",e.elevation2,";margin:-1px;")),";}"),UI=(0,k.Ay)("canvas",{target:"e8wnlmk0"})({name:"rodcfp",styles:"position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none"});var WI=n(60441),KI=n.n(WI);const XI=({showConfetti:e,completionScreenButtonText:t,completionScreenBlocks:n})=>{const i=(0,a.useNavigate)(),r=(0,b.useRef)(null);(0,b.useEffect)((()=>{if(!r.current||!e)return;const t=KI().create(r.current,{resize:!0});(0,h.F9)(t)}),[e]);const o=t||"Continue";return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)($I,{children:[(0,v.jsx)(UI,{ref:r}),(0,v.jsxs)(qI,{children:[(0,v.jsx)(pi.A,{blocks:n}),(0,v.jsx)(vr.A,{"data-testid":"checklist-completion-screen-action-button",onClick:()=>{i(p.Ul.path)},children:o})]})]})})},YI=()=>{const e=(0,a.useParams)(),t=(0,m.GV)((0,wi.f$)(Number(null==e?void 0:e.checklistProgressId))),n=(0,a.useNavigate)();if(!t)return(0,v.jsx)($I,{children:(0,v.jsx)(qI,{children:(0,v.jsx)(vr.A,{"data-testid":"checklist-completion-screen-home-button",onClick:()=>{n(p.Ul.path)},children:"Home"})})});const{showConfetti:i,completionScreenBlocks:r,completionScreenButtonText:o}=t;return(0,v.jsx)(XI,{showConfetti:i,completionScreenBlocks:r,completionScreenButtonText:o})},ZI=()=>(0,v.jsx)(G,{header:(0,v.jsx)(HE,{}),children:(0,v.jsx)(YI,{})});var JI=n(97495);const QI=200;function ez(e){const{isLauncherEnabled:t,launcherOffsetBottomPaddingPx:n,verticalPaddingPx:i}=e;return i+20+(t?n:0)}function tz(e){return e.launcherOffsetBottomPaddingPx+20}function nz(e,t){return(0,k.AH)("width:",t,"px;width:",((e,t)=>`min(${t}px, ${function(e){return`max(0px, calc(100vw - ${e.isCenterAlign?0:e.horizontalPaddingPx}px))`}(e)})`)(e,t),";")}var iz={name:"179q9ic",styles:"transform:none"},rz={name:"1sgi167",styles:"transform:scale(0);opacity:0;pointer-events:none;visibility:hidden;&>iframe{pointer-events:none;visibility:hidden;}"},oz={name:"1wmqa7v",styles:"transform-origin:bottom;transform:none"},az={name:"abcix4",styles:"top:0"},sz={name:"13udsys",styles:"height:100%"},lz={name:"1g0lhms",styles:"left:50%;right:auto;transform:translateX(-50%)"},cz={name:"1lkn119",styles:"transition-delay:0ms"},dz={name:"1s5yznm",styles:"transform-origin:bottom center"},uz={name:"1lmwkpd",styles:"transform-origin:bottom left"};const pz=(0,k.Ay)("div",{target:"ed8ycz90"})("z-index:",(0,ii.L9)(),";position:fixed;bottom:",(({theme:e})=>e.isEmbeddedMode?e.isLauncherEnabled?tz(e):0:(0,ii.r9)({theme:e})),"px;right:",(({theme:e})=>e.isEmbeddedMode?0:e.horizontalPaddingPx),"px;transform-origin:bottom right;visibility:visible;",(({theme:e})=>e.isLeftAlign&&uz)," ",(({theme:e})=>e.isCenterAlign&&dz),(({theme:e})=>(0,k.AH)("height:",e.isEmbeddedMode?e.isLauncherEnabled?`calc(100% - ${tz(e)}px)`:"100%":`calc(100% - ${ez(e)}px)`,";")),";",(({theme:e})=>(0,k.AH)("height:",e.isEmbeddedMode?e.isLauncherEnabled?`calc(100% - ${tz(e)}px)`:"100%":`min(${e.messengerMaxHeightPx}px, calc(100% - ${ez(e)}px))`,";"))," min-height:80px;",(({theme:e,visibilityState:t})=>{if(e.isEmbeddedMode)return"width: 100%;";return nz(e,t===Qt.cy.shrinked?432:e.messengerWidthPx)})," max-height:",(({theme:e,visibilityState:t,composerHeight:n})=>{if(t===Qt.cy.collapsed||t===Qt.cy.shrinked){return`${n?Math.max(n+12,80):80}px`}return e.isEmbeddedMode?e.isLauncherEnabled?`calc(100% - ${tz(e)}px)`:"100%":`${e.messengerMaxHeightPx}px`}),";border-radius:",(({theme:e})=>e.isEmbeddedMode?"0":`${e.messengerBorderRadiusPx}px`),";overflow:hidden;",(({lightweightAppActive:e,theme:t,isFinMessenger:n})=>!e&&!n&&(0,k.AH)("box-shadow:",t.shadowXLarge,";"))," ",(({isExpanded:e,theme:t})=>e&&(0,k.AH)("max-height:",t.isEmbeddedMode?t.isLauncherEnabled?`calc(100% - ${tz(t)}px)`:"100%":`calc(100% - ${ez(t)}px)`,";height:",t.isEmbeddedMode?t.isLauncherEnabled?`calc(100% - ${tz(t)}px)`:"100%":`calc(100% - ${ez(t)}px)`,";",nz(t,t.messengerExpandedWidthPx)," transition-delay:",300,"ms;"))," ",(({isExpanded:e,isArticleLoaded:t})=>e&&t&&cz),"opacity:1;>iframe{mask-image:radial-gradient(\n      circle 1px at -10px -10px,\n      transparent 0px,\n      ",(0,k.w4)("containerBaseNeutral")," 1px\n    );width:100%;height:100%;position:absolute;visibility:visible;}",(({theme:e})=>e.isLeftAlign&&(0,k.AH)("left:",e.isEmbeddedMode?0:e.horizontalPaddingPx,"px;right:auto;"))," ",(({theme:e})=>e.isCenterAlign&&lz)," ",(({theme:e})=>e.isMobileSize&&(0,k.AH)("z-index:",(0,ii.fE)(1,e),";width:100%;max-height:none;left:0;right:0;bottom:0;border-radius:0;position:fixed;"))," ",(({theme:e})=>e.isMobileSize&&sz)," ",(({theme:e})=>e.isMobileSize&&az)," ",(({theme:e})=>e.isMobileSize&&oz)," transition:width ",QI,"ms,height ",QI,"ms,max-height ",QI,"ms,transform 300ms cubic-bezier(0, 1.2, 1, 1),opacity 83ms ease-out;",(({visibilityState:e})=>(e===Qt.cy.collapsed||e===Qt.cy.shrinked)&&(0,k.AH)("transition:width ",QI,"ms,transform 300ms cubic-bezier(0, 1.2, 1, 1),opacity 83ms ease-out;"))," pointer-events:all;",(({isMessengerOpen:e})=>!e&&rz),(({disableOpenAnimation:e})=>e&&iz),";");const hz=(0,k.Ay)("main",{target:"e1o4xdyj2"})({name:"1ch1fqb",styles:"overflow:hidden;position:relative;display:flex;flex-direction:column;flex-grow:1;justify-content:flex-start;max-height:100%"}),mz=(0,k.Ay)("div",{target:"e1o4xdyj1"})("pointer-events:none;transition:margin 0.3s ease-out,opacity 0.3s ease-out;z-index:",(0,ii.fE)(2),";>*{pointer-events:all;}&.enter{transform:translateY(100%);height:0;opacity:0;}&.enter-done{transform:translateY(0);height:auto;opacity:1;}"),gz=(0,k.Ay)("div",{target:"e1o4xdyj0"})({name:"1v771ry",styles:"z-index:3"});const xz=({currentSpace:e,children:t})=>{const n=`spaces-${e}`;return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(hz,{id:n,"data-testid":n,children:t})})},fz=()=>{const{pathname:e}=(0,a.useLocation)(),t=-1!==e.indexOf("conversation/"),n=e.startsWith(`/${p.ND.id}/details`),i=e.startsWith(`/${p.Ij.id}/tickets`)||e.startsWith(`/${p.rK.id}/details`),r=e.startsWith(`/${p.Ul.id}/${h.TA.checklists}`),o=(0,m.GV)(wi.J3),s=e.startsWith(`/${p.Zh.id}/sheet`),l=(0,m.GV)(Mg._9),c=(0,m.GV)(Ke.qZ),d=!(0,m.GV)(g.j7)&&c;return!(t||n||i||l||s||(0,g.ke)(e)||r&&o||d)},vz=(e,t)=>{const n=t.pathname.split("/"),i=e.pathname.split("/"),r=n[1],o=i[1]!==r;if("/messages/conversation/new"===e.pathname&&t.pathname.match(/\/messages\/conversation\/\d+/))return S;if(o)return C;if(t.pathname!==e.pathname){return n.length<=i.length?_:T}return S},yz=()=>{const{currentSpace:e}=F(),t=(0,m.GV)(x.Er),n=(0,m.GV)(x.km),i=fz()&&n,r=R({initialWhiteBackground:!1,initialHeight:0});return(0,b.useEffect)((()=>{t&&(0,Ve.A5)("viewed",e.id,"messenger","")}),[e.id,t]),(0,v.jsx)(xz,{currentSpace:e.id,showIntercomLink:i,children:(0,v.jsxs)(N.Provider,{value:r,children:[(0,v.jsx)(gz,{id:"intercom-header-placeholder"}),(0,v.jsx)(Mr,{}),(0,v.jsx)(V,{getTransition:vz})]})})};const bz=(0,k.Ay)("main",{target:"eal9a3u0"})({name:"lg89bt",styles:"display:flex;flex-direction:column;flex-grow:1;max-height:100%;overflow:hidden;position:relative;z-index:1"}),wz=()=>{const{currentSpace:e}=F(),t=(0,m.GV)(x.Er),n=R({initialWhiteBackground:!1,initialHeight:0});return(0,b.useEffect)((()=>{t&&(0,Ve.A5)("viewed",e.id,"messenger","fin-messenger")}),[e.id,t]),(0,v.jsx)(N.Provider,{value:n,children:(0,v.jsx)(bz,{children:(0,v.jsx)(a.Outlet,{})})})};const jz="intercom-mobile-messenger-active",kz=(0,k.Ay)("div",{target:"e1ecbty2"})({name:"2v90l4",styles:"display:flex;flex-direction:column;height:100vh;width:100vw"}),Az=(0,k.Ay)("div",{target:"e1ecbty1"})("position:absolute;top:0;left:0;width:100%;height:100%;background-color:",(0,k.w4)("containerBaseNeutral"),";"),Cz=(0,k.Ay)("div",{target:"e1ecbty0"})("position:absolute;top:12px;bottom:",(({composerHeight:e})=>e+16),"px;left:",(({theme:e})=>e.conversationHorizontalPadding),"px;right:",(({theme:e})=>e.conversationHorizontalPadding),"px;border-radius:",(({theme:e})=>e.finBackgroundBorderRadiusPx),"px;background-color:",(0,k.w4)("containerBaseNeutral"),";border:1px solid ",(({theme:e})=>e.launcherExtendedBorder),";box-shadow:",(0,k.w4)("shadowSmall"),";pointer-events:none;"),Sz=()=>(0,m.GV)((e=>{var t;return null==(t=e.customizationOverrides)?void 0:t.experimentalFinMessengerLayout}))?(0,v.jsx)(wz,{}):(0,v.jsx)(yz,{}),Tz=({isMessengerOpen:e})=>{const t=(0,m.jL)(),n=(0,b.useContext)(Ew),i=(0,m.GV)(wr.l),r=(0,m.GV)((e=>e.article.isLoaded)),o=(0,m.GV)(x.fB),[a,s]=(0,b.useState)(0),[l,c]=(0,b.useState)(!1),d=(0,Kb.Z)(e),p=Ar(),h=pg(),g=ug();(e=>{const t=Ar(),n=(0,m.jL)(),i=(0,m.GV)((e=>e.app.isMessengerOpen));(0,b.useEffect)((()=>{t||!i||e!==Qt.cy.shrinked&&e!==Qt.cy.collapsed||(n(Jt.Ay.showInitialScreen({replaceCurrentView:!0,forceLocationRedirect:!0})),n(Jt.Ay.closeMessenger()))}),[e,t,i,n])})(g);const{newFooterHeight:y}=(0,b.useContext)(Zh),w=Bb(),j=(null==w?void 0:w.isFetching)&&!(null!=w&&w.isUpdating),k=(0,b.useCallback)((()=>{(0,u.vy)(null==n?void 0:n.document.documentElement,jz)}),[n]),A=(0,b.useCallback)((()=>{(0,u.iQ)(null==n?void 0:n.document.documentElement,jz)}),[n]),C=(0,b.useCallback)((()=>{var e;((0,Lo.rr)()||(0,yr.IS)())&&null!=(e=window)&&null!=(e=e.parent)&&e.scrollTo&&a&&window.parent.scrollTo(0,a)}),[a]);(0,b.useEffect)((()=>{let t;return s(window.parent.scrollY||0),e&&(0,Lo.rr)()&&(0,yr.IS)()&&A(),!e&&d&&(c(!0),k(),C(),t=setTimeout((()=>{c(!1)}),1e3)),()=>clearTimeout(t)}),[e,k,C,A,d]);const S=(0,b.useCallback)((e=>{e.preventDefault()}),[]);return(0,v.jsx)(pz,{isExpanded:i,isArticleLoaded:!!r,className:"intercom-messenger-frame",onTransitionEnd:e=>{"width"===e.propertyName&&t((0,br.E)())},isMessengerOpen:e,disableOpenAnimation:(0,f.z)(),lightweightAppActive:o,isFinMessenger:p,visibilityState:g,composerHeight:y,children:(e||l)&&(0,v.jsx)(JI.Ay,{frameName:"intercom-messenger-frame",title:"Intercom live chat",ariaLiveAssertive:!1,removeBodyMargin:!0,children:(0,v.jsxs)(b.Fragment,{children:[(0,v.jsx)(kz,{"data-testid":"floating-frame-dnd-target",onDragOver:S,onDrop:S,children:(0,v.jsx)(Sz,{})}),!p&&(0,v.jsx)(Az,{}),p&&!h&&!j&&(0,v.jsx)(Cz,{composerHeight:y||69})]})})})};var _z=n(64566);function Ez({isMessengerOpen:e}){const t=(0,m.jL)(),n=(0,m.GV)(g.$B);return(0,b.useEffect)((()=>{e&&t((0,_z.KT)())}),[t,n,e]),(0,v.jsx)(Jh,{children:(0,v.jsx)(Tz,{isMessengerOpen:e})})}var Iz=n(24627),zz=n(38026),Nz=n(7713),Mz=n(50533);const Rz=(0,k.Ay)("div",{target:"e11rlguj5"})("position:absolute;top:0;left:0;background:",(({theme:e,isFinMessenger:t})=>t?e.containerBaseNeutral:e.primaryColor),";width:",(({isExtended:e})=>e?zr.wr-30:(0,k.w4)("launcherSizePx")),"px;height:",(({isExtended:e})=>e?zr.nk-26:(0,k.w4)("launcherSizePx")),"px;border-radius:",(({isExtended:e})=>e?"12px":"50%"),";cursor:pointer;backface-visibility:hidden;overflow:hidden;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;",(({theme:e,isExtended:t,isMessengerOpen:n,isFinMessenger:i})=>t&&(0,k.AH)("display:",n?"none":"flex",";align-items:center;justify-content:flex-start;padding:12px 16px 12px 12px;gap:6px;background:",i?e.containerBaseNeutral:e.primaryColor,";border:1px solid ",e.launcherExtendedBorder,";box-shadow:0px -2px 50px ",e.launcherExtendedShadow,";"))," ",(({badgeCutoutType:e,isExtended:t})=>"active"===e&&!t&&(0,k.AH)("mask-image:url('data:image/svg+xml;base64,",(0,$d.A)('<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M42.9991 0C40.5707 1.82446 39 4.7288 39 8C39 13.1853 42.9467 17.4489 48 17.9506V48H0V0H42.9991Z" fill="currentColor"/>\n</svg>\n'),"');border-radius:0;")),";",(({badgeCutoutType:e,isExtended:t})=>"passive"===e&&!t&&(0,k.AH)("mask-image:url('data:image/svg+xml;base64,",(0,$d.A)('<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M48 0H0V48H48V12.9333C46.9809 13.8454 45.6352 14.4 44.16 14.4C40.9788 14.4 38.4 11.8212 38.4 8.64C38.4 5.45884 40.9788 2.88 44.16 2.88C45.6352 2.88 46.9809 3.4346 48 4.34667V0Z" fill="currentColor"/>\n</svg>\n'),"');border-radius:0;")),";*{cursor:pointer;}");var Bz={name:"179q9ic",styles:"transform:none"},Pz={name:"ga0l5k",styles:"position:absolute;top:0;bottom:0;width:100%"};const Lz=({theme:e,isExtended:t})=>(0,k.AH)("user-select:none;display:flex;align-items:center;justify-content:center;",t?(0,k.AH)("position:relative;width:",e.launcherIconSizePxM5,"px;height:",e.launcherIconSizePxM5,"px;"):Pz," transition:transform 0.16s linear,opacity 0.08s linear;",e.isMobileSize&&Bz,";"),Oz=({theme:e,isFinMessenger:t})=>t?e.textDefault:e.launcherIconColor;var Dz={name:"1x052ey",styles:"opacity:1;transform:none"},Hz={name:"letlco",styles:"transition:transform 0.4s ease 0.2s"},Fz={name:"d2404m",styles:"opacity:0;transform:rotate(30deg) scale(0)"};const Vz=(0,k.Ay)("div",{target:"e11rlguj4"})((({theme:e,isExtended:t})=>Lz({theme:e,isExtended:t}))," opacity:1;transform:rotate(0deg) scale(1);svg{width:",(({theme:e})=>e.launcherIconSizePxM5),"px;height:",(({theme:e})=>e.launcherIconSizePxM5),"px;path{fill:",(({theme:e,isFinMessenger:t})=>Oz({theme:e,isFinMessenger:t})),";}}",(({active:e})=>e&&Fz)," ",(({discoveryMode:e})=>e&&Hz)," ",(({theme:e,active:t})=>t&&e.isMobileSize&&Dz),";");var Gz={name:"1x052ey",styles:"opacity:1;transform:none"},$z={name:"letlco",styles:"transition:transform 0.4s ease 0.2s"},qz={name:"d2404m",styles:"opacity:0;transform:rotate(30deg) scale(0)"};const Uz=(0,k.Ay)("div",{target:"e11rlguj3"})((({theme:e,isExtended:t})=>Lz({theme:e,isExtended:t}))," opacity:1;transform:rotate(0deg) scale(1);svg{height:",(({theme:e})=>e.launcherSizePx-4),"px;path{fill:",(({theme:e,isFinMessenger:t})=>Oz({theme:e,isFinMessenger:t})),";}}",(({active:e})=>e&&qz)," ",(({discoveryMode:e})=>e&&$z)," ",(({theme:e,active:t})=>t&&e.isMobileSize&&Gz),";");var Wz={name:"mws4fn",styles:"opacity:0"},Kz={name:"1jgw0uu",styles:"opacity:1;transform:rotate(0deg)"};const Xz=(0,k.Ay)("div",{target:"e11rlguj2"})((({theme:e,isExtended:t})=>Lz({theme:e,isExtended:t}))," opacity:0;transform:rotate(-60deg);svg{path{fill:",(({theme:e,isFinMessenger:t})=>Oz({theme:e,isFinMessenger:t})),";}}",(({active:e})=>e&&Kz)," ",(({theme:e,active:t})=>t&&e.isMobileSize&&Wz),";"),Yz=(0,k.Ay)("img",{target:"e11rlguj1"})("max-width:",(0,k.w4)("launcherIconSizePxM5"),"px;max-height:",(0,k.w4)("launcherIconSizePxM5"),"px;position:relative;"),Zz=(0,k.Ay)("span",{target:"e11rlguj0"})("color:",(({theme:e,isFinMessenger:t})=>Oz({theme:e,isFinMessenger:t})),";font-size:14px;font-weight:600;line-height:1.5;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:140px;opacity:",(({active:e})=>e?0:1),";transition:opacity 0.16s linear;");var Jz=n(76974);const Qz=e=>new Promise(((t,n)=>{const i=new Image;i.onload=()=>t(),i.onerror=()=>n(new Error(`Failed to preload image: ${e}`)),i.src=e}));var eN=n(18440);const tN=({isMessengerOpen:e,frameWindow:t,isLauncherDiscoveryModeEnabled:n,launcherLogoUrl:i,launcherText:r,allowSelfServeIcon:o,isFinMessenger:a,badgeCutoutType:s,onClick:l,appId:c,activeNotificationCount:d})=>{(0,b.useEffect)((()=>{const e=new Gr.A({document:t.document,disableStartingTrap:()=>!0,disableEndingTrap:()=>!0,firstElement:()=>(0,$r.CZ)()});return function(){e&&e.restore()}}),[t.document,e]);const u=!(!r||!r.trim()),p="intercom-launcher "+(e?"intercom-launcher-active":""),h=!i&&o&&!("a5a30g1y"===c||"tx2p130c"===c);return(0,v.jsxs)(Rz,{className:p,onClick:l,role:"button",badgeCutoutType:s,isExtended:u,isMessengerOpen:e,isFinMessenger:a,"data-testid":`launcher-with-badge-cutout-${s}`,"aria-label":(0,eN.j)(e,d),children:[h?(0,v.jsx)(Uz,{active:e,discoveryMode:n,isExtended:u,isFinMessenger:a,"data-testid":"launcher-self-serve-open-icon",children:(0,v.jsx)(Mz.A,{})}):(0,v.jsx)(Vz,{active:e,discoveryMode:n,isExtended:u,isFinMessenger:a,"data-testid":i?"launcher-custom-open-icon":"launcher-default-open-icon",children:i?(0,v.jsx)(Yz,{src:i,alt:""}):(0,v.jsx)(Nz.A,{})}),u&&r&&(0,v.jsx)(Zz,{isFinMessenger:a,active:e,children:r}),!u&&(0,v.jsx)(Xz,{active:e,isExtended:u,isFinMessenger:a,"data-testid":"launcher-minimize-icon",children:(0,v.jsx)(zz.A,{})})]})},nN=e=>{const{isMessengerOpen:t}=(0,m.GV)((e=>e.app)),n=(0,m.GV)(ac.XK),i=(0,m.GV)(ac.nC),{isLauncherDiscoveryModeEnabled:r}=(0,m.GV)((e=>e.launcherDiscoveryMode)),o=(0,m.GV)(x.Np),a=(0,m.GV)(x.iO),s=(0,m.GV)((e=>{var t;return null==(t=e.session)?void 0:t.appId})),l=(0,m.jL)(),c=(0,m.GV)(g.qB),d=(0,m.GV)(Jz.UM);(0,b.useEffect)((()=>{(async()=>{await Promise.allSettled([Qz(xh),Qz(fh)])})()}),[]);let u="none";return!a&&e.hasBadge&&(u=d>0?"active":"passive"),(0,v.jsx)(tN,Object.assign({isMessengerOpen:t,launcherLogoUrl:n,launcherText:i,isLauncherDiscoveryModeEnabled:r,allowSelfServeIcon:o,isFinMessenger:a,badgeCutoutType:u,onClick:()=>{(0,Ve.A5)("clicked","launcher","in_app","",{space_opened:null==c?void 0:c.id,is_messenger_open:t}),l((0,Jt.wJ)())},appId:s,activeNotificationCount:d},e))};var iN={name:"mws4fn",styles:"opacity:0"};const rN=(0,k.Ay)(JI.Ay,{target:"efr23pf0"})("z-index:",(0,ii.fE)(),";width:",(({isExtended:e})=>e?zr.wr:(0,k.w4)("launcherSizePx")),"px;height:",(({isExtended:e,theme:t})=>e?zr.nk:t.launcherSizePx+"px"),";border-radius:",(({isExtended:e})=>e?"12px":"50%"),";color-scheme:none;background:none;",(({theme:e})=>e.isLeftAlign&&(0,k.AH)("left:",e.horizontalPaddingPx,"px;right:auto;"))," ",(({theme:e})=>e.isMobile&&(0,k.AH)("filter:drop-shadow(0 1px 6px ",e.elevation1,") drop-shadow(0 2px 32px ",e.elevation2,");transition:box-shadow 80ms ease-in-out;pointer-events:auto;&:hover{filter:drop-shadow(0 2px 8px ",e.alphaBlack10,") drop-shadow(0 4px 40px ",e.alphaBlack20,");}&:active{filter:drop-shadow(0 1px 6px ",e.elevation1,") drop-shadow(0 2px 32px ",e.elevation2,");}"))," ",(({shouldRenderShadow:e,theme:t})=>e&&(0,k.AH)("filter:drop-shadow(0 1px 6px ",t.elevation1,") drop-shadow(0 2px 32px ",t.elevation2,");"))," ",(({theme:e,isMessengerOpen:t})=>e.isMobileSize&&t&&iN),";");function oN(e){const{shouldRenderShadow:t,hasBadge:n,isMessengerOpen:i}=e,r=(0,m.GV)(ac.nC),o=(0,m.GV)(Jz.UM),a=!(!r||!r.trim());return(0,v.jsx)(rN,{className:"intercom-launcher-frame",frameName:"intercom-launcher-frame",title:(0,eN.j)(i,o),ariaLiveAssertive:!1,shouldRenderShadow:t,isMessengerOpen:i,isExtended:a,children:e=>(0,v.jsx)(nN,{frameWindow:e,hasBadge:n})})}const aN=(0,b.lazy)((()=>n.e(9962).then(n.bind(n,38550))));var sN=n(92078);var lN=n(63614);const cN=(0,o.Ng)((e=>{const{launcherDiscoveryMode:{isLauncherDiscoveryModeOpening:t,isLauncherDiscoveryModeClosing:n},app:{helpCenterSiteUrl:i}}=e,r=!(e=>{if(!e)return!1;const t=(0,sN.Um)();return!!t&&e.replace(/(^\w+:|^)\/\//,"").startsWith(t)})(i)&&(t||n);return{isLauncherDiscoveryModeOpening:t,isLauncherDiscoveryModeClosing:n,showDiscoveryLauncher:r}}),(e=>({onDiscoveryLauncherMouseEnter:()=>{(0,lN.Fh)()},onDiscoveryLauncherMouseOut:()=>{e((0,lN.jV)())},onLauncherDiscoveryClick:()=>{e((0,Jt.wJ)())}})))((function(e){const{showDiscoveryLauncher:t}=e;return t?(0,v.jsxs)(b.Suspense,{fallback:null,children:[(0,v.jsx)(aN,Object.assign({},e)),";"]}):null}));const dN=function({children:e,className:t=""}){if(e){const n="number"==typeof e&&e>99?"99+":e;return(0,v.jsx)(gm,{"data-testid":"active-notifications",className:t,children:n})}return(0,v.jsx)(xm,{"data-testid":"passive-notifications"})};var uN={name:"16iyio",styles:"width:8px;height:8px;box-shadow:none;bottom:35px;left:40px"};const pN=(0,k.Ay)("div",{target:"e1nq9v8t0"})("z-index:",(0,ii.fE)(1),";position:absolute;bottom:32px;/* @noflip */left:41px;min-width:16px;height:16px;border-radius:50%;",(({hasNotifications:e})=>!e&&uN),";"),hN=({notificationCount:e})=>{const t=!!e&&e>0;return(0,v.jsx)(pN,{hasNotifications:t,children:(0,v.jsx)(dN,{children:t?e:void 0})})},mN=()=>{const e=(0,m.GV)(Jz.UM);return(0,v.jsx)(hN,{notificationCount:e})};var gN={name:"1xldq4",styles:"&:hover{transform:translateX(-50%) scale(1.1);}&:active{transform:translateX(-50%) scale(0.85);}"},xN={name:"gnzpf7",styles:"animation:launcherEnter 300ms cubic-bezier(0.4, 0, 0.2, 1) forwards;@keyframes launcherEnter{0%{transform:scale(0.8);opacity:0;}100%{transform:scale(1);opacity:1;}}"},fN={name:"1g0lhms",styles:"left:50%;right:auto;transform:translateX(-50%)"};const vN=(0,k.Ay)("div",{target:"edrs4yi0"})("user-select:none;z-index:",(0,ii.L9)(),";position:fixed;bottom:",(({theme:e})=>e.userIsFinMessenger?e.verticalPaddingPx+8:e.verticalPaddingPx),"px;right:",(0,k.w4)("launcherHorizontalPaddingPx"),"px;width:",(({isExtended:e})=>e?zr.wr:(0,k.w4)("launcherSizePx")),"px;height:",(({isExtended:e})=>e?zr.nk:(0,k.w4)("launcherSizePx")),"px;",(({theme:e})=>e.isLeftAlign&&(0,k.AH)("left:",e.horizontalPaddingPx,"px;right:auto;"))," ",(({theme:e})=>e.isCenterAlign&&fN)," transition:transform 167ms cubic-bezier(0.33, 0, 0, 1);transform-origin:center;",(({isEntering:e})=>e&&xN)," &:hover{transition:transform 250ms cubic-bezier(0.33, 0, 0, 1);transform:scale(1.1);}&:active{transform:scale(0.85);transition:transform 134ms cubic-bezier(0.45, 0, 0.2, 1);}",(({theme:e})=>e.isCenterAlign&&gN),"@media (prefers-reduced-motion: reduce){transition:none!important;transform:none!important;animation:none!important;opacity:1!important;scale:1!important;}");var yN=n(64442);var bN={name:"eivff4",styles:"display:none"},wN={name:"1rvsm0a",styles:"background:radial-gradient(\n        ellipse at bottom center,\n        rgba(29, 39, 54, 0.16) 0%,\n        rgba(29, 39, 54, 0) 72%\n      );left:50%;right:auto;transform:translateX(-50%)"},jN={name:"16reteu",styles:"background:radial-gradient(\n        ellipse at bottom left,\n        rgba(29, 39, 54, 0.16) 0%,\n        rgba(29, 39, 54, 0) 72%\n      );left:0;right:auto"};const kN=(0,k.Ay)("div",{target:"equ3uxk0"})("z-index:",(0,ii.L9)(-2),";position:fixed;width:500px;height:500px;bottom:0;right:0;content:'';pointer-events:none;background:radial-gradient(\n    ellipse at bottom right,\n    rgba(29, 39, 54, 0.16) 0%,\n    rgba(29, 39, 54, 0) 72%\n  );",(({theme:e})=>e.isLeftAlign&&jN)," ",(({theme:e})=>e.isCenterAlign&&wN)," ",(({theme:e})=>e.isMobileSize&&bN),";");function AN({shouldShowPageTitleNotification:e,appWindow:t,conversation:n}){var i;const r=(null==t||null==(i=t.document)?void 0:i.title)||"",[o,a]=(0,b.useState)(r),s=(0,b.useRef)(null),l=(0,b.useCallback)((e=>{if(null!=t&&t.document&&t.document.title!==e)if((0,Lo.AM)(t)){const e=(0,Lo.w3)().userAgent;(0,Ve.sq)("headlessChromeDetected",{user_agent:e})}else t.document.title=e}),[t]),c=()=>{if(null==t||!t.document)return;const e=(e=>{var t;if(!e||e.dismissed||!e.parts)return;const n=(0,_c.A)(e.parts);return n&&null!=(t=n.author)&&t.isAdmin?(0,Xe.Tl)("user_says",{firstName:n.author.firstName}):void 0})(n);if(!e)return;const i=t.document.title===e?o:e;l(i)};(0,b.useEffect)((()=>{e||l(o)}),[e,o,l]),(0,b.useEffect)((()=>{if(n&&e&&null!=t&&t.document)return a(t.document.title),s.current&&clearInterval(s.current),s.current=setInterval((()=>c()),3e3),c(),()=>{l(o),s.current&&clearInterval(s.current)}}),[])}class ChunkLoadErrorBoundary extends b.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){var n;const{componentName:i="unknown"}=this.props,r=this.isChunkLoadingError(e);(0,Ur.l2)(e),(0,Ve.sq)("chunk_loading_error",{message:e.message,componentName:i,isChunkLoadError:r,componentStack:null==(n=t.componentStack)?void 0:n.slice(0,500)}),r&&(0,Ve.sq)("chunk_load_failed",{componentName:i,userAgent:navigator.userAgent,url:window.location.href,errorType:this.getChunkErrorType(e)})}isChunkLoadingError(e){var t,n;const i=(null==(t=e.message)?void 0:t.toLowerCase())||"",r=(null==(n=e.stack)?void 0:n.toLowerCase())||"";return["loading chunk","loading css chunk","loading js chunk","failed to import","network error","fetch error","script error","chunkloaderror","dynamicimporterror","err_blocked_by_client"].some((e=>-1!==i.indexOf(e)||-1!==r.indexOf(e)))}getChunkErrorType(e){var t;const n=(null==(t=e.message)?void 0:t.toLowerCase())||"";return-1!==n.indexOf("loading chunk")?"chunk_load_failure":-1!==n.indexOf("failed to import")?"import_failure":-1!==n.indexOf("err_blocked_by_client")?"blocked_by_client":-1!==n.indexOf("network error")?"network_error":-1!==n.indexOf("fetch error")?"fetch_error":-1!==n.indexOf("script error")?"script_error":"unknown_chunk_error"}render(){if(this.state.hasError){const{fallback:e,silent:t=!0}=this.props;if(e){const t=e;return(0,v.jsx)(t,{})}return null}return this.props.children}}var CN=n(24817),SN=n(6135);const TN=(0,b.lazy)((()=>n.e(2493).then(n.bind(n,79790)))),_N=(0,b.lazy)((()=>n.e(7367).then(n.bind(n,3830)))),EN=(0,b.lazy)((()=>n.e(7420).then(n.bind(n,76436)))),IN=(0,b.lazy)((()=>n.e(7420).then(n.bind(n,79653)))),zN=(0,b.lazy)((()=>n.e(7420).then(n.bind(n,50933)))),NN=(0,b.lazy)((()=>n.e(7420).then(n.bind(n,86274)))),MN=(0,b.lazy)((()=>n.e(848).then(n.bind(n,78797)))),RN=(0,b.lazy)((()=>n.e(3653).then(n.bind(n,89346)))),BN=(0,b.lazy)((()=>n.e(5400).then(n.bind(n,52277))));function PN(e){const{hasUnreadContent:t,isLauncherEnabled:n,isMessengerOpen:i,isMessageOpen:r,isInstallOpen:o,lastUnreadConversation:a,notificationCount:s,customizationAttributes:l,isBooted:c,isLauncherDiscoveryModeOpening:d,hasPointerMessages:u,hasBanner:p,isTourFetched:h,isPreviewingTour:g,hasSurvey:x,hasNudge:f,hideNotifications:y,launcherText:w,userIsPresent:j,isLightweightAppActive:k=!1}=e,A=(0,b.useContext)(Ew),C=(0,m.jL)(),S=(0,b.useRef)(null),T=(0,b.useRef)(!1),_=Ar(),E=(0,m.GV)(CN.q),I=(0,Dn.A)("finLauncherDiscoveryMode"),z=ug(),N=(0,yN.t)(),M=(0,yN.H)(),[R,P]=(0,b.useState)(!0),L=(0,b.useRef)(!1),O=L.current,D=(0,b.useRef)(i),H=D.current,F=(0,b.useRef)(!1);AN({appWindow:A||window,conversation:a,shouldShowPageTitleNotification:!(!n&&!i)&&Boolean((null==a?void 0:a.userParticipated)&&!j)}),(0,b.useEffect)((()=>()=>{S.current&&clearTimeout(S.current)}),[]),(0,b.useEffect)((()=>{!i&&H&&(P(!1),S.current&&clearTimeout(S.current),S.current=window.setTimeout((()=>{P(!0)}),300)),D.current=i}),[H,i]),(0,b.useEffect)((()=>{k&&!F.current&&(L.current=!0),!i&&H&&O&&(L.current=!1),F.current=k}),[k,O,H,i]);const V=_&&!(0,yr.IS)()&&i&&z===Qt.cy.shrinked;(0,b.useEffect)((()=>{V&&y&&C((0,SN.b)(!1))}),[V,y,C]);const G=R&&!r&&(!i||V)&&!h&&!N&&(s??0)>0&&!y,$=!_&&!i&&t,q=!(!w||!w.trim()),U=i&&(0,yr.IS)()||i&&q,W=G&&(0,yr.IS)()&&!_,K=_&&G&&!(0,yr.IS)()&&z===Qt.cy.shrinked,X=n&&!U&&!W,Y=!U&&!T.current;X&&!T.current&&(T.current=!0);const Z=k||O?0:200,J=!(null!=l&&l.hideGradient)&&(i||r||G)&&!k&&!_;return _&&!E&&z!==Qt.cy.visible?null:(0,v.jsxs)("div",{className:"intercom-app","aria-live":"polite",children:[(0,v.jsx)(B.F,{component:b.Fragment,children:(0,v.jsx)(Ez,{isMessengerOpen:i})}),!r||h||x||i?null:(0,v.jsx)(b.Suspense,{fallback:null,children:(0,v.jsx)(Cl,{children:(0,v.jsx)(EN,{appWindow:A},"Message")})}),!u||i||h||N?null:(0,v.jsx)(b.Suspense,{fallback:null,children:(0,v.jsx)(zN,{appWindow:A},"PointerMessage")}),c&&o?(0,v.jsx)(MN,{sendBeaconEvent:()=>{}},"Install"):null,G&&(0,v.jsx)(b.Suspense,{fallback:null,children:(0,v.jsx)(IN,{showDesktopNotifications:!(0,yr.IS)(),isFinOnlyWithComposer:!!K})}),!(G||i)&&f&&(0,v.jsx)(ChunkLoadErrorBoundary,{componentName:"nudge",children:(0,v.jsx)(b.Suspense,{fallback:null,children:(0,v.jsx)(BN,{frameWindow:A??void 0})})}),X&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(vN,{isEntering:Y,isExtended:q,children:[(0,v.jsx)(oN,{shouldRenderShadow:!d,isMessengerOpen:i,hasBadge:$??!1}),$&&(0,v.jsx)(mN,{})]}),!Lo.Ay.isMobileBrowser()||I?(0,v.jsx)(cN,{isLeftAligned:"left"===(null==l?void 0:l.alignment)}):null]}),h&&(!N||g)&&A?(0,v.jsx)(ChunkLoadErrorBoundary,{componentName:"tour",children:(0,v.jsx)(b.Suspense,{fallback:null,children:(0,v.jsx)(NN,{appWindow:A},"Tour")})}):null,h&&A?(0,v.jsx)(ChunkLoadErrorBoundary,{componentName:"confetti",children:(0,v.jsx)(b.Suspense,{fallback:null,children:(0,v.jsx)(_N,{appWindow:A})})}):null,(0,v.jsx)(tt,{animationKey:"intercom-app",duration:Z,children:J?(0,v.jsx)(kN,{}):null}),A&&(0,v.jsx)(Iz.A,{appWindow:A}),!p||h||i&&(0,yr.IS)()?null:(0,v.jsx)(ChunkLoadErrorBoundary,{componentName:"banner",children:(0,v.jsx)(b.Suspense,{fallback:null,children:A&&(0,v.jsx)(TN,{appWindow:A})})}),!x||i||N&&!M?null:(0,v.jsx)(ChunkLoadErrorBoundary,{componentName:"survey",children:(0,v.jsx)(b.Suspense,{fallback:null,children:(0,v.jsx)(RN,{frameWindow:A??void 0})})}),h?null:(0,v.jsx)("div",{id:"intercom-modal-container"})]})}const LN=({locale:e,isOverrideSamplingEnabled:t=!1,isErrorReportingDisabled:n,appId:i,onTabPressed:r,hasUnreadContent:o,userIsPresent:a,isLauncherEnabled:s,isMessengerOpen:l,isMessageOpen:c,isInstallOpen:d,lastUnreadConversation:p,notificationCount:h,customizationAttributes:g,isBooted:x,isBooting:f,isInstantBootEnabled:y,isLauncherDiscoveryModeOpening:w,hasPointerMessages:j,hasBanner:k,isTourFetched:A,isPreviewingTour:C,launcherText:S,isLightweightAppActive:T=!1,hasSurvey:_,hasNudge:E,hideNotifications:I,isNewMobileNotificationsEnabled:z})=>{const N=(0,m.jL)(),M=(0,m.GV)((e=>e.session)),R=(0,Dn.A)("enableCustomEmojis");(e=>{const{session:t,onError:n,onSuccess:i,enabled:r}=e,o=(0,b.useCallback)((async()=>{if(t&&r)try{const e=await(0,Lt.J5)(t),n=(null==e?void 0:e.emojis)||[],r=new Map;n.forEach((e=>{const t=Object.assign({},e,{type:"custom_emoji"});r.set(e.emoji_name,t)})),i&&i(r)}catch(e){const t=e instanceof Error?e:new Error("Failed to fetch custom emojis");n&&n(t)}}),[t,r,i,n]);(0,b.useEffect)((()=>{t&&r&&o()}),[t,r])})({session:M,enabled:R,onError:e=>{(0,Ve.sq)("custom_emojis_fetch_failed",{message:e.message,stack:e.stack}),N((0,Jt.Ly)(new Map,!1))},onSuccess:e=>{e&&e.size>0?N((0,Jt.Ly)(e,!1)):N((0,Jt.Ly)(new Map,!1))}}),(0,b.useEffect)((()=>{M&&R&&N((0,Jt.Ly)(new Map,!0))}),[M,R,N]);const B=(0,b.useCallback)((e=>{(0,u.di)(e)&&r()}),[r]);(0,b.useEffect)((()=>{void 0!==e&&(0,Xe.xS)(e)}),[e]),(0,b.useEffect)((()=>{(0,qr.vH)(t),(0,qr.Zn)(n),(0,Ur.f5)(i)}),[t,n,i]),(0,b.useEffect)((()=>{if("undefined"!=typeof window&&window.parent)return(0,u.q2)(window.parent,"keydown",B),()=>{(0,u.f)(window.parent,"keydown",B)}}),[B]);return!(x||f&&y)?null:(0,v.jsx)(PN,{hasUnreadContent:o,lastUnreadConversation:p,notificationCount:h,userIsPresent:a,isBooted:x,isLauncherEnabled:s,isMessengerOpen:l,isMessageOpen:c,hasPointerMessages:j,hasBanner:k,isTourFetched:A,isPreviewingTour:C,isInstallOpen:d,customizationAttributes:g,isLauncherDiscoveryModeOpening:w,launcherText:S,isLightweightAppActive:T,hasSurvey:_,hasNudge:E,hideNotifications:I,isNewMobileNotificationsEnabled:z})};var ON=n(28453);const DN=(0,X.Mz)((e=>(0,ON.A)(e.conversations.byId)),(e=>{const t=e.filter((e=>!e.read)).sort(((e,t)=>e.lastPartCreatedAt-t.lastPartCreatedAt));return(0,_c.A)(t)}));var HN=n(6434),FN=n(58822),VN=n(64015),GN=n(99886),$N=n(95214),qN=n(80929),UN=n(67033);const WN=(0,o.Ng)((e=>{var t;const{nudge:n}=e,{locale:i,isPresent:r}=e.user,{isBooting:o,isBooted:a,isMessengerOpen:s,isErrorReportingDisabled:l,isOverrideSamplingEnabled:c,features:d}=e.app,u=null==(t=e.launcherSettings)?void 0:t.instantBootEnabled,{isLauncherDiscoveryModeEnabled:p,isLauncherDiscoveryModeOpening:h}=e.launcherDiscoveryMode,{isInstallModeOpen:m}=e.install,{alignment:g,horizontalPadding:x,verticalPadding:f,zIndex:v,hideGradient:y}=(0,li.b)(e),{isActive:b}=e.lightweightApp,w=(0,CN.A)(e),j=(0,Jz.cV)(e),k=(0,HN.y)(e).length,A=(0,FN.A)(e).length,C=(0,GN.A)(e).length,S=DN(e),T=A>0,_=C>0,E=(0,qN.L)(e).length>0,I=(0,$N.dW)(e),z=(0,$N.O7)(e),N=e.session&&e.session.appId,M=!!(0,UN.IS)(e),R=!!n,B=(0,ac.nC)(e),P=e.app.hideNotifications;return{userIsPresent:r,locale:i,hasUnreadContent:j,notificationCount:k,lastUnreadConversation:S,isBooting:o,isBooted:a,isMessageOpen:T,isMessengerOpen:s,isLauncherEnabled:w,isLauncherDiscoveryModeEnabled:p,isLauncherDiscoveryModeOpening:h,isNewMobileNotificationsEnabled:d.newMobileNotificationsEnabled||!1,isErrorReportingDisabled:l,isOverrideSamplingEnabled:c,isInstallOpen:m,customizationAttributes:{alignment:g,horizontalPadding:x,verticalPadding:f,zIndex:v,hideGradient:y},isInstantBootEnabled:u,hasPointerMessages:_,hasBanner:E,isTourFetched:I,isPreviewingTour:z,appId:N,launcherText:B,isLightweightAppActive:b,hasSurvey:M,hasNudge:R,hideNotifications:P}}),(e=>({onTabPressed:()=>e(((t,n)=>{const{tabNavigation:i}=n().accessibility;i||e((0,VN.y8)(!0))}))})))(LN);const KN=(0,k.Ay)("div",{target:"e1ta6if44"})("display:flex;flex-direction:row;justify-content:space-between;font-size:14px;line-height:21px;border-top:1px solid ",(0,k.w4)("borderNeutral"),";box-shadow:",(0,k.w4)("shadowLarge"),";background-color:",(0,k.w4)("containerBaseNeutral"),";height:",80,"px;padding:0;&.enter{opacity:0;}&.enter-active{transition:opacity ",C.time,"ms ease-out;opacity:1;}&.enter-done{opacity:1;}&.exit{opacity:1;}&.exit-active{transition:opacity ",C.time,"ms ease-out;opacity:0;}&.exit-done{opacity:0;}"),XN=(0,k.Ay)("button",{target:"e1ta6if43"})("flex:1;display:flex;flex-direction:column;align-items:center;padding:18px 3px;cursor:pointer;transition:all 150ms;line-height:14px;overflow:hidden;text-overflow:clip;text-align:center;",(({showLabels:e,theme:t})=>!e&&(0,k.AH)("&:after{content:attr(data-title);position:relative;font-size:12px;padding:4px;top:-56px;color:",t.textMuted,";background:",t.containerNeutral,";box-shadow:",t.shadowSmall,";border-radius:6px;opacity:0;visibility:hidden;}&:hover{&:after{opacity:1;transition:all 0.1s ease 0.5s;visibility:visible;}}"))," ",(({isActive:e,theme:t})=>!e&&(0,k.AH)("svg{*{transition:all 150ms;}*[class$='fill']{fill:",t.iconMuted,";stroke:none;}}color:",t.textMuted,";&:hover{color:",t.linkColor,";svg{*[class*='fill']{fill:",t.linkColor,";stroke:none;}*[class*='stroke']{stroke:",t.linkColor,";}}}"))," ",(({isActive:e,theme:t})=>e&&(0,k.AH)("color:",t.linkColor,";font-weight:600;")),";"),YN=(0,k.Ay)("div",{target:"e1ta6if42"})("position:relative;display:flex;align-items:center;justify-content:center;margin:",(({showLabels:e})=>e?0:"10px")," auto 8px;pointer-events:none;",(({hasCutout:e,theme:t})=>e&&(0,k.AH)("svg{mask-image:radial-gradient(\n          circle 20px at calc(100% + 1px) calc(100% - 23px),\n          transparent 10px,\n          ",t.iconMuted," 0\n        );}"))," ",(({isActive:e,theme:t})=>e&&(0,k.AH)(">svg>path{fill:",t.linkColor,";}>svg>path[class$='stroke']{stroke:",t.linkColor,";fill:none;}>svg{*[class$='__circle']{fill:",t.linkColor,";stroke:",t.linkColor,";}*[class$='__negative']{stroke:",t.iconOnInverse,";}circle[class*='__negative']{fill:",t.iconOnInverse,";stroke:none;}}")),";");var ZN={name:"1eifec2",styles:"top:-5px;/* @noflip */right:calc(100% - 22px)"};const JN=(0,k.Ay)("div",{target:"e1ta6if41"})("position:absolute;/* @noflip */right:calc(100% - 17px);top:-7px;line-height:13px;/* @noflip */transform:translateX(100%);",(({small:e})=>e&&ZN),";"),QN=(0,k.Ay)("span",{target:"e1ta6if40"})({name:"s60ug3",styles:"display:block;text-align:center;margin:0 auto"}),eM=["onClick"],tM=["itemCount","activeIndex","showLabels","children","onClickItem"];function nM(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}const iM=(0,b.createContext)(null);iM.displayName="TabBarContext";const rM=({title:e,itemId:t,index:n,defaultIcon:i,activeIcon:r,activeNotificationCount:o=0,hasPassiveNotifications:a=!1,ariaControlElementId:s})=>{const{activeIndex:l,showLabels:c,onClickItem:d,getRovingProps:u}=(()=>{const e=(0,b.useContext)(iM);if(!e)throw new Error("TabBarItem must be used within a TabBar");return e})(),p=n===l,h=p?r:i,m=o>0,g=u(n),{onClick:x}=g,f=nM(g,eM);return(0,v.jsxs)(XN,Object.assign({id:`${s||t}-tab`,role:"tab",isActive:p,showLabels:c,"aria-selected":p,"aria-controls":`${s||t}-panel`,"aria-label":(0,eN.q)(e,o),onClick:()=>{p||d(n),x()},"data-testid":t,"data-title":c?void 0:e},f,{children:[(0,v.jsxs)(YN,{hasCutout:m,isActive:p,showLabels:c,children:[(0,v.jsx)(JN,{small:!m,children:(m||a)&&(0,v.jsx)(dN,{children:m?o:void 0})}),(0,v.jsx)(h,{})]}),c&&(0,v.jsx)(QN,{children:e})]}))},oM=e=>{let{itemCount:t,activeIndex:n,showLabels:i=!0,children:r,onClickItem:o}=e,a=nM(e,tM);const s={activeIndex:n,showLabels:i,onClickItem:o,getRovingProps:lv(t,[n],n,1)};return(0,v.jsx)(KN,Object.assign({role:"tablist","aria-label":"messenger_sections"},a,{children:(0,v.jsx)(iM.Provider,{value:s,children:r})}))},aM=({items:e,activeItemIndex:t})=>{const{showSpace:n}=F();return(0,v.jsx)(oM,{itemCount:e.length,activeIndex:t,showLabels:e.length<6,onClickItem:t=>{const i=e[t].id;(0,Ve.A5)("clicked",i,"messenger",i),n(i)},"data-testid":"spaces-tab-bar",children:e.map(((e,t)=>(0,v.jsx)(rM,{itemId:e.id,index:t,title:e.title||"",defaultIcon:e.iconComponent.default,activeIcon:e.iconComponent.active,activeNotificationCount:e.activeNotificationCount,hasPassiveNotifications:e.hasPassiveNotifications,ariaControlElementId:e.ariaControlElementId},e.id)))})},sM=(0,k.Ay)("div",{target:"e11jdbjj1"})("position:absolute;bottom:",(e=>e.tabBarIsVisible?20:32),"px;left:50%;transform:translateX(-50%);&>*{box-shadow:",(0,k.w4)("shadowLarge"),",",(0,k.w4)("shadowLarge"),";}"),lM=(0,k.Ay)(RC,{target:"e11jdbjj0"})("overflow-y:visible;z-index:",(0,ii.fE)(2),";");const cM=({tabBarIsVisible:e})=>{const{visible:t,styleVariant:n}=function(){const{pathname:e}=(0,a.useLocation)(),t=(0,g.wR)(e),n=!!(0,m.GV)(Tk),i=!!(0,m.GV)(Rg.xk);switch(t.id){case p.Ij.id:return{visible:n&&"/messages"===e,styleVariant:"primary"};case p.ZL.id:return{visible:i,styleVariant:"secondary"};default:return{visible:!1,styleVariant:"primary"}}}();return(0,v.jsx)(lM,{transitionKey:`${t}-${n}`,children:t&&(0,v.jsx)(sM,{tabBarIsVisible:e,children:(0,v.jsx)(Lg,{styleVariant:n})})})};function dM({children:e}){const t=(0,m.GV)(g.$P),n=fz()&&t.length>1,{currentSpace:i}=F(),r=t.findIndex((e=>e.id===i.id));return(0,v.jsxs)(v.Fragment,{children:[e,(0,v.jsx)(cM,{tabBarIsVisible:n}),(0,v.jsx)(B.B1,{in:n,timeout:C.time,unmountOnExit:!0,children:(0,v.jsx)(mz,{children:(0,v.jsx)(B.B1,{in:n,timeout:C.time,unmountOnExit:!0,children:(0,v.jsx)(aM,{items:t,activeItemIndex:r})})})})]})}function uM(){const e=(0,a.useLocation)(),t=(0,a.useNavigate)(),n=(0,m.jL)(),i=(0,m.GV)(x.iO);return(0,b.useEffect)((()=>{if(i){const i=e.pathname;i.startsWith("/messages")&&!("/messages"===i||"/messages/"===i)||(n(((e,t)=>{const{user:n}=t();(0,Ve.Jr)(n,"blocked","fin_only_url_filter","messenger_bottom_outlet",Ge.oZ,{attempted_route:i})})),t("/messages/conversation/new?visibility=shrinked",{replace:!0}))}}),[e.pathname,i,t,n]),(0,v.jsx)(dM,{children:(0,v.jsx)(a.Outlet,{})})}var pM=n(50084);var hM=n(67410),mM=n(46036),gM=n(40010),xM=n(21391),fM=n(86287),vM=n(27608),yM=n(69607),bM=n(62393),wM=n(43391),jM=n(22541);const kM=e=>{try{const t=jM.m.get();t["_internal.clock_drift"]=Date.now()-(performance.timeOrigin+performance.now()),t["_internal.span_sent_system_time"]=Date.now(),t["_internal.span_sent_monotonic_time"]=performance.now()+performance.timeOrigin,e.setAttributes(t)}catch{}},AM=e=>{},CM=()=>Promise.resolve(),SM=()=>Promise.resolve();let TM=null;class MessengerIdGenerator{constructor(){this.baseGenerator=new mM.RandomIdGenerator,this.generateTraceId=()=>"66696e00"+this.baseGenerator.generateTraceId().substring(8),this.generateSpanId=()=>this.baseGenerator.generateSpanId()}}var _M=n(23170),EM=n(65361);const IM=(0,k.Ay)("div",{target:"e51ru9d1"})({name:"d4uz5v",styles:"display:flex;align-items:center;justify-content:center;height:100vh;width:100vw;background-color:transparent"}),zM=(0,k.Ay)("div",{target:"e51ru9d0"})({name:"vmer6y",styles:"width:40px;height:40px;border:3px solid rgba(0, 0, 0, 0.1);border-top-color:#0074b0;border-radius:50%;animation:spin 0.8s linear infinite;@keyframes spin{to{transform:rotate(360deg);}}"}),NM=({children:e})=>(0,m.GV)((e=>e.app.isBooted))?(0,v.jsx)(v.Fragment,{children:e}):(0,v.jsx)(IM,{children:(0,v.jsx)(zM,{})}),MM="intercom-container",RM="intercom-css-container";s.RV.assign({requestAnimationFrame:window.parent.requestAnimationFrame,cancelAnimationFrame:window.parent.cancelAnimationFrame});const BM=({children:e})=>{const t=(0,m.jL)();return(0,b.useEffect)((()=>{const e=setTimeout((()=>{t((0,hM.KI)())}),0);return()=>clearTimeout(e)}),[t]),e},PM=(e,t)=>{!function(){const e=(0,yM.zj)().telemetry_base;if(!e)return;const t="messenger",n=jM.m.get().app_id,i=new gM.Resource({[vM.UX]:t,[vM.HZ]:"a02c59a4a2ca705eaa57f5ab4bb216b1dda5ea69",service_name:t,sluginator_run_id:"4686321"}),r=new URLSearchParams(Object.assign({},n&&{app_id:n})),o=new fM.OTLPTraceExporter({url:`${e}/ember/otlp?${r.toString()}`,headers:{"X-OTLP-SOURCE":"messenger"}});let a;a=new xM.SimpleSpanProcessor(o);const s=new mM.WebTracerProvider({resource:i,spanProcessors:[(null===TM&&(TM={onStart:kM,onEnd:AM,shutdown:CM,forceFlush:SM}),TM),a],idGenerator:new MessengerIdGenerator}),l=[/^http(s)?:\/\/.*intercom-messenger\.com\/messenger\/web\/messages$/,/^http(s)?:\/\/.*intercom\.(io|com)\/+messenger\/web\/messages$/,/^http(s)?:\/\/.*intercom\.test\/+messenger\/web\/messages$/,/^http(s)?:\/\/.*intercom-messenger\.com\/messenger\/web\/conversations\/[0-9]+\/reply$/,/^http(s)?:\/\/.*intercom\.(io|com)\/+messenger\/web\/conversations\/[0-9]+\/reply$/,/^http(s)?:\/\/.*intercom\.test\/+messenger\/web\/conversations\/[0-9]+\/reply$/,/^http(s)?:\/\/.*intercom-messenger\.com\/messenger\/web\/conversations\/[0-9]+\/quick_reply$/,/^http(s)?:\/\/.*intercom\.(io|com)\/+messenger\/web\/conversations\/[0-9]+\/quick_reply$/,/^http(s)?:\/\/.*intercom\.test\/+messenger\/web\/conversations\/[0-9]+\/quick_reply$/],c={allowUrls:l,propagateTraceHeaderCorsUrls:l,ignoreXhrEvents:!0,applyCustomAttributesOnSpan:(e,t)=>{const n={},i=t.getAllResponseHeaders();if(i.indexOf("x-request-id")>=0){const e=t.getResponseHeader("x-request-id");e&&(n.request_id=e)}if(i.indexOf("x-runtime")>=0){const e=t.getResponseHeader("x-runtime");e&&(n["http.response.headers.x-runtime"]=Math.round(1e3*Number(e)))}if(i.indexOf("x-request-queueing")>=0){const e=t.getResponseHeader("x-request-queueing");e&&(n["network.backend_queueing_ms"]=Number(e))}e.setAttributes(n)}};(0,bM.registerInstrumentations)({instrumentations:[new wM.D(c)]}),s.register()}();(0,EM.kr)()&&(0,_M.addTag)("messenger_type","embedded");const n=(0,u.RM)(e,MM,"intercom-namespace"),i=(0,u.Vz)(e,RM),s=(0,r.H)(n),m=(0,g.BU)(t.getState()),x=(0,a.createMemoryRouter)((e=>(0,a.createRoutesFromElements)((0,v.jsxs)(a.Route,{element:(0,v.jsx)(WN,{}),children:[(0,v.jsx)(a.Route,{index:!0,path:p.kG.path,element:(0,v.jsx)(j,{})}),(0,v.jsxs)(a.Route,{element:(0,v.jsx)(uM,{}),children:[(0,v.jsxs)(a.Route,{path:p.Zh.path,children:[(0,v.jsx)(a.Route,{index:!0,element:(0,v.jsx)(ir,{})}),(0,v.jsx)(a.Route,{path:"sheet",element:(0,v.jsx)(Zr,{})})]}),(0,v.jsxs)(a.Route,{path:p.Ij.path,children:[(0,v.jsx)(a.Route,{index:!0,element:(0,v.jsx)(Ik,{}),loader:Ek(e)}),(0,v.jsx)(a.Route,{path:"tickets/create/:ticketTypeId",element:(0,v.jsx)(dC,{})}),(0,v.jsx)(a.Route,{path:"tickets/:ticketId",element:(0,v.jsx)($C,{})}),(0,v.jsx)(a.Route,{path:"conversation/new",element:(0,v.jsx)(dk,{})}),(0,v.jsx)(a.Route,{path:"conversation/:conversationId",element:(0,v.jsx)(uk,{})}),(0,v.jsx)(a.Route,{path:"conversation/trigger-screen",element:(0,v.jsx)(fk,{})})]}),(0,v.jsxs)(a.Route,{path:p.ZL.path,children:[(0,v.jsx)(a.Route,{index:!0,element:(0,v.jsx)(y_,{})}),(0,v.jsx)(a.Route,{path:"collection/*",element:(0,v.jsx)(y_,{})}),(0,v.jsx)(a.Route,{path:"article/:articleId",element:(0,v.jsx)(k_,{})}),(0,v.jsx)(a.Route,{path:"article-standalone",element:(0,v.jsx)(k_,{})})]}),(0,v.jsxs)(a.Route,{path:p.ND.path,children:[(0,v.jsx)(a.Route,{index:!0,element:(0,v.jsx)(aE,{})}),(0,v.jsx)(a.Route,{path:"feed",element:(0,v.jsx)(aE,{})}),(0,v.jsx)(a.Route,{path:"details/:newsItemId",element:(0,v.jsx)(R_,{})})]}),(0,v.jsxs)(a.Route,{path:p.Ul.path,children:[(0,v.jsx)(a.Route,{index:!0,element:(0,v.jsx)(DE,{})}),(0,v.jsx)(a.Route,{path:h.TA.checklistDetails(":checklistProgressId"),element:(0,v.jsx)(GI,{})}),(0,v.jsx)(a.Route,{path:h.TA.checklistCompletionScreen(":checklistProgressId"),element:(0,v.jsx)(ZI,{})})]}),(0,v.jsxs)(a.Route,{path:p.rK.path,children:[(0,v.jsx)(a.Route,{index:!0,element:(0,v.jsx)(pE,{}),loader:uE(e)}),(0,v.jsx)(a.Route,{path:"details/:ticketId",element:(0,v.jsx)(mE,{}),loader:hE(e)})]}),(0,v.jsx)(a.Route,{path:"*",element:(0,v.jsx)(y,{})})]})]})))(t),{initialEntries:[m],future:{v7_startTransition:!0}});return function(e,t){const{historyAction:n,location:i}=e.state;t.dispatch((0,pM.Uc)({action:n,location:i})),e.subscribe((({historyAction:e,location:n})=>{t.dispatch((0,pM.Uc)({action:e,location:n}))})),t.dispatch((0,Tv.ch)({actionCreator:pM.zN,effect(t){const{state:n,to:i}=t.payload;"number"==typeof i?e.navigate(i):e.navigate(i,n)}}));const r=t.getState().router.navigationQueue;for(const t of r)"number"==typeof t.to?e.navigate(t.to):e.navigate(t.to,t.state);t.dispatch((0,pM.yr)())}(x,t),s.render((0,v.jsx)(d.A,{window:e,children:(0,v.jsx)(Ew.Provider,{value:e,children:(0,v.jsx)(o.Kq,{store:t,children:(0,v.jsx)(NM,{children:(0,v.jsx)(c.A,{children:(0,v.jsx)(l.A,{target:i,isSandbox:!1,children:(0,v.jsx)(BM,{children:(0,v.jsx)(a.RouterProvider,{router:x})})})})})})})})),()=>{s.unmount(),(0,u.bf)(n),(0,u.bf)(i)}}},80929:(e,t,n)=>{n.d(t,{L:()=>o});var i=n(97132),r=n(84079);const o=(0,i.Mz)((e=>e.banners),(e=>(0,r.h)(e,"id")))},71982:(e,t,n)=>{n.d(t,{l:()=>c});var i=n(97132),r=n(79148),o=n(1601),a=n(81323);const s=(0,i.Mz)(a.ji,(e=>{var t;return(null==(t=e.app.features)?void 0:t.conversationsAreExpandable)??!1}),((e,t)=>!!e&&(e.startsWith("/news/details")||e.startsWith("/messages/conversation")&&t))),l=(0,i.Mz)(a.ji,(e=>{var t;return(null==(t=e.customizationOverrides)?void 0:t.expandMessenger)??!1}),((e,t)=>!t&&(!!e&&e.startsWith("/messages/conversation")))),c=(0,i.Mz)((e=>e.chrome.shouldExpand),r.p8,s,o.IS,l,(e=>e.chrome.wasExplicitlyChanged),((e,t,n,i,r,o)=>!(i||!e)&&(!(r&&!o)&&(t||n))))},18873:(e,t,n)=>{n.d(t,{FK:()=>p,VV:()=>h,cE:()=>u,iZ:()=>d,xH:()=>c});var i=n(97132),r=n(98099),o=n(38611),a=n(84443),s=n(49651),l=n(97899);const c=e=>{if(!e||!e.parts)return;const t=e.parts[e.parts.length-1];return t&&t.replyOptions&&0!==t.replyOptions.length?t:void 0},d=e=>{const t=c(e);if(t)return t.replyOptions},u=(0,i.Mz)(r.Gm,(e=>{var t;return!(null==e||null==(t=e.composerState)||!t.selfServeSuggestionsEnabled)})),p=e=>(0,i.Mz)([e=>e.inboundSuggestions.isDismissed,a.$,e=>e.predictiveAnswers.composerSuggestions,e=>e.operator.composerHasContent,u,l.N7,e=>e.aiSuggestions.userSuggestions],((t,n,i,r,a,l,c)=>{var u;const p=!e.id&&!!l,h=!e.userParticipated,m=d(e),g=Object.assign({},o.n6,{suggestions:m||[]}),x=!!n&&!t&&p&&h&&!e.botIntroId,f=!!m,v=p&&h&&!x&&!f&&c.length>0,y=p&&h&&!x&&!f&&!v&&!!i,{composerSuggestions:b}=e,w=(null==b||null==(u=b.suggestions)?void 0:u.length)>0,j=null==b?void 0:b.isViewed,k=a&&r&&w,A=j&&!f&&a&&r&&!w;if(e.preventEndUserReplies)return o.n6;if(j&&A)return Object.assign({},o.n6,{prompt:[{type:"paragraph",text:(0,s.Tl)("empty_suggestion_prompt")}]});if(k)return Object.assign({},b,{prompt:[{type:"paragraph",text:(0,s.Tl)("suggested_content_prompt")}]});if(x)return Object.assign({},n,{isInboundBotSuggestions:!0});if(f)return Object.assign({},g,{isQuickReplies:!0});if(v)return Object.assign({},o.n6,{suggestions:c,isQuickReplies:!1});if(y){const e=[{type:"paragraph",text:(0,s.Tl)("suggested_content_prompt")}];return Object.assign({},i,{prompt:e,isPredictiveAnswers:!0})}return o.n6})),h=e=>(0,i.Mz)([l.Vy,t=>p(e)(t)],((e,t)=>e?null:t.suggestionParts?t.suggestionParts:null))},23170:(e,t,n)=>{n.r(t),n.d(t,{addBreadcrumb:()=>w,addExtra:()=>b,addTag:()=>y,createIntercomTransport:()=>f,logError:()=>j,logMessage:()=>k});var i,r=n(96540),o=n(93500),a=n(64251),s=n(41186),l=n(6810),c=n(95334),d=n(51543),u=n(69830);const p=n(76141),h=1,m=()=>new Promise(((e,t)=>{let n=window.parent.document.querySelector("#sentry-errors-frame");if(n)return setTimeout((()=>e(n)),1e3);n=document.createElement("iframe"),n.id="sentry-errors-frame",n.style.display="none",n.src=p.sentry_proxy_path,n.onload=()=>setTimeout((()=>e(n)),1e3),n.onerror=()=>{n.parentNode.removeChild(n),t(new Error("Failed to load Sentry proxy frame"))},window.parent.document.body.appendChild(n)})),g=e=>{if("string"!=typeof e)return!1;return e.split("\n").some((e=>"event"===JSON.parse(e).type))};function x(e,t){(0,u.sq)("captureSentryEventFailed",{message:e&&e.message}),t({status:"error"})}function f(e={}){return(0,c.o)(e,(function(t){return new Promise((n=>{try{if(!(0,d.US)())return n({status:"success"});if(!g(t.body))return n({status:"success"});const i={url:e.url,event:t.body,version:h};m().then((e=>{e.contentWindow.postMessage(i,e.src),n({status:"success"})})).catch((e=>x(e,n)))}catch(e){x(e,n)}}))}))}o.Ts({dsn:p.sentry_dsn,release:"a02c59a4a2ca705eaa57f5ab4bb216b1dda5ea69",environment:"production",transport:f,sampleRate:.2,allowUrls:[/https?:\/\/js\.intercomcdn\.com/,/https?:\/\/intercom-sheets\.com/],ignoreErrors:[/getByteTimeDomainData/,"Network request failed","Network request aborted","ucapi is not defined","TrackerStorageType is not defined",/is not a valid selector/,"NotAllowedError",/play.*not allowed/i,/ResizeObserver.*/,/(can't|cannot) redefine (non-configurable )?property|Attempting to change value of a readonly property/i],integrations:e=>e.filter((e=>"GlobalHandlers"!==e.name))}),a.SA((e=>{var t,n,i;let r="";null!=(t=e.exception)&&null!=(t=t.values)&&null!=(t=t[0])&&t.value?r=e.exception.values[0].value:"window.onerror caught null or undefined error"===e.message&&null!=(n=e.extra)&&n.errorMessage?r=e.extra.errorMessage:e.message?r=e.message:null!=(i=e.extra)&&i.errorMessage&&(r=e.extra.errorMessage);return(()=>{var t;if(e.message&&-1!==e.message.indexOf("Conversation missing reply"))return!0;if(-1!==r.indexOf("Object Not Found Matching Id"))return!1;if(/ResizeObserver.*/.test(r))return!1;return(null==(t=e.tags)?void 0:t["i18n.error_type"])||-1!==r.indexOf("Unknown locale")||-1!==r.indexOf("Unknown key")||-1!==r.indexOf("Failed to load locale")||-1!==r.indexOf("Interpolation failed")?Math.random()<=.01:Math.random()<=.2})()?e:null}));const v=s.o5();v.setTag("react.version",r.version),null!=(i=window)&&null!=(i=i.parent)&&null!=(i=i.location)&&i.href&&v.setTag("location.href",window.parent.location.href);const y=(e,t)=>{v.setTag(e,t)},b=(e,t)=>{v.setExtra(e,t)},w=e=>{l.Z(e)},j=e=>{try{a.Cp(e)}catch(e){(0,u.sq)("captureSentryExceptionFailed",{message:e&&e.message})}},k=e=>{try{a.wd(e)}catch(e){(0,u.sq)("captureSentryMessageFailed",{message:e&&e.message})}}},52271:(e,t,n)=>{n.d(t,{$C:()=>h,OO:()=>c,cC:()=>g,cT:()=>x,lT:()=>u});var i=n(86923),r=(n(72977),n(18603));const o="normal",a={name:"3irtv8",styles:"position:relative;float:left;display:inline-block;cursor:pointer;opacity:0.8;transition:opacity 200ms ease;height:51px;margin-top:2px;&:hover{opacity:1;}&:before{position:absolute;top:20px;background-position:center;}svg{position:absolute;top:18px;}padding:0 6px"};var s={name:"1fol78c",styles:"textarea{font-size:16px;}"},l={name:"1h3f2ms",styles:"textarea:focus{box-shadow:none;}"};(0,i.w4)("lightBorder"),(0,i.w4)("fontSansSerif"),(0,i.w4)("inputAlt"),(0,i.w4)("textDefault"),(0,i.w4)("inputAlt"),(0,i.w4)("textMuted"),(0,i.w4)("fontSansSerif"),(0,i.w4)("inputAlt"),(0,i.w4)("alphaBlack10"),(0,i.w4)("borderNeutral");const c=(0,i.Ay)("div",{target:"e50zdj18"})("position:absolute;top:0;right:",21,"px;"),d=({theme:e,showEmojiPicker:t,isPrimaryColorReadable:n})=>(0,i.AH)(a," color:",e.iconMuted,";",t&&(0,i.AH)("svg circle{fill:",n?e.appColor:e.iconMuted,";stroke:",n?e.appColor:e.iconMuted,";}color:",n?e.textWhite:e.textBlack,";"),";"),u=(0,i.Ay)("span",{target:"e50zdj16"})(d,";"),p=({theme:e,showGifPicker:t,isPrimaryColorReadable:n})=>(0,i.AH)(a," ",t&&(0,i.AH)("svg path{fill:",n?e.appColor:e.iconMuted,";}"),";"),h=(0,i.Ay)("span",{target:"e50zdj14"})(p,";"),m=()=>a,g=(0,i.Ay)("span",{target:"e50zdj12"})(m,";"),x=(0,i.Ay)("span",{target:"e50zdj10"})({name:"1r5gb7q",styles:"display:inline-block"})},23043:(e,t,n)=>{n.d(t,{wT:()=>A,mc:()=>g,aV:()=>y,Vj:()=>S,Mv:()=>T,O6:()=>_,o8:()=>L,$e:()=>D,R4:()=>O,Or:()=>P,_r:()=>B,HF:()=>R,CJ:()=>v,UC:()=>k,hE:()=>x,rZ:()=>C,_e:()=>f});var i=n(86923),r=n(96540),o=n(52555),a=n(83034),s=n(49651),l=n(74848);const c=(0,i.Ay)(o.CS.button,{target:"e999oh50"})("color:",(0,i.w4)("textDefault"),";"),d=(0,r.forwardRef)((({value:e="",label:t="",className:n="",focused:i,style:o,ariaLabel:d,onClick:u},p)=>{const h=(0,r.useRef)(null);(0,r.useEffect)((()=>{i&&h.current&&h.current.focus()}),[i]);const m=d||(t?void 0:(0,s.Tl)("clickable_button"));return(0,l.jsx)(c,{"aria-label":m,onClick:()=>{u&&u(e)},value:"string"==typeof e||"number"==typeof e?e:null==e?"":String(e),style:o,className:n,ref:(0,a.A)(h,p),children:t})}));d.displayName="Button";const u=d;var p=n(78253);var h={name:"v5fxai",styles:"border-radius:12px;background:rgba(255, 255, 255, 0.04);backdrop-filter:blur(100px);margin:14px 20px;padding:12px 12px 2px"},m={name:"1886e0j",styles:"padding-top:13px;padding-bottom:6px"};const g=(0,i.Ay)("div",{target:"eqq3twc10"})("position:relative;background:",(0,i.w4)("baseAlpha"),";padding:0 26px;margin-bottom:-3px;z-index:1;",(({suggestionsVisible:e})=>e&&m)," ",(({suggestionsVisible:e,isTypeaheadSuggestions:t,theme:n})=>e&&t&&(0,i.AH)("z-index:2;margin-top:3px;box-shadow:inset 0px 9px 8px -10px rgba(38, 76, 152, 0.2),inset 0px -9px 8px -10px rgba(38, 76, 152, 0.2);background:",n.containerBaseNeutral,";"))," ",(({useGroupedUI:e})=>e&&h),";"),x=(0,i.Ay)("h3",{target:"eqq3twc9"})("display:block;color:",(0,i.w4)("textMuted"),";font-size:14px;padding:8px 5px;/* @noflip */text-align:right;"),f=(0,i.Ay)("h3",{target:"eqq3twc8"})("display:block;color:",(0,i.w4)("textDefault"),";font-size:14px;margin-bottom:12px;line-height:20px;",(({foregroundColor:e})=>(0,i.AH)("color:",e,";")),";"),v=(0,i.Ay)("div",{target:"eqq3twc7"})({name:"wy41lc",styles:"border-top:none;position:relative"}),y=600;var b={name:"1h8nup8",styles:"overflow:visible"},w={name:"1wx2bp",styles:"transition:none"},j={name:"44j6sp",styles:"margin-top:12px;margin-bottom:-6px"};const k=(0,i.Ay)("div",{target:"eqq3twc6"})("position:relative;transition:height ",y,"ms;overflow:hidden;height:",(0,i.xk)("height"),"px;max-width:",(0,i.w4)("messengerWidthPx"),"px;",(({isInline:e})=>e&&j)," ",(({height:e,isInline:t})=>e>0&&!t&&(0,i.AH)("min-height:",Math.max(e,52),"px;"))," ",(({isInboundBot:e})=>e&&w)," ",(({isExpanded:e,theme:t})=>e&&(0,i.AH)("max-width:",t.messengerExpandedWidthPx,"px;"))," ",(({useNewConversationalUI:e,isInline:t})=>(e||t)&&b),";"),A=10,C=10,S=12,T=10,_=14;var E={name:"86snxc",styles:"/* @noflip */left:0"},I={name:"18lthe7",styles:"/* @noflip */right:0"},z={name:"18lthe7",styles:"/* @noflip */right:0"},N={name:"1r5gb7q",styles:"display:inline-block"},M={name:"4zleql",styles:"display:block"};const R=(0,i.Ay)(u,{target:"eqq3twc5"})("position:absolute;top:0;font-size:14px;line-height:18px;padding:",10,"px ",T,"px;border-radius:6px;background-color:",(0,i.w4)("quickReplyBackgroundColor"),";color:",(0,i.w4)("quickReplyTextColor"),";transition:background-color 250ms ease-in-out;",(({isTypeaheadSuggestion:e})=>e?M:N)," &:hover{background-color:",(0,i.w4)("appColor"),";color:",(0,i.w4)("textWhite"),";}",(({theme:e})=>"light"===e.primaryType&&(0,i.AH)("&:hover{color:",e.textBlack,";}"))," ",(({theme:e,useNewConversationalUI:t,isInline:n})=>t||n?(0,i.AH)("border-radius:40px;background-color:",e.containerAlt,";border:1px solid ",e.borderNeutral,";box-shadow:",e.shadowMedium,";padding:",n?7:10,"px ",_,"px;"):z)," ",(({buttonAlignment:e})=>"right"===e&&I)," ",(({buttonAlignment:e})=>"left"===e&&E),";"),B=(0,i.Ay)("div",{target:"eqq3twc4"})({name:"18l8tfr",styles:"position:absolute;visibility:hidden;pointer-events:none;opacity:0;left:0;right:0;height:0"}),P=(0,i.Ay)("div",{target:"eqq3twc3"})({name:"1r5gb7q",styles:"display:inline-block"}),L=(0,i.Ay)("div",{target:"eqq3twc2"})({name:"1bxbmsj",styles:"padding:3px 0 16px;/* @noflip */text-align:right"}),O=(0,i.Ay)("div",{target:"eqq3twc1"})("display:inline-block;font-size:14px;color:",(0,i.w4)("textMuted"),";cursor:pointer;line-height:20px;"),D=(0,i.Ay)(p.A,{target:"eqq3twc0"})("height:10px;width:10px;margin-left:5px;text-align:right;vertical-align:middle;cursor:pointer;path{fill:",(0,i.w4)("textMuted"),";}")},51457:(e,t,n)=>{n.d(t,{AJ:()=>p,E9:()=>x,M3:()=>w,Wr:()=>h,gE:()=>m,kG:()=>f,ou:()=>b});var i=n(86923),r=n(97495),o=n(72977);const a=`${(0,i.w4)("alphaBlack10")}`,s=({theme:e})=>(0,i.AH)("box-shadow:-1px 1px 0px ",e.borderEmphasisNeutral,";margin-left:25px;"),l=i.i7`
  0% {
    opacity: 0;
    transform: translateY(20px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
    position: initial;
  }
`,c=i.i7`
  0% {
    opacity: 0;
    transform: translateY(-20px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
`,d=i.i7`
  0% {
    opacity: 0;
    transform: translateX(-20px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
`,u=i.i7`
  0% {
    opacity: 0;
    transform: translateX(20px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
`,p=(0,i.Ay)(r.Ay,{target:"e1abe4l86"})({name:"fpmrzc",styles:"height:38px;width:38px;pointer-events:none"}),h=(0,i.Ay)("div",{target:"e1abe4l85"})({name:"c8ift8",styles:"position:absolute;pointer-events:none;[x-placement^='top'] &{bottom:-9px;transform:translateY(20px);}[x-placement^='right'] &{transform:translateX(-20px);}[x-placement^='bottom'] &{transform:translateY(-20px);}[x-placement^='left'] &{right:-9px;transform:translateX(20px);}"}),m=(0,i.Ay)("div",{target:"e1abe4l84"})("position:absolute;width:max-content;left:0;top:0;transition:opacity 0.6s ease;z-index:",(0,o.fE)(1),";visibility:visible!important;"),g=800,x=(0,i.Ay)("div",{target:"e1abe4l83"})("animation:",l," ",g,"ms ease;[x-placement^='top'] &{animation:",c," ",g,"ms ease;}[x-placement^='right'] &{animation:",u," ",g,"ms ease;}[x-placement^='bottom'] &{animation:",l," ",g,"ms ease;}[x-placement^='left'] &{animation:",d," ",g,"ms ease;}"),f=(0,i.Ay)("div",{target:"e1abe4l82"})("width:13px;height:25px;position:relative;overflow:hidden;&:after{content:'';position:absolute;width:20px;height:20px;background-color:",(({backgroundColorOverride:e})=>e??(0,i.w4)("containerBaseNeutral")),";transform:rotate(45deg);top:2px;}&[x-placement^='top']{height:13px;width:25px;&:after{top:-12px;left:2px;box-shadow:1px 1px 1px 0 ",a,";}}&[x-placement^='right']{height:25px;width:13px;&:after{right:-12.5px;box-shadow:1px -1px 1px 2px ",a,";}}&[x-placement^='bottom']{height:13px;width:25px;&:after{top:4.5px;left:2px;box-shadow:-1px -1px 1px 0 ",a,";}}&[x-placement^='left']{height:25px;width:13px;&:after{left:-12.5px;box-shadow:-1px 1px 1px 2px ",a,";}}",(({isInsideInbox:e})=>e&&s),";"),v={name:"1nk1x65",styles:"transform:scale(1)"},y=(e,t)=>i.i7`
    0% { ${v} }
    85% { ${((e,t)=>(0,i.AH)("transform:scaleX(calc(1 + (4 / ",e,"))) scaleY(calc(1 + (4 / ",t,")));"))(e,t)} }
    100% { ${v} }
  `,b=(0,i.Ay)("div",{target:"e1abe4l81"})("z-index:",(0,o.fE)(),";content:'';display:none;position:absolute;left:0;top:0;width:0;height:0;pointer-events:none;border-radius:1px;box-sizing:border-box;",(({isAnimating:e,width:t,height:n})=>e&&(0,i.AH)("animation:",y(t,n)," 2s infinite;"))," ",(({isPost:e,theme:t})=>e&&(0,i.AH)("display:block;position:fixed;top:50%;left:50%;box-shadow:0px 0px 0px 4000px ",t.alphaBlack30,";"))," ",(({isStep:e,theme:t,buttonColor:n})=>e&&(0,i.AH)("display:block;margin:3px;box-shadow:0 0 0 3px ",n||t.appColor,",0px 0px 0px 4000px ",t.alphaBlack30,";")),";"),w=(0,i.Ay)("div",{target:"e1abe4l80"})((({scrollable:e,theme:t})=>e&&(0,i.AH)("position:fixed;height:100%;width:100%;top:0;left:0;opacity:0;box-sizing:border-box;z-index:",(0,o.fE)(0,t),";")),";")},46531:(e,t,n)=>{n.d(t,{p:()=>r});var i=n(86923);const r=(0,i.Ay)("div",{target:"e1bo99k0"})("position:absolute;width:100%;height:10px;pointer-events:none;z-index:100;",(({isFinMessenger:e,theme:t})=>e?(0,i.AH)("border-top:1px dashed ",t.borderNeutral,";margin-left:16px;width:calc(100% - 32px);animation:scrollingBorderFadeIn 150ms ease-out 300ms backwards;@keyframes scrollingBorderFadeIn{from{opacity:0;}to{opacity:1;}}"):(0,i.AH)("border-top:1px solid ",t.borderNeutral,";")),";")}}]);