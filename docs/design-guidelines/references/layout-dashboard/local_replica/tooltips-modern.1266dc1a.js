"use strict";(globalThis.webpackChunkintercom_js=globalThis.webpackChunkintercom_js||[]).push([[8635],{82129:(e,t,o)=>{o.r(t),o.d(t,{default:()=>K,styleNodeId:()=>D,tooltipNodeId:()=>q});var n=o(5338),i=o(71468),r=o(52555),s=o(10389),l=o(25777),c=o(76662),a=o(96540),u=o(27155),d=o(79986),p=o(86703),h=o(23396),f=o(40961),m=o(29131),v=o(63624),g=o(74848);var w=o(97160),x=o.n(w),C=o(49651),T=o(80628),b=o(86923);const k={tooltip:function(e){return(0,g.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",children:[(0,g.jsx)("circle",{cx:"8",cy:"8",r:"6",fill:e.textColor}),(0,g.jsx)("path",{fill:e.backgroundColor,d:"M1.321 7.982c0-3.661 2.982-6.661 6.679-6.661 1.839 0 3.411.643 4.732 1.946 1.304 1.321 1.946 2.893 1.946 4.714 0 3.696-2.982 6.696-6.679 6.696-1.857 0-3.429-.661-4.714-1.982-1.304-1.286-1.964-2.857-1.964-4.714zm4.947-1.946l.179-.125c.018 0 .054-.036.143-.089.071-.054.125-.071.161-.089.214-.125.446-.196.714-.25.161-.018.268-.036.321-.036.589 0 .768.214.768.643 0 .304-.143.554-.429.786l-.446.411a3.07 3.07 0 0 0-.464.536c-.214.286-.393.804-.393 1.393v.179c0 .089 0 .143.018.179l.018.179h1.536v-.179c0-.429.161-.821.482-1.161l.232-.196a1.67 1.67 0 0 1 .232-.196 2.38 2.38 0 0 0 .5-.464c.304-.375.554-.893.554-1.661 0-1.232-.911-2.018-2.357-2.018-.875 0-1.661.232-2.357.696l-.125.089zm.661 5.946c.196.196.429.286.732.286.661 0 1.089-.393 1.089-1.036 0-.625-.393-1-1.089-1-.625 0-1.036.375-1.036 1 0 .304.107.554.304.75z"})]})},info:function(e){return(0,g.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",children:[(0,g.jsx)("circle",{cx:"8",cy:"8",r:"6",fill:e.textColor}),(0,g.jsx)("path",{fill:e.backgroundColor,d:"M8 1a7.11 7.11 0 0 0-4.964 2.036C1.768 4.34 1 6.09 1 8c0 1.929.768 3.679 2.036 4.964A7.037 7.037 0 0 0 8 15a7.097 7.097 0 0 0 4.964-2.036A7.114 7.114 0 0 0 15 8c0-1.911-.786-3.661-2.036-4.964C11.66 1.786 9.91 1 8 1zm.732 4.143h-.036c-.518 0-.857-.411-.875-.982 0-.25.107-.536.321-.768A1.1 1.1 0 0 1 9.017 3c.268 0 .5.089.661.286.161.179.214.411.214.643 0 .304-.107.607-.321.821-.214.232-.5.393-.839.393zm1.214 6.018l-.054.054a8.39 8.39 0 0 1-1.589 1.304c-.5.304-.946.482-1.179.482-.161 0-.339-.036-.464-.179s-.179-.339-.179-.625c0-.214.018-.696.125-1.054l.732-3.179a1.56 1.56 0 0 0 .054-.357.522.522 0 0 1-.161.089c-.161.107-.357.25-.554.393l-.25.196-.107.071-.268-.768.054-.054c.518-.5 1.089-.911 1.589-1.232.518-.304.982-.5 1.268-.5.161-.018.268.089.375.196.054.125.107.286.107.518s-.054.696-.107 1.018l-.821 3.268c-.036.143-.054.25-.054.357 0 .036 0 .054.018.071.018 0 .071-.018.143-.071.161-.107.357-.232.589-.411.107-.089.196-.179.304-.25l.089-.089.286.679z"})]})},upgrade:function(e){return(0,g.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:[(0,g.jsx)("circle",{cx:"8",cy:"8",r:"6",fill:e.textColor}),(0,g.jsx)("path",{fill:e.backgroundColor,fillRule:"evenodd",clipRule:"evenodd",d:"M8 15A7 7 0 108 1a7 7 0 000 14zm2.343-6.916a.8.8 0 00.723-1.35l-2.5-2.5a.8.8 0 00-1.132 0l-2.5 2.5a.8.8 0 00.723 1.35L7.1 7.796V11.1a.9.9 0 101.8 0V7.796l1.443.288z"})]})},circle:function(e){return(0,g.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",children:[(0,g.jsx)("circle",{cx:"8",cy:"8",r:"3",fill:e.backgroundColor}),(0,g.jsx)("circle",{cx:"8",cy:"8",r:"6",stroke:e.backgroundColor,fill:"transparent",strokeWidth:"2"})]})},"alert-circle":function(e){return(0,g.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-test-alert-circle-icon":!0,children:[(0,g.jsx)("circle",{cx:"8",cy:"8",r:"6",fill:e.textColor}),(0,g.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 15C11.866 15 15 11.866 15 8C15 4.13401 11.866 1 8 1C4.13401 1 1 4.13401 1 8C1 11.866 4.13401 15 8 15ZM8 8.91667C7.6438 8.91667 7.34419 8.64964 7.30336 8.29579L6.87861 4.61462C6.8101 4.02086 7.27432 3.5 7.87202 3.5H8.12798C8.72568 3.5 9.1899 4.02086 9.12139 4.61462L8.69664 8.29579C8.65581 8.64964 8.3562 8.91667 8 8.91667ZM8 12.5C7.28625 12.5 6.75 11.9637 6.75 11.25C6.75 10.5363 7.28625 10 8 10C8.71375 10 9.25 10.5363 9.25 11.25C9.25 11.9637 8.71375 12.5 8 12.5Z",fill:e.backgroundColor})]})}},E=(0,a.forwardRef)(((e,t)=>{const{tooltip:o,onAnchorClick:n,setIsMouseInAnchor:i,positioner:r}=e,[s,l]=(0,a.useState)(),[c,u]=(0,a.useState)({x:-1,y:-1,elementFound:!1}),d=r.getElement(),p=o.triggerType===v.P8.Click,h=(0,a.useCallback)((e=>{p&&e.stopPropagation(),n()}),[n,p]),w=(0,a.useCallback)((()=>i(!0)),[i]),E=(0,a.useCallback)((()=>i(!1)),[i]);if((0,a.useEffect)((()=>{var e;o.anchorType!==v.IJ.UseElement&&(r.insertAnchorPoint(),null==(e=r.anchorElement)||e.classList.add("intercom-namespace"),l(r.anchorElement));return()=>{var e;null==(e=r.anchorElement)||null==(e=e.parentElement)||e.removeChild(r.anchorElement)}}),[r,d,o.anchorType]),(0,a.useEffect)((()=>{const e=e=>h(e);return o.anchorType===v.IJ.UseElement&&(null==d||d.addEventListener("mouseenter",w),null==d||d.addEventListener("mouseleave",E),null==d||d.addEventListener("click",e),t&&"function"==typeof t&&t(d)),()=>{null==d||d.removeEventListener("mouseenter",w),null==d||d.removeEventListener("mouseleave",E),null==d||d.removeEventListener("click",e)}}),[d,o.anchorType,w,E,t,h]),(0,a.useEffect)((()=>{u(r.calculatePosition(r.anchorElement))}),[r,r.anchorElement]),!d||o.anchorType===v.IJ.UseElement)return null;let L=m.gf,y=null;o.anchorType===v.IJ.Hotspot?(L=m.is,y=k[o.anchorIcon]):o.anchorIconType===v.F0.Icon&&(L=m.Zr,y=k[o.anchorIcon]);const O=x()({primaryColor:o.anchorColor||(0,b.w4)("iconWhite")}),j=o.anchorFontColor?o.anchorFontColor:O.primary_on_white_contrast>1.6?T.m.textWhite:T.m.textBlack;return s?(0,f.createPortal)((0,g.jsxs)(L,{ref:t,id:`tooltip-anchor-${o.id}`,onClick:h,top:c.y,left:c.x,icon:o.anchorIcon,isViewed:o.isViewed,isTriggeredOnClick:p,textColor:j,backgroundColor:o.anchorColor,onMouseEnter:w,onMouseLeave:E,"aria-describedby":`intercom-tooltip-${o.id}`,"aria-label":(0,C.Tl)("tooltip_anchor"),children:[o.anchorIconType===v.F0.Text?o.anchorText:null,y?(0,g.jsx)(y,{textColor:j,backgroundColor:o.anchorColor}):null]}),s):null})),L=E;var y=o(11432);let O=function(e){return e[e.alwaysShow=0]="alwaysShow",e[e.hideOnOpen=1]="hideOnOpen",e}({}),j=function(e){return e[e.AUTO=0]="AUTO",e[e.TOP=1]="TOP",e[e.BOTTOM=2]="BOTTOM",e[e.LEFT=3]="LEFT",e[e.RIGHT=4]="RIGHT",e}({}),I=function(e){return e[e.Right=0]="Right",e[e.Left=2]="Left",e}({});const A={0:"auto",1:"top",2:"bottom",3:"left",4:"right"};var M=o(77520),R=o(27606);const S=(0,a.forwardRef)(((e,t)=>{const{id:o,blocks:n,styles:i,attributes:r,arrowRef:s,setMouseIsInPointer:l,anchorIsHotspot:c,displayBehavior:u,isVideoTooltip:d,customizationOptions:p}=e;return(0,a.useEffect)((()=>{if(!c&&u!==O.hideOnOpen)return;const e=M.L.get(R.on),t=e?JSON.parse(e):[];-1===t.indexOf(o)&&(t.push(o),M.L.set(R.on,JSON.stringify(t)))}),[o,u,c]),(0,g.jsxs)(m.xt,Object.assign({role:"tooltip",ref:t,style:i.popper,backgroundColor:p.backgroundColor},r.popper,{onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),id:`intercom-tooltip-${o}`,onClick:e=>(e=>{const t=e.target;("A"===t.tagName?t:t.closest("a"))||e.stopPropagation()})(e),children:[(0,g.jsx)(m.ZI,{isVideoTooltip:d,fontColor:p.fontColor,children:(0,g.jsx)(y.A,{blocks:n})}),(0,g.jsx)(m.PR,Object.assign({backgroundColor:p.backgroundColor,ref:s,style:i.arrow},r.popper))]}))}));var V=o(83484),P=o(97132);const z=e=>e.intersection,F=(0,P.Mz)(z,(e=>e.isBooted)),U=(0,P.Mz)(z,(e=>e.isTooltipPreview));function B({appWindow:e,tooltip:t,onAnchorClick:o}){const n=(0,d.jL)(),[i,r]=(0,a.useState)(null),[s,l]=(0,a.useState)(null),[c,u]=(0,a.useState)(null),[,f]=(0,a.useState)([0,0]),[m,w]=(0,a.useState)(!1),[x,C]=(0,a.useState)(!1),T=(0,a.useRef)(null),[b]=(0,a.useState)(new v.Pf(e,t)),k=!!t.blocks.find((e=>-1!==["video","videoFile"].indexOf(e.type))),E=t.anchorType===v.IJ.Hotspot,y=(0,d.GV)(U),{styles:O,attributes:M,update:R}=(0,V.Eq)(i,s,{placement:A[(e=>{const t=null==e?void 0:e.pointerPosition,o=null==e?void 0:e.horizontalAlignment;return t===j.AUTO?o===I.Left?j.LEFT:j.RIGHT:t||j.AUTO})(t)],modifiers:[{name:"arrow",options:{element:c,padding:5}},(0,a.useMemo)((()=>({name:"offset",options:{offset:()=>[0,10]}})),[])]});(0,a.useLayoutEffect)((()=>{R&&R()}),[R,s,c]),(0,a.useLayoutEffect)((()=>{b.calculatePosition(b.anchorElement,i||void 0)})),(0,a.useEffect)((()=>{const t=()=>f([e.innerWidth,e.innerHeight]);return e.addEventListener("resize",t),()=>e.removeEventListener("resize",t)}),[e]);const P=(0,a.useCallback)((()=>{t.isViewed||y||n((0,p.VL)(t.id,t.tooltipGroupId))}),[n,y,t.id,t.tooltipGroupId,t.isViewed]),z=(0,a.useCallback)((()=>{o(t.id),P()}),[o,P,t.id]),F=(0,d.GV)(h.Ij);return(0,a.useEffect)((()=>{const e=()=>{T.current&&(clearTimeout(T.current),T.current=null)};return e(),t.triggerType===v.P8.Hover&&(!m&&!x||t.isOpen||F?m||x||!t.isOpen||k||(T.current=setTimeout((()=>{z()}),250)):z()),e}),[m,x,F,t.triggerType,t.isOpen,z,k]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(L,{ref:r,tooltip:t,onAnchorClick:z,setIsMouseInAnchor:w,positioner:b}),t.isOpen&&i&&(0,g.jsx)(S,{ref:l,arrowRef:u,blocks:t.blocks,attributes:M,styles:O,setMouseIsInPointer:C,id:t.id,anchorIsHotspot:E,displayBehavior:t.displayBehavior,isVideoTooltip:t.style===v.Dd.Video,customizationOptions:t.customizationOptions})]})}var G=o(22548);const H={attributes:!1,childList:!0,subtree:!0};var W=o(28065);function _({tooltips:e,appWindow:t,onAnchorClick:o}){const n=(0,d.GV)(h.Ij),[i,r]=(0,a.useState)([]);(0,a.useEffect)((()=>{const e=M.L.get(R.on),t=e?JSON.parse(e):[];t&&r(t)}),[r]),(0,a.useEffect)((()=>{M.L.set("lastTooltipsReceivedAt",(new Date).getTime())}),[]),(0,a.useEffect)((()=>{const e=()=>{n&&o("")};return t.addEventListener("click",e),()=>t.removeEventListener("click",e)}),[t,o,n]);const[,s]=(0,a.useState)(null),l=(0,a.useMemo)((()=>(0,G.s)((e=>s(e)),1e3)),[s]);!function(e,t,o=H,n=100){const[i,r]=(0,a.useState)(null);(0,a.useEffect)((()=>{r(new MutationObserver((0,G.s)(t,n)))}),[r,t,n]),(0,a.useEffect)((()=>(null==i||i.observe(e,o),()=>null==i?void 0:i.disconnect())),[i,e,o])}(t.document,l);const c=[],u=[];return e.forEach((e=>{const o=new v.Pf(t,e);if(e.displayBehavior===O.hideOnOpen&&-1!==i.indexOf(e.id))return void(0,W.v)(`Hiding tooltip id ${e.id} because display behavior is hide on view and this tooltip has been viewed`);const n=o.getElement();n&&-1===c.indexOf(n)&&(c.push(n),u.push(e))})),(0,W.v)(`We are rendering ${u.length} tooltips`,u),(0,g.jsx)(g.Fragment,{children:u.map((e=>(0,g.jsx)(B,{appWindow:t,onAnchorClick:o,tooltip:e},`tooltip-${e.id}`)))})}var N=o(40741);function J(e,t,o){return e.filter((e=>!t.some((t=>o(e,t)))))}class TooltipUrlMatchRunner{constructor(e){this.runLoop=void 0,this.matchableTooltips=[],this.matches=[],this.matchingCallback=void 0,this.matchingCallback=e}start(){this.runLoop||(this.runLoop=setInterval((()=>this.performTooltipURLMatching()),500))}stop(){this.runLoop&&(window.clearInterval(this.runLoop),this.runLoop=void 0)}updateTooltips(e){this._addNewTooltips(e),this._removeOldTooltips(e),this.performTooltipURLMatching()}_addNewTooltips(e){e.forEach((e=>{this.matchableTooltips.find((t=>t.tooltip.id===e.id))||this.matchableTooltips.push({tooltip:e,predicateChain:new N.A(e.urlPredicates,(()=>{}))})}))}_removeOldTooltips(e){this.matchableTooltips.forEach((t=>{e.find((e=>e.id===t.tooltip.id))||this.matchableTooltips.splice(this.matchableTooltips.indexOf(t),1)}))}performTooltipURLMatching(){const e=this.matchableTooltips.filter((e=>e.predicateChain.evaluate())),t=J(e,this.matches,((e,t)=>e.tooltip.id===t.tooltip.id)),o=J(this.matches,e,((e,t)=>e.tooltip.id===t.tooltip.id));(0,u.I)(t)&&(0,u.I)(o)||(this.matches=e,this.matchingCallback({matched:t.map((e=>e.tooltip.id))||[],unmatched:o.map((e=>e.tooltip.id))||[]}))}}function $(e){const t=(0,d.jL)(),o=(0,d.GV)(h.NO),n=(0,d.GV)(h.Ov),i=(0,d.GV)(F),r=(0,d.GV)(U),s=!i||r,[l]=(0,a.useState)(new TooltipUrlMatchRunner((e=>t((0,p.sc)(e)))));(0,a.useEffect)((()=>{if((0,u.I)(o)||!s){const e=(0,u.I)(o)?"We have no tooltips with URL predicates":"Intersection is booted";(0,W.v)(`Stopping URL matching for tooltips. ${e}.`),l.stop()}else o.length>0&&(0,W.v)(`Received ${o.length} tooltips with URL predicates, attempting to match`,o),l.updateTooltips(o),l.start();return()=>{l.stop()}}),[l,o,s]);const c=(0,a.useCallback)((e=>{t((0,p.ie)(e))}),[t]);return(0,W.v)("We have matched the following tooltips",n),s&&(0,g.jsx)(_,Object.assign({onAnchorClick:c,tooltips:n},e))}var Z=o(8375);const q="intercom-tooltips-container",D="intercom-css-container";r.RV.assign({requestAnimationFrame:window.parent.requestAnimationFrame,cancelAnimationFrame:window.parent.cancelAnimationFrame});const K=(e,t)=>{const o=(0,Z.RM)(e,q,"intercom-namespace"),r=(0,Z.Vz)(e,D),a=(0,n.H)(o);return a.render((0,g.jsx)(c.A,{window:e,children:(0,g.jsx)(i.Kq,{store:t,children:(0,g.jsx)(l.A,{children:(0,g.jsx)(s.A,{target:r,isSandbox:!1,children:(0,g.jsx)($,{appWindow:e})})})})})),()=>{a.unmount(),(0,Z.bf)(o),(0,Z.bf)(r)}}}}]);