import{j as s,a8 as V,a9 as L,s as Q,P as c,r as N,o as $,v as p,a3 as v,a4 as k,F as h,a5 as l,E as I,V as S,k as y}from"./TownhouseColor--VjQBVqd.js";import{t as D,d0 as G,aP as H,b3 as Y,c as J,dz as K,dA as W,dB as X,dC as Z,o as P,l as ss,b7 as es,n as as,p as ts}from"./main-dumNSXg9.js";import{C as os}from"./DownloadMobileAppModal-BF62Ge52.js";import{_ as ns}from"./updateRenterProfile-D1CFbOA8.js";import{_ as rs}from"./updateUserEmail-C-T-fg6H.js";import{i as is}from"./isMainUser-BvUNagru.js";import{_ as cs}from"./updatePassword-CRw_-zJf.js";const ls="buqRH",ds="kSDa9",ms="-te6K",us="zmCnV",ps="C--Vh",hs="iapsQ",i={container:ls,item:ds,graphic:ms,footer:us,title:ps,description:hs},xs=({items:t})=>{const o=a=>{Q("arrow clicked",{location:`Azibo Welcome Carousel ${a+1}`})};return s.jsx(os,{smallArrows:!0,arrowsNextToDots:!0,containerClassName:i.container,infinite:!1,autoRotate:!1,fullHeight:!0,onNext:o,children:t.map(a=>s.jsxs("div",{className:i.item,children:[s.jsx("img",{className:i.graphic,src:a.graphic,alt:a.title}),s.jsx(V,{className:i.title,children:a.title}),s.jsx(L,{className:i.description,children:a.description}),a.footer&&s.jsx("div",{className:i.footer,children:a.footer})]},a.id))})};xs.propTypes={items:c.array.isRequired};const As="/assets/azibo-1-DwmYPAq8.svg",Bs="/assets/azibo-2-DX7YuBSi.svg",bs="cyfvF",gs="MmXTn",ws="tmQM1",js="SC7hb",Cs="L7-Pt",fs="d8zT-",Ns="zrgkV",Ss="SQO5k",ys="iGVc0",vs="NgCGv",ks="Qj8zJ",Ps="M2iJ2",Es="B1uGO",e={modal:bs,content:gs,icon:ws,title:js,text:Cs,textBold:fs,textCenter:Ns,emailCheckbox:Ss,emailCheckboxLabel:ys,password:vs,passwordStrength:ks,buttons:Ps,submit:Es},E=({email:t,onSubmit:o})=>s.jsxs("div",{className:e.content,children:[s.jsx("div",{className:e.icon,children:s.jsx(v,{name:"warning",size:"xl",color:"prominent"})}),s.jsxs("div",{children:[s.jsx("h1",{className:e.title,children:"Facebook log in is going away"}),s.jsx("p",{className:e.text,children:"Add a password to avoid losing access to your account."})]}),s.jsx("div",{children:s.jsxs("span",{children:[s.jsx("span",{className:e.textBold,children:"Facebook Email: "}),s.jsx("span",{className:e.text,children:t})]})}),s.jsx(k,{onSubmit:o,subscription:{submitting:!0},children:({handleSubmit:a,submitting:n})=>s.jsxs("form",{onSubmit:a,children:[s.jsx(Y,{}),s.jsx(h,{component:J,type:"checkbox",name:"change_email",id:"change_email",className:e.emailCheckbox,labelClassName:e.emailCheckboxLabel,label:"Change the email associated with TurboTenant"}),s.jsx(h,{label:"New Password",component:W,name:"password",id:"password",validate:K(P,Z,X("SunsetFacebookModalSetPasswordStep")),className:e.password,passwordStrengthClassName:e.passwordStrength,inputProps:{autoComplete:"new-password"},showPasswordStrengthChecker:!0}),s.jsxs("div",{className:e.buttons,children:[s.jsx(l,{className:e.btn,secondary:!0,to:"/logout",disabled:n,children:"Log Out"}),s.jsx(l,{className:e.submit,type:"submit",loading:n,children:"Create Password"})]})]})})]}),F=({onSubmit:t,onClose:o})=>s.jsxs("div",{className:e.content,children:[s.jsxs("div",{children:[s.jsx("h1",{className:e.title,children:"Update your email"}),s.jsx("p",{className:e.text,children:"For security reasons, changes to your email must be verified."})]}),s.jsx(k,{onSubmit:t,subscription:{submitting:!0},children:({handleSubmit:a,submitting:n})=>s.jsxs("form",{onSubmit:a,children:[s.jsx(h,{label:"Email",component:as,type:"email",name:"email",id:"email",className:e.email,parse:es,validate:ss(ts,P)}),s.jsxs("div",{className:e.buttons,children:[s.jsx(l,{className:e.btn,secondary:!0,onClick:o,disabled:n,children:"Close"}),s.jsx(l,{className:e.submit,type:"submit",loading:n,children:"Update"})]})]})})]}),_=({onConfirm:t})=>s.jsxs("div",{className:e.content,children:[s.jsx("div",{className:e.icon,children:s.jsx(v,{name:"warning",size:"xl"})}),s.jsxs("div",{children:[s.jsx("h1",{className:y(e.title,e.textCenter),children:"You will need to confirm your new email."}),s.jsx("p",{className:y(e.text,e.textCenter),children:"Check your inbox for the link to confirm your email. Once you confirm it, we will save the change."})]}),s.jsx("div",{className:e.buttons,children:s.jsx(l,{className:e.submit,onClick:t,children:"Sounds Good"})})]}),Us=()=>{const[t,o]=N.useState(!0),[a,n]=N.useState(1),{IS_OWNER:x}=$(),{user:b,muaUser:g,loading:R}=D(),M=G(),[q]=p(cs),[z]=p(rs),[T]=p(ns),w=r=>({[S]:r?.graphQLErrors?.[0]?.message??"Something went wrong"}),O=async r=>{const{password:u,change_email:d}=r;try{if(!(await q({variables:{currentPassword:"",password:u},refetchQueries:[{query:I}],awaitRefetchQueries:!0}))?.data?.updatePassword?.ok)return{[S]:"Something went wrong"};if(M("Password saved!"),d)return n(2);o(!1)}catch(f){return w(f)}},A=async r=>{const{email:u}=r;try{await(x?z:T)({variables:{email:u}}),n(3)}catch(d){return w(d)}},j=()=>{o(!1)},B=b?.social_signup==="FACEBOOK",U=b?.has_password,C=!R&&B&&(a!==1||!U)&&t;let m;if(x){const r=is(g);m=C&&r}else m=C;return s.jsxs(H,{open:m,className:e.modal,autoFocus:!1,children:[a===1?s.jsx(E,{email:g?.email,onSubmit:O}):null,a===2?s.jsx(F,{onSubmit:A,onClose:j}):null,a===3?s.jsx(_,{onConfirm:j}):null]})};E.propTypes={email:c.string,onSubmit:c.func.isRequired};F.propTypes={onClose:c.func.isRequired,onSubmit:c.func.isRequired};_.propTypes={onConfirm:c.func.isRequired};export{xs as A,Us as S,As as a,Bs as b};
//# sourceMappingURL=SunsetFacebookModal-CHiwk-hr.js.map
