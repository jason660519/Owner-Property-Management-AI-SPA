import{r as i,j as t,d as O,P as s,a5 as D,k as g,i as c,s as ne}from"./TownhouseColor--VjQBVqd.js";import{be as le,eE as re,eF as oe,cL as ie,cG as B,dk as ce,eG as de,eH as ue,eI as he,di as me,dj as fe,eJ as ge}from"./main-dumNSXg9.js";import{i as pe}from"./index-CwobAYwJ.js";import{g as be}from"./groupAndSortListings-CLoD2org.js";const L=l=>t.jsx("svg",{...l,viewBox:"0 0 22 16",fill:l.color,children:t.jsx("path",{d:"M11 0c6.082 0 11 5.034 11 11.23v4.155c0 .34-.281.615-.629.615H.63A.622.622 0 010 15.385V11.23C0 5.034 4.918 0 11 0zm0 1.23c-5.375 0-9.743 4.472-9.743 10v3.54h19.486v-3.54c0-5.528-4.368-10-9.743-10zm5.797 4.155c.246.24.245.63-.001.87l-4.035 3.936c.13.256.203.544.203.85 0 1.06-.88 1.918-1.964 1.918s-1.964-.859-1.964-1.918c0-1.06.88-1.919 1.964-1.919.313 0 .609.072.872.199l4.037-3.938a.638.638 0 01.888.002zM4.321 10.86c.348 0 .629.275.629.615 0 .34-.281.615-.629.615h-1.78a.622.622 0 01-.63-.615c0-.34.282-.615.63-.615h1.78zm15.139 0c.347 0 .628.275.628.615 0 .34-.281.615-.628.615h-1.781a.622.622 0 01-.629-.615c0-.34.281-.615.629-.615h1.78zM11 10.353a.698.698 0 00-.707.688c0 .379.316.688.707.688.39 0 .707-.31.707-.688a.698.698 0 00-.707-.688zm8.396-2.705a.61.61 0 01-.341.803l-1.646.665a.633.633 0 01-.82-.334.61.61 0 01.34-.804l1.646-.664c.321-.13.689.02.821.334zM3.425 7.314l1.644.664c.321.13.474.49.342.804a.633.633 0 01-.821.334L2.945 8.45a.61.61 0 01-.341-.803.633.633 0 01.82-.334zm2.038-2.545L6.72 5.998c.246.24.246.63.001.87a.638.638 0 01-.889 0L4.575 5.64a.606.606 0 010-.87.638.638 0 01.888 0zm9.015-1.922c.32.13.472.49.34.805l-.682 1.605a.633.633 0 01-.822.332.61.61 0 01-.339-.804l.681-1.606a.633.633 0 01.822-.332zm-6.134.332l.681 1.606a.61.61 0 01-.34.804.633.633 0 01-.821-.332l-.681-1.605a.61.61 0 01.34-.805c.32-.13.688.019.82.332zM11 2.172c.347 0 .629.275.629.615v1.738c0 .34-.282.615-.629.615a.622.622 0 01-.629-.615V2.787c0-.34.282-.615.629-.615z"})});L.defaultProps={width:22,height:16,color:O.text};L.propTypes={width:s.number,height:s.number,color:s.string};const ve=i.memo(L),x=l=>t.jsx("svg",{...l,viewBox:"0 0 18 18",fill:l.color,children:t.jsx("path",{d:"M7.2 9.683L.167 1.18A.72.72 0 01.72 0H17.28c.609 0 .943.71.554 1.179L10.8 9.683v5.436a.72.72 0 01-.211.509l-2.16 2.16a.72.72 0 01-1.229-.51V9.684zM2.25 1.44l6.225 7.525a.72.72 0 01.165.459v6.117l.72-.72V9.424a.72.72 0 01.165-.459L15.75 1.44H2.251z"})});x.defaultProps={width:18,height:18,color:O.primary};x.propTypes={width:s.number,height:s.number,color:s.string};const Se=i.memo(x),Me="A7-RB",Ce="Qo-QA",De="YfQvG",M={button:Me,icon:Ce,selected:De},p=({className:l,icon:b=Se,iconProps:h,filterName:v,onChange:a,selected:r})=>t.jsx(D,{className:g(M.button,l,{[M.selected]:r}),icon:b,iconProps:{className:M.icon,width:15,height:15,...h},onClick:()=>{a(!r)},children:v});p.propTypes={className:s.string,icon:s.oneOfType([s.node,s.object,s.func]),iconProps:s.object,filterName:s.string.isRequired,onChange:s.func.isRequired,selected:s.bool.isRequired};p.defaultProps={selected:!1};const Le="zLK06",xe="r8FmW",Ye="EUDiE",Fe="Gd6ZO",Te="_9T9NO",je="ldGVh",Ne="FTuJ5",ye="q9uBv",o={container:Le,foldable:xe,searchField:Ye,resetAll:Fe,customDateBtn:Te,buttonsHolder:je,button:Ne,hideOnMobile:ye},R=[{label:"This Month",value:"CURRENT_MONTH"},{label:"Last Month",value:"LAST_MONTH"},{label:"Year to Date",value:"YTD"},{label:"Last Year",value:"LAST_YEAR"}],C={listing_ids:[],statuses:[],starred:!1,lula:!1,date:null,search:""},we=({maintenanceList:l,hideRentalsFilter:b,listingId:h,children:v})=>{const[a,r]=i.useReducer((e,n)=>({...e,...n}),C),E=!pe(a,C),z=l.some(e=>e.sent_to_partner),[H,P]=i.useState(l),{listings:Y,loading:I}=le({variables:{mode:"ROOTS_ONLY",sort:"ALPHABETICAL"}}),[V,F]=i.useState(""),[m,T]=i.useState(),[j,N]=i.useState(c(new Date).format("MM/DD/YYYY")),[y,w]=i.useState(c(new Date).format("MM/DD/YYYY")),k=e=>!a.listing_ids.length||a.listing_ids.includes(e.listing.id),q=e=>!a.statuses.length||a.statuses.includes(e.status.toLowerCase()),U=e=>!a.starred||e.starred,G=e=>{if(!a.date)return!0;const{dateFilter:n,customStart:d,customEnd:S}=a.date,u=c(e.created_at),f=c();if(n==="CURRENT_MONTH")return f.startOf("month").isBefore(u);if(n==="LAST_MONTH")return f.subtract(1,"month").isBefore(u);if(n==="YTD")return f.startOf("year").isBefore(u);if(n==="LAST_YEAR")return f.subtract(1,"year").isBefore(u);if(n==="CUSTOM"){const se=c(d,"MM/DD/YYYY"),ae=c(S,"MM/DD/YYYY");return u.isBetween(se,ae)}},Q=e=>{if(!a.search)return!0;const n=a.search.toLowerCase(),d=e.title,S=ge(e.listing);return d.toLowerCase().includes(n)||S.toLowerCase().includes(n)},$=e=>!a.lula||e.sent_to_partner;i.useEffect(()=>{const e=l.filter(k).filter(q).filter(U).filter(G).filter(Q).filter($);P(e)},[a,l]);const A=()=>{r(C),T(),N(c(new Date).format("MM/DD/YYYY")),w(c(new Date).format("MM/DD/YYYY")),F("")},J=e=>{r({listing_ids:e})},_=(e,n,d)=>{r(e?{date:{dateFilter:e,customStart:n,customEnd:d}}:{date:null})},W=e=>{r({statuses:e})},K=e=>{r({starred:e})},Z=e=>{r({lula:e})},X=e=>{r({search:e})},ee=m==="CUSTOM"?"Custom Dates":R.find(e=>e.value===m)?.label||"Time",te=re(X,300,{trailing:!0});return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:o.container,children:[t.jsxs("div",{className:o.foldable,children:[t.jsx(oe,{icon:ie,iconProps:{width:18,heigth:18},value:m,filterName:ee,allLabel:"All Time",options:R,className:o.actionButton,onChange:e=>{if(T(e),e!=="CUSTOM")return _(e)},custom:t.jsxs("div",{children:[t.jsx(B,{label:"Start",name:"custom_start",id:"custom_start",input:{value:j,onChange:e=>{const n=e?.target?.value||e;N(n)}}}),t.jsx(B,{label:"End",name:"custom_end",id:"custom_end",input:{value:y,onChange:e=>{const n=e?.target?.value||e;w(n)}}}),t.jsx(D,{onClick:()=>_(m,j,y),className:o.customDateBtn,children:"Apply custom dates"})]})}),!b&&t.jsx(ce,{filterName:"Rentals",properties:be(Y),onApplyFilters:J,loading:I,hideSearch:Y?.length<5,className:g(o.actionButton,o.propertiesFilter),selectedIds:a.listing_ids}),t.jsx(de,{icon:ve,filterName:"Status",hideSearch:!0,allLabel:"All Statuses",options:[{label:"New",value:"new"},{label:"Open",value:"open"},{label:"In Progress",value:"in_progress"},{label:"Dismissed",value:"dismissed"},{label:"Under Review",value:"review"},{label:"Resolved",value:"resolved"}],onChange:W,selected:a.statuses}),t.jsx(p,{icon:ue,filterName:"Starred",onChange:K,selected:a.starred}),z&&t.jsx(p,{icon:he,filterName:"Lula",onChange:Z,selected:a.lula}),t.jsx(me,{value:V,onChange:e=>{F(e.target.value),te(e.target.value)},placeholder:"Search",icon:fe,className:o.searchField,id:"searchbox"}),E&&t.jsx("div",{className:o.resetAll,onClick:()=>A(),children:"Reset All"})]}),t.jsx("div",{className:g(o.buttonsHolder,o.hideOnMobile),children:t.jsx(D,{to:h?`/owners/maintenance/${h}/create`:"/owners/maintenance/create",primary:!0,small:!0,className:g(o.button),type:"button",onClick:()=>{ne("create_request clicked",{location:"Maintenance Index"})},dataQa:"create-maintenance-request",children:t.jsx("span",{children:"Create Request"})})})]}),v({filteredMRs:H,resetFilters:A})]})};we.propTypes={maintenanceList:s.arrayOf(s.object),hideRentalsFilter:s.bool,listingId:s.string,children:s.func};export{we as M};
//# sourceMappingURL=MaintenanceTableFilters-CitcIvH6.js.map
