import{r as l,v as x,H as L,s as c,G as Q,j as v,P as e}from"./TownhouseColor--VjQBVqd.js";import{Y as A,Z as _,$,a0 as j,a1 as w}from"./main-dumNSXg9.js";const m=({onClose:d,refetchQueries:t,location:r,onSuccess:a,shortCode:p,amount:n,title:g,onPayClickedSegmentEvent:y,slashedAmount:b,promoCode:f,disclaimer:h,enablePromo:C,onLoad:i,awaitRefetchQueries:P})=>{l.useEffect(()=>{i&&i()},[]);const[R]=x(A,{refetchQueries:t?.length?t.map(o=>({query:o})):null,awaitRefetchQueries:P}),{premium_referral:E}=L(),q=_(),S=l.useCallback(async(o,{promoCode:k})=>{let u;try{const s=$();await R({variables:{token:o,promoCode:f||k,idempotencyKey:s,plan_id:p,referral:E||r,location:r}}),c("purchase success",{location:r}),a&&a()}catch(s){const T=Q(s,"graphQLErrors[0].message","An error occurred");q(T),u=s?.graphQLErrors}j(u)});return v.jsx(w,{open:!0,onClose:()=>{d()},onToken:S,title:`Subscribe to ${g}`,amount:n,buttonLabel:`Pay $${n}`,amountLabel:"year",onPayClicked:()=>{c(y,{location:r})},slashedAmount:b,disclaimer:h,enablePromo:C})};m.propTypes={onClose:e.func.isRequired,onSuccess:e.func.isRequired,refetchQueries:e.array,location:e.string,shortCode:e.string.isRequired,amount:e.number.isRequired,title:e.string.isRequired,onPayClickedSegmentEvent:e.string.isRequired,slashedAmount:e.number,promoCode:e.string,disclaimer:e.string,enablePromo:e.bool,onLoad:e.func,awaitRefetchQueries:e.bool};m.defaultProps={slashedAmount:null,promoCode:null,disclaimer:null,enablePromo:!0,onLoad:null,awaitRefetchQueries:!0};export{m as S};
//# sourceMappingURL=SubscriptionPayModal-Fnib479B.js.map
