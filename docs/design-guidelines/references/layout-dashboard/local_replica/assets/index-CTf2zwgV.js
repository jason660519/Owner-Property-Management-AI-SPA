import{j as e,o as z,b as I,p as w,G as d,u as H,k as c,B as h,al as D,P as U}from"./TownhouseColor--VjQBVqd.js";import{M as V}from"./maintenance-empty-bmbmmpxS.js";import{dg as t,e6 as i,t as O,F as G,e7 as $,e8 as Q,e9 as W,ea as K}from"./main-dumNSXg9.js";import{_ as J}from"./maintenanceRequestsQuery-CFoV7CT4.js";import{E as Y,M as X}from"./MaintenanceTable-Bi1F-3mS.js";import{M as Z}from"./MaintenanceTableFilters-CitcIvH6.js";import{S as ee}from"./Star-DQ-Sf4VQ.js";import"./StyledTable-BvuuAZaN.js";import"./index-CwobAYwJ.js";import"./groupAndSortListings-CLoD2org.js";const te="Cf-sV",ne="w2DRb",se="Aqs2t",ae="TYh9y",ie="bVkBi",re="Dyv22",oe="oVVTN",ce="nT8rU",le="_4COPL",de="qFKN8",ue="HWgMa",me="AGcJh",s={container:te,header:ne,title:se,buttonsHolder:ae,button:ie,hideOnBig:re,resetFiltersContainer:oe,emptyContainer:ce,maintenanceEmpty:le,emptyButton:de,skeletonItem:ue,customSpacingHeader:me},r=()=>e.jsx(t,{hybrid:!0,className:s.skeletonItem,children:e.jsxs(t.Section,{justify:"space",gap:"xl",align:"center",padding:["ymd","xmd"],breakpoint:!0,children:[e.jsx(i,{size:"sm"}),e.jsx(i,{size:"md",breakpoint:!0}),e.jsx(i,{size:"sm",expandSmall:!0}),e.jsxs(t.Section,{align:"start",gap:"xs",padding:["lmd"],column:!0,children:[e.jsx(i,{size:"heading"}),e.jsx(i,{size:["sm","heading"]})]}),e.jsxs(t.Section,{gap:"xs",justify:"end",hideSmall:!0,children:[e.jsx(i,{size:"xs"}),e.jsx(ee,{color:"#e6e9f0",width:24,height:24})]})]})}),xe=({className:b})=>{const m=z(),x=I(),S=w(),{user:l,features:E,loading:A}=O(),N=E?.includes(G.LULA_MAINTENANCE),{autoSend:M,cardLastFour:B,nteAmount:g}=x.state||{},j=d(l,"maintenance_plus_subscription_subscribed",!1),C=d(l,"maintenance_plus_active_experiment",!1),k=l?.maintenance_request_management_settings||!1,y=C&&!!k,{loading:v,data:T}=H(J),u=d(T,"userData.maintenance_requests.data",[]),P=d(l,"lula_eligible",!1),f=()=>{S(x.pathname+x.search,{replace:!0,state:{}})},[R]=$(),F=a=>R(a.id,{starred:!a.starred});if(v||A)return e.jsxs(e.Fragment,{children:[e.jsxs(t,{children:[e.jsx(t.Section,{justify:"space",align:"center",children:e.jsx("h1",{"data-qa":"leases-index-title",id:"leases-index-title",children:"Maintenance"})}),e.jsxs(t.Section,{align:"center",gap:"sm",margin:"bsm",wrap:!0,children:[e.jsx(t.Button,{size:"wide"}),e.jsx(t.Button,{}),e.jsx(t.Button,{}),e.jsx(t.Button,{}),e.jsx(t.Button,{size:"large"}),e.jsx(t.Button,{size:"round",float:"right"})]})]}),e.jsx(t,{hybrid:!0,className:s.skeletonItem,children:e.jsxs(t.Section,{justify:"start",gap:"xl",align:"center",padding:["ymd","xmd"],breakpoint:!0,hideSmall:!0,children:[e.jsx(i,{size:"sm"}),e.jsx(i,{size:"sm"}),e.jsxs(t.Section,{justify:"around",gap:"xs",className:s.customSpacingHeader,children:[e.jsx(i,{size:"sm"}),e.jsx(i,{size:"sm"}),e.jsx(i,{size:"sm"})]})]})}),e.jsx(r,{}),e.jsx(r,{}),e.jsx(r,{}),e.jsx(r,{}),e.jsx(r,{}),e.jsx(r,{}),e.jsx(r,{}),e.jsx(r,{}),e.jsx(r,{})]});const L=(a,n)=>u.length?a.length?e.jsx(X,{maintenanceList:a,toggleStarred:F,isLulaEnabled:N,isMaintenancePlus:j||y,isLulaEligible:P}):e.jsx("div",{className:s.resetFiltersContainer,children:e.jsxs("div",{children:[e.jsx("h3",{children:"No Maintenance Request Meets that Criteria"}),e.jsx("p",{children:"Change your filters or add a new request."}),e.jsx(h,{secondary:!0,small:!0,onClick:n,children:"Reset Filters"})]})}):e.jsx(D,{className:c(s.emptyContainer),children:e.jsx(Y,{className:c(s.maintenanceEmpty),title:"Keep Track of Maintenance Issues",description:"Whether it is knowing when you last replaced the microwave or inputting a request a tenant told you about in person, have a clear history of maintenance issues at your rental.",graphic:V,action:e.jsx(h,{className:c(s.emptyButton),to:`${m.PRIVATE_BASE_PATH}maintenance/create`,children:"Create Request"})})}),_=j||y?u.filter(a=>a.status===Q.QUOTE_NEEDS_REVIEW).sort((a,n)=>{const o=new Date(a.last_activity),p=new Date(n.last_activity);return o-p}):[];function q(a){const n=a.map(o=>e.jsx("a",{href:`${m.PRIVATE_BASE_PATH}maintenance/${o.id}/${o.listing.id}`,target:"_blank",rel:"noopener noreferrer",children:o.title},o.id));return n.length===1?n[0]:n.length===2?e.jsxs(e.Fragment,{children:[n[0]," and ",n[1]]}):e.jsxs(e.Fragment,{children:[n.slice(0,-1).reduce((o,p)=>e.jsxs(e.Fragment,{children:[o,", ",p]})),", and ",n[n.length-1]]})}return e.jsxs("div",{children:[e.jsxs("div",{className:c(s.container,b),children:[e.jsxs("div",{className:s.header,children:[e.jsx("h2",{className:s.title,children:"Maintenance"}),e.jsx("div",{className:c(s.buttonsHolder,s.hideOnBig),children:u.length>0&&e.jsx(h,{to:`${m.PRIVATE_BASE_PATH}maintenance/create`,primary:!0,small:!0,className:c(s.button,s.createRequestButton),type:"button",children:e.jsx("span",{children:"Create Request"})})})]}),_.length>0&&e.jsx(W,{needApproval:q(_),nteAmount:d(l,"maintenance_request_management_settings.not_to_exceed",0),atIndexPage:!0}),e.jsx(Z,{maintenanceList:u,children:({filteredMRs:a,resetFilters:n})=>L(a,n)})]}),g?e.jsx(K,{open:!0,onClose:f,onSoundGoodClick:f,nteAmount:g,autoSend:M,cardLastFour:B}):null]})};xe.propTypes={className:U.string};export{xe as default};
//# sourceMappingURL=index-CTf2zwgV.js.map
