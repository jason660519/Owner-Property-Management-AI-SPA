import{_ as B}from"./detailed_lead.fragment-DkOpsOoq.js";import{G as M,j as t,L as se,a4 as Z,F as _,a5 as S,P as d,y as oe,z as le,r as w,s as v,ab as z,v as re,E as ce,ae as de,a8 as me,k as ue,I as Q,a9 as $,ar as fe,a3 as J}from"./TownhouseColor--VjQBVqd.js";import{Z as K,bj as ve,aP as p,b$ as he,bi as pe,bb as H,l as D,n as O,v as U,o as V,b7 as ke,p as W,b6 as Y,b8 as be,b5 as ge,d1 as Ne,bY as Se,hd as ye,z as je,t as Ee,d0 as xe,he as we,cK as Ie,aX as _e}from"./main-dumNSXg9.js";import{D as X}from"./DottedHeader-D5rG9DSa.js";const De=`#import "../fragments/detailed_lead.fragment.graphql"

mutation setArchiveLead(
  $leadIds: [String!]
  $archived: Boolean!
  $allSelected: Boolean
) {
  setArchiveLead(
    input: { leadIds: $leadIds, archived: $archived, allSelected: $allSelected }
  ) {
    leads {
      ...DetailedLeadFragment
    }
  }
}
`,q={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"setArchiveLead"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"leadIds"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"archived"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"allSelected"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setArchiveLead"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"leadIds"},value:{kind:"Variable",name:{kind:"Name",value:"leadIds"}}},{kind:"ObjectField",name:{kind:"Name",value:"archived"},value:{kind:"Variable",name:{kind:"Name",value:"archived"}}},{kind:"ObjectField",name:{kind:"Name",value:"allSelected"},value:{kind:"Variable",name:{kind:"Name",value:"allSelected"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"leads"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DetailedLeadFragment"},directives:[]}]}}]}}]}}],loc:{start:0,end:349,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:De}}},Re=o=>{const a={};return o.filter(function(s){if(s.kind!=="FragmentDefinition")return!0;const r=s.name.value;return a[r]?!1:(a[r]=!0,!0)})};q.definitions=Re(q.definitions.concat(B.definitions));const Fe=(o,a)=>{const s=(e,i)=>{if(e.kind==="FragmentSpread")i.add(e.name.value);else if(e.kind==="VariableDefinition"){const n=e.type;n.kind==="NamedType"&&i.add(n.name.value)}return e&&"selectionSet"in e&&e.selectionSet&&e.selectionSet.selections.forEach(n=>{s(n,i)}),e&&"variableDefinitions"in e&&e.variableDefinitions&&e.variableDefinitions.forEach(n=>{s(n,i)}),e&&"definitions"in e&&e.definitions&&e.definitions.forEach(n=>{s(n,i)}),i},r=e=>{const i={};return e.definitions.forEach(function(n){"name"in n&&n.name&&(i[n.name.value]=s(n,new Set))}),i},f=(e,i)=>{for(let n=0;n<e.definitions.length;n++){const l=e.definitions[n];if(l&&"name"in l&&l.name&&l.name.value==i)return l}},c=r(o),h=Object.assign({},o,{definitions:[f(o,a)]}),y=c[a]||new Set,u=new Set;let m=new Set;for(y.forEach(e=>{m.add(e)});m.size>0;){const e=m;m=new Set,e.forEach(i=>{u.has(i)||(u.add(i),(c[i]||new Set).forEach(l=>{m.add(l)}))})}return u.forEach(e=>{const i=f(o,e);i&&h.definitions.push(i)}),h};Fe(q,"setArchiveLead");const Te="eP0ZH",Oe="zn2wJ",$e="Ak9zP",Ce="cO6Be",Pe="pSdM-",Ve="ya2xT",Le="s-1vZ",qe="nkyuR",N={container:Te,title:Oe,text:$e,formGroup:Ce,name:Pe,phone:Ve,btnWrap:Le,btn:qe},Ae=({updateLead:o,lead:a,onClose:s,open:r,loading:f,listings:c=[]})=>{const h=K(),y=M(a,"listing.id",""),u=ve(c,y),m=n=>{const l={...Ne(n),listingId:n.listing_id};try{const g=Object.assign({},l,{phone:Se(n.phone),leadId:a.id});console.log(g),o(g).then(s)}catch(g){console.log(g),h("Something went wrong")}},e=n=>{const l=M(n,"email","")||"";return ye(l)?"":l},i=a.renter&&a.renter.has_password;return t.jsx(p,{className:N.container,autoFocus:!1,open:r,children:t.jsxs(se,{loading:f,children:[t.jsx("h3",{id:"add-lead-modal",className:N.title,children:"Edit this Lead"}),t.jsx("p",{className:N.text,children:"Easily keep track of all the renters interested in your property."}),t.jsx(Z,{initialValues:{first_name:a.first_name,last_name:a.last_name,email:e(a),phone:a.phone,...u?he(u):{}},onSubmit:m,subscription:{submitting:!0,values:!0},children:({handleSubmit:n,submitting:l})=>t.jsxs("form",{onSubmit:n,children:[t.jsx(pe,{label:"Property Interested In",properties:c.filter(g=>g.property_role!==H.ROOM&&g.property_role!==H.UNIT),required:!0}),t.jsxs("div",{className:N.formGroup,children:[t.jsx(_,{label:"First Name",component:O,name:"first_name",id:"first_name",className:N.name,disabled:i,validate:D(V,U)}),t.jsx(_,{label:"Last Name",component:O,name:"last_name",id:"last_name",disabled:i,className:N.name,validate:D(V,U)})]}),t.jsx(_,{label:"Email",component:O,type:"email",name:"email",id:"email",disabled:i,validate:a.email?D(V,W):W,parse:ke}),t.jsx(_,{label:"Phone",component:be,id:"phone",name:"phone",disabled:i,validate:a.phone?Y:D(ge("Add an email or phone number"),Y),className:N.phone}),t.jsxs("div",{className:N.btnWrap,children:[t.jsx(S,{id:"close-add-lead-modal",onClick:s,className:N.btn,secondary:!0,disabled:l,children:"Cancel"}),t.jsx(S,{id:"add-lead-button",type:"submit",className:N.btn,loading:l,children:"Submit"})]})]})})]})})};Ae.propTypes={onClose:d.func.isRequired};const Be="/assets/Popover.animation-wuINmE1O.json",ze=({style:o,loop:a=!1})=>{const s=le(),f=oe({path:Be,loop:a,autoplay:!0},o);return s?t.jsx(je,{style:o,src:"https://lottie.host/?file=822cbd1d-00f4-4844-9bb6-c197c6af3723/3kzbnjA1Pi.json"}):f.View};ze.propTypes={style:d.object,loop:d.bool};const Ge="aYDTU",Me="vjsii",Qe="ZNiow",He="BII9F",R={header:Ge,footer:Me,archiveBtn:Qe,notRightNowBtn:He},F="archive renter modal",Ue=({open:o=!1,onClose:a,onArchive:s})=>{w.useEffect(()=>{o&&v("archive renter modal loaded",{location:F})},[o]);const r=()=>{v("close clicked",{location:F}),a()};return t.jsxs(p,{open:o,onClose:r,size:"small",showCloseIcon:!0,children:[t.jsx(p.Header,{className:R.header,children:t.jsx(z,{align:"center",className:"mb-4",children:"Would you like to archive this renter now?"})}),t.jsxs(p.Footer,{className:R.footer,children:[t.jsx(S,{variant:"danger",className:R.archiveBtn,onClick:()=>{v("yes_archive clicked",{location:F}),s()},children:"Yes, archive"}),t.jsx(S,{className:R.notRightNowBtn,onClick:()=>{v("not_right_now clicked",{location:F}),a()},variant:"ghost",children:"Not right now"})]})]})};Ue.propTypes={onClose:d.func,onArchive:d.func,open:d.bool};const We=`#import "../fragments/detailed_lead.fragment.graphql"

mutation addEvaluation(
  $leadId: String!
  $evaluation: String
  $comment: String
) {
  addEvaluation(
    input: { leadId: $leadId, evaluation: $evaluation, comment: $comment }
  ) {
    ok
    lead {
      ...DetailedLeadFragment
    }
  }
}
`,C={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"addEvaluation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"leadId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"evaluation"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"comment"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addEvaluation"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"leadId"},value:{kind:"Variable",name:{kind:"Name",value:"leadId"}}},{kind:"ObjectField",name:{kind:"Name",value:"evaluation"},value:{kind:"Variable",name:{kind:"Name",value:"evaluation"}}},{kind:"ObjectField",name:{kind:"Name",value:"comment"},value:{kind:"Variable",name:{kind:"Name",value:"comment"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ok"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lead"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DetailedLeadFragment"},directives:[]}]}}]}}]}}],loc:{start:0,end:339,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:We}}},Ye=o=>{const a={};return o.filter(function(s){if(s.kind!=="FragmentDefinition")return!0;const r=s.name.value;return a[r]?!1:(a[r]=!0,!0)})};C.definitions=Ye(C.definitions.concat(B.definitions));const Ze=(o,a)=>{const s=(e,i)=>{if(e.kind==="FragmentSpread")i.add(e.name.value);else if(e.kind==="VariableDefinition"){const n=e.type;n.kind==="NamedType"&&i.add(n.name.value)}return e&&"selectionSet"in e&&e.selectionSet&&e.selectionSet.selections.forEach(n=>{s(n,i)}),e&&"variableDefinitions"in e&&e.variableDefinitions&&e.variableDefinitions.forEach(n=>{s(n,i)}),e&&"definitions"in e&&e.definitions&&e.definitions.forEach(n=>{s(n,i)}),i},r=e=>{const i={};return e.definitions.forEach(function(n){"name"in n&&n.name&&(i[n.name.value]=s(n,new Set))}),i},f=(e,i)=>{for(let n=0;n<e.definitions.length;n++){const l=e.definitions[n];if(l&&"name"in l&&l.name&&l.name.value==i)return l}},c=r(o),h=Object.assign({},o,{definitions:[f(o,a)]}),y=c[a]||new Set,u=new Set;let m=new Set;for(y.forEach(e=>{m.add(e)});m.size>0;){const e=m;m=new Set,e.forEach(i=>{u.has(i)||(u.add(i),(c[i]||new Set).forEach(l=>{m.add(l)}))})}return u.forEach(e=>{const i=f(o,e);i&&h.definitions.push(i)}),h};Ze(C,"addEvaluation");const Je="HzGze",Ke="MFvla",Xe="NGO1t",en="ZzuFO",nn="sotPj",tn="L0Y3q",an="Kn--R",sn="nuMFz",on="_5-lDw",ln="_552i3",rn="cBcrx",cn="aRlMz",dn="_2uCuo",mn="Jo20f",b={content:Je,notice:Ke,evaluationIcons:Xe,evaluationButton:en,iconCircle:nn,icon:tn,negative:an,selected:sn,positive:on,definite:ln,textarea:rn,header:cn,footer:dn,pulse:mn},L="Add evaluation modal",un=({open:o=!1,onClose:a,leadId:s,renterFullName:r,listing:f,data:c,defaultEvaluation:h})=>{const{user:y}=Ee(),[u,m]=w.useState(c?.evaluation||h||null),e=xe(),i=K();w.useEffect(()=>{o&&v("add_evaluation_modal loaded",{location:"leads"})},[o]),w.useEffect(()=>{m(c?.evaluation||h||null)},[c?.evaluation,h]);const[n,{loading:l}]=re(C,{refetchQueries:y?.has_evaluations?[]:[{query:ce}],awaitRefetchQueries:!0}),g=()=>{v("cancel clicked",{location:L}),a(c?.evaluation||null)},ee=async j=>{if(u){v(`${c?.evaluation?"save":"add"} clicked`,{location:L});try{(await n({variables:{leadId:s,evaluation:u,comment:j.comment}}))?.data?.addEvaluation?.ok?(e(`Evaluation ${c?.evaluation?"updated":"added"} successfully`),a(u)):i("Failed to save evaluation")}catch(k){i(k.message||"An error occurred while saving the evaluation")}}},ne=j=>{if(!j)return"";const k=Ie({...j,short:!0});if(j.property_role==="ROOM"){const P=j.room_name?`, ${j.room_name} `:"";return`${k}${P}`}return k},ie=[{value:"NEGATIVE",icon:"thumbs-down-filled",label:"Negative"},{value:"POSITIVE",icon:"thumbs-up-filled",label:"Positive"},{value:"DEFINITE",icon:"circle-star-filled",label:"Definite"}];return t.jsxs(p,{open:o,onClose:g,size:"extra-small",showCloseIcon:!0,children:[t.jsx(p.Header,{className:b.header,children:t.jsxs(de,{children:[c?.evaluation?"Edit":"Add"," evaluation"]})}),t.jsx(Z,{onSubmit:ee,initialValues:c||{},subscription:{submitting:!0,values:!0},children:({handleSubmit:j})=>t.jsxs("form",{onSubmit:j,children:[t.jsxs(p.Content,{className:b.content,children:[t.jsxs(me,{className:"mb-16",children:["Is ",r," a good fit for"," ",ne(f),"?"]}),t.jsx("div",{className:b.evaluationIcons,children:ie.map(({value:k,icon:P,label:te})=>{const G=u===k,ae={NEGATIVE:"error",POSITIVE:"secondary",DEFINITE:"success"};return t.jsxs("button",{type:"button",onClick:()=>{v(`${k.toLowerCase()} clicked`,{location:L}),m(k)},className:ue(b.evaluationButton,b[k.toLowerCase()],{[b.selected]:G}),children:[t.jsx("div",{className:b.iconCircle,children:t.jsx(Q,{className:b.icon,name:P,size:28,color:G?ae[k]:"close-darkbg"})}),t.jsx($,{size:"large",children:te})]},k)})}),t.jsx(_,{as:"textarea",className:b.textarea,component:O,id:"comment",name:"comment",label:"Comment",hint:"(Optional)",inputProps:{rows:4,placeholder:"Add an explanation"}}),t.jsx(we,{className:b.notice,icon:()=>t.jsx(Q,{name:"lock-filled",size:"lg"}),iconDirection:"left",children:t.jsx($,{children:"Evaluations are private and will not be shared with the renter."})})]}),t.jsxs(p.Footer,{className:b.footer,children:[t.jsx(S,{secondary:!0,onClick:g,disabled:l,children:"Cancel"}),t.jsx(S,{type:"submit",loading:l,disabled:!u||l,children:c?.evaluation?"Save":"Add"})]})]})})]})};un.propTypes={onClose:d.func,open:d.bool,leadId:d.string.isRequired,renterFullName:d.string.isRequired,listing:d.object.isRequired,data:d.shape({evaluation:d.oneOf(["POSITIVE","DEFINITE","NEGATIVE"]),comment:d.string}),defaultEvaluation:d.oneOf(["POSITIVE","DEFINITE","NEGATIVE"])};const fn="p9DzC",vn="YDB1-",hn="HbSat",pn="t3ySp",kn="-hA61",bn="aVVGh",E={banner:fn,bannerPattern:vn,footer:hn,inviteBtn:pn,notRightNowBtn:kn,link:bn},I="invite to apply modal",gn=({onClose:o,onInviteToApply:a,open:s=!1,lead:r})=>{w.useEffect(()=>{s&&v("invite_to_apply modal loaded",{location:I})},[s]);const f=()=>{v("yes_invite_to_apply clicked",{location:I}),a&&a(r)},c=()=>{v("close clicked",{location:I}),o()};return t.jsxs(p,{open:s,onClose:c,size:"small",banner:t.jsx(X,{icon:J,iconProps:{name:"application",size:"lg"},patternProps:{className:E.bannerPattern},circleProps:{width:80,height:80}}),bannerClassName:E.banner,showCloseIcon:!0,children:[t.jsxs(p.Header,{children:[t.jsx(z,{align:"center",className:"mb-4",children:"Would you like to invite this renter to apply?"}),t.jsx($,{align:"center",size:"large",children:"Once completed, you'll get an email with access to their application and screening report."})]}),t.jsxs(p.Footer,{className:E.footer,children:[t.jsx(S,{className:E.inviteBtn,onClick:f,children:"Yes, invite to apply"}),t.jsx(S,{className:E.notRightNowBtn,onClick:()=>{v("not_right_now_clicked",{location:I}),o()},variant:"ghost",children:"Not right now"}),t.jsxs($,{children:["Want to see the application first?"," ",t.jsx(fe,{className:E.link,onClick:()=>{v("demo_application clicked",{location:I}),_e("/applications/demo?utm_source=invite_to_apply_form")},children:"Demo Application"})]})]})]})};gn.propTypes={onClose:d.func,onInviteToApply:d.func,open:d.bool,lead:d.object};const Nn="DvcpB",Sn="iChjl",yn="_5Do5L",jn="_3qWnh",En="_33V00",xn="_8xSz6",x={banner:Nn,bannerPattern:Sn,title:yn,footer:jn,inviteBtn:En,notRightNowBtn:xn},T="invite to showing modal",wn=({onClose:o,onInviteToApply:a,open:s=!1,lead:r})=>{w.useEffect(()=>{s&&v("schedule_showing_modal loaded",{location:T})},[s]);const f=()=>{v("yes_send_invite clicked",{location:T}),a&&a(r)},c=()=>{v("close clicked",{location:T}),o()};return t.jsxs(p,{open:s,onClose:c,size:"small",banner:t.jsx(X,{icon:J,iconProps:{name:"showings",size:"lg"},patternProps:{className:x.bannerPattern},circleProps:{width:80,height:80}}),bannerClassName:x.banner,showCloseIcon:!0,children:[t.jsx(p.Header,{children:t.jsx(z,{align:"center",className:x.title,children:"Would you like to invite this renter to schedule a showing?"})}),t.jsxs(p.Footer,{className:x.footer,children:[t.jsx(S,{className:x.inviteBtn,onClick:f,children:"Yes, send invite"}),t.jsx(S,{className:x.notRightNowBtn,onClick:()=>{v("not_right_now clicked",{location:T}),o()},variant:"ghost",children:"Not right now"})]})]})};wn.propTypes={onClose:d.func,onInviteToApply:d.func,open:d.bool,lead:d.object};const In=`#import "../fragments/detailed_lead.fragment.graphql"

mutation resendQuestionnaireRequest($leadId: String!) {
  resendQuestionnaireRequest(input: { leadId: $leadId }) {
    lead {
      ...DetailedLeadFragment
    }
  }
}
`,A={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"resendQuestionnaireRequest"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"leadId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"resendQuestionnaireRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"leadId"},value:{kind:"Variable",name:{kind:"Name",value:"leadId"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"lead"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DetailedLeadFragment"},directives:[]}]}}]}}]}}],loc:{start:0,end:261,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:In}}},_n=o=>{const a={};return o.filter(function(s){if(s.kind!=="FragmentDefinition")return!0;const r=s.name.value;return a[r]?!1:(a[r]=!0,!0)})};A.definitions=_n(A.definitions.concat(B.definitions));const Dn=(o,a)=>{const s=(e,i)=>{if(e.kind==="FragmentSpread")i.add(e.name.value);else if(e.kind==="VariableDefinition"){const n=e.type;n.kind==="NamedType"&&i.add(n.name.value)}return e&&"selectionSet"in e&&e.selectionSet&&e.selectionSet.selections.forEach(n=>{s(n,i)}),e&&"variableDefinitions"in e&&e.variableDefinitions&&e.variableDefinitions.forEach(n=>{s(n,i)}),e&&"definitions"in e&&e.definitions&&e.definitions.forEach(n=>{s(n,i)}),i},r=e=>{const i={};return e.definitions.forEach(function(n){"name"in n&&n.name&&(i[n.name.value]=s(n,new Set))}),i},f=(e,i)=>{for(let n=0;n<e.definitions.length;n++){const l=e.definitions[n];if(l&&"name"in l&&l.name&&l.name.value==i)return l}},c=r(o),h=Object.assign({},o,{definitions:[f(o,a)]}),y=c[a]||new Set,u=new Set;let m=new Set;for(y.forEach(e=>{m.add(e)});m.size>0;){const e=m;m=new Set,e.forEach(i=>{u.has(i)||(u.add(i),(c[i]||new Set).forEach(l=>{m.add(l)}))})}return u.forEach(e=>{const i=f(o,e);i&&h.definitions.push(i)}),h};Dn(A,"resendQuestionnaireRequest");export{Ue as A,un as E,gn as I,ze as P,A as _,wn as a,Ae as b,q as c};
//# sourceMappingURL=resendQuestionnaireLink-5AdhRdbs.js.map
