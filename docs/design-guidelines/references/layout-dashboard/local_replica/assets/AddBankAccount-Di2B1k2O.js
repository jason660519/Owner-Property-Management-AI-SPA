import{v as N,E as S,p as E,r as b,s as _,j as e,L as x,k as j,am as s,b as I,o as T,u as A,al as B}from"./TownhouseColor--VjQBVqd.js";import{X as g,t as w,u as C,dN as F,ar as O,c1 as D,h as M,b9 as $}from"./main-dumNSXg9.js";import{R as q}from"./ResourcesNav-B2ZqehRt.js";import L from"./ManageBankAccount-CanCiq3t.js";const Q=`mutation createEntity($data: StripeSetupInput) {
  createEntity(input: { data: $data }) {
    ok
    entity {
      id
    }
  }
}
`,P={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"createEntity"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"data"}},type:{kind:"NamedType",name:{kind:"Name",value:"StripeSetupInput"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createEntity"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"data"},value:{kind:"Variable",name:{kind:"Name",value:"data"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ok"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"entity"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:169,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:Q}}},V=()=>{const[i]=N(P,{refetchQueries:[{query:S},{query:g}],awaitRefetchQueries:!0});return i},W="JQuhy",K={container:W},v=({hideBackButton:i=!1,onEntityAdded:o,onSuccessRedirectTo:c,withOutCard:p,withTitle:y,className:a})=>{const r=E(),{user:l,loading:d}=w({polling:!1}),u=C(),m=V(),n=b.useCallback(async h=>(_("add_entity clicked",{location:"add_new_entity_form"}),(await m({variables:{data:h}}))?.data?.createEntity),[m]),k=b.useCallback(h=>{u("Entity successfully added."),o&&o(h),c&&r(c,{replace:!0})},[o,c,u,r]);return e.jsx(x,{loading:d,children:e.jsx(F,{title:"Add New Entity",className:j(K.container,a),hideBackButton:i,withTitle:y,user:l,withDescription:!1,submitLabel:"ADD ENTITY",customSaveOperation:n,withOutCard:p,onSuccess:k,inProduct:!0})})};v.propTypes={hideBackButton:s.bool,onEntityAdded:s.func,onSuccessRedirectTo:s.string,withOutCard:s.bool,withTitle:s.bool,className:s.string};const R="-bGFY",Y="BdZC-",G="nUW8V",H="_9MJrl",J="WK-W7",U="_2hQCK",X="_1Febe",z="n1rI8",Z="_0v2NX",ee="QF-iD",te="E2KMY",t={container:R,card:Y,bankOptions:G,entitySelect:H,heading:J,title:U,link:X,infoCard:z,infoIcon:Z,backButton:ee,addEntityForm:te},f="new-entity",ne=()=>{const i=I(),o=i.state?.entityId??null,{PRIVATE_BASE_PATH:c}=T(),p=i.state?.redirectTo??`${c}settings/rent-payments`,{data:y}=A(g),[a,r]=b.useState(o),l=a===f,d=y?.entities||[],u=d.map(({id:n,entity_name:k})=>({id:n,value:n,label:k})),m=d?.find(n=>n.id===a)?.entity_name;return e.jsxs("div",{className:t.container,children:[e.jsx(O,{className:t.backButton}),e.jsxs(B,{className:t.card,children:[e.jsx("div",{className:t.heading,children:e.jsx("h2",{className:t.title,children:"Add a Bank Account"})}),e.jsx(D,{empty:!0,label:"Select an Entity",name:"entityId",id:"entityId",className:t.entitySelect,value:a,options:[{label:"+ Add New Entity",value:f,id:f},...u],onChange:n=>r(n.target.value)}),l&&e.jsx(v,{withOutCard:!0,hideBackButton:!0,onEntityAdded:n=>r(n.id),withTitle:!1,className:t.addEntityForm}),a&&!l&&e.jsxs(e.Fragment,{children:[e.jsx(M,{children:e.jsxs("strong",{children:["This bank account must be connected to ",m,"."]})}),e.jsx(L,{className:t.bankOptions,entityId:a,goBackToLink:p,hideBackButton:!0,withTitle:!1})]}),!a&&e.jsxs($,{className:t.infoCard,Icon:q,iconProps:{className:t.infoIcon},noTitle:!0,children:["The entity is the individual or company that owns the bank account. At the end of the tax year, Stripe, our payment processor, generates a 1099-K form for each entity associated with the bank account you're collecting rent payments through."," ",e.jsx("a",{className:t.link,href:"https://support.turbotenant.com/en/articles/8047321-understanding-business-entities-for-landlords",target:"_blank",rel:"noopener noreferrer",children:"Learn more about entities"}),"."]})]})]})},re=Object.freeze(Object.defineProperty({__proto__:null,default:ne},Symbol.toStringTag,{value:"Module"}));export{v as A,ne as a,re as b};
//# sourceMappingURL=AddBankAccount-Di2B1k2O.js.map
