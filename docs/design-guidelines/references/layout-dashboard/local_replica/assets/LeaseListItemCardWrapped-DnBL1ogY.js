import{j as n,k as r,I as $,s as k,P as a,o as O,p as q,t as B,v as w,E as F,G as y,N as P}from"./TownhouseColor--VjQBVqd.js";import{A as M}from"./AlertModal--93869rJ.js";import{aM as G,cD as V,c9 as H,aJ as u,j as T,br as Z,u as z,bD as J,ax as Q,w as U}from"./main-dumNSXg9.js";import{F as W}from"./FraudStatusEnum-BCCs0giA.js";import{c as Y}from"./calculateLeaseTerm-B_s-x2O1.js";const o={END_DATE:"End Date (Today → Future)",END_DATE_DESC:"End Date (Future → Today)",START_DATE:"Start Date (Today → Future)",START_DATE_DESC:"Start Date (Future → Today)",ADDRESS:"Address (A → Z)",ADDRESS_DESC:"Address (Z → A)",NAME:"Name (A → Z)",NAME_DESC:"Name (Z → A)"},Ce=[{value:"end_date",direction:"asc",label:o.END_DATE},{value:"end_date_desc",direction:"desc",label:o.END_DATE_DESC},{value:"start_date",direction:"asc",label:o.START_DATE},{value:"start_date_desc",direction:"desc",label:o.START_DATE_DESC},{value:"adderss_asc",direction:"asc",label:o.ADDRESS},{value:"address_desc",direction:"desc",label:o.ADDRESS_DESC},{value:"name_asc",direction:"asc",label:o.NAME},{value:"name_desc",direction:"desc",label:o.NAME_DESC}],X=`mutation deleteDraftLease($id: String!) {
  deleteDraftLease(input: { id: $id }) {
    ok
  }
}
`,K={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"deleteDraftLease"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deleteDraftLease"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ok"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:134,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:X}}},ee="IwNGH",te="_9Vf-g",ne="_1NLOT",ae="_09mwa",se="Mk5aA",ie="iC9j9",oe="J-6pG",ce="R9sje",re="zUn7-",de="_9rfJt",le="w3Bo2",ue="sCDQk",me="GkMBX",_e="_3mYmf",Ee="_18YW7",Ne="iRrPs",fe="D-2az",Ae="_3DMD9",De="iMzlb",pe="hJtev",Se="sMCSt",t={container:ee,iconIndicator:te,content:ne,label:ae,text:se,column:ie,mainInfo:oe,title:ce,address:re,secondaryInfo:de,secondaryColumn:le,charges:ue,actions:me,secondaryActionBtn:_e,actionBtn:Ee,ending_soon:Ne,status:fe,upcoming:Ae,draft:De,current:pe,pulse:Se},d=()=>{},C=({className:c,lease:e,paymentsEnabled:m,onDraftAction:N=d,onCardClick:f=d,onDraftSecondaryAction:A=d,draftSecondaryActionLoading:s,onEndingSoonAction:i=d,onCurrentAction:_=d,onPastAction:D=d})=>{const p=e.status==="ENDING_SOON"?"ENDING SOON":`${e.status} LEASE`,E=e.is_autopilot,S=()=>e?.start_date===null&&e?.end_date===null?n.jsx("i",{children:"No lease term added yet"}):e?.start_date===null&&e?.end_date?`End Date: ${T(e.end_date)}`:e?.start_date&&e?.end_date?`${T(e.start_date)} - ${T(e.end_date)}`:Y(e),g=()=>{e.start_date||k("finish_lease_set_up_clicked",{location:"Lease Index"}),N()},h=()=>{if(E)return null;if(e.status==="DRAFT")return n.jsxs("div",{className:t.actions,children:[e.can_delete&&n.jsx(u,{className:r(t.actionBtn,t.secondaryActionBtn),color:"error",onClick:A,loading:s,children:"DELETE DRAFT LEASE"}),n.jsx(u,{className:t.actionBtn,loading:s,onClick:g,children:e.start_date?"ADD TENANTS":"FINISH LEASE SETUP"})]});if(e.status==="ENDING_SOON")return n.jsx("div",{className:t.actions,children:n.jsx(u,{className:t.actionBtn,onClick:i,children:"VIEW LEASE OPTIONS"})});if(e.status==="CURRENT")return n.jsx("div",{className:t.actions,children:n.jsx(u,{className:t.actionBtn,onClick:_,children:e.payment_request_rules_count>0?"VIEW PAYMENTS":"CREATE 1ST CHARGE"})});if(e.status==="PAST")return n.jsx("div",{className:t.actions,children:n.jsx(u,{className:t.actionBtn,onClick:D,children:"MANAGE LEASE"})})};return n.jsxs(G,{"data-qa":"manage-lease-item",id:`manage-lease-item-${e.id}`,className:r(t.container,c,{[t[e.status.toLowerCase()]]:!0}),children:[E&&n.jsx("div",{className:t.iconIndicator,children:n.jsx($,{name:"lightning-filled",color:"white",size:"sm"})}),n.jsxs("div",{className:t.content,onClick:f,children:[n.jsxs("div",{className:r(t.column,t.mainInfo),children:[n.jsx("span",{className:r(t.label,t.status),children:p}),n.jsx("span",{className:t.title,children:e.title}),n.jsx("span",{className:t.address,children:V({listing:e?.listing,separator:", ",showRootLevel:!0})})]}),n.jsxs("div",{className:r(t.column,t.secondaryInfo),children:[n.jsxs("div",{className:t.secondaryColumn,children:[n.jsx("span",{className:t.label,children:"Lease Term"}),n.jsx("span",{className:t.text,children:S()})]}),m&&n.jsxs("div",{className:t.secondaryColumn,children:[n.jsx("span",{className:t.label,children:"Unpaid Charges"}),n.jsx("span",{className:r(t.text,t.charges),children:H(e.total_balance_due/100)})]})]})]}),h()]})};C.propTypes={className:a.string,lease:a.object.isRequired,paymentsEnabled:a.bool,onCardClick:a.func,onDraftAction:a.func,onDraftSecondaryAction:a.func,draftSecondaryActionLoading:a.bool,onEndingSoonAction:a.func,onCurrentAction:a.func,onPastAction:a.func};const ge=({user:c,lease:e,listingId:m,...N})=>{const f=Z(),A=z(),{PRIVATE_BASE_PATH:s}=O(),i=q(),_=B(),[D,{loading:p}]=w(K,{refetchQueries:[{query:F},{query:Q},...m?[{query:U,variables:{id:m}}]:[]],awaitRefetchQueries:!0,update:l=>J(["allDocuments"],l)}),E=c?.payments_status?.fraud||null,S=y(c,"payments_data.requirements.length",0)>0,g=E===W.APPROVED&&!S,h=c?.tenants_count>0||c?.applicants_count>0,x=()=>{if(!e.start_date)return i(`${s}leases/view/${e.id}?editTerm='add'`);const l=P.stringify({leaseId:e.id,listingId:e.listing.id,redirectTo:_.pathname,goBackTo:_.pathname});return i(h?{pathname:`${s}leases/add-tenants/${e.id}`,search:l}:{pathname:`${s}create-tenant`,search:l})},b=()=>(k("delete_lease clicked",{location:"Lease Index"}),y(e,"renters.length",0)>0?f(v=>n.jsx(M,{onClose:v,iconName:"warning",title:"Remove renters first",description:"In order to delete the lease please remove any renters that are currently a part of this lease.",action:"Sounds Good"})):D({variables:{id:e.id}}).then(v=>{v&&A("Your lease has successfully been deleted.")})),j=()=>i(`${s}leases/view/${e.id}`),L=()=>i(`${s}leases/view/${e.id}/payments`),I=()=>i(`${s}leases/view/${e.id}`),R=()=>i(`${s}leases/view/${e.id}`,{state:{goBack:!0}});return n.jsx(C,{lease:e,paymentsEnabled:g,onCardClick:R,onDraftAction:x,onDraftSecondaryAction:b,draftSecondaryActionLoading:p,onEndingSoonAction:j,onCurrentAction:L,onPastAction:I,...N})};ge.propTypes={lease:a.object.isRequired,user:a.object,listingId:a.string};export{ge as L,Ce as s};
//# sourceMappingURL=LeaseListItemCardWrapped-DnBL1ogY.js.map
