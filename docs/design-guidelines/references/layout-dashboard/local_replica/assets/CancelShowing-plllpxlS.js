import{j as t,aH as w,ab as C,a5 as f,P as e,r as A,d as $,i as p,o as Y,k as m}from"./TownhouseColor--VjQBVqd.js";import{D as I}from"./DottedHeader-D5rG9DSa.js";import{cK as L,e as M,cL as O}from"./main-dumNSXg9.js";import{f as H}from"./formatShowingTime-A0aZEubc.js";const V=`mutation cancelShowing($showingId: String!, $renterId: String) {
  cancelShowing(input: { showingId: $showingId, renterId: $renterId }) {
    ok
  }
}
`,ue={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"cancelShowing"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"showingId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"renterId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cancelShowing"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"showingId"},value:{kind:"Variable",name:{kind:"Name",value:"showingId"}}},{kind:"ObjectField",name:{kind:"Name",value:"renterId"},value:{kind:"Variable",name:{kind:"Name",value:"renterId"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ok"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:189,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:V}}},P="i8-0e",Z="OpngU",q="_9xonc",z="_8LjH9",B="ezdek",u={container:P,circleCenterClassName:Z,icon:q,textHolder:z,button:B},U=({action:n,description:r})=>t.jsxs("div",{className:u.container,children:[t.jsx(I,{icon:w,height:144,linePattern:!1,iconProps:{width:80,height:80,className:u.icon},patternProps:{width:112,height:112},circleCenterClassName:u.circleCenterClassName}),t.jsxs("div",{className:u.textHolder,children:[t.jsx(C,{children:"Showing canceled"}),t.jsx("p",{children:r}),n&&t.jsx(f,{className:u.button,onClick:n,children:"Okay, got it"})]})]});U.propTypes={action:e.func,description:e.string};const v=n=>t.jsxs("svg",{...n,viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M58.667 41.537c0 7.464-6.053 13.518-13.518 13.518-7.468 0-13.518-6.054-13.518-13.518 0-7.467 6.05-13.517 13.518-13.517 7.465 0 13.518 6.05 13.518 13.517Z",fill:"#7FE3FF"}),t.jsx("path",{d:"M45.149 26.886c8.092 0 14.651 6.559 14.651 14.651 0 8.09-6.56 14.652-14.651 14.652-8.093 0-14.652-6.56-14.652-14.652 0-8.093 6.558-14.65 14.652-14.65Zm0 2.267c-6.842 0-12.385 5.543-12.385 12.384 0 6.84 5.544 12.385 12.385 12.385 6.838 0 12.384-5.546 12.384-12.385 0-6.84-5.544-12.384-12.384-12.384Zm6.376 6.007c.443.442.443 1.16 0 1.603l-4.776 4.773 4.776 4.774a1.133 1.133 0 1 1-1.602 1.603l-4.776-4.776-4.774 4.776a1.133 1.133 0 1 1-1.603-1.603l4.774-4.774-4.774-4.773a1.133 1.133 0 0 1 1.603-1.603l4.774 4.773 4.776-4.773a1.133 1.133 0 0 1 1.602 0ZM31.285 6.867c.626 0 1.134.507 1.134 1.133v1.476l6.398.001c1.96 0 3.519 1.662 3.519 3.678v10.973a1.133 1.133 0 0 1-2.267 0l-.001-3.324-33.603-.005.002 19.084c0 .795.577 1.41 1.252 1.41h20.808a1.133 1.133 0 0 1 0 2.267H7.72c-1.96 0-3.519-1.662-3.519-3.677V13.155c0-2.016 1.558-3.678 3.519-3.678l6.433-.001V8a1.133 1.133 0 1 1 2.267 0v1.476h13.733V8c0-.626.508-1.133 1.133-1.133Zm-17.133 4.876H7.719c-.675 0-1.252.617-1.252 1.412l-.002 5.377 33.603.005.001-5.382c0-.795-.577-1.411-1.252-1.411l-6.398-.001v1.59a1.133 1.133 0 0 1-2.267 0v-1.59H16.419v1.59a1.133 1.133 0 0 1-2.267 0v-1.59Z",fill:"#042238"})]});v.defaultProps={width:14,height:16,color:$.white};v.propTypes={width:e.number,height:e.number,color:e.string};const G=A.memo(v),F=({showing:n,role:r,appUrl:c})=>{const o=n.listing,l=p(n.start_at).utc(),d=p(n.end_at).utc(),g=L({short:!0,...o}),{address:h,unit:a,city:T,state:S,zip:x}=o,D=a?` ${a.trim()}`:"",y=h?`${h}${D}\\, ${T}\\, ${S} ${x}`:"";let j=r==="landlord"?`${c}owners/showings/scheduled?cancelShowingId=${n.id}`:`${c}showing/cancel?showingId=${n.id}`;const _=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//turbotenant.com
CALSCALE:GREGORIAN
BEGIN:VTIMEZONE
TZID:UTC
X-LIC-LOCATION:UTC
END:VTIMEZONE
BEGIN:VEVENT
DTSTAMP:${p().utc().format("YYYYMMDDTHHmmss[Z]")}
UID:${p().utc().format("YYYYMMDDTHHmmss[Z]")}/turbotenant.com
DTSTART;TZID=UTC:${l.format("YYYYMMDDTHHmmss")}
DTEND;TZID=UTC:${d.format("YYYYMMDDTHHmmss")}
SUMMARY:${g} Showing
DESCRIPTION:No longer able to attend? Cancel this showing ${j}
LOCATION:${y}
BEGIN:VALARM
ACTION:DISPLAY
DESCRIPTION:${g} Showing
TRIGGER:-PT2H
END:VALARM
END:VEVENT
END:VCALENDAR`,E=new Blob([_],{type:"text/calendar;charset=utf-8"}),R=window.URL.createObjectURL(E),N=document.createElement("a");N.href=R,N.setAttribute("download",`invite_${l.format("YYYYMMDDTHHmmss[Z]")}.ics`),document.body.appendChild(N),N.click()},W="AzLEX",Q="GosQD",J="cS0j3",K="_8ALRt",s={title:W,content:Q,margin:J,button:K},k=({showing:n,className:r,userLooking:c="renter",hideInstructions:o=!1,showCalendarButton:l=!1})=>{const{RENTERS_URL:d}=Y(),g=n?.instructions?.replaceAll(`
`,"<br>"),h=p(n.start_at).tz(n.listing?.zip_tz||M);let a;return a=c==="owner"?{type:"RENTER",first_name:n?.renters?.[0]?.first_name,last_name:n?.renters?.[0]?.last_name}:{type:"LANDLORD",first_name:n?.owner?.first_name,last_name:n?.owner?.last_name,company:n?.owner?.company},t.jsxs("div",{className:r,children:[t.jsxs("div",{className:s.title,children:[a.type,":"]}),t.jsxs("div",{className:m(s.content,s.margin),children:[a?.first_name," ",a?.last_name," ",a?.company?` - ${a?.company}`:""]}),t.jsx("div",{className:s.title,children:"WHERE:"}),t.jsxs("div",{className:s.content,children:[n?.listing?.address," ",n?.listing?.unit?`#${n?.listing?.unit}`:""," ",n?.listing?.room_name]}),t.jsxs("div",{className:m(s.content,s.margin),children:[n?.listing?.city," ",n?.listing?.state," ",n?.listing?.zip]}),t.jsx("div",{className:s.title,children:"WHEN:"}),t.jsx("div",{className:m(s.content),children:h.format("dddd, MMMM D, YYYY")}),t.jsxs("div",{className:m(s.content,s.margin),children:[H(n,n?.listing?.zip_tz),l&&t.jsx(f,{tertiary:!0,icon:O,onClick:()=>F({appUrl:d,showing:n,role:"renter"}),className:s.button,iconProps:{className:s.calendarIcon},children:"Add to Calendar"})]}),n?.instructions&&!o&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:s.title,children:"SHOWING INSTRUCTIONS:"}),t.jsx("div",{className:s.content,dangerouslySetInnerHTML:{__html:g}})]})]})};k.propTypes={userLooking:e.oneOf(["renter","owner"]),showing:e.shape({owner:e.shape({first_name:e.string.isRequired,last_name:e.string.isRequired,company:e.string}),renters:e.arrayOf(e.shape({first_name:e.string.isRequired,last_name:e.string.isRequired})),listing:e.shape({address:e.string.isRequired,city:e.string.isRequired,state:e.string.isRequired,zip:e.string.isRequired,room_name:e.string,unit:e.string,zip_tz:e.string,nickname:e.string}),start_at:e.string,end_at:e.string,instructions:e.string}).isRequired,className:e.string,hideInstructions:e.bool};const X="Ugyq5",ee="FtQED",ne="tAOY1",te="CGaas",se="L6mRc",ie="_50z2C",ae="_4JJkK",re="_0SYxC",oe="t2sq2",i={wrapper:X,icon:ee,title:ne,content:te,btnWrapper:se,noBtn:ie,yesBtn:ae,btn:re,btnLarge:oe},b=({onCancelShowing:n,onClose:r,showing:c,loading:o,userLooking:l,showDoNotCancelButton:d=!0})=>t.jsxs("div",{className:i.wrapper,children:[t.jsx(I,{icon:G,height:144,linePattern:!1,iconProps:{width:80,height:80,className:i.icon},patternProps:{width:112,height:112}}),t.jsxs("div",{className:i.content,children:[t.jsx(C,{className:i.title,children:"Are you sure you want to cancel? "}),t.jsx(k,{showing:c,className:i.info,userLooking:l,hideInstructions:!0}),t.jsxs("div",{className:i.btnWrapper,children:[d&&t.jsx(f,{className:m(i.btn,i.noBtn),onClick:r,secondary:!0,loading:o,children:"Don't cancel"}),t.jsx(f,{className:m(i.btn,i.yesBtn,{[i.btnLarge]:!d}),onClick:n,loading:o,children:"Cancel Showing"})]})]})]});b.defaultProps={onCancelShowing:()=>{},onClose:()=>{},showing:{}};b.propTypes={onCancelShowing:e.func,onClose:e.func,showing:e.object,loading:e.bool,userLooking:e.string,showDoNotCancelButton:e.bool};export{b as C,k as S,ue as _,U as a,F as b};
//# sourceMappingURL=CancelShowing-plllpxlS.js.map
