import{J as ie,j as e,I as _,k as y,s as K,P as t,r as E,a5 as k,p as J,b as le,N as T,c as ce,aq as de,t as ue,bi as O,B as pe,a9 as W,L as he,bh as me,G}from"./TownhouseColor--VjQBVqd.js";import{w as be}from"./withProps-B7NeQlU_.js";import{gg as fe,aJ as P,gX as ge,c as X,gz as ve,eE as z,aS as xe,c1 as je,gY as ye,dk as Ne,bC as Ce,b4 as Y,g7 as Fe,gZ as Ie,g_ as R,cD as Se,cK as Ae,j as Ee}from"./main-dumNSXg9.js";import{g as Le}from"./groupAndSortListings-CLoD2org.js";const Te="VRtC0",_e="n8CeS",Be="M-QQK",we="te-Fu",Pe="hfTJF",v={btn:Te,btnOptions:_e,menuItem:Be,isLead:we,icon:Pe},Z=({onInvite:s,onAddNewLead:l,onShowPreScreenerModal:n,screenType:i})=>{const o=i==="leads",[u,h]=ie.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsxs(fe,{className:v.btn,optionsClassName:o?v.btnOptions:"",id:"renters-actions",label:"ACTIONS",closeOnClick:!0,children:[e.jsx(P,{id:"invite-to-apply",className:y(v.menuItem,{[v.isLead]:o}),icon:_,iconProps:{className:v.icon,name:"request-info"},onClick:s,children:e.jsx("span",{children:"Invite to Apply"})}),e.jsx(P,{id:"screen-a-tenant",icon:_,className:y(v.menuItem,{[v.isLead]:o}),iconProps:{className:v.icon,name:"screen-tenant"},onClick:()=>h(!0),children:e.jsx("span",{children:"Screen a Tenant"})}),e.jsx(P,{id:"send_pre_screener",className:y(v.menuItem,{[v.isLead]:o}),icon:_,iconProps:{className:v.icon,name:"send"},onClick:()=>{n(),K("send_prescreener clicked",{location:"Actions dropdown",properties:"Leads on mobile"})},children:e.jsx("span",{children:"Send Pre-screener"})}),o&&e.jsx(P,{id:"add_new_lead",className:y(v.menuItem,{[v.isLead]:o}),icon:_,iconProps:{className:v.icon,name:"plus"},onClick:l,children:e.jsx("span",{children:"Add New Lead"})})]})}),e.jsx(ge,{open:u,onClose:()=>h(!1)})]})};Z.propTypes={onInvite:t.func,onAddNewLead:t.func,onShowPreScreenerModal:t.func,screenType:t.string};const $e="N0xeA",Oe="Peu9g",Re="_9i4vb",De="RQUJ3",ke="KbOx2",Me="E1GUA",qe="dfD3b",Ue="KUKfQ",Ve="QC5IL",We="x2XPf",He="pS2e3",F={wrapper:$e,button:Oe,icon:Re,selected:De,selectedInfo:ke,dropdown:Me,options:qe,actions:Ue,btnApply:Ve,btnClear:We,divider:He},Ge=[{id:"NO_EVALUATION",label:"No Evaluation"},{id:"DEFINITE",label:"Definite"},{id:"POSITIVE",label:"Positive"},{id:"NEGATIVE",label:"Negative"}],Q=({onApply:s,onClear:l,selectedOptions:n=[],onSelectionChange:i})=>{const[o,u]=E.useState(n),h=E.useRef(null),I=c=>{const g=o.includes(c)?o.filter(r=>r!==c):[...o,c];u(g),i?.(g)},j=()=>{s(o)},f=()=>{u([]),i?.([]),l?.()};return E.useEffect(()=>{const c=g=>{h.current&&!h.current.contains(g.target)&&s(o)};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[o]),e.jsxs("div",{className:F.dropdown,ref:h,children:[e.jsx("div",{className:F.options,children:Ge.map(c=>e.jsx(X,{id:c.id,label:c.label,checked:o.includes(c.id),input:{onChange:()=>I(c.id)},className:F.checkbox},c.id))}),e.jsx(ve,{className:F.divider,text:""}),e.jsxs("div",{className:F.actions,children:[e.jsx(k,{className:F.btnApply,onClick:j,children:"APPLY"}),e.jsx(P,{className:F.btnClear,onClick:f,children:"CLEAR FILTERS"})]})]})};Q.propTypes={onApply:t.func.isRequired,onClear:t.func.isRequired,selectedOptions:t.array,onSelectionChange:t.func};const ee=({onFilter:s,selected:l=[]})=>{const[n,i]=E.useState(!1),[o,u]=E.useState(l),h=()=>{i(!1),u([]),s([])},I=c=>{u(c),s(c),i(!1)},j=c=>{u(c)},f=n?o.length:l.length;return e.jsxs("div",{className:F.wrapper,children:[e.jsxs(k,{className:y(F.button,{[F.selected]:f>0}),tertiary:!0,icon:_,iconProps:{className:F.icon,name:"evaluation"},onClick:()=>{u(l),i(c=>!c)},children:["Evaluation",f>0&&e.jsx("span",{className:F.selectedInfo,children:f})]}),n&&e.jsx(Q,{selectedOptions:o,onApply:I,onClear:h,onSelectionChange:j})]})};ee.propTypes={onFilter:t.func.isRequired,selected:t.array};const ze="Sw1Os",Ye="UllOI",Ke="eUUTG",Je="_1iEj2",Xe="CnXVg",Ze="ZtXaV",Qe="yBz4B",et="DCJb9",tt="-gH5L",st="a9fdF",A={container:ze,search:Ye,secondGroupContainer:Ke,filters:Je,propertyFilter:Xe,evaluationFilter:Ze,thirdGroupContainer:Qe,leadStatusFilter:et,prescreenedFilter:tt,prescreenedLabel:st},te=({type:s,listings:l})=>{const n=J(),i=le(),[o,u]=E.useState({search:"",leadStatusFilter:"",propertyIdFilter:[],prescreened:"false",evaluationsFilter:[]});E.useEffect(()=>{const r=T.parse(i.search,{arrayFormat:"comma"});let p=[];Array.isArray(r.propertyIdFilter)?p=r.propertyIdFilter:r.propertyIdFilter&&(p=[r.propertyIdFilter]);let a=[];Array.isArray(r.evaluationsFilter)?a=r.evaluationsFilter:r.evaluationsFilter&&(a=[r.evaluationsFilter]),u({search:r.search||"",leadStatusFilter:r.leadStatusFilter||"",propertyIdFilter:p,prescreened:r.prescreened||"false",evaluationsFilter:a})},[i.search]);const h=z(r=>{const a={...T.parse(i.search),...r};delete a.page,n(`${i.pathname}?${T.stringify(a)}`,{replace:!0})},600),I=z(r=>{h({search:r})},600),j=r=>{const a={...T.parse(i.search,{arrayFormat:"comma"}),propertyIdFilter:r};delete a.page,n(`${i.pathname}?${T.stringify(a,{arrayFormat:"comma"})}`,{replace:!0})},f=r=>{const a={...T.parse(i.search,{arrayFormat:"comma"}),evaluationsFilter:r};delete a.page,n(`${i.pathname}?${T.stringify(a,{arrayFormat:"comma"})}`,{replace:!0})},c=({name:r,value:p})=>{h({[r]:p})},g=()=>[{label:"Any Status",value:""},...ye];return e.jsxs("div",{className:A.container,children:[e.jsx(xe,{id:"search",placeholder:"Search name, email or phone",className:A.search,icon:()=>e.jsx(_,{name:"search"}),defaultValue:o.search,onChange:r=>{const p=r.target.value.toLowerCase();I(p)}},o.search),e.jsxs("div",{className:A.secondGroupContainer,children:[s==="leads"&&e.jsxs("div",{className:A.thirdGroupContainer,children:[e.jsx(X,{id:"prescreened",name:"prescreened",label:"PRE-SCREENED",value:o.prescreened==="true",defaultChecked:o.prescreened==="true",className:A.prescreenedFilter,labelClassName:A.prescreenedLabel,onChange:()=>c({name:"prescreened",value:o.prescreened==="true"?"false":"true"})}),e.jsx(je,{id:"leadStatusFilter",label:"",disabled:!1,options:g(),input:{value:o.leadStatusFilter,onChange:r=>{c({name:"leadStatusFilter",value:r.target.value})}},className:A.leadStatusFilter})]}),e.jsxs("div",{className:A.filters,children:[e.jsx("div",{className:A.propertyFilter,children:e.jsx(Ne,{filterName:"Rentals",selectedIds:o.propertyIdFilter,hideSearch:l.length<5,properties:Le(l),onApplyFilters:j,loading:!1,placement:"right"})}),s==="leads"&&e.jsx("div",{className:A.evaluationFilter,children:e.jsx(ee,{filterName:"Evaluation",selected:o.evaluationsFilter,onFilter:f})})]})]})]})};te.propTypes={listings:t.array,type:t.string};const nt="qWRge",at="_6DZ6W",rt="wEBIb",ot="_7qHZa",it="y5Kma",lt="mzAww",ct="_97vp6",dt="XEf1g",ut="V36-P",pt="mxh5z",ht="nYtnv",mt="ONqDs",bt="pxijO",x={container:nt,removeBorder:at,contentHeader:rt,subTitle:ot,buttons:it,commonActionsMobile:lt,hideOnMobile:ct,hideOnDesktop:dt,filterButton:ut,description:pt,descriptionText:ht,toggleWithFiltersWrapperMobile:mt,buttonsMobile:bt},se=({archived:s,showFilters:l,type:n="leads",user:i,description:o,onAddNewLead:u,onShowPreScreenerModal:h,listings:I,selectedLeads:j,buttons:f=[],showFilter:c=!0,config:g})=>{const[r,p]=E.useState(!1),a=J(),N=ue(),$=()=>{const C=s?i?.[`has_archived_${n}`]??0:i?.[`${n}_count`]?.all??0,S=T.parse(N.search),w=Object.keys(S).some(V=>S[V]!=="");l&&C>0||w?p(!0):C||p(!1),l||p(!1)};E.useEffect(()=>{$()},[]),E.useEffect(()=>{$()},[s]);const M=()=>{a({pathname:`${g.PRIVATE_BASE_PATH}invite-renter`,search:"?status=INVITED"},{state:{redirectTo:N.pathname}})},q=()=>{a(N.pathname)},U=()=>{K(`${r?"hide":"show"}_filters clicked`,{location:"leads"});const C=r;p(!C),C&&q()},m=()=>{const C=i?.leads_count?.all??0,S=i?.has_archived_leads??0,w=i?.applicants_count??0,V=i?.has_archived_applicants??0,re=i?.tenants_count??0,oe=i?.has_archived_tenants??0;switch(n){case"leads":return s?S:C;case"applicants":return s?V:w;case"tenants":return s?oe:re}},b=()=>[c&&e.jsx(pe,{id:`show_filters_${n}`,className:x.filterButton,type:"secondary",icon:"filter",onClick:U,children:`${r?"Hide":"Show"} Filters`},`show-filters-${n}-button-key`)].concat(f),L=C=>{const S=s?"renters":"archived";if(n==="tenants"&&C==="archived"){a(`${g.PRIVATE_BASE_PATH}${S}/${n}/archived`);return}a(`${g.PRIVATE_BASE_PATH}${S}/${n}`)},B=()=>e.jsxs("span",{id:"tab-header-title",className:x.subTitle,children:[s&&n!=="tenants"&&"Archived ",s&&n==="tenants"&&"Past ",e.jsx("span",{className:y({[x.hideOnMobile]:s}),children:n})," ","(",m(),")"]}),H=(C=!1)=>{let S="active";return s&&(S=n==="tenants"?"past":"archived"),e.jsxs(O,{className:C?x.hideOnMobile:x.hideOnDesktop,value:S,onValueChange:w=>{L(w)},children:[e.jsx(O.Item,{value:"active","data-qa":"active-leads-button",children:"Active"}),e.jsx(O.Item,{value:n==="tenants"?"past":"archived","data-qa":n==="tenants"?"past-tenants-button":"archived-leads-button",children:n==="tenants"?"Past":"Archived"}),n==="tenants"&&e.jsx(O.Item,{value:"archived",children:"Archived"})]})},ae=j?.length>1;return e.jsxs("header",{className:y(x.container,{[x.removeBorder]:!o}),children:[e.jsxs("div",{className:x.contentHeader,children:[B(),H(!0),e.jsx("div",{className:x.buttons,children:b()}),!ae&&e.jsx("div",{className:x.commonActionsMobile,children:e.jsx(Z,{onInvite:M,onAddNewLead:u,onShowPreScreenerModal:h,screenType:n})})]}),e.jsxs("div",{className:x.description,children:[o&&e.jsx("p",{className:x.descriptionText,children:o}),e.jsxs("div",{className:x.toggleWithFiltersWrapperMobile,children:[H(),e.jsx("div",{className:x.buttonsMobile,children:b()})]})]}),r&&e.jsx(te,{listings:I,type:n})]})};se.propTypes={buttons:t.array,description:t.string,type:t.string,listings:t.array,showFilter:t.bool,showFilters:t.bool,archived:t.bool,onAddNewLead:t.func,onShowPreScreenerModal:t.func,config:t.object,user:t.object,selectedLeads:t.array};const Ht=ce(de,be(s=>({...s,showFilters:s.showFilters})),Ce({props:({ownProps:s,data:{loading:l,userData:n,networkStatus:i}})=>({loading:(s.loading||l)&&i!==6,user:n?.basicProfile?.data||{},...s})}))(se),ft="ocBmg",gt="n0AUb",vt="rWzrP",xt="amrlj",D={container:ft,title:gt,description:vt,resetFiltersButton:xt},jt=({onResetFilters:s,containerStyles:l,type:n})=>e.jsxs("div",{className:y(D.container,l),children:[e.jsxs("div",{id:"no-leads-search",className:D.title,children:["Not seeing any ",n," that fit that criteria"]}),e.jsx("div",{className:D.description,children:"Try searching or filtering by something else."}),e.jsx(k,{secondary:!0,className:D.resetFiltersButton,onClick:s,children:"Reset Filters"})]});jt.propTypes={onResetFilters:t.func,containerStyles:t.object,type:t.string};const yt="fU-mp",Nt="YVK1j",Ct="LMpnL",Ft="XNUHz",It="CCG68",St="AF-Hk",At="HB-Au",Et="nvSZz",Lt="ccUJa",Tt="EpqDd",_t="TxvzK",Bt="EO7zB",wt="PRNcR",Pt="NzXrm",$t="pk1BE",Ot="AVBF2",Rt="_0rZ0M",Dt="_4cJhf",kt="_3qpbq",d={card:yt,fullWidth:Nt,row:Ct,column:Ft,innerContent:It,paymentLabel:St,paid:At,button:Et,secondaryButtons:Lt,divButton:Tt,divButtonSeparator:_t,divButtonDisabled:Bt,badgeConter:wt,verifiedBadge:Pt,subTitle:$t,rightCol:Ot,subItem:Rt,label:Dt,content:kt},ne=({subtitle:s,subtitleTag:l,subItems:n,buttonLabel:i,buttonAction:o,itemIndex:u,nameLabelIdPrefix:h,buttonDisabled:I,buttonIdPrefix:j,secondaryButtons:f,counter:c,hasIdentityVerification:g,landlord_pays_label:r})=>{const p=()=>{const{label:a,paid:N}=r;return e.jsx(W,{className:y(d.paymentLabel,{[d.paid]:N}),weight:"bold",children:a})};return e.jsxs("div",{className:y(d.card,d.row,d.fullWidth),children:[e.jsxs("div",{className:y(d.column,d.innerContent,d.fullWidth),children:[e.jsx("div",{className:d.row,children:p()}),e.jsxs("div",{className:d.content,children:[e.jsxs("div",{className:y(d.fullWidth,d.fullWidthMargin),children:[s&&e.jsxs("div",{className:d.subTitle,children:[e.jsx("div",{"data-qa":Y(`${h}-${u}-label`),children:s}),l&&e.jsx(Fe,{small:!0,children:l}),typeof c=="number"&&c>0&&e.jsx(Ie,{value:c,className:d.badgeConter,status:"process"}),g&&e.jsxs("div",{className:d.verifiedBadge,children:[e.jsx(_,{name:"verified-filled",size:"sm",color:"#04bf8d"}),"VERIFIED"]})]}),e.jsx("div",{style:{marginTop:8},children:n&&n.map((a,N)=>e.jsxs("div",{className:d.subItem,children:[a.label&&e.jsx(W,{className:d.label,weight:"semi",size:"small",children:`${a.label}: `}),e.jsx(W,{className:"mt-0",children:a.text})]},typeof a.label=="string"&&a.label?a.label.replace(/\s+/g,"-").toLowerCase():`subitem-${N}`))})]}),e.jsx("div",{className:d.rightCol,children:e.jsx(k,{className:d.button,disabled:I,onClick:o,id:`${j}${u}`,"data-qa":Y(`${j}${u}-button`),children:i})})]})]}),f&&e.jsx("div",{className:d.secondaryButtons,children:f.map((a,N)=>e.jsx("div",{className:y(d.divButton,{[d.divButtonSeparator]:N>0,[d.divButtonDisabled]:a.disabled}),onClick:a.action,disabled:a.disabled,id:a.id,children:a.label},a.id||(typeof a.label=="string"&&a.label?a.label.replace(/\s+/g,"-").toLowerCase():`secondaryButton-${N}`)))})]})};ne.propTypes={subtitle:t.any,subtitleTag:t.string,counter:t.number,buttonLabel:t.string,buttonAction:t.func,buttonDisabled:t.bool,nameLabelIdPrefix:t.string,buttonIdPrefix:t.string,itemIndex:t.number,secondaryButtons:t.arrayOf(t.shape({label:t.any,action:t.func})),subItems:t.arrayOf(t.shape({label:t.oneOfType([t.string,t.object]),text:t.oneOfType([t.string,t.object]),style:t.object})),landlord_pays_label:t.shape({label:t.string,paid:t.bool}),hasIdentityVerification:t.bool};const Mt=({application:s,renter:l={},buttonLabel:n,buttonAction:i,buttonDisabled:o,itemIndex:u,secondaryButtons:h,isPastData:I,listing:j,loading:f=!1})=>{const c=()=>`${l.first_name} ${l.last_name}`,g=()=>s?.applying_as_tenant===!1,r=()=>{if(j?.id)return Se({listing:j,separator:", ",showRootLevel:!0});const m=G(s,"listing.address",""),b=G(s,"listing.unit",null);return Ae({short:!0,address:m,unit:b})},p=()=>{const m=s?.submitted_date||s?.created_at;return m?Ee(m):""},a=()=>R(l)?"tenant_name_":"applicant_name_",N=()=>R(l)?"view tenant":"view applicant",$=()=>R(l)?"view_tenant_":"view_applicant_",M=()=>!!s?.credit_check?.completed_verification?.passed,q=()=>{const m=[];if(R(l))I?[1].forEach(b=>m.push({label:"LEASE",text:b.title})):[1].forEach(b=>m.push({label:b.status==="UPCOMING"?"UPCOMING LEASE":"CURRENT LEASE",text:b.title}));else{const b=s.external?"(External Application)":"",L=s.external?"DATE REQUESTED":"DATE SUBMITTED";m.push({text:e.jsxs(e.Fragment,{children:[e.jsx("span",{"data-tip":!0,"data-for":`renter-key-tip-${l.id}`,"data-event":"mouseover touchstart","data-event-off":"mouseout touchend",children:r()}),e.jsx(me,{id:`renter-key-tip-${l.id}`,effect:"solid",place:"top",children:e.jsx("span",{children:r()})})]})}),m.push({label:L,text:e.jsxs(e.Fragment,{children:[p()," ",b]})})}return m},U=()=>{const m=s?.completed_at,b=s?.landlord_pays;let L="PAYABLE BY YOU",B=!1;return!m&&!b&&(L="PAYABLE BY RENTER"),m&&b&&(L="PAID BY YOU",B=!0),m&&!b&&(L="PAID BY RENTER",B=!0),{label:L,paid:B}};return e.jsx(he,{loading:f,children:e.jsx(ne,{subtitle:c(),subtitleTag:g()?"Co-Signer":"",subItems:q(),buttonLabel:n||N(),buttonAction:i,itemIndex:u,nameLabelIdPrefix:a(),buttonDisabled:o,buttonIdPrefix:$(),secondaryButtons:h,counter:l.unread_messages_count,hasIdentityVerification:M(),landlord_pays_label:U()})})};Mt.propTypes={application:t.object,renter:t.object,buttonLabel:t.string,buttonAction:t.func,buttonDisabled:t.bool,itemIndex:t.number,secondaryButtons:t.arrayOf(t.shape({label:t.oneOfType([t.string,t.object]),action:t.func,id:t.string})),isPastData:t.bool,listing:t.object,loading:t.bool};export{te as L,Mt as R,jt as S,Ht as a};
//# sourceMappingURL=RenterCard-KuJZjTmo.js.map
