import{j as t,k as u,ab as ee,a9 as te,P as e,G as T,i as $,I as L,o as se,p as re,r as D,H as ae,b0 as Y,b1 as oe,al as P,s as ie}from"./TownhouseColor--VjQBVqd.js";import{eJ as O,fu as U,fv as K,eH as V,e8 as z,fw as le,t as ne,bk as ce,A as de,fx as H,fd as F}from"./main-dumNSXg9.js";import{A as ue}from"./StyledTable-BvuuAZaN.js";const pe="_1FeY8",ge="KS4M-",me="FAlmT",M={container:pe,title:ge,description:me},he=({action:s,className:h,title:c,description:a,graphic:o,...d})=>t.jsxs("div",{className:u(M.container,h),...d,children:[t.jsx("img",{className:u(M.graphic),src:o,alt:c}),t.jsx(ee,{align:"center",className:u(M.title),children:c}),t.jsx(te,{align:"center",className:u(M.description),children:a}),s]});he.propTypes={className:e.string,graphic:e.string,title:e.string,action:e.node,description:e.oneOfType([e.string,e.node])};const _e="_4-VyZ",ve="GlL3t",xe="_2urzx",Ne="_7Djs6",be="mEyLi",we="dxMpU",fe="gXN2K",ye="Sb7-2",je="EvbdD",Se="kiffN",Re="IGE0Q",Ae="pan2q",i={item:_e,lulaDemoRow:ve,iconIndicator:xe,header:Ne,createdAt:be,tagWrapper:we,title:fe,requester:ye,propertyName:je,tag:Se,star:Re,starInactive:Ae},B=({maintenance:s,className:h,handleClick:c,toggleStarred:a,hidePropertyName:o,hideStarred:d,isRequester:p,showAutopilotTag:x})=>{const b=T(s,"created_at",""),w=$(b).format("MMM DD, YYYY"),f=o?"":O(s.listing),E=p?"You":s.requester.first_name,y=T(s,"resolved_at",null),N=s.status||(y?"resolved":"open"),_=!!s.starred,j=_?K:V;return t.jsxs("div",{className:u(h,i.item,{[i.lulaDemoRow]:s.id===I}),onClick:c,children:[x&&t.jsx("div",{className:i.iconIndicator,children:t.jsx(L,{name:"lightning-filled",color:"white",size:"sm"})}),t.jsxs("div",{className:i.header,children:[t.jsx("span",{className:i.createdAt,children:w}),t.jsxs("div",{className:i.tagWrapper,children:[t.jsx(U,{className:i.tag,type:N,sentToPartner:s.sent_to_partner}),!d&&t.jsx(j,{className:_?i.star:i.starInactive,onClick:q=>{q.stopPropagation(),a(s)}})]})]}),t.jsx("div",{className:i.title,children:s.title}),t.jsxs("div",{className:i.requester,children:["Requested by ",E]}),!o&&t.jsx("div",{className:i.propertyName,children:f})]})};B.propTypes={maintenance:e.shape({id:e.string,created_at:e.string,title:e.string,listing:e.shape({nickname:e.string,address:e.string,property_role:e.string,unit:e.string,room_name:e.string}),requester:e.shape({first_name:e.string}),sent_to_partner:e.bool,resolved_at:e.string,starred:e.bool,status:e.oneOf(Object.values(z))}).isRequired,className:e.string,handleClick:e.func.isRequired,toggleStarred:e.func.isRequired,hidePropertyName:e.bool,hideStarred:e.bool,isRequester:e.bool,showAutopilotTag:e.bool};const Ee="_9TTQD",De="_5zrCt",Me="HgcBZ",Te="RJXpP",ke="lRRFb",Ie="aMe1l",qe="g0doV",Ce="yox9N",g={tableRow:Ee,title:De,status:Me,lulaDemoRow:Te,iconIndicator:ke,tag:Ie,star:qe,starInactive:Ce},Q=({maintenance:s,className:h,handleClick:c,toggleStarred:a,hidePropertyName:o,hideStarred:d,showAutopilotTag:p})=>{const x=$(s?.created_at).format("MMM DD, YYYY"),b=o?"":O(s.listing),w=$(s?.last_activity||s?.created_at).format("MMM DD, YYYY hh:mma"),f=T(s,"resolved_at",null),E=T(s,"sent_to_partner",null),y=s.status||(f?"resolved":"open"),N=s.starred?K:V,_=s.sent_to_partner;return t.jsxs("tr",{className:u(h,g.tableRow,{[g.lulaDemoRow]:s.id===I}),onClick:c,"data-qa":`maintenance-request-id-${s.id}`,children:[t.jsxs("td",{children:[p&&t.jsx("div",{className:g.iconIndicator,children:t.jsx(L,{name:"lightning-filled",color:"white",size:"sm"})}),x]}),t.jsx("td",{className:g.title,children:s.title}),!o&&t.jsx("td",{children:b}),t.jsxs("td",{children:[_&&t.jsx("div",{children:t.jsx(le,{height:12,width:24})}),w]}),t.jsx("td",{className:g.status,children:t.jsx(U,{className:g.tag,type:y,sentToPartner:E})}),!d&&t.jsx("td",{children:t.jsx(N,{className:s.starred?g.star:g.starInactive,onClick:j=>{j.stopPropagation(),a(s)}})})]})};Q.propTypes={maintenance:e.shape({id:e.string,created_at:e.string,last_activity:e.string,title:e.string,sent_to_partner:e.bool,listing:e.shape({nickname:e.string,address:e.string,property_role:e.string,unit:e.string,room_name:e.string}),resolved_at:e.string,starred:e.bool,status:e.oneOf(Object.values(z))}).isRequired,className:e.string,handleClick:e.func.isRequired,toggleStarred:e.func.isRequired,hidePropertyName:e.bool,hideStarred:e.bool,showAutopilotTag:e.bool};const $e="_6I-86",Le="FYy1l",Oe="_5UwtL",Ye="-euBk",Pe="qw5V1",He="a8Kkb",Fe="EIJpb",m={tableWrapper:$e,table:Le,header:Oe,active:Ye,arrow:Pe,rotateArrow:He,statusHeader:Fe},We=[{label:"Date Added",value:"created_at",width:"100px"},{label:"Title",value:"title",width:"220px",getter:s=>s.title.toLowerCase()},{label:"Rental",value:"rental",getter:s=>O(s.listing),width:"150px"},{label:"Last Activity",value:"last_activity",width:"100px"},{label:"Status",value:"resolved_at",getter:null,width:"80px",className:m.statusHeader},{label:"",width:"25px"}],Ue=[{label:"Date Added",value:"created_at",width:"100px"},{label:"Title",value:"title",width:"220px",getter:s=>s.title.toLowerCase()},{label:"Last Activity",value:"last_activity",width:"100px"},{label:"Status",value:"resolved_at",getter:null,width:"80px",className:m.statusHeader}],W={value:"created_at",direction:"desc",getter:null},k=new Date;k.toISOString();k.setDate(k.getDate()+4);k.toISOString();const I="DEMO-MR",Ke=({maintenanceList:s,className:h,toggleStarred:c,isRenter:a})=>{const{PRIVATE_BASE_PATH:o,IS_OWNER:d}=se(),{user:p}=ne(),x=re(),[b,w]=D.useState([]),f=1080*60*60*1e3,y=ae()[Y.LULA_DEMO_MAINTENANCE_REQUEST],N=!1;s.length>1;const _=b;D.useEffect(()=>{y||oe(Y.LULA_DEMO_MAINTENANCE_REQUEST,new Date().toISOString(),f)},[]);const j=ce(),q=a?Ue:We,[v,G]=D.useReducer((r,l)=>l.value===r.value?r.direction==="desc"?{...r,direction:"asc"}:W:{value:l.value,getter:l.getter||null,direction:"desc"},W);D.useEffect(()=>{v.value&&w(de(s,v.getter||v.value,v.direction))},[v,s]);const J=({label:r,value:l,getter:S,width:n,className:R})=>l?t.jsxs("div",{className:u(R,m.header,{[m.active]:v.value===l}),style:{minWidth:n},onClick:()=>G({value:l,getter:S}),children:[r," ",t.jsx(L,{className:u(m.arrow,{[m.rotateArrow]:v.direction==="asc"}),name:"arrow-down"})]}):r;return j&&p?.id?t.jsxs(t.Fragment,{children:[t.jsx(P,{children:_.map(r=>{const l=r.id===I,S=`${o}maintenance/lula-demo`;let n;a?n=`/renters/maintenance/view/${r.id}`:n=l?S:`${o}maintenance/${r.id}/${r.listing.id}`;const R=()=>{x(n)},C=H(r.requester.id)===H(p.id)&&(d?r.requester.user_role===F.OWNER:r.requester.user_role===F.RENTER),A=(d||p?.is_manager_ops)&&r?.listing?.has_active_property_management_service;return t.jsx(B,{maintenance:r,handleClick:R,toggleStarred:c,hidePropertyName:a,hideStarred:a,isRequester:C,showAutopilotTag:A},r.id)})}),N]}):t.jsxs(t.Fragment,{children:[t.jsx(P,{className:m.tableWrapper,children:t.jsx(ue,{className:u(m.table,h),headers:q.map(J),children:_.map(r=>{const l=r.id===I,S=`${o}maintenance/lula-demo`;let n;a?n=`/renters/maintenance/view/${r.id}`:n=l?S:`${o}maintenance/${r.id}/${r.listing.id}`;const R=A=>{ie("maintenance_request clicked",{location:"Maintenance Index"});const X=A.metaKey||A.ctrlKey,Z=A.button===1;X||Z?window.open(n,"_blank"):x(n)},C=(d||p?.is_manager_ops)&&r?.listing?.has_active_property_management_service;return t.jsx(Q,{maintenance:r,handleClick:R,toggleStarred:c,hidePropertyName:a,hideStarred:a,showAutopilotTag:C},r.id)})})}),N]})};Ke.propTypes={maintenanceList:e.arrayOf(e.shape({})).isRequired,toggleStarred:e.func.isRequired,className:e.string,isRenter:e.bool};export{he as E,Ke as M};
//# sourceMappingURL=MaintenanceTable-Bi1F-3mS.js.map
