import{j as r,at as C,aa as p,a3 as x,ab as I,a9 as v,B as D,r as c,p as j,aV as b,aW as M,s as P}from"./TownhouseColor--VjQBVqd.js";import{K as a,S as F}from"./updateAccount-Be5-UCsl.js";import{cw as Y,bD as d,et as H}from"./main-dumNSXg9.js";const W="_65c6W",k="_22B9I",B="keLNU",T={cardContent:W,iconContainer:k,textContainer:B},w={[a.TRANSACTIONS_FETCHING]:"Review transactions",[a.TRANSACTIONS_READY]:"Review transactions",[a.TRANSACTIONS_ON_THE_WAY]:"Okay, got it"},y={[a.TRANSACTIONS_FETCHING]:"",[a.TRANSACTIONS_READY]:"sync-success-review-transactions",[a.TRANSACTIONS_ON_THE_WAY]:"sync-success-pending-transactions"};function z({cardKey:n,copies:t,isSyncingTransactions:e,titles:i,onClose:s}){return r.jsx(C,{isDismissible:!1,isKeyboardDismissDisabled:!0,isOpen:e,size:"xs",onClose:s,children:r.jsxs(C.Content,{className:T.cardContent,"data-qa":y[n],children:[n===a.TRANSACTIONS_READY?r.jsx(p,{style:{width:80,height:80}}):r.jsx("div",{className:T.iconContainer,children:r.jsx(x,{name:"hour-glass",size:"lg"})}),r.jsxs("div",{className:T.textContainer,children:[r.jsx(I,{children:i[n]}),r.jsx(v,{children:t[n]})]}),r.jsx(D,{loading:n===a.TRANSACTIONS_FETCHING,onClick:s,children:w[n]})]})})}function $({shouldStartTimer:n=!0,segmentLocation:t="Import Feed",onClose:e,updateShouldStartTimer:i}={}){const[s,o]=c.useState(a.TRANSACTIONS_FETCHING),[l,g]=c.useState(!0),m=j(),u=c.useRef(null),N=c.useRef(!1),[_,E]=Y(),f=_.get("isSyncingTransactions"),R=c.useMemo(()=>f==="1",[f]),O=b(),h=()=>{P(F[s],{location:t}),i?.(!1),E(""),s===a.TRANSACTIONS_READY?(d(["accounts","Account"],O.cache),m("/owners/accounting/transactions/all")):e?.()};return M(H,{variables:{},onData:S=>{S.data.data?.appStateUpdate.event==="PLAID_TRANSACTIONS_IMPORTED"&&S.data.data?.appStateUpdate.eventPayload.status==="COMPLETED"&&(N.current=!0,d(["transactions","Transaction"],S.client.cache))}}),c.useEffect(()=>{if(n)return u.current=setTimeout(()=>{o(N.current?a.TRANSACTIONS_READY:a.TRANSACTIONS_ON_THE_WAY),g(!1)},7e3),()=>{u.current&&(clearTimeout(u.current),u.current=null)}},[n]),{cardKey:s,isSyncingTransactions:R,isTransactionsSkeletonVisible:l,handleClose:h}}function J(n){if(n==="")return null;let t=String(n).trim();if(!t)return t;if(t=t.replace(/,/g,"").replace(/[^0-9.-]/g,""),!t||t==="-"||t==="."||t==="-.")return null;t=(t.startsWith("-")?"-":"")+t.replace(/-/g,""),t.startsWith(".")&&(t=`0${t}`),t.startsWith("-.")&&(t=t.replace("-.","-0."));const[i,...s]=t.split(".");t=i+(s.length?`.${s.join("").replace(/\./g,"")}`:"");const o=Number(t);return isFinite(o)?(Math.trunc(o*100)/100).toFixed(2):null}const A=(n,t,e)=>{const i=n.find(s=>s[e]?.toString()===t.toString());if(i)return i;for(const s of n)if(s.options){const o=s.options.find(l=>l[e]?.toString()===t.toString());if(o)return o}},Q=(n,t,e)=>({setScopeOption:c.useCallback(()=>t&&e?A(n,t,"propertyId"):e&&!t?A(n,e,"entityId"):t&&!e?A(n,t,"propertyId"):n.find(s=>s.value.toString()==="all"),[n,t,e])});export{z as T,$ as a,J as f,Q as u};
//# sourceMappingURL=useSetScopeBasedOnJournal-PP4Ts0v-.js.map
