import{j as e,at as r,ab as _,a9 as N,ar as A,p as y,r as T,v as S,B as j,P as p}from"./TownhouseColor--VjQBVqd.js";import{bS as P}from"./main-dumNSXg9.js";const C="eK8pG",O="T98Ut",h={modalBanner:C,doneButton:O},q=({isOpen:o,onClose:i})=>e.jsxs(r,{size:"sm",isOpen:o,onClose:i,children:[e.jsx(r.Banner,{className:h.modalBanner,type:"avatar",icon:"error",avatarColor:"error",decorativeElement:"lines",backgroundColor:"error-light",decorativeElementColor:"red"}),e.jsxs(r.Content,{children:[e.jsx(_,{children:"You have a lease agreement in progress for this listing"}),e.jsxs(N,{children:["If you want to choose a different applicant,"," ",e.jsx(A,{onClick:s=>{s.preventDefault(),P()},children:"contact support"}),"."]}),e.jsx(r.PrimaryAction,{className:h.doneButton,onClick:i,children:"DONE"})]})]}),b=`mutation acceptTPAApplicant($rentalRequestId: String!) {
  acceptTPAApplicant(input: { rentalRequestId: $rentalRequestId }) {
    lease {
      id
      __typename
      lease_agreement {
        id
      }
    }
    error
  }
}
`,I={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"acceptTPAApplicant"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"rentalRequestId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"acceptTPAApplicant"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"rentalRequestId"},value:{kind:"Variable",name:{kind:"Name",value:"rentalRequestId"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"lease"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lease_agreement"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:267,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:b}}},U=()=>{const o=y(),[i,s]=T.useState(!1),[v,{loading:f}]=S(I);return{tpaLoading:f,handleTenantPlacementScoring:({application:g,listing:l,onShowQualificationModal:c,onDirectAcceptance:n,onDefaultNavigation:t,profile:d})=>{const m=l?.has_active_tenant_placement_service,a=g?.qualification_score;return d?.is_manager_ops||d?.is_admin?(n&&n(),!0):m&&a?a>4.5?(n&&n(),!0):a>=3.9&&a<=4.5?(c&&c(),!0):!1:(t&&t(),!0)},executeTenantPlacementAcceptance:async(g,l,c=null,n=null)=>{try{const t=await v({variables:{rentalRequestId:g}}),d=t?.data?.acceptTPAApplicant,m=d?.error;if(m==="LEASE_ALREADY_OCCUPIED"){s(!0),n&&n(new Error(m));return}const a=d?.lease?.lease_agreement?.id,k=l?.id;if(a){const x=l?.has_active_tenant_placement_service&&!l?.has_active_property_management_service;o(x?`/onboarding/autopilot/switch-from-tp/offer/${k}?leaseAgreementId=${a}`:`/owners/tenant-placement/${k}/lease-agreement/ready-to-sign/${a}`),c&&c(t)}else console.warn("No lease agreement ID found in the response"),n&&n(new Error("No lease agreement ID found in the response"))}catch(t){console.error("Error accepting TPA applicant:",t),n&&n(t)}},LeaseOccupiedModalComponent:()=>e.jsx(q,{isOpen:i,onClose:()=>s(!1)})}},B="R-El1",R="NWtMF",w="gr7HU",u={content:B,title:R,continueButton:w},E=({isOpen:o,onClose:i,onContinue:s,recommendationCondition:v})=>{const f=()=>{s&&s(),i()};return e.jsxs(r,{isOpen:o,onClose:i,size:"md",className:u.container,children:[e.jsx(r.Banner,{type:"avatar",icon:"verify",size:"xxl",avatarColor:"#9f6ff1",decorativeElement:"lines",decorativeElementColor:"purple",backgroundColor:"purple"}),e.jsx(r.Content,{children:e.jsxs("div",{className:u.content,children:[e.jsx(_,{className:u.title,children:"This applicant set does not meet all of the requirements"}),e.jsx(N,{className:u.description,children:v}),e.jsx(j,{variant:"primary",onClick:f,className:u.continueButton,children:"Continue"})]})})]})};E.propTypes={isOpen:p.bool.isRequired,onClose:p.func.isRequired,onContinue:p.func.isRequired,recommendationCondition:p.string.isRequired};export{E as T,U as u};
//# sourceMappingURL=TenantPlacementQualificationModal-BUF34ok8.js.map
