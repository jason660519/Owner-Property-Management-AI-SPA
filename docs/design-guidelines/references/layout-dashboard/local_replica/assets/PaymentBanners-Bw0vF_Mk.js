import{r as R,j as e,L as ee,a5 as A,E as ne,P as m,a4 as te,o as w,p as T,am as D,k,ag as se}from"./TownhouseColor--VjQBVqd.js";import{t as M,d6 as oe,br as ae,bA as ie,gn as re,bn as ce,bo as de,a7 as le,a9 as ue,aa as me,d7 as pe,bW as ye,Z as be,bV as fe,aP as he,bX as _e,bY as ge,bU as xe,cc as Ne,a2 as Se}from"./main-dumNSXg9.js";import{F as U}from"./FraudStatusEnum-BCCs0giA.js";import{P as j}from"./PaymentStatusNotice-5am1IYJl.js";import{i as O,a as B}from"./isIdentityDocsRequired-B5TX9mAG.js";import{U as je,a as Ce,S as Ie}from"./UpdateStripeCompanyForm-B4YSI7cc.js";const Re=()=>{const{user:n={}}=M({polling:!1}),{premium_subscription_subscribed:s}=n;return{isNotPremium:R.useCallback(()=>!s,[n]),isPremium:R.useCallback(()=>s,[n])}},Ae="f3MoN",Ee="mks5P",Pe="Mpy82",ve="_4HPbL",qe="OgHHL",De="_9SRu8",ke="DX8Rf",we="BgrZo",u={banner:Ae,badge:Ee,iconContainer:Pe,content:ve,title:qe,btnContainer:De,learnMore:ke,closeContainer:we},L=({onLearnMoreClick:n,openLocation:s})=>{const{isNotPremium:t}=Re(),[i,{loading:o}]=oe(),r=ae(),c=()=>{n(),r(y=>e.jsx(le,{openLocation:s||me.PAYMENTS_OVERVIEW,copy:"rentPayments",onClose:y,singlePaymentAction:y,onSuccess:y,refetchQueries:[ne,ue],benefitsType:"payments"}))},p=async()=>{await i({variables:{bannerName:pe.PREMIUM_SUBSCRIPTION}})},d=t()?"Upgrade your Rent Collection Experience":"Connect Unlimited Bank Accounts, Get Your Money Faster.",l=t()?"Connect as many bank accounts as you need, receive your money twice as fast, waive ACH convenience fees for your tenants, and more when you become a Premium member.":"Connect as many bank accounts as you need. Receive your money in 2-4 business days. Become a Premium member today.";return e.jsx(ee,{loading:o,small:!0,children:e.jsxs("div",{id:"premium-subscription-payments-banner",className:u.banner,children:[e.jsx(ie,{className:u.badge,width:28.33,height:40}),e.jsx("div",{className:u.iconContainer,children:e.jsx(re,{})}),e.jsxs("div",{className:u.content,children:[e.jsx("h1",{className:u.title,children:d}),e.jsx("p",{children:l})]}),e.jsx("div",{className:u.btnContainer,children:e.jsx(A,{secondary:!0,onClick:c,className:u.learnMore,children:"Learn More"})}),e.jsx("div",{className:u.closeContainer,children:e.jsx(ce,{className:u.close,onClick:p,icon:de,iconProps:{width:14,height:14}})})]})})};L.propTypes={onLearnMoreClick:m.func,openLocation:m.string};L.defaultProps={onLearnMoreClick:()=>null};function Te(n){const s=n?.requirements||[],t=n?.future_requirements||[];return["PENDING_SSN","PENDING_ADDRESS","PENDING_TAX_ID","PENDING_COMPANY_ADDRESS","PENDING_INFORMATION","PENDING_COMPANY_OWNER","PENDING_VERIFICATION"].some(o=>t.includes(o)||s.includes(o))}function Me(n){const s=n?.requirements||[],t=n?.future_requirements||[],i=[...s,...t],o=O(i),r=B(i);return o||r}const Ue="OCXW4",Oe="i3vMo",Be="-zCkb",Le="PvgE5",S={modalContainer:Ue,title:Oe,buttonContainer:Be,btn:Le},F=({entity:n,open:s,onClose:t})=>{const[i]=ye(),o=be(),r=fe(),c=async b=>{try{const{company_name:a,company_phone:f,company_tax_id:h,first_name:g,last_name:x,full_ssn:_,dob:W,phone:G,address:E,unit:Y,city:H,state:z,zip:X,company_address:P,company_unit:Q,company_city:Z,company_state:J,company_zip:K}=b;let I,v;if(_){const q=await r.createToken("pii",{personal_id_number:_});I=q.token,v=q.error}if(v)return o("Something went wrong");const N={business_type:n.business_type.toUpperCase(),company_name:a,company_phone:f,company_tax_id:ge(h),first_name:g,last_name:x,dob:W,phone:G,entityId:n?.id};return I&&(N.id_number=I.id),_&&(N.ssn_last_4=_.substring(_.length-4,_.length)),E&&(N.individual_address={address:E,unit:Y,city:H,state:z,zip:X}),P&&(N.company_address={address:P,unit:Q,city:Z,state:J,zip:K}),(await i({variables:{data:N}}))?.data?.setupStripeAccount.ok?t():o("Something went wrong")}catch(a){const f=a?.graphQLErrors[0]?.message;o(f)}},p=n?.future_requirements||[],d=n?.requirements||[],y=!!d.length?"Additional Information Required":"Additional Information Required Soon";return e.jsxs(he,{className:S.modalContainer,open:s,onClose:t,children:[e.jsxs("h2",{className:S.title,children:[y,": ",n.entity_name]}),e.jsx(te,{onSubmit:c,subscription:{submitting:!0},decorators:[_e("Some fields are invalid. Please check the fields marked in red.")],children:({handleSubmit:b,submitting:a})=>e.jsxs("form",{onSubmit:b,children:[n?.business_type==="individual"?e.jsx(je,{entityName:n?.entity_name,informationNeeded:[...p,...d],title:"Owner Information"}):e.jsx(Ce,{informationNeeded:[...p,...d]}),e.jsxs("div",{className:S.buttonContainer,children:[e.jsx(A,{disabled:a,onClick:t,style:{marginRight:"12px"},className:S.btn,secondary:!0,children:"Cancel"}),e.jsx(A,{disabled:a,loading:a,type:"submit",className:S.btn,children:"Add"})]}),e.jsx(Ie,{})]})})]})};F.propTypes={entity:m.object,open:m.bool.isRequired,onClose:m.func.isRequired};const $=({entity:n})=>{const[s,t]=R.useState(!1),{PRIVATE_BASE_PATH:i}=w(),o=T();if(!n)return null;const{account:r}=n.payments_status||{},c=r==="ACCOUNT_REJECTED",p=Te(n),d=Me(n),l=()=>{const a=!!n?.requirements?.length,f=a?"Additional Information Required":"Additional Information Required Soon",h=a?"We need you to update and/or add more information to enable payments.":"Update and/or add more information by 05/03/2022 to continue collecting payments.";return{title:`${f}: ${n?.entity_name}`,titleId:"pending_info_title",description:e.jsx("span",{children:h}),actionLabel:"Add Information",onAction:()=>t(!0)}},y=()=>{const a=n?.requirements||[],f=n?.future_requirements||[],h=[...a,...f],g=O(h),x=B(h);if(g&&x)return"identity and bank";if(g&&!x)return"identity";if(!g&&x)return"bank"},b={additionalInfo:l(),docUploadBanner:{title:`More Verification Documents Requested: ${n.entity_name}`,titleId:"doc_upload_banner",description:e.jsxs("span",{children:["To collect payments, you must upload documents to verify your"," ",y(),"."]}),actionLabel:"Upload Documents",onAction:()=>o(`${i}payments/verify`,{state:{entityId:n.id}})},contactSupport:{title:"Contact TurboTenant Support",titleId:"pending_info_title",description:e.jsxs("span",{children:["Contact"," ",e.jsx("a",{href:"mailto:support@turbotenant.com",children:"support@turbotenant.com"})," ","to finish enabling payments."]})}};return e.jsxs("div",{"data-qa":"payment-notices-list-banner",children:[p&&e.jsx(j,{...b.additionalInfo}),d&&e.jsx(j,{...b.docUploadBanner}),c&&e.jsx(j,{...b.contactSupport}),e.jsx(xe,{children:e.jsx(F,{open:s,entity:n,onClose:()=>t(!1)})})]})};$.propTypes={match:D.object,entity:D.object};const Fe="_33i6F",$e="EonkN",Ve="aNKgW",We="_8p6Pm",C={notice:Fe,awaitingApprovalContainer:$e,badge:Ve,noticeStrong:We},V=({entity:n})=>n&&e.jsx($,{entity:n});function Ge({entities:n,fraudQueueStatus:s,isUnderInternalReview:t}){const i=T(),{PRIVATE_BASE_PATH:o}=w(),{muaUser:r}=M(),c=r?Ne(r):!1,p=r?.users_accounts?.find(l=>l.is_selected===!0)?.user_role,d=Se[p];return e.jsxs(e.Fragment,{children:[s===U.NEEDS_REVIEW&&e.jsx(j,{title:"You Can Collect Rent Online Soon!",badge:"PENDING VERIFICATION",badgeStyle:C.badge,containerStyle:k(C.awaitingApprovalContainer,C.notice),description:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Each landlord using rent payments goes through a quick identity verification check. It typically takes less than 48 hours. We’ll email you when it’s complete, or if we need additional information."}),e.jsx("div",{className:k(C.noticeStrong),children:"Once you’ve been verified, your charges will be sent to your tenants, and they can make payments."})]})}),t&&e.jsxs(e.Fragment,{children:[e.jsx(j,{title:"More Verification Documents Requested",titleId:"internal_review_banner",actionLabel:c?void 0:"Upload Documents",description:e.jsx("span",{children:"To collect payments, you must upload documents to verify your identity."}),onAction:c?void 0:()=>i(`${o}payments/internalreview`)}),c&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"16px"},children:e.jsx("button",{disabled:!0,"data-tooltip-id":"upload-documents-tooltip",style:{padding:"8px 16px",backgroundColor:"#f5f5f5",color:"#999",border:"1px solid #ddd",borderRadius:"4px",cursor:"not-allowed"},children:"Upload Documents"})}),e.jsx(se,{id:"upload-documents-tooltip",content:`Your role as ${d} does not allow you to perform this action.`})]})]}),n.map(l=>e.jsx(V,{entity:l},l.id))]})}V.propTypes={entity:m.object};Ge.propTypes={entities:m.array,fraudQueueStatus:m.oneOf(Object.values(U)),isUnderInternalReview:m.bool};export{Ge as P,L as R};
//# sourceMappingURL=PaymentBanners-Bw0vF_Mk.js.map
