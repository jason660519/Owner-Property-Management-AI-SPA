import{r as c,j as e,d as m,P as o,o as j,ab as R,a9 as E,a5 as k,h as N,a as M,T as D,k as C,ag as S}from"./TownhouseColor--VjQBVqd.js";import{P as L}from"./constants-BXPqLcbd.js";import{aP as u,by as $,bk as A,Z as H,aJ as Z,df as _}from"./main-dumNSXg9.js";const w=({height:t=40,width:n=40,color:s=m.babyBlue})=>e.jsxs("svg",{height:t,width:n,color:s,viewBox:"0 0 48 48",children:[e.jsx("path",{fill:s,fillRule:"evenodd",d:"M17.333 21.35h13.334c-2.223 2.223-4.445 3.334-6.667 3.334-2.222 0-4.444-1.111-6.667-3.333ZM14 38.018h5l5-5 5 5h5v5H14v-5Z",clipRule:"evenodd"}),e.jsx("path",{fill:m.text,fillRule:"evenodd",d:"M38.167 4.684a.833.833 0 0 1 .15 1.653l-.15.013h-2.501v7.5c0 4.91-3.035 9.113-7.33 10.835 4.295 1.72 7.33 5.922 7.33 10.832v7.5h2.5a.833.833 0 0 1 .15 1.653l-.15.014H9.834a.833.833 0 0 1-.15-1.654l.15-.013h2.5v-7.5c0-4.91 3.033-9.113 7.33-10.834a11.665 11.665 0 0 1-7.33-10.833v-7.5h-2.5a.833.833 0 0 1-.15-1.653l.15-.013h28.334ZM24 33.362l-4.41 4.41a.833.833 0 0 1-.459.235l-.131.01h-5v5h20v-5h-5a.834.834 0 0 1-.49-.159l-.1-.085L24 33.362Zm.375-7.838L24 25.517c-5.525 0-10 4.477-10 10v.833h4.657l4.754-4.756a.834.834 0 0 1 1.063-.096l.115.096 4.756 4.756H34v-.833c0-5.395-4.278-9.796-9.625-9.993Zm6.239-4.174h-13.23a9.96 9.96 0 0 0 6.24 2.493l.376.007c2.535 0 4.85-.944 6.614-2.5ZM34 6.35H14v7.5c0 2.178.695 4.193 1.876 5.835h16.246A9.954 9.954 0 0 0 34 13.85v-7.5Z",clipRule:"evenodd"})]});w.propTypes={color:o.string,width:o.number,height:o.number};const I=c.memo(w),Y="a4YDo",B="m--i-",g={container:Y,btn:B},x=({onClose:t,open:n})=>{const{IS_RENTER:s}=j();return e.jsxs(u,{onClose:t,open:n,size:"medium",children:[e.jsxs(u.Content,{noHeader:!0,className:g.container,children:[e.jsx($,{size:"larger",icon:e.jsx(I,{color:m.warning,width:80,height:80})}),e.jsx(R,{className:"mt-16",size:!s&&"larger",children:s?"Your payment is still processing":"Your tenantâ€™s payment is still processing"}),e.jsx(E,{size:"large",children:"Please check back later to download the receipt once the transaction is complete."})]}),e.jsx(u.Footer,{children:e.jsx(k,{className:g.btn,onClick:t,children:"Okay, got it"})})]})};x.propTypes={onClose:o.func.isRequired,open:o.bool};const O=async(t,n="RENT_PAYMENT")=>{const{API_URL:s}=N(),d=`${s}/public/owners/receipt/${t}/${n||"RENT_PAYMENT"}?token=${M()}`,p=atob(t)?.split(":")?.[1],l=await D(d);if(!l.ok)throw new Error((await l.json())?.message||l.statusText);const h=await l.blob(),i=URL.createObjectURL(h),a=document.createElement("a");a.download=`Receipt #${p}`,a.href=i,document.body.appendChild(a),a.click(),document.body.removeChild(a)},z="_4lMXD",F="fQz28",U="_6Rmxq",q="wxdG7",r={button:z,label:F,hideLabelOnDesktop:U,full:q},G=({id:t,tooltip:n="Download receipt",hideLabelOnDesktop:s=!0,showFullButton:d=!1,type:p="RENT_PAYMENT",className:l,paymentStatus:h})=>{const[i,a]=c.useState(!1),f=A(),y=H(),[T,b]=c.useState(!1),v=c.useCallback(async()=>{if(h===L.PENDING)return b(!0);try{a(!0),await O(t,p)}catch(P){y(`Failed to download receipt. ${P.message}`)}finally{a(!1)}},[t]);return e.jsxs(e.Fragment,{children:[e.jsx(Z,{icon:_,className:C(r.button,{[r.full]:d,[r.hideLabelOnDesktop]:s,[l]:!!l}),onClick:v,"data-tooltip-id":`download-tooltip-${t}`,"data-tooltip-place":"bottom","data-tooltip-hidden":f,"data-tooltip-position-strategy":"fixed",disabled:i,loading:i,"data-qa":`download-receipt-button-${t}`,children:e.jsx("span",{className:r.label,children:"RECEIPT"})}),e.jsx(S,{id:`download-tooltip-${t}`,children:n}),e.jsx(x,{onClose:()=>{b(!1)},open:T})]})};G.propTypes={id:o.string.isRequired,tooltip:o.string,hideLabelOnDesktop:o.bool,showFullButton:o.bool,type:o.string,className:o.string,paymentStatus:o.string};export{G as D,x as P,O as d};
//# sourceMappingURL=DownloadPaymentReceiptButton-CiiUlZG1.js.map
