import{an as G,r as l,o as v,u as F,v as H,i as o,ao as Y,j as e,k as q,s as u,ap as z,P as i}from"./TownhouseColor--VjQBVqd.js";import{I}from"./local_storage_keys-C0iXcoJh.js";import{t as K,bp as Q,bq as V,br as Z,Z as $,a9 as J,bs as W,bt as X,aa as ee,bu as se,bv as te,bw as ne,bx as ae}from"./main-dumNSXg9.js";import{P as oe}from"./PremiumSubscriptionBanner-fx5JsfcE.js";const ie="_4BpgD",re="sI6gR",ce="TVeuG",le="kLFjH",ue="-jcBx",de="L0vzd",me="uj3yl",pe="_8PH35",s={blueBolder:ie,link:re,banner:ce,modal:le,title:ue,actions:de,text:me,pulse:pe},he=({className:_,title:f,hideIcon:S,segmentLocation:r,segmentProperties:c})=>{const t=G(I),{user:n,loading:d,muaUser:E}=K({},!1),[P,m]=l.useState(!1),p=v(),{PREMIUM_PLAN_ID_DEFAULT:x}=p??{},N=Q(V(n))??x,k=Z(),y=$(),{data:B}=F(J),[j]=H(W),T=X({openLocation:ee.INCOME_INSIGHT_BANNER,benefitsType:"payments",copy:"incomeinsights",segmentLocation:r,segmentProperties:c}),M=!!t&&o(t).isSameOrBefore(o()),h=n?.premium_subscription_subscribed,g=n?.plan_name===p.GBB_PRO_YEARLY_119_PLAN_ID,A=n?.premium_price_signup,{premiumPlusSubscriptionInfo:C}=B?.userData?.settingsAndBilling?.data||{},w=C?.current?.current_period_end,[L,a]=l.useState(M||h);l.useEffect(()=>{if(!t||o(t).isSameOrBefore(o()))return Y(I),a(!1);a(!0)},[t]),l.useEffect(()=>{h&&!g&&!d&&a(!0)},[h,d]);const O=async()=>{try{await j({variables:{newPlanId:N,referral:"Billing Upgrade Modal",action:"Upgrade"}}),m(!1),a(!0),k(b=>e.jsx(ae,{open:!0,showCheckMark:!0,showAnimation:!1,title:"Upgrade complete!",primaryLabel:"Sounds Good",primaryAction:()=>{u("sounds_good clicked",{location:"Plan Upgraded Success Modal"}),b()},className:s.modal,classNameTitle:s.title,classNameActions:s.actions,children:e.jsx("p",{className:s.text,children:"Enjoy access to all the features that come with your new plan."})}))}catch(b){console.log(b),y("Failed to upgrade to premium")}},U=()=>{u("income_insights_dismiss clicked",{location:r,properties:c}),z(I,o().add(1,"month")),a(!0)},D=()=>{u("get_income_insights clicked",{location:r,properties:c}),g?m(!0):T()},R=()=>{u("link clicked",{location:r,properties:c})};return n?.packageFeatures?.includes(se.INCOME_INSIGHTS)||L||d||p.IS_RENTER?null:e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:q(s.banner,_),icon:te,iconProps:{width:54,height:54},title:f||e.jsxs("span",{children:["Get to the ",e.jsx("span",{className:s.blueBolder,children:"truth"})," about your applicantâ€™s income"," ",e.jsx("span",{className:s.blueBolder,children:"faster"}),"."]}),text:e.jsxs("span",{children:["Premium members get ",e.jsx("i",{children:"Income Analysis"})," included with screening reports. It checks the accuracy of self-reported income within minutes!"," ",e.jsxs("a",{className:s.link,href:"http://support.turbotenant.com/en/articles/6539674-what-is-income-insights",target:"_blank",rel:"noopener noreferrer",onClick:R,children:["Learn more about ",e.jsx("i",{children:"Income Analysis"}),"."]})]}),actionLabel:"GET INCOME ANALYSIS",onClose:U,onClick:D,hideIcon:S}),P&&g&&e.jsx(ne,{open:!0,onClose:()=>m(!1),onUpgrade:()=>O(),premiumPrice:A,subscriptionEnd:w,location:"leads",muaUser:E})]})};he.propTypes={className:i.string,title:i.any,hideIcon:i.bool,segmentLocation:i.string,segmentProperties:i.string};export{he as I};
//# sourceMappingURL=IncomeInsightsBanner-Clh1dFmS.js.map
