import{h as d,T as i,a as l,r as S,i as b,j as r,a5 as m,P as n}from"./TownhouseColor--VjQBVqd.js";import{Z as P,aP as g}from"./main-dumNSXg9.js";const B=async t=>{const{API_URL:o}=d();return await(await i(`${o}/reports/download-payments`,{method:"POST",headers:{authorization:l(),"Content-Type":"application/json"},body:t?JSON.stringify(t):null})).text()},V=async t=>{const{API_URL:o}=d();return await(await i(`${o}/reports/download-expenses`,{method:"POST",headers:{authorization:l(),"Content-Type":"application/json"},body:t?JSON.stringify(t):null})).text()},D=async t=>{const{API_URL:o}=d();return await(await i(`${o}/reports/download-deposits`,{method:"POST",headers:{authorization:l(),"Content-Type":"application/json"},body:t?JSON.stringify(t):null})).text()},j="kbBPO",E="uE5me",u={modal:j,modalButtonRow:E},R=({open:t,onClose:o,fetchCSV:e,filePrefix:a,children:h})=>{const[y,p]=S.useState(!1),x=P(),w=`${a||"expenses"}_${b().format("YYYY-MM-DD-HHmmss")}.csv`,f=c=>{const T=new Blob([c],{type:"text/csv"}),s=document.createElement("a");s.href=URL.createObjectURL(T),s.download=w,document.body.appendChild(s),s.click(),document.body.removeChild(s)},C=async()=>{if(e){try{p(!0);const c=await e();f(c),o()}catch{x("An error has occurred")}p(!1)}};return r.jsxs(g,{open:t,className:u.modal,onClose:o,children:[h,r.jsxs("div",{className:u.modalButtonRow,children:[r.jsx(m,{onClick:o,secondary:!0,children:"Cancel"}),r.jsx(m,{onClick:C,loading:y,children:"Download"})]})]})};R.propTypes={onClose:n.func,open:n.bool,children:n.node,fetchCSV:n.func,filePrefix:n.string};export{R as E,B as a,V as b,D as f};
//# sourceMappingURL=ExportCSVModal-0PisjjZp.js.map
