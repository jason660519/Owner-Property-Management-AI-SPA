import{r as C,s as N,j as e,a4 as ae,ae as se,I as R,a9 as I,af as te,a5 as L,av as H,P as a,k as x,d as ne}from"./TownhouseColor--VjQBVqd.js";import{aP as h,aL as O,bn as le,c as S}from"./main-dumNSXg9.js";import{C as z}from"./CheckboxGroupFields-htUp2YLH.js";import{E as oe}from"./EmptyState-DMj64euZ.js";const ie="ckT1m",ce="mS1R6",re="ojaLr",de="AQStD",me="_297a0",pe="vcz6Y",he="UoV-m",ue="_8blQm",xe="_9s7qR",be="_3go0o",ge="lAO8T",je="gp8zS",ye="SC3PI",s={modalHeader:ie,modalBody:ce,modalFooter:re,availabilityLink:de,formGroup:me,addLeadButton:pe,placeholderText:he,cancelButton:ue,continueButton:xe,form:be,formParagraph:ge,label:je,selectAllCheckbox:ye},ve=({open:r,onClose:d,onBack:m,selectedProperty:_,onSubmit:A,isSubmitting:i=!1,onAddLead:b,secondaryButtonText:c,secondaryButtonEvent:B,loadSegmentEventLocation:$,loadEventFired:T,onLoadEventFired:U,newlyAddedLeadId:g,leads:E,applicants:F,loading:j,leadsLoading:P,applicantsLoading:D})=>{const[p,u]=C.useState([]),[y,v]=C.useState([]);C.useEffect(()=>{r&&!T&&(N("invite_to_showing_renters_modal loaded",{location:$}),U(),u([]),v([]))},[r,T]),C.useEffect(()=>{g&&!p.includes(g)&&u(o=>[...o,g])},[g,p]);const w=o=>o.map(t=>{let n;switch(t.__typename){case"RentalRequest":n=t.renter?.id;break;case"Lead":n=t.id;break;default:throw new Error(`Unknown option type: ${t.__typename}`)}return{value:n,label:`${t.first_name} ${t.last_name}`}}).sort((t,n)=>t.label.localeCompare(n.label)),K=()=>{N("add_lead clicked",{location:"Invite to showing modal"}),b()},V=()=>{A({leads:p,applicants:y})},Q=()=>{N(B,{location:"Invite to showing modal"}),m?m():d()},Y=()=>{N("send_invite clicked",{location:"Invite to showing modal"})},Z=j||i||p.length===0&&y.length===0,W=E?.length===0&&F?.length===0,k=w(E),f=w(F),J=(o,t)=>{if(o.target.checked){const n=k.map(q=>q.value);t.change("leads",n),u(n)}else t.change("leads",[]),u([])},X=(o,t)=>{if(o.target.checked){const n=f.map(q=>q.value);t.change("applicants",n),v(n)}else t.change("applicants",[]),v([])},ee=o=>j&&W?e.jsx(I,{className:s.placeholderText,children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:s.formGroup,children:[!j&&W?e.jsx(I,{className:s.placeholderText,children:"You don't have any renters yet."}):e.jsxs(e.Fragment,{children:[e.jsx(H,{className:s.label,htmlFor:"leads",children:"Leads"}),k.length>1&&e.jsx(S,{label:"Select all",className:s.selectAllCheckbox,checked:p.length===k.length,onChange:t=>J(t,o)}),e.jsx(z,{id:"leads",name:"leads",options:k,disabled:P||i,checkboxesClassName:s.checkboxes,checkboxProps:{className:s.checkboxChecked,labelCheckedClassName:s.labelChecked}})]}),e.jsx(L,{tertiary:!0,className:s.addLeadButton,icon:()=>e.jsx(R,{name:"plus"}),disabled:P||i,onClick:K,children:"Add Lead"})]}),!j&&F?.length>0&&e.jsxs("div",{className:s.formGroup,children:[e.jsx(H,{className:s.label,htmlFor:"applicants",children:"Applicants"}),f.length>1&&e.jsx(S,{label:"Select all",className:s.selectAllCheckbox,checked:y.length===f.length,onChange:t=>X(t,o)}),e.jsx(z,{id:"applicants",name:"applicants",options:f,disabled:D||i,checkboxesClassName:s.checkboxes,checkboxProps:{className:s.checkboxChecked,labelCheckedClassName:s.labelChecked}})]})]});return e.jsx(h,{open:r,size:"small",children:e.jsx(ae,{onSubmit:V,initialValues:{leads:p,applicants:y},subscription:{values:!0},children:({handleSubmit:o,form:t})=>e.jsxs("form",{className:s.form,onSubmit:o,children:[e.jsx(O,{name:"leads",children:n=>{u(n)}}),e.jsx(O,{name:"applicants",children:n=>{v(n)}}),e.jsxs(h.Header,{className:s.modalHeader,children:[e.jsx(se,{children:"Invite to Showing"}),e.jsx(le,{tabIndex:"1",icon:()=>e.jsx(R,{name:"close"}),iconProps:{width:24,height:24},onClick:d})]}),e.jsxs(h.Content,{noHeader:!0,noFooter:!0,className:s.modalBody,children:[e.jsxs(I,{className:s.formParagraph,children:["We'll send a text or email with a link to schedule a showing based on"," ",e.jsx(te,{to:"/owners/showings/availability",className:s.availabilityLink,onClick:d,children:"your availability"})," ","for ",_?.address||"your property","."]}),ee(t)]}),e.jsxs(h.Footer,{className:s.modalFooter,children:[e.jsx(L,{secondary:!0,className:s.cancelButton,disabled:i,onClick:Q,children:c}),e.jsx(L,{type:"submit",className:s.continueButton,loading:i,disabled:Z,onClick:Y,children:"SEND INVITE"})]})]})})})};ve.propTypes={onClose:a.func.isRequired,open:a.bool.isRequired,onBack:a.func,selectedProperty:a.shape({id:a.string.isRequired,address:a.string.isRequired,parent_id:a.string,parent_unit_id:a.string,unit_id:a.string,property_id:a.string}),onSubmit:a.func.isRequired,isSubmitting:a.bool,onAddLead:a.func,secondaryButtonText:a.string.isRequired,secondaryButtonEvent:a.string.isRequired,loadSegmentEventLocation:a.string.isRequired,loadEventFired:a.bool.isRequired,onLoadEventFired:a.func.isRequired,newlyAddedLeadId:a.string,leads:a.array,applicants:a.array,loading:a.bool,leadsLoading:a.bool,applicantsLoading:a.bool};const ke="jUKeC",fe="-mWuv",M={modalContent:ke,addAvailability:fe},Ce=({open:r,onClose:d,handleAddAvailability:m})=>e.jsx(h,{open:r,size:"small",onClose:d,children:e.jsx(h.Content,{noHeader:!0,noFooter:!0,className:M.modalContent,children:e.jsx(oe,{title:"No upcoming availability",description:`Renters can schedule showings based on your availability. First set your
            availability and then invite renters to select their preferred time.`,footer:e.jsx(L,{className:M.addAvailability,onClick:m,children:"Okay, Got it"})})})});Ce.propTypes={open:a.bool.isRequired,onClose:a.func.isRequired,handleAddAvailability:a.func.isRequired};const Ne="cPp8b",Le="ENKnR",Re="FUihz",_e="dyKhn",Ae="-HdZJ",Be="Ev9cZ",l={iconWrapper:Ne,container:Le,image:Re,editWrapper:_e,active:Ae,incompleteListingContainer:Be},Fe=()=>e.jsx(R,{name:"properties",size:"xl"}),G=()=>e.jsx(R,{name:"edit",size:"xl"}),qe=({className:r,image:d,icon:m,iconProps:_,rotation:A=0,onEditClick:i,showPencil:b,onSetShowPencil:c,isIncompleteListing:B})=>B?e.jsx("div",{className:x(l.container,l.incompleteListingContainer),children:e.jsx("div",{className:l.incompleteListing,children:e.jsx(Fe,{})})}):d?e.jsxs("div",{className:x(l.container,r),onMouseEnter:()=>c&&c(!0),onMouseLeave:()=>c&&c(!1),children:[e.jsx("img",{className:l.image,src:d,alt:"cover-image",style:{transform:`rotate(${-90*A}deg)`}}),i&&e.jsx("div",{className:x(l.editWrapper,{[l.active]:b}),onClick:i,children:e.jsx(G,{className:l.edit,color:ne.primary,height:20,width:20})})]}):m?e.jsxs("div",{className:x(l.container,l.iconWrapper,r),onMouseEnter:()=>c&&c(!0),onMouseLeave:()=>c&&c(!1),children:[e.jsx(m,{className:l.icon,..._}),i&&e.jsx("div",{className:x(l.editWrapper,{[l.active]:b}),onClick:i,children:e.jsx(G,{className:l.edit,height:20,width:20})})]}):null;qe.propTypes={image:a.string,icon:a.oneOfType([a.node,a.object]),iconProps:a.object,className:a.string,rotation:a.number,onEditClick:a.func,showPencil:a.bool,onSetShowPencil:a.func,isIncompleteListing:a.bool};export{ve as I,Ce as N,qe as P};
//# sourceMappingURL=PropertyIndexCardImage-BW_Sz-Gb.js.map
