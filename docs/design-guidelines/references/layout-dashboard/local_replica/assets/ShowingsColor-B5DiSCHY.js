import{j as e,a5 as ne,P as s,G as w,a4 as te,k as P,F as y,B as ie,r as j,v as oe,E as re,o as le,L as ce,U as de,V as me,d as pe}from"./TownhouseColor--VjQBVqd.js";import{u as ue,n as N,l as S,v as q,o as f,aK as he,p as be,b8 as ye,b6 as fe,cV as ge,bi as xe,d8 as ve,b3 as Se,aP as je,bn as Ne,bo as Pe,d3 as Te,d4 as Ce,eM as Me,fT as Ee,t as Le,be as _e,bf as ke,d1 as we,d2 as Ie}from"./main-dumNSXg9.js";import{_ as Re}from"./AddNewLeadModal-Crz9YkrQ.js";import{P as Fe}from"./PreScreenerPromotionModal-CE97egSI.js";import{c as Oe}from"./index-zSWA2t_E.js";const _={BOTH:"BOTH",EMAIL:"EMAIL",SMS:"SMS"},Ve="tbzY0",Ze="acd9l",He="hSY1q",k={copyHolder:Ve,copyInput:Ze,copyAction:He},I=({copyText:i,onCopyLinkClick:o})=>{const t=ue();return e.jsxs("div",{className:k.copyHolder,children:[e.jsx(N,{input:{value:i,readOnly:"readonly",onFocus:a=>a.target.select()},id:"preScreenerLink",name:"preScreenerLink",className:k.copyInput}),e.jsx(ne,{className:k.copyAction,onClick:()=>{Oe(i),t("Link copied."),o()},children:"Copy Link"})]})};I.propTypes={copyText:s.string.isRequired,onCopyLinkClick:s.func};I.defaultProps={onCopyLinkClick:()=>null};const qe="_2rvDi",Be="h1HaA",$e="PfC-c",Ae="_1PbE6",Ue="wQDxE",De="YkV3G",Qe="_2mmR2",Ye="rlyu6",n={row:qe,form:Be,title:$e,name:Ae,email:Ue,phone:De,submit:Qe,address:Ye},We="new-property",B=({className:i,onSubmit:o,listings:t,initialValues:a={},onSubmitButtonClick:m=()=>null})=>{const p=t.length===1,u=w(t,"[0].id",{})||{};return e.jsx(te,{onSubmit:o,subscription:{submitting:!0,values:!0},initialValues:{...a,inviteType:"both"},children:({handleSubmit:h,submitting:b,values:r,form:c})=>e.jsxs("form",{onSubmit:h,className:P(n.form,i),children:[e.jsx("h3",{className:n.title,children:"Send the Pre-Screener"}),e.jsxs("div",{className:n.row,children:[e.jsx(y,{label:"First Name",component:N,name:"first_name",id:"first_name",className:n.name,validate:S(f,q)}),e.jsx(y,{label:"Last Name",component:N,name:"last_name",id:"last_name",className:n.name,validate:S(f,q)})]}),e.jsx("div",{className:P(n.row),children:e.jsx(y,{component:he,id:"inviteType",name:"inviteType",label:"Send the Pre-Screener By:",radioRowClassName:n.radioOption,options:[{label:"Email & Text",value:"both",id:"rb_both"},{label:"Email",value:"email",id:"rb_email"},{label:"Text",value:"text",id:"rb_text"}],validate:f})}),e.jsxs("div",{className:n.row,children:[(r.inviteType==="email"||r.inviteType==="both")&&e.jsx(y,{label:"Renter's Email",component:N,type:"email",name:"email",id:"email",className:n.email,validate:S(be,f),inputProps:{autoComplete:"username"}}),(r.inviteType==="text"||r.inviteType==="both")&&e.jsx(y,{label:"Phone",component:ye,name:"phone",id:"phone",validate:S(fe,f),className:n.phone})]}),e.jsx(ge,{form:c,fieldName:"email",className:"mb-16"}),e.jsx(xe,{label:"Property Interested In",properties:t,required:!0,...p&&{selectedValue:u}}),r.listingId===We&&e.jsx(ve,{className:n.address,streetAddressInputProps:{label:"Street Address"},fieldNames:{city:"listingCity",unit:"listingUnit",address:"listingAddress",zip:"listingZip",state:"listingState"}}),e.jsx(Se,{}),e.jsx(ie,{className:n.submit,htmlType:"submit",loading:b,id:"leadIntake_submit",onClick:()=>{m()},width:232,children:"Send Pre-screener"})]})})};B.propTypes={className:s.string,onSubmit:s.func,initialValues:s.object,listings:s.array,onSubmitButtonClick:s.func};const ze="maPaS",Ge="YhtgW",Ke="GT3zc",Je="jnOgQ",Xe="qPThf",es="y2-Eg",l={modalContainer:ze,modal:Ge,title:Ke,text:Je,close:Xe,break:"hdi23",or:es},$=({className:i,containerClassName:o,open:t,onClose:a,initialValues:m,onCopyLinkClick:p,onSubmitButtonClick:u,preScreenerLink:h,listings:b,onSubmit:r,hideShareLink:c})=>e.jsxs(je,{open:t,className:P(l.modal,i),containerClassName:P(l.modalContainer,o),onClose:a,children:[e.jsx(Ne,{icon:Pe,onClick:a,className:l.close}),!c&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"headerContainer",children:[e.jsx("h2",{className:l.title,children:"Share the Pre-Screener Link"}),e.jsx("p",{className:l.text,children:"Qualify leads not in TurboTenant by having them fill out the pre-screener. Theyâ€™ll be added to TurboTenant when they do."})]}),e.jsx(I,{copyText:h,onCopyLinkClick:p}),e.jsx("div",{className:l.break,children:e.jsx("p",{className:l.or,children:"Or"})})]}),e.jsx(B,{onClose:a,listings:b,onSubmit:r,onSubmitButtonClick:u,initialValues:m})]});$.propTypes={className:s.string,containerClassName:s.string,open:s.bool,onClose:s.func,initialValues:s.object,onCopyLinkClick:s.func,onSubmitButtonClick:s.func,preScreenerLink:s.string,listings:s.array,onSubmit:s.func,hideShareLink:s.bool};const ss="new-property",as=({className:i,containerClassName:o,loadingClassName:t,open:a,onClose:m,initialValues:p,onCopyLinkClick:u,onSubmitButtonClick:h,hideShareLink:b})=>{const[r,c]=j.useState(a),[U,R]=j.useState(!1),[D]=oe(Re,{refetchQueries:[{query:re},{query:Ce,variables:Te().variables},{query:Me},{query:Ee,variables:{searchFilter:""}}],awaitRefetchQueries:!0}),{user:F,loading:O}=Le(),{listings:Q,loading:V}=_e({variables:{mode:ke.ROOTS_ONLY}}),{OWNERS_URL:Y}=le();if(j.useEffect(()=>{c(a)},[a]),O||V)return e.jsx(ce,{className:t,loading:O||V});const W=`turbo.rent/li/${w(F,"entity_id","")}`,z=async({listing_id:T,listingAddress:G="",listingUnit:K="",listingCity:J="",listingZip:X="",listingState:ee="",inviteType:g,phone:Z,email:se,...ae})=>{const x=we(ae);x.listingId=T,(g==="email"||g==="both")&&(x.email=se),(g==="text"||g==="both")&&(x.phone=Z?Ie(Z):null);const C={};T!==ss?C.listingId=T:C.listing={address:G,unit:K,zip:X,city:J,state:ee};try{const{data:M}=await D({variables:{sendPreScreener:!0,...C,...x,mechanism:"SEND_PRESCREENER"}}),{addLead:v}=M;v.lead&&(c(!1),R(!0),de("Pre-screener sent!"))}catch(M){const v=w(M,"graphQLErrors[0]")||{},H=v.extra.leadId||null;let d=v.message||"Something went wrong";if(d.alreadyFilledPrescreener&&H){const E=d.inviteType,L=`${Y}owners/lead-profile/${H}`;E===_.BOTH?d=e.jsxs(e.Fragment,{children:["Someone with this email & phone number already completed a pre-screener. ",e.jsx("a",{href:L,children:"View it"}),"."]}):E===_.EMAIL?d=e.jsxs(e.Fragment,{children:["Someone with this email already completed a pre-screener."," ",e.jsx("a",{href:L,children:"View it"}),"."]}):E===_.SMS&&(d=e.jsxs(e.Fragment,{children:["Someone with this phone number already completed a pre-screener."," ",e.jsx("a",{href:L,children:"View it"}),"."]}))}return{[me]:d}}};return e.jsxs(e.Fragment,{children:[!F?.premium_subscription_subscribed&&U&&e.jsx(Fe,{onClose:()=>R(!1)}),e.jsx($,{className:i,containerClassName:o,open:r,onClose:m,initialValues:p,onCopyLinkClick:u,onSubmitButtonClick:h,preScreenerLink:W,listings:Q,hideShareLink:b,onSubmit:z})]})};as.propTypes={className:s.string,containerClassName:s.string,loadingClassName:s.string,open:s.bool,onClose:s.func,initialValues:s.object,onCopyLinkClick:s.func,onSubmitButtonClick:s.func,hideShareLink:s.bool};const A=({width:i=64,height:o=64,color:t=pe.babyBlue,...a})=>e.jsxs("svg",{width:i,height:o,...a,viewBox:"0 0 64 64",fill:"none",children:[e.jsx("path",{d:"M29.17 18.784 28 18.667V24h6.667v-5.333H33.38l-.082.117h-.487l-.133-.117-2.25.117H29.17ZM38.199 35.121l-3.532-.139v6.352H54.8v-6.352h-3.886l-.247.14h-1.47l-.402-.14-6.795.14h-3.801Z",fill:t}),e.jsx("path",{d:"M32.16 5.595a1 1 0 0 0-1.35 0L4.327 29.776a1 1 0 0 0 1.348 1.477l25.81-23.566 25.811 23.566a1 1 0 1 0 1.349-1.477L32.159 5.595Z",fill:"#042238"}),e.jsx("path",{d:"M12.91 31.666a1 1 0 0 0-2 0V57a1 1 0 0 0 1 1h20.727a1 1 0 0 0 0-2H12.908V31.666ZM39.697 8.636a1 1 0 0 1 1-1h8.06a1 1 0 0 1 1 1v8.06a1 1 0 1 1-2 0v-7.06h-7.06a1 1 0 0 1-1-1Z",fill:"#042238"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M28.03 16.848a1 1 0 0 0-1 1v6.91a1 1 0 0 0 1 1h6.91a1 1 0 0 0 1-1v-6.91a1 1 0 0 0-1-1h-6.91Zm1 6.91v-4.91h4.91v4.91h-4.91ZM40.333 33.526a1 1 0 1 0-2 0v.547h-3.666a1 1 0 0 0-1 1V53.35a1 1 0 0 0 1 1h20.015a1 1 0 0 0 1-1V35.074a1 1 0 0 0-1-1H51v-.548a1 1 0 1 0-2 0v.547h-8.667v-.547Zm13.35 5.879v-3.331H51v.452a1 1 0 1 1-2 0v-.453h-8.667v.453a1 1 0 1 1-2 0v-.453h-2.666v3.332h18.015Zm-18.016 2h18.015v10.944H35.667V41.405Z",fill:"#042238"}),e.jsx("path",{d:"M39.333 45.48a1 1 0 1 0 0-2 1 1 0 0 0 0 2ZM44.667 45.48a1 1 0 1 0 0-2 1 1 0 0 0 0 2ZM51 44.48a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM39.333 50.146a1 1 0 1 0 0-2 1 1 0 0 0 0 2ZM45.667 49.146a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM50 50.146a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",fill:"#042238"})]});A.propTypes={width:s.number,height:s.number,color:s.string};const cs=j.memo(A);export{as as P,cs as S};
//# sourceMappingURL=ShowingsColor-B5DiSCHY.js.map
