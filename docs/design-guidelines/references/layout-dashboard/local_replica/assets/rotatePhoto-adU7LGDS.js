import{_ as T}from"./receipt.fragment-cmkptTMN.js";import{o as k,p as x,j as d,ad as N,B as P,am as _,v as j,h as q,r as C,k as D,a5 as R,P as w}from"./TownhouseColor--VjQBVqd.js";import{fa as O,t as F,u as I,Z as U,fb as $,f as B,aP as W,n as A,fc as M,fd as S}from"./main-dumNSXg9.js";const H=`#import '../fragments/receipt.fragment.graphql'

query receiptsQuery {
  receipts {
    ...PaymentReceiptFragment
  }
}
`,b={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"receiptsQuery"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"receipts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PaymentReceiptFragment"},directives:[]}]}}]}}],loc:{start:0,end:158,source:{name:"GraphQL request",locationOffset:{line:1,column:1},body:H}}},L=s=>{const a={};return s.filter(function(o){if(o.kind!=="FragmentDefinition")return!0;const m=o.name.value;return a[m]?!1:(a[m]=!0,!0)})};b.definitions=L(b.definitions.concat(T.definitions));const Q=(s,a)=>{const o=(e,t)=>{if(e.kind==="FragmentSpread")t.add(e.name.value);else if(e.kind==="VariableDefinition"){const n=e.type;n.kind==="NamedType"&&t.add(n.name.value)}return e&&"selectionSet"in e&&e.selectionSet&&e.selectionSet.selections.forEach(n=>{o(n,t)}),e&&"variableDefinitions"in e&&e.variableDefinitions&&e.variableDefinitions.forEach(n=>{o(n,t)}),e&&"definitions"in e&&e.definitions&&e.definitions.forEach(n=>{o(n,t)}),t},m=e=>{const t={};return e.definitions.forEach(function(n){"name"in n&&n.name&&(t[n.name.value]=o(n,new Set))}),t},f=(e,t)=>{for(let n=0;n<e.definitions.length;n++){const i=e.definitions[n];if(i&&"name"in i&&i.name&&i.name.value==t)return i}},u=m(s),r=Object.assign({},s,{definitions:[f(s,a)]}),h=u[a]||new Set,c=new Set;let l=new Set;for(h.forEach(e=>{l.add(e)});l.size>0;){const e=l;l=new Set,e.forEach(t=>{c.has(t)||(c.add(t),(u[t]||new Set).forEach(i=>{l.add(i)}))})}return c.forEach(e=>{const t=f(s,e);t&&r.definitions.push(t)}),r};Q(b,"receiptsQuery");const se=s=>s?Number(atob(s).split(":")[1]):null,z="RDyaL",G="c9BfB",V="ETNcs",E={sectionTitle:z,buttonStyle:G,text:V},Y=({className:s})=>{const{IS_OWNER:a,PRIVATE_BASE_PATH:o}=k(),m=x();return d.jsxs("div",{className:s,children:[d.jsx(N,{className:E.sectionTitle,children:"Notification preferences"}),d.jsx("p",{className:E.text,children:"Update the types of emails you would like to receive from TurboTenant."}),d.jsx(P,{size:"sm",variant:"outline",onClick:()=>m(`${o}${a?"settings/advanced/":""}email-preferences`),className:E.buttonStyle,id:"add_question",children:"Change Preferences"})]})};Y.propTypes={className:_.string};const X="mqDaM",Z="_0zHV-",J="p0EI9",g={container:X,action:Z,button:J},K=({onClose:s,open:a,className:o})=>{const[m,{loading:f}]=j(O),{user:u,muaUser:r}=F(),h=I(),c=U(),{IS_OWNER:l}=q(),{getResetPasswordCaptchaToken:e}=$(),[t,n]=C.useState(null),{innerWidth:i}=B(),p=i<410,y=async()=>{if(!f)try{await m({variables:{accountType:l?S.OWNER:S.RENTER,email:l?r?.email:u?.email,isReset:!0,redirectUrl:null,captchaToken:t??await e()}}),s(),h("You will receive an email with instructions on how to reset your password shortly")}catch{c("There was an error sending the reset email. Please try again.")}};return d.jsxs(W,{open:a,className:D(g.container,o),children:[d.jsx("h1",{children:"Forgot your password?"}),d.jsx(A,{id:"email",label:"Email",input:{value:l?r?.email:u?.email,readOnly:"readonly",onFocus:v=>v.target.blur()}}),d.jsxs("div",{className:g.action,children:[d.jsx(R,{className:g.button,secondary:!0,onClick:s,children:"Cancel"}),d.jsx(R,{className:g.button,type:"submit",loading:f,id:"confirm_change_password",onClick:y,children:p?"Send":"Send Reset Email"})]}),d.jsx(M,{onToken:n,onError:v=>console.error("Error during Turnstile",v),onExpire:()=>console.error("Captcha expired")})]})};K.propTypes={onClose:w.func,open:w.bool,className:w.string};const ie=(s,a,o)=>new Promise(function(m,f){try{const u=document.createElement("canvas"),r=u.getContext("2d"),h=s.url+(o?"":"?"+new Date().getTime()),c=document.createElement("img");c.setAttribute("crossOrigin","Anonymous"),c.setAttribute("src",h),c.onload=function(){const l=c.naturalWidth,e=c.naturalHeight,t=a%2===0?l:e,n=a%2===1?l:e;let i=0,p=0;switch(a){case 0:i=0,p=0;break;case 1:i=0,p=n;break;case 2:i=t,p=n;break;case 3:i=t,p=0;break}r.canvas.width=t,r.canvas.height=n,r.save(),r.translate(i,p),r.rotate(-1*a*(Math.PI/2)),r.drawImage(c,0,0),r.restore(),u.toBlob(function(y){return m(y)},`${c.mimeType||"image/jpeg"}`,.95)}}catch(u){return console.log(`error during rotation: ${u.message}`),f(u)}});export{Y as E,K as R,b as _,se as g,ie as r};
//# sourceMappingURL=rotatePhoto-adU7LGDS.js.map
